import { NostrEvent, ContactsEvent } from "../types/nostr";
/**
 * NIP-02: Contact List and Petnames
 *
 * Defines a format for users to publish their contact list (follows)
 * as a Nostr event of kind 3. Each contact can include a public key,
 * a recommended relay URL, and a petname.
 *
 * @see https://github.com/nostr-protocol/nips/blob/master/02.md
 */
/**
 * Represents a contact in a NIP-02 contact list.
 */
export interface Contact {
    /** The public key of the followed user (hex format). */
    pubkey: string;
    /** An optional recommended relay URL for the followed user. */
    relayUrl?: string;
    /** An optional petname for the followed user. */
    petname?: string;
}
/**
 * Context information for warnings that provides additional details about where the warning occurred.
 */
export interface WarningContext {
    /** The index of the tag in the event.tags array where the warning occurred. */
    tagIndex?: number;
    /** The public key associated with the warning (for relay URL warnings). */
    pubkey?: string;
    /** Additional metadata that might be relevant for debugging. */
    metadata?: Record<string, string | number | boolean>;
}
/**
 * Warning message for invalid data encountered during parsing.
 */
export interface ParseWarning {
    /** The type of warning. */
    type: "invalid_relay_url" | "invalid_pubkey" | "duplicate_pubkey";
    /** Human-readable warning message. */
    message: string;
    /** The invalid value that triggered the warning. */
    value: string;
    /** Additional context about where the warning occurred. */
    context?: WarningContext;
}
/**
 * Result of parsing contacts from an event.
 */
export interface ParseContactsResult {
    /** Successfully parsed contacts. */
    contacts: Contact[];
    /** Warnings encountered during parsing. */
    warnings: ParseWarning[];
}
/**
 * Data that can be logged alongside warning messages.
 */
export interface LogData {
    /** The invalid value that triggered the warning. */
    value: string;
    /** Additional context about where the warning occurred. */
    context?: WarningContext;
}
/**
 * Optional logger interface for handling warnings externally.
 */
export interface Logger {
    warn(message: string, data?: LogData): void;
}
/**
 * Represents a NIP-02 contact list event (kind 3).
 * The `tags` array contains "p" tags formatted as:
 * ["p", <pubkey_hex>, <recommended_relay_url_or_empty_string>, <petname_or_empty_string>]
 * The `content` of a kind 3 event is typically an empty string or a JSON string
 * containing legacy petname information (mapping pubkeys to names).
 * This implementation prioritizes petnames from tags.
 */
export interface ContactListEvent extends NostrEvent {
    kind: 3;
    tags: string[][];
}
/**
 * Creates a NIP-02 contact list event (kind 3).
 *
 * @param contacts An array of `Contact` objects.
 * @param existingContent Optional content for the event.
 *                        NIP-02 allows for legacy petnames in a JSON string here,
 *                        but recommends petnames in tags.
 * @returns A NostrEvent object (unsigned) representing the contact list.
 */
export declare function createContactListEvent(contacts: Contact[], existingContent?: string): Omit<ContactsEvent, "id" | "sig" | "pubkey">;
/**
 * Parses a NIP-02 contact list event (kind 3) to extract the list of contacts.
 *
 * @param event The contact list event (must be kind 3).
 * @param options Optional configuration for parsing behavior.
 * @param options.logger Optional logger to handle warnings externally.
 * @param options.returnWarnings If true, returns an object with contacts and warnings. Default: false.
 * @returns An array of `Contact` objects, or a `ParseContactsResult` object if returnWarnings is true.
 * @throws Error if the event is not a valid kind 3 event.
 */
export declare function parseContactsFromEvent(event: ContactsEvent, options?: {
    logger?: Logger;
    returnWarnings?: false;
}): Contact[];
export declare function parseContactsFromEvent(event: ContactsEvent, options: {
    logger?: Logger;
    returnWarnings: true;
}): ParseContactsResult;
/**
 * Parses a NIP-02 contact list event with detailed warnings.
 * This is a convenience function that always returns warnings.
 *
 * @param event The contact list event (must be kind 3).
 * @param logger Optional logger to handle warnings externally.
 * @returns A `ParseContactsResult` object containing contacts and warnings.
 * @throws Error if the event is not a valid kind 3 event.
 */
export declare function parseContactsFromEventWithWarnings(event: ContactsEvent, logger?: Logger): ParseContactsResult;
