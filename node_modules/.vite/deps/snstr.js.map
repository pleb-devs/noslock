{
  "version": 3,
  "sources": ["../../tstl/utility/node.js", "../../es5-ext/global.js", "../../websocket/package.json", "../../websocket/lib/version.js", "../../websocket/lib/browser.js", "../../tstl/internal/iterator/disposable/ForOfAdaptor.js", "../../tstl/base/container/Container.js", "../../tstl/internal/iterator/disposable/NativeArrayIterator.js", "../../tstl/base/container/SetContainer.js", "../../tstl/exception/Exception.js", "../../tstl/exception/LogicError.js", "../../tstl/exception/InvalidArgument.js", "../../tstl/exception/OutOfRange.js", "../../tstl/internal/exception/ErrorGenerator.js", "../../tstl/base/container/UniqueSet.js", "../../tstl/internal/container/associative/IAssociativeContainer.js", "../../tstl/internal/Global.js", "../../tstl/functional/uid.js", "../../tstl/functional/hash.js", "../../tstl/functional/comparators.js", "../../tstl/internal/container/associative/IHashContainer.js", "../../tstl/internal/iterator/ListIterator.js", "../../tstl/internal/iterator/disposable/Repeater.js", "../../tstl/iterator/global.js", "../../tstl/internal/container/linear/ListContainer.js", "../../tstl/internal/iterator/ReverseIterator.js", "../../tstl/internal/container/associative/SetElementList.js", "../../tstl/internal/hash/HashBuckets.js", "../../tstl/internal/hash/SetHashBuckets.js", "../../tstl/utility/Pair.js", "../../tstl/container/HashSet.js", "../../tstl/base/container/MapContainer.js", "../../tstl/base/container/UniqueMap.js", "../../tstl/internal/container/associative/MapElementList.js", "../../tstl/internal/hash/MapHashBuckets.js", "../../tstl/utility/Entry.js", "../../tstl/container/HashMap.js", "../../websocket-polyfill/lib/events/EventTarget.js", "../../websocket-polyfill/lib/events/Event.js", "../../websocket-polyfill/lib/events/CloseEvent.js", "../../websocket-polyfill/lib/events/MessageEvent.js", "../../websocket-polyfill/lib/events/ErrorEvent.js", "../../websocket-polyfill/lib/WebSocket.js", "../../websocket-polyfill/lib/index.js", "../../events/events.js", "../../crypto-js/core.js", "../../crypto-js/x64-core.js", "../../crypto-js/lib-typedarrays.js", "../../crypto-js/enc-utf16.js", "../../crypto-js/enc-base64.js", "../../crypto-js/enc-base64url.js", "../../crypto-js/md5.js", "../../crypto-js/sha1.js", "../../crypto-js/sha256.js", "../../crypto-js/sha224.js", "../../crypto-js/sha512.js", "../../crypto-js/sha384.js", "../../crypto-js/sha3.js", "../../crypto-js/ripemd160.js", "../../crypto-js/hmac.js", "../../crypto-js/pbkdf2.js", "../../crypto-js/evpkdf.js", "../../crypto-js/cipher-core.js", "../../crypto-js/mode-cfb.js", "../../crypto-js/mode-ctr.js", "../../crypto-js/mode-ctr-gladman.js", "../../crypto-js/mode-ofb.js", "../../crypto-js/mode-ecb.js", "../../crypto-js/pad-ansix923.js", "../../crypto-js/pad-iso10126.js", "../../crypto-js/pad-iso97971.js", "../../crypto-js/pad-zeropadding.js", "../../crypto-js/pad-nopadding.js", "../../crypto-js/format-hex.js", "../../crypto-js/aes.js", "../../crypto-js/tripledes.js", "../../crypto-js/rc4.js", "../../crypto-js/rabbit.js", "../../crypto-js/rabbit-legacy.js", "../../crypto-js/blowfish.js", "../../crypto-js/index.js", "../../light-bolt11-decoder/node_modules/@scure/base/lib/index.js", "../../light-bolt11-decoder/bolt11.js", "../../snstr/dist/esm/src/utils/websocket.js", "../../snstr/dist/esm/src/utils/inMemoryWebSocket.js", "../../snstr/dist/esm/src/types/nostr.js", "../../@noble/hashes/src/crypto.ts", "../../@noble/hashes/src/utils.ts", "../../@noble/hashes/src/_md.ts", "../../@noble/hashes/src/_u64.ts", "../../@noble/hashes/src/sha2.ts", "../../@noble/hashes/src/hmac.ts", "../../@noble/curves/src/utils.ts", "../../@noble/curves/src/abstract/modular.ts", "../../@noble/curves/src/abstract/curve.ts", "../../@noble/curves/src/abstract/weierstrass.ts", "../../@noble/curves/src/_shortw_utils.ts", "../../@noble/curves/src/abstract/hash-to-curve.ts", "../../@noble/curves/src/secp256k1.ts", "../../snstr/dist/esm/src/utils/crypto.js", "../../@scure/base/index.ts", "../../snstr/dist/esm/src/nip19/types.js", "../../snstr/dist/esm/src/nip19/secure.js", "../../snstr/dist/esm/src/nip19/index.js", "../../@noble/hashes/src/hkdf.ts", "../../@noble/ciphers/src/utils.ts", "../../@noble/ciphers/src/_assert.ts", "../../@noble/ciphers/src/_poly1305.ts", "../../@noble/ciphers/src/_arx.ts", "../../@noble/ciphers/src/chacha.ts", "../../snstr/dist/esm/src/nip44/index.js", "../../snstr/dist/esm/src/utils/time.js", "../../snstr/dist/esm/src/utils/security-validator.js", "../../snstr/dist/esm/src/nip01/event.js", "../../snstr/dist/esm/src/nip46/utils/logger.js", "../../snstr/dist/esm/src/nip01/relay.js", "../../snstr/dist/esm/src/utils/relayUrl.js", "../../snstr/dist/esm/src/nip01/nostr.js", "../../snstr/dist/esm/src/nip01/relayPool.js", "../../snstr/dist/esm/src/nip02/index.js", "../../snstr/dist/esm/src/nip04/web.js", "../../snstr/dist/esm/src/nip11/index.js", "../../snstr/dist/esm/src/nip17/index.js", "../../snstr/dist/esm/src/nip21/index.js", "../../snstr/dist/esm/src/nip05/index.js", "../../snstr/dist/esm/src/nip07/index.js", "../../snstr/dist/esm/src/nip09/index.js", "../../snstr/dist/esm/src/nip10/index.js", "../../snstr/dist/esm/src/nip07/adapter.js", "../../snstr/dist/esm/src/nip57/utils.js", "../../snstr/dist/esm/src/nip57/client.js", "../../snstr/dist/esm/src/nip57/index.js", "../../snstr/dist/esm/src/nip50/index.js"],
  "sourcesContent": ["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.is_node = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\n/**\r\n * Test whether the code is running on NodeJS.\r\n *\r\n * @return Whether NodeJS or not.\r\n */\r\nfunction is_node() {\r\n    if (is_node_ === null)\r\n        is_node_ = typeof global === \"object\" && is_node_process(global);\r\n    return is_node_;\r\n}\r\nexports.is_node = is_node;\r\n/**\r\n * @internal\r\n */\r\nfunction is_node_process(m) {\r\n    return m !== null &&\r\n        typeof m.process === \"object\" &&\r\n        m.process !== null &&\r\n        typeof m.process.versions === \"object\" &&\r\n        m.process.versions !== null &&\r\n        typeof m.process.versions.node !== \"undefined\";\r\n}\r\n/**\r\n * @internal\r\n */\r\nvar is_node_ = null;\r\n//# sourceMappingURL=node.js.map", "var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n", "{\n  \"name\": \"websocket\",\n  \"description\": \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\n  \"keywords\": [\n    \"websocket\",\n    \"websockets\",\n    \"socket\",\n    \"networking\",\n    \"comet\",\n    \"push\",\n    \"RFC-6455\",\n    \"realtime\",\n    \"server\",\n    \"client\"\n  ],\n  \"author\": \"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)\",\n  \"contributors\": [\n    \"IÃ±aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)\"\n  ],\n  \"version\": \"1.0.35\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/theturtle32/WebSocket-Node.git\"\n  },\n  \"homepage\": \"https://github.com/theturtle32/WebSocket-Node\",\n  \"engines\": {\n    \"node\": \">=4.0.0\"\n  },\n  \"dependencies\": {\n    \"bufferutil\": \"^4.0.1\",\n    \"debug\": \"^2.2.0\",\n    \"es5-ext\": \"^0.10.63\",\n    \"typedarray-to-buffer\": \"^3.1.5\",\n    \"utf-8-validate\": \"^5.0.2\",\n    \"yaeti\": \"^0.0.6\"\n  },\n  \"devDependencies\": {\n    \"buffer-equal\": \"^1.0.0\",\n    \"gulp\": \"^4.0.2\",\n    \"gulp-jshint\": \"^2.0.4\",\n    \"jshint-stylish\": \"^2.2.1\",\n    \"jshint\": \"^2.0.0\",\n    \"tape\": \"^4.9.1\"\n  },\n  \"config\": {\n    \"verbose\": false\n  },\n  \"scripts\": {\n    \"test\": \"tape test/unit/*.js\",\n    \"gulp\": \"gulp\"\n  },\n  \"main\": \"index\",\n  \"directories\": {\n    \"lib\": \"./lib\"\n  },\n  \"browser\": \"lib/browser.js\",\n  \"license\": \"Apache-2.0\"\n}\n", "module.exports = require('../package.json').version;\n", "var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ForOfAdaptor = void 0;\r\n/**\r\n * Adaptor for `for ... of` iteration.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ForOfAdaptor = /** @class */ (function () {\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param first Input iteartor of the first position.\r\n     * @param last Input iterator of the last position.\r\n     */\r\n    function ForOfAdaptor(first, last) {\r\n        this.it_ = first;\r\n        this.last_ = last;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ForOfAdaptor.prototype.next = function () {\r\n        if (this.it_.equals(this.last_))\r\n            return {\r\n                done: true,\r\n                value: undefined,\r\n            };\r\n        else {\r\n            var it = this.it_;\r\n            this.it_ = this.it_.next();\r\n            return {\r\n                done: false,\r\n                value: it.value,\r\n            };\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ForOfAdaptor.prototype[Symbol.iterator] = function () {\r\n        return this;\r\n    };\r\n    return ForOfAdaptor;\r\n}());\r\nexports.ForOfAdaptor = ForOfAdaptor;\r\n//# sourceMappingURL=ForOfAdaptor.js.map", "\"use strict\";\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Container = void 0;\r\nvar ForOfAdaptor_1 = require(\"../../internal/iterator/disposable/ForOfAdaptor\");\r\n/**\r\n * Basic container.\r\n *\r\n * @template T Stored elements' type\r\n * @template SourceT Derived type extending this {@link Container}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n * @template PElem Parent type of *T*, used for inserting elements through {@link assign} and {@link insert}.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Container = /** @class */ (function () {\r\n    function Container() {\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.empty = function () {\r\n        return this.size() === 0;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.rbegin = function () {\r\n        return this.end().reverse();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.rend = function () {\r\n        return this.begin().reverse();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype[Symbol.iterator] = function () {\r\n        return new ForOfAdaptor_1.ForOfAdaptor(this.begin(), this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.toJSON = function () {\r\n        var e_1, _a;\r\n        var ret = [];\r\n        try {\r\n            for (var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var elem = _c.value;\r\n                ret.push(elem);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return ret;\r\n    };\r\n    return Container;\r\n}());\r\nexports.Container = Container;\r\n//# sourceMappingURL=Container.js.map", "\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NativeArrayIterator = void 0;\r\nvar NativeArrayIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function NativeArrayIterator(data, index) {\r\n        this.data_ = data;\r\n        this.index_ = index;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.index = function () {\r\n        return this.index_;\r\n    };\r\n    Object.defineProperty(NativeArrayIterator.prototype, \"value\", {\r\n        get: function () {\r\n            return this.data_[this.index_];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.prev = function () {\r\n        --this.index_;\r\n        return this;\r\n    };\r\n    NativeArrayIterator.prototype.next = function () {\r\n        ++this.index_;\r\n        return this;\r\n    };\r\n    NativeArrayIterator.prototype.advance = function (n) {\r\n        this.index_ += n;\r\n        return this;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        COMPARES\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.equals = function (obj) {\r\n        return this.data_ === obj.data_ && this.index_ === obj.index_;\r\n    };\r\n    NativeArrayIterator.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        _b = __read([obj.index_, this.index_], 2), this.index_ = _b[0], obj.index_ = _b[1];\r\n    };\r\n    return NativeArrayIterator;\r\n}());\r\nexports.NativeArrayIterator = NativeArrayIterator;\r\n//# sourceMappingURL=NativeArrayIterator.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetContainer = void 0;\r\nvar Container_1 = require(\"./Container\");\r\nvar NativeArrayIterator_1 = require(\"../../internal/iterator/disposable/NativeArrayIterator\");\r\n/**\r\n * Basic set container.\r\n *\r\n * @template Key Key type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Derived type extending this {@link SetContainer}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetContainer = /** @class */ (function (_super) {\r\n    __extends(SetContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTURCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function SetContainer(factory) {\r\n        var _this = _super.call(this) || this;\r\n        _this.data_ = factory(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.assign = function (first, last) {\r\n        // INSERT\r\n        this.clear();\r\n        this.insert(first, last);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.clear = function () {\r\n        // TO BE ABSTRACT\r\n        this.data_.clear();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.begin = function () {\r\n        return this.data_.begin();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.end = function () {\r\n        return this.data_.end();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.has = function (key) {\r\n        return !this.find(key).equals(this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.size = function () {\r\n        return this.data_.size();\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - ERASE\r\n            - UTILITY\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        if (items.length === 0)\r\n            return this.size();\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this._Insert_by_range(first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    SetContainer.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1)\r\n            return this._Insert_by_key(args[0]);\r\n        else if (args[0].next instanceof Function &&\r\n            args[1].next instanceof Function)\r\n            return this._Insert_by_range(args[0], args[1]);\r\n        else\r\n            return this._Insert_by_hint(args[0], args[1]);\r\n    };\r\n    SetContainer.prototype.erase = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1 &&\r\n            !(args[0] instanceof this.end().constructor &&\r\n                args[0].source() === this))\r\n            return this._Erase_by_val(args[0]);\r\n        else if (args.length === 1)\r\n            return this._Erase_by_range(args[0]);\r\n        else\r\n            return this._Erase_by_range(args[0], args[1]);\r\n    };\r\n    SetContainer.prototype._Erase_by_range = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        // ERASE\r\n        var it = this.data_.erase(first, last);\r\n        // POST-PROCESS\r\n        this._Handle_erase(first, last);\r\n        return it;\r\n    };\r\n    return SetContainer;\r\n}(Container_1.Container));\r\nexports.SetContainer = SetContainer;\r\n//# sourceMappingURL=SetContainer.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Exception = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\n/**\r\n * Base Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Exception = /** @class */ (function (_super) {\r\n    __extends(Exception, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTOR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function Exception(message) {\r\n        var _newTarget = this.constructor;\r\n        var _this = _super.call(this, message) || this;\r\n        // INHERITANCE POLYFILL\r\n        var proto = _newTarget.prototype;\r\n        if (Object.setPrototypeOf)\r\n            Object.setPrototypeOf(_this, proto);\r\n        else\r\n            _this.__proto__ = proto;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Exception.prototype, \"name\", {\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * The error name.\r\n         */\r\n        get: function () {\r\n            return this.constructor.name;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Get error message.\r\n     *\r\n     * @return The error message.\r\n     */\r\n    Exception.prototype.what = function () {\r\n        return this.message;\r\n    };\r\n    /**\r\n     * Native function for `JSON.stringify()`.\r\n     *\r\n     * The {@link Exception.toJSON} function returns only three properties; ({@link name}, {@link message} and {@link stack}). If you want to define a new sub-class extending the {@link Exception} and const the class to export additional props (or remove some props), override this {@link Exception.toJSON} method.\r\n     *\r\n     * @return An object for `JSON.stringify()`.\r\n     */\r\n    Exception.prototype.toJSON = function () {\r\n        return {\r\n            name: this.name,\r\n            message: this.message,\r\n            stack: this.stack,\r\n        };\r\n    };\r\n    return Exception;\r\n}(Error));\r\nexports.Exception = Exception;\r\n//# sourceMappingURL=Exception.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LogicError = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar Exception_1 = require(\"./Exception\");\r\n/**\r\n * Logic Error.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar LogicError = /** @class */ (function (_super) {\r\n    __extends(LogicError, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function LogicError(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return LogicError;\r\n}(Exception_1.Exception));\r\nexports.LogicError = LogicError;\r\n//# sourceMappingURL=LogicError.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InvalidArgument = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar LogicError_1 = require(\"./LogicError\");\r\n/**\r\n * Invalid Argument Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar InvalidArgument = /** @class */ (function (_super) {\r\n    __extends(InvalidArgument, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function InvalidArgument(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return InvalidArgument;\r\n}(LogicError_1.LogicError));\r\nexports.InvalidArgument = InvalidArgument;\r\n//# sourceMappingURL=InvalidArgument.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutOfRange = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar LogicError_1 = require(\"./LogicError\");\r\n/**\r\n * Out-of-range Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar OutOfRange = /** @class */ (function (_super) {\r\n    __extends(OutOfRange, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function OutOfRange(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return OutOfRange;\r\n}(LogicError_1.LogicError));\r\nexports.OutOfRange = OutOfRange;\r\n//# sourceMappingURL=OutOfRange.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorGenerator = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar InvalidArgument_1 = require(\"../../exception/InvalidArgument\");\r\nvar OutOfRange_1 = require(\"../../exception/OutOfRange\");\r\nvar ErrorGenerator;\r\n(function (ErrorGenerator) {\r\n    /* ---------------------------------------------------------\r\n        COMMON\r\n    --------------------------------------------------------- */\r\n    function get_class_name(instance) {\r\n        if (typeof instance === \"string\")\r\n            return instance;\r\n        var ret = instance.constructor.name;\r\n        if (instance.constructor.__MODULE)\r\n            ret = \"\".concat(instance.constructor.__MODULE, \".\").concat(ret);\r\n        return \"std.\".concat(ret);\r\n    }\r\n    ErrorGenerator.get_class_name = get_class_name;\r\n    /* ---------------------------------------------------------\r\n        CONTAINERS\r\n    --------------------------------------------------------- */\r\n    function empty(instance, method) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): it's empty container.\"));\r\n    }\r\n    ErrorGenerator.empty = empty;\r\n    function negative_index(instance, method, index) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric index is negative -> (index = \").concat(index, \").\"));\r\n    }\r\n    ErrorGenerator.negative_index = negative_index;\r\n    function excessive_index(instance, method, index, size) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric index is equal or greater than size -> (index = \").concat(index, \", size: \").concat(size, \").\"));\r\n    }\r\n    ErrorGenerator.excessive_index = excessive_index;\r\n    function not_my_iterator(instance, method) {\r\n        return new InvalidArgument_1.InvalidArgument(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator is not this container's own.\"));\r\n    }\r\n    ErrorGenerator.not_my_iterator = not_my_iterator;\r\n    function erased_iterator(instance, method) {\r\n        return new InvalidArgument_1.InvalidArgument(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator, it already has been erased.\"));\r\n    }\r\n    ErrorGenerator.erased_iterator = erased_iterator;\r\n    function negative_iterator(instance, method, index) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator is directing negative position -> (index = \").concat(index, \").\"));\r\n    }\r\n    ErrorGenerator.negative_iterator = negative_iterator;\r\n    function iterator_end_value(instance, method) {\r\n        if (method === void 0) { method = \"end\"; }\r\n        var className = get_class_name(instance);\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(className, \".Iterator.value: cannot access to the \").concat(className, \".\").concat(method, \"().value.\"));\r\n    }\r\n    ErrorGenerator.iterator_end_value = iterator_end_value;\r\n    function key_nout_found(instance, method, key) {\r\n        throw new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): unable to find the matched key -> \").concat(key));\r\n    }\r\n    ErrorGenerator.key_nout_found = key_nout_found;\r\n})(ErrorGenerator = exports.ErrorGenerator || (exports.ErrorGenerator = {}));\r\n//# sourceMappingURL=ErrorGenerator.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UniqueSet = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.base\r\n */\r\n//================================================================\r\nvar SetContainer_1 = require(\"./SetContainer\");\r\nvar ErrorGenerator_1 = require(\"../../internal/exception/ErrorGenerator\");\r\n/**\r\n * Basic set container blocking duplicated key.\r\n *\r\n * @template Key Key type\r\n * @template Source Derived type extending this {@link UniqueSet}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar UniqueSet = /** @class */ (function (_super) {\r\n    __extends(UniqueSet, _super);\r\n    function UniqueSet() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSOR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueSet.prototype.count = function (key) {\r\n        return this.find(key).equals(this.end()) ? 0 : 1;\r\n    };\r\n    UniqueSet.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.insert.apply(this, __spreadArray([], __read(args), false));\r\n    };\r\n    UniqueSet.prototype._Insert_by_range = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this._Insert_by_key(first.value);\r\n    };\r\n    UniqueSet.prototype.extract = function (param) {\r\n        if (param instanceof this.end().constructor)\r\n            return this._Extract_by_iterator(param);\r\n        else\r\n            return this._Extract_by_val(param);\r\n    };\r\n    UniqueSet.prototype._Extract_by_val = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"extract\", key);\r\n        this._Erase_by_range(it);\r\n        return key;\r\n    };\r\n    UniqueSet.prototype._Extract_by_iterator = function (it) {\r\n        if (it.equals(this.end()) === true || this.has(it.value) === false)\r\n            return this.end();\r\n        this._Erase_by_range(it);\r\n        return it;\r\n    };\r\n    UniqueSet.prototype._Erase_by_val = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            return 0;\r\n        this._Erase_by_range(it);\r\n        return 1;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        UTILITY\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueSet.prototype.merge = function (source) {\r\n        for (var it = source.begin(); !it.equals(source.end());) {\r\n            if (this.has(it.value) === false) {\r\n                this.insert(it.value);\r\n                it = source.erase(it);\r\n            }\r\n            else\r\n                it = it.next();\r\n        }\r\n    };\r\n    return UniqueSet;\r\n}(SetContainer_1.SetContainer));\r\nexports.UniqueSet = UniqueSet;\r\n//# sourceMappingURL=UniqueSet.js.map", "\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IAssociativeContainer = void 0;\r\nvar IAssociativeContainer;\r\n(function (IAssociativeContainer) {\r\n    /**\r\n     * @internal\r\n     */\r\n    function construct(source) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var ramda;\r\n        var tail;\r\n        if (args.length >= 1 && args[0] instanceof Array) {\r\n            // INITIALIZER LIST CONSTRUCTOR\r\n            ramda = function () {\r\n                var items = args[0];\r\n                source.push.apply(source, __spreadArray([], __read(items), false));\r\n            };\r\n            tail = args.slice(1);\r\n        }\r\n        else if (args.length >= 2 &&\r\n            args[0].next instanceof Function &&\r\n            args[1].next instanceof Function) {\r\n            // RANGE CONSTRUCTOR\r\n            ramda = function () {\r\n                var first = args[0];\r\n                var last = args[1];\r\n                source.assign(first, last);\r\n            };\r\n            tail = args.slice(2);\r\n        }\r\n        else {\r\n            // DEFAULT CONSTRUCTOR\r\n            ramda = null;\r\n            tail = args;\r\n        }\r\n        return { ramda: ramda, tail: tail };\r\n    }\r\n    IAssociativeContainer.construct = construct;\r\n})(IAssociativeContainer = exports.IAssociativeContainer || (exports.IAssociativeContainer = {}));\r\n//# sourceMappingURL=IAssociativeContainer.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports._Get_root = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar node_1 = require(\"../utility/node\");\r\n/**\r\n * @internal\r\n */\r\nfunction _Get_root() {\r\n    if (__s_pRoot === null) {\r\n        __s_pRoot = ((0, node_1.is_node)() ? global : self);\r\n        if (__s_pRoot.__s_iUID === undefined)\r\n            __s_pRoot.__s_iUID = 0;\r\n    }\r\n    return __s_pRoot;\r\n}\r\nexports._Get_root = _Get_root;\r\n/**\r\n * @internal\r\n */\r\nvar __s_pRoot = null;\r\n//# sourceMappingURL=Global.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get_uid = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar Global_1 = require(\"../internal/Global\");\r\n/**\r\n * Get unique identifier.\r\n *\r\n * @param obj Target object.\r\n * @return The identifier number.\r\n */\r\nfunction get_uid(obj) {\r\n    // NO UID EXISTS, THEN ISSUE ONE.\r\n    if (obj instanceof Object) {\r\n        if (obj.hasOwnProperty(\"__get_m_iUID\") === false) {\r\n            var uid_1 = ++(0, Global_1._Get_root)().__s_iUID;\r\n            Object.defineProperty(obj, \"__get_m_iUID\", {\r\n                value: function () {\r\n                    return uid_1;\r\n                },\r\n            });\r\n        }\r\n        // RETURNS\r\n        return obj.__get_m_iUID();\r\n    }\r\n    else if (obj === undefined)\r\n        return -1;\r\n    // is null\r\n    else\r\n        return 0;\r\n}\r\nexports.get_uid = get_uid;\r\n//# sourceMappingURL=uid.js.map", "\"use strict\";\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.hash = void 0;\r\nvar uid_1 = require(\"./uid\");\r\n/**\r\n * Hash function.\r\n *\r\n * @param itemList The items to be hashed.\r\n * @return The hash code.\r\n */\r\nfunction hash() {\r\n    var e_1, _a;\r\n    var itemList = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        itemList[_i] = arguments[_i];\r\n    }\r\n    var ret = INIT_VALUE;\r\n    try {\r\n        for (var itemList_1 = __values(itemList), itemList_1_1 = itemList_1.next(); !itemList_1_1.done; itemList_1_1 = itemList_1.next()) {\r\n            var item = itemList_1_1.value;\r\n            item = item ? item.valueOf() : item;\r\n            var type = typeof item;\r\n            if (type === \"boolean\")\r\n                // BOOLEAN -> 1 BYTE\r\n                ret = _Hash_boolean(item, ret);\r\n            else if (type === \"number\" || type === \"bigint\")\r\n                // NUMBER -> 8 BYTES\r\n                ret = _Hash_number(item, ret);\r\n            else if (type === \"string\")\r\n                // STRING -> {LENGTH} BYTES\r\n                ret = _Hash_string(item, ret);\r\n            else if (item instanceof Object &&\r\n                item.hashCode instanceof Function) {\r\n                var hashed = item.hashCode();\r\n                if (itemList.length === 1)\r\n                    return hashed;\r\n                else {\r\n                    ret = ret ^ hashed;\r\n                    ret *= MULTIPLIER;\r\n                }\r\n            } // object | null | undefined\r\n            else\r\n                ret = _Hash_number((0, uid_1.get_uid)(item), ret);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (itemList_1_1 && !itemList_1_1.done && (_a = itemList_1.return)) _a.call(itemList_1);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return Math.abs(ret);\r\n}\r\nexports.hash = hash;\r\nfunction _Hash_boolean(val, ret) {\r\n    ret ^= val ? 1 : 0;\r\n    ret *= MULTIPLIER;\r\n    return ret;\r\n}\r\nfunction _Hash_number(val, ret) {\r\n    return _Hash_string(val.toString(), ret);\r\n    // // ------------------------------------------\r\n    // //    IN C++\r\n    // //        CONSIDER A NUMBER AS A STRING\r\n    // //        HASH<STRING>((CHAR*)&VAL, 8)\r\n    // // ------------------------------------------\r\n    // // CONSTRUCT BUFFER AND BYTE_ARRAY\r\n    // const buffer: ArrayBuffer = new ArrayBuffer(8);\r\n    // const byteArray: Int8Array = new Int8Array(buffer);\r\n    // const valueArray: Float64Array = new Float64Array(buffer);\r\n    // valueArray[0] = val;\r\n    // for (let i: number = 0; i < byteArray.length; ++i)\r\n    // {\r\n    //     const byte = (byteArray[i] < 0) ? byteArray[i] + 256 : byteArray[i];\r\n    //     ret ^= byte;\r\n    //     ret *= _HASH_MULTIPLIER;\r\n    // }\r\n    // return Math.abs(ret);\r\n}\r\nfunction _Hash_string(str, ret) {\r\n    for (var i = 0; i < str.length; ++i) {\r\n        ret ^= str.charCodeAt(i);\r\n        ret *= MULTIPLIER;\r\n    }\r\n    return Math.abs(ret);\r\n}\r\n/* ---------------------------------------------------------\r\n    RESERVED ITEMS\r\n--------------------------------------------------------- */\r\nvar INIT_VALUE = 2166136261;\r\nvar MULTIPLIER = 16777619;\r\n//# sourceMappingURL=hash.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.greater_equal = exports.greater = exports.less_equal = exports.less = exports.not_equal_to = exports.equal_to = void 0;\r\nvar uid_1 = require(\"./uid\");\r\n/**\r\n * Test whether two arguments are equal.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether two arguments are equal or not.\r\n */\r\nfunction equal_to(x, y) {\r\n    // CONVERT TO PRIMITIVE TYPE\r\n    x = x ? x.valueOf() : x;\r\n    y = y ? y.valueOf() : y;\r\n    // DO COMPARE\r\n    if (x instanceof Object &&\r\n        x.equals instanceof Function)\r\n        return x.equals(y);\r\n    else\r\n        return x === y;\r\n}\r\nexports.equal_to = equal_to;\r\n/**\r\n * Test whether two arguments are not equal.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Returns `true`, if two arguments are not equal, otherwise `false`.\r\n */\r\nfunction not_equal_to(x, y) {\r\n    return !equal_to(x, y);\r\n}\r\nexports.not_equal_to = not_equal_to;\r\n/**\r\n * Test whether *x* is less than *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is less than *y*.\r\n */\r\nfunction less(x, y) {\r\n    // CONVERT TO PRIMITIVE TYPE\r\n    x = x.valueOf();\r\n    y = y.valueOf();\r\n    // DO COMPARE\r\n    if (x instanceof Object)\r\n        if (x.less instanceof Function)\r\n            // has less()\r\n            return x.less(y);\r\n        else\r\n            return (0, uid_1.get_uid)(x) < (0, uid_1.get_uid)(y);\r\n    else\r\n        return x < y;\r\n}\r\nexports.less = less;\r\n/**\r\n * Test whether *x* is less than or equal to *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is less than or equal to *y*.\r\n */\r\nfunction less_equal(x, y) {\r\n    return less(x, y) || equal_to(x, y);\r\n}\r\nexports.less_equal = less_equal;\r\n/**\r\n * Test whether *x* is greater than *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is greater than *y*.\r\n */\r\nfunction greater(x, y) {\r\n    return !less_equal(x, y);\r\n}\r\nexports.greater = greater;\r\n/**\r\n * Test whether *x* is greater than or equal to *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is greater than or equal to *y*.\r\n */\r\nfunction greater_equal(x, y) {\r\n    return !less(x, y);\r\n}\r\nexports.greater_equal = greater_equal;\r\n//# sourceMappingURL=comparators.js.map", "\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IHashContainer = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar IAssociativeContainer_1 = require(\"./IAssociativeContainer\");\r\nvar hash_1 = require(\"../../../functional/hash\");\r\nvar comparators_1 = require(\"../../../functional/comparators\");\r\nvar IHashContainer;\r\n(function (IHashContainer) {\r\n    /**\r\n     * @internal\r\n     */\r\n    function construct(source, Source, bucketFactory) {\r\n        var args = [];\r\n        for (var _i = 3; _i < arguments.length; _i++) {\r\n            args[_i - 3] = arguments[_i];\r\n        }\r\n        // DECLARE MEMBERS\r\n        var post_process = null;\r\n        var hash_function = hash_1.hash;\r\n        var key_eq = comparators_1.equal_to;\r\n        //----\r\n        // INITIALIZE MEMBERS AND POST-PROCESS\r\n        //----\r\n        // BRANCH - METHOD OVERLOADINGS\r\n        if (args.length === 1 && args[0] instanceof Source) {\r\n            // PARAMETERS\r\n            var container_1 = args[0];\r\n            hash_function = container_1.hash_function();\r\n            key_eq = container_1.key_eq();\r\n            // COPY CONSTRUCTOR\r\n            post_process = function () {\r\n                var first = container_1.begin();\r\n                var last = container_1.end();\r\n                source.assign(first, last);\r\n            };\r\n        }\r\n        else {\r\n            var tuple = IAssociativeContainer_1.IAssociativeContainer.construct.apply(IAssociativeContainer_1.IAssociativeContainer, __spreadArray([source], __read(args), false));\r\n            post_process = tuple.ramda;\r\n            if (tuple.tail.length >= 1)\r\n                hash_function = tuple.tail[0];\r\n            if (tuple.tail.length >= 2)\r\n                key_eq = tuple.tail[1];\r\n        }\r\n        //----\r\n        // DO PROCESS\r\n        //----\r\n        // CONSTRUCT BUCKET\r\n        bucketFactory(hash_function, key_eq);\r\n        // ACT POST-PROCESS\r\n        if (post_process !== null)\r\n            post_process();\r\n    }\r\n    IHashContainer.construct = construct;\r\n})(IHashContainer = exports.IHashContainer || (exports.IHashContainer = {}));\r\n//# sourceMappingURL=IHashContainer.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListIterator = void 0;\r\nvar ErrorGenerator_1 = require(\"../exception/ErrorGenerator\");\r\n/**\r\n * Basic List Iterator.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ListIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------------- */\r\n    function ListIterator(prev, next, value) {\r\n        this.prev_ = prev;\r\n        this.next_ = next;\r\n        this.value_ = value;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    ListIterator._Set_prev = function (it, prev) {\r\n        it.prev_ = prev;\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    ListIterator._Set_next = function (it, next) {\r\n        it.next_ = next;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.prev = function () {\r\n        return this.prev_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.next = function () {\r\n        return this.next_;\r\n    };\r\n    Object.defineProperty(ListIterator.prototype, \"value\", {\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        get: function () {\r\n            this._Try_value();\r\n            return this.value_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ListIterator.prototype._Try_value = function () {\r\n        if (this.value_ === undefined &&\r\n            this.equals(this.source().end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.iterator_end_value(this.source());\r\n    };\r\n    /* ---------------------------------------------------------------\r\n        COMPARISON\r\n    --------------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.equals = function (obj) {\r\n        return this === obj;\r\n    };\r\n    return ListIterator;\r\n}());\r\nexports.ListIterator = ListIterator;\r\n//# sourceMappingURL=ListIterator.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Repeater = void 0;\r\nvar Repeater = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function Repeater(index, value) {\r\n        this.index_ = index;\r\n        this.value_ = value;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    Repeater.prototype.index = function () {\r\n        return this.index_;\r\n    };\r\n    Object.defineProperty(Repeater.prototype, \"value\", {\r\n        get: function () {\r\n            return this.value_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS & COMPARE\r\n    --------------------------------------------------------- */\r\n    Repeater.prototype.next = function () {\r\n        ++this.index_;\r\n        return this;\r\n    };\r\n    Repeater.prototype.equals = function (obj) {\r\n        return this.index_ === obj.index_;\r\n    };\r\n    return Repeater;\r\n}());\r\nexports.Repeater = Repeater;\r\n//# sourceMappingURL=Repeater.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.next = exports.prev = exports.advance = exports.distance = exports.size = exports.empty = void 0;\r\nvar InvalidArgument_1 = require(\"../exception/InvalidArgument\");\r\n/* =========================================================\r\n    GLOBAL FUNCTIONS\r\n        - ACCESSORS\r\n        - MOVERS\r\n        - FACTORIES\r\n============================================================\r\n    ACCESSORS\r\n--------------------------------------------------------- */\r\n/**\r\n * Test whether a container is empty.\r\n *\r\n * @param source Target container.\r\n * @return Whether empty or not.\r\n */\r\nfunction empty(source) {\r\n    if (source instanceof Array)\r\n        return source.length !== 0;\r\n    else\r\n        return source.empty();\r\n}\r\nexports.empty = empty;\r\n/**\r\n * Get number of elements of a container.\r\n *\r\n * @param source Target container.\r\n * @return The number of elements in the container.\r\n */\r\nfunction size(source) {\r\n    if (source instanceof Array)\r\n        return source.length;\r\n    else\r\n        return source.size();\r\n}\r\nexports.size = size;\r\nfunction distance(first, last) {\r\n    if (first.index instanceof Function)\r\n        return _Distance_via_index(first, last);\r\n    var ret = 0;\r\n    for (; !first.equals(last); first = first.next())\r\n        ++ret;\r\n    return ret;\r\n}\r\nexports.distance = distance;\r\nfunction _Distance_via_index(first, last) {\r\n    var x = first.index();\r\n    var y = last.index();\r\n    if (first.base instanceof Function)\r\n        return x - y;\r\n    else\r\n        return y - x;\r\n}\r\nfunction advance(it, n) {\r\n    if (n === 0)\r\n        return it;\r\n    else if (it.advance instanceof Function)\r\n        return it.advance(n);\r\n    var stepper;\r\n    if (n < 0) {\r\n        if (!(it.prev instanceof Function))\r\n            throw new InvalidArgument_1.InvalidArgument(\"Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.\");\r\n        stepper = function (it) { return it.prev(); };\r\n        n = -n;\r\n    }\r\n    else\r\n        stepper = function (it) { return it.next(); };\r\n    while (n-- > 0)\r\n        it = stepper(it);\r\n    return it;\r\n}\r\nexports.advance = advance;\r\n/**\r\n * Get previous iterator.\r\n *\r\n * @param it Iterator to move.\r\n * @param n Step to move prev.\r\n * @return An iterator moved to prev *n* steps.\r\n */\r\nfunction prev(it, n) {\r\n    if (n === void 0) { n = 1; }\r\n    if (n === 1)\r\n        return it.prev();\r\n    else\r\n        return advance(it, -n);\r\n}\r\nexports.prev = prev;\r\n/**\r\n * Get next iterator.\r\n *\r\n * @param it Iterator to move.\r\n * @param n Step to move next.\r\n * @return Iterator moved to next *n* steps.\r\n */\r\nfunction next(it, n) {\r\n    if (n === void 0) { n = 1; }\r\n    if (n === 1)\r\n        return it.next();\r\n    else\r\n        return advance(it, n);\r\n}\r\nexports.next = next;\r\n//# sourceMappingURL=global.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListContainer = void 0;\r\nvar Container_1 = require(\"../../../base/container/Container\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar Repeater_1 = require(\"../../iterator/disposable/Repeater\");\r\nvar NativeArrayIterator_1 = require(\"../../iterator/disposable/NativeArrayIterator\");\r\nvar global_1 = require(\"../../../iterator/global\");\r\nvar ErrorGenerator_1 = require(\"../../exception/ErrorGenerator\");\r\n/**\r\n * Basic List Container.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ListContainer = /** @class */ (function (_super) {\r\n    __extends(ListContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function ListContainer() {\r\n        var _this = _super.call(this) || this;\r\n        // INIT MEMBERS\r\n        _this.end_ = _this._Create_iterator(null, null);\r\n        _this.clear();\r\n        return _this;\r\n    }\r\n    ListContainer.prototype.assign = function (par1, par2) {\r\n        this.clear();\r\n        this.insert(this.end(), par1, par2);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.clear = function () {\r\n        // DISCONNECT NODES\r\n        ListIterator_1.ListIterator._Set_prev(this.end_, this.end_);\r\n        ListIterator_1.ListIterator._Set_next(this.end_, this.end_);\r\n        // RE-SIZE -> 0\r\n        this.begin_ = this.end_;\r\n        this.size_ = 0;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.resize = function (n) {\r\n        var expansion = n - this.size();\r\n        if (expansion > 0)\r\n            this.insert(this.end(), expansion, undefined);\r\n        else if (expansion < 0)\r\n            this.erase((0, global_1.advance)(this.end(), -expansion), this.end());\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.begin = function () {\r\n        return this.begin_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.end = function () {\r\n        return this.end_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - PUSH & POP\r\n            - INSERT\r\n            - ERASE\r\n            - POST-PROCESS\r\n    ============================================================\r\n        PUSH & POP\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push_front = function (val) {\r\n        this.insert(this.begin_, val);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push_back = function (val) {\r\n        this.insert(this.end_, val);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.pop_front = function () {\r\n        if (this.empty() === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.empty(this.end_.source().constructor.name, \"pop_front\");\r\n        this.erase(this.begin_);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.pop_back = function () {\r\n        if (this.empty() === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.empty(this.end_.source().constructor.name, \"pop_back\");\r\n        this.erase(this.end_.prev());\r\n    };\r\n    /* ---------------------------------------------------------\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        if (items.length === 0)\r\n            return this.size();\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this._Insert_by_range(this.end(), first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    ListContainer.prototype.insert = function (pos) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        // VALIDATION\r\n        if (pos.source() !== this.end_.source())\r\n            throw ErrorGenerator_1.ErrorGenerator.not_my_iterator(this.end_.source(), \"insert\");\r\n        else if (pos.erased_ === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.erased_iterator(this.end_.source(), \"insert\");\r\n        // BRANCHES\r\n        if (args.length === 1)\r\n            return this._Insert_by_repeating_val(pos, 1, args[0]);\r\n        else if (args.length === 2 && typeof args[0] === \"number\")\r\n            return this._Insert_by_repeating_val(pos, args[0], args[1]);\r\n        else\r\n            return this._Insert_by_range(pos, args[0], args[1]);\r\n    };\r\n    ListContainer.prototype._Insert_by_repeating_val = function (position, n, val) {\r\n        var first = new Repeater_1.Repeater(0, val);\r\n        var last = new Repeater_1.Repeater(n);\r\n        return this._Insert_by_range(position, first, last);\r\n    };\r\n    ListContainer.prototype._Insert_by_range = function (position, begin, end) {\r\n        var prev = position.prev();\r\n        var first = null;\r\n        var size = 0;\r\n        for (var it = begin; it.equals(end) === false; it = it.next()) {\r\n            // CONSTRUCT ITEM, THE NEW ELEMENT\r\n            var item = this._Create_iterator(prev, null, it.value);\r\n            if (size === 0)\r\n                first = item;\r\n            // PLACE ITEM ON THE NEXT OF \"PREV\"\r\n            ListIterator_1.ListIterator._Set_next(prev, item);\r\n            // SHIFT CURRENT ITEM TO PREVIOUS\r\n            prev = item;\r\n            ++size;\r\n        }\r\n        // WILL FIRST BE THE BEGIN?\r\n        if (position.equals(this.begin()) === true)\r\n            this.begin_ = first;\r\n        // CONNECT BETWEEN LAST AND POSITION\r\n        ListIterator_1.ListIterator._Set_next(prev, position);\r\n        ListIterator_1.ListIterator._Set_prev(position, prev);\r\n        this.size_ += size;\r\n        return first;\r\n    };\r\n    ListContainer.prototype.erase = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        return this._Erase_by_range(first, last);\r\n    };\r\n    ListContainer.prototype._Erase_by_range = function (first, last) {\r\n        // VALIDATION\r\n        if (first.source() !== this.end_.source())\r\n            throw ErrorGenerator_1.ErrorGenerator.not_my_iterator(this.end_.source(), \"insert\");\r\n        else if (first.erased_ === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.erased_iterator(this.end_.source(), \"insert\");\r\n        else if (first.equals(this.end_))\r\n            return this.end_;\r\n        // FIND PREV AND NEXT\r\n        var prev = first.prev();\r\n        // SHRINK\r\n        ListIterator_1.ListIterator._Set_next(prev, last);\r\n        ListIterator_1.ListIterator._Set_prev(last, prev);\r\n        for (var it = first; !it.equals(last); it = it.next()) {\r\n            it.erased_ = true;\r\n            --this.size_;\r\n        }\r\n        if (first.equals(this.begin_))\r\n            this.begin_ = last;\r\n        return last;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        SWAP\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.swap = function (obj) {\r\n        var _a, _b, _c;\r\n        _a = __read([obj.begin_, this.begin_], 2), this.begin_ = _a[0], obj.begin_ = _a[1];\r\n        _b = __read([obj.end_, this.end_], 2), this.end_ = _b[0], obj.end_ = _b[1];\r\n        _c = __read([obj.size_, this.size_], 2), this.size_ = _c[0], obj.size_ = _c[1];\r\n    };\r\n    return ListContainer;\r\n}(Container_1.Container));\r\nexports.ListContainer = ListContainer;\r\n//# sourceMappingURL=ListContainer.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ReverseIterator = void 0;\r\n/**\r\n * Basic reverse iterator.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ReverseIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param base The base iterator.\r\n     */\r\n    function ReverseIterator(base) {\r\n        this.base_ = base.prev();\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Get source container.\r\n     *\r\n     * @return The source container.\r\n     */\r\n    ReverseIterator.prototype.source = function () {\r\n        return this.base_.source();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.base = function () {\r\n        return this.base_.next();\r\n    };\r\n    Object.defineProperty(ReverseIterator.prototype, \"value\", {\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        get: function () {\r\n            return this.base_.value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.prev = function () {\r\n        // this.base().next()\r\n        return this._Create_neighbor(this.base().next());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.next = function () {\r\n        // this.base().prev()\r\n        return this._Create_neighbor(this.base_);\r\n    };\r\n    /* ---------------------------------------------------------\r\n        COMPARES\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.equals = function (obj) {\r\n        return this.base_.equals(obj.base_);\r\n    };\r\n    return ReverseIterator;\r\n}());\r\nexports.ReverseIterator = ReverseIterator;\r\n//# sourceMappingURL=ReverseIterator.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetElementList = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar ListContainer_1 = require(\"../linear/ListContainer\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar ReverseIterator_1 = require(\"../../iterator/ReverseIterator\");\r\n/**\r\n * Doubly Linked List storing set elements.\r\n *\r\n * @template Key Key type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Source container type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetElementList = /** @class */ (function (_super) {\r\n    __extends(SetElementList, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function SetElementList(associative) {\r\n        var _this = _super.call(this) || this;\r\n        _this.associative_ = associative;\r\n        return _this;\r\n    }\r\n    SetElementList.prototype._Create_iterator = function (prev, next, val) {\r\n        return SetElementList.Iterator.create(this, prev, next, val);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    SetElementList._Swap_associative = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.associative_, x.associative_], 2), x.associative_ = _a[0], y.associative_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    SetElementList.prototype.associative = function () {\r\n        return this.associative_;\r\n    };\r\n    return SetElementList;\r\n}(ListContainer_1.ListContainer));\r\nexports.SetElementList = SetElementList;\r\n/**\r\n *\r\n */\r\n(function (SetElementList) {\r\n    /**\r\n     * Iterator of set container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var Iterator = /** @class */ (function (_super) {\r\n        __extends(Iterator, _super);\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        function Iterator(list, prev, next, val) {\r\n            var _this = _super.call(this, prev, next, val) || this;\r\n            _this.source_ = list;\r\n            return _this;\r\n        }\r\n        /**\r\n         * @internal\r\n         */\r\n        Iterator.create = function (list, prev, next, val) {\r\n            return new Iterator(list, prev, next, val);\r\n        };\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.reverse = function () {\r\n            return new ReverseIterator(this);\r\n        };\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.source = function () {\r\n            return this.source_.associative();\r\n        };\r\n        return Iterator;\r\n    }(ListIterator_1.ListIterator));\r\n    SetElementList.Iterator = Iterator;\r\n    /**\r\n     * Reverser iterator of set container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var ReverseIterator = /** @class */ (function (_super) {\r\n        __extends(ReverseIterator, _super);\r\n        function ReverseIterator() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ReverseIterator.prototype._Create_neighbor = function (base) {\r\n            return new ReverseIterator(base);\r\n        };\r\n        return ReverseIterator;\r\n    }(ReverseIterator_1.ReverseIterator));\r\n    SetElementList.ReverseIterator = ReverseIterator;\r\n})(SetElementList = exports.SetElementList || (exports.SetElementList = {}));\r\nexports.SetElementList = SetElementList;\r\n//# sourceMappingURL=SetElementList.js.map", "\"use strict\";\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashBuckets = void 0;\r\n/**\r\n * Hash buckets\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashBuckets = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function HashBuckets(fetcher, hasher) {\r\n        this.fetcher_ = fetcher;\r\n        this.hasher_ = hasher;\r\n        this.max_load_factor_ = DEFAULT_MAX_FACTOR;\r\n        this.data_ = [];\r\n        this.size_ = 0;\r\n        this.initialize();\r\n    }\r\n    HashBuckets.prototype.clear = function () {\r\n        this.data_ = [];\r\n        this.size_ = 0;\r\n        this.initialize();\r\n    };\r\n    HashBuckets.prototype.rehash = function (length) {\r\n        var e_1, _a, e_2, _b;\r\n        length = Math.max(length, MIN_BUCKET_COUNT);\r\n        var data = [];\r\n        for (var i = 0; i < length; ++i)\r\n            data.push([]);\r\n        try {\r\n            for (var _c = __values(this.data_), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                var row = _d.value;\r\n                try {\r\n                    for (var row_1 = (e_2 = void 0, __values(row)), row_1_1 = row_1.next(); !row_1_1.done; row_1_1 = row_1.next()) {\r\n                        var elem = row_1_1.value;\r\n                        var index = this.hasher_(this.fetcher_(elem)) % data.length;\r\n                        data[index].push(elem);\r\n                    }\r\n                }\r\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (row_1_1 && !row_1_1.done && (_b = row_1.return)) _b.call(row_1);\r\n                    }\r\n                    finally { if (e_2) throw e_2.error; }\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        this.data_ = data;\r\n    };\r\n    HashBuckets.prototype.reserve = function (length) {\r\n        if (length > this.capacity()) {\r\n            length = Math.floor(length / this.max_load_factor_);\r\n            this.rehash(length);\r\n        }\r\n    };\r\n    HashBuckets.prototype.initialize = function () {\r\n        for (var i = 0; i < MIN_BUCKET_COUNT; ++i)\r\n            this.data_.push([]);\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    HashBuckets.prototype.length = function () {\r\n        return this.data_.length;\r\n    };\r\n    HashBuckets.prototype.capacity = function () {\r\n        return this.data_.length * this.max_load_factor_;\r\n    };\r\n    HashBuckets.prototype.at = function (index) {\r\n        return this.data_[index];\r\n    };\r\n    HashBuckets.prototype.load_factor = function () {\r\n        return this.size_ / this.length();\r\n    };\r\n    HashBuckets.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        if (z === null)\r\n            return this.max_load_factor_;\r\n        else\r\n            this.max_load_factor_ = z;\r\n    };\r\n    HashBuckets.prototype.hash_function = function () {\r\n        return this.hasher_;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS I/O\r\n    --------------------------------------------------------- */\r\n    HashBuckets.prototype.index = function (elem) {\r\n        return this.hasher_(this.fetcher_(elem)) % this.length();\r\n    };\r\n    HashBuckets.prototype.insert = function (val) {\r\n        var capacity = this.capacity();\r\n        if (++this.size_ > capacity)\r\n            this.reserve(capacity * 2);\r\n        var index = this.index(val);\r\n        this.data_[index].push(val);\r\n    };\r\n    HashBuckets.prototype.erase = function (val) {\r\n        var index = this.index(val);\r\n        var bucket = this.data_[index];\r\n        for (var i = 0; i < bucket.length; ++i)\r\n            if (bucket[i] === val) {\r\n                bucket.splice(i, 1);\r\n                --this.size_;\r\n                break;\r\n            }\r\n    };\r\n    return HashBuckets;\r\n}());\r\nexports.HashBuckets = HashBuckets;\r\nvar MIN_BUCKET_COUNT = 10;\r\nvar DEFAULT_MAX_FACTOR = 1.0;\r\n//# sourceMappingURL=HashBuckets.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetHashBuckets = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar HashBuckets_1 = require(\"./HashBuckets\");\r\n/**\r\n * Hash buckets for set containers\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetHashBuckets = /** @class */ (function (_super) {\r\n    __extends(SetHashBuckets, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor\r\n     *\r\n     * @param source Source set container\r\n     * @param hasher Hash function\r\n     * @param pred Equality function\r\n     */\r\n    function SetHashBuckets(source, hasher, pred) {\r\n        var _this = _super.call(this, fetcher, hasher) || this;\r\n        _this.source_ = source;\r\n        _this.key_eq_ = pred;\r\n        return _this;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    SetHashBuckets._Swap_source = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.source_, x.source_], 2), x.source_ = _a[0], y.source_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        FINDERS\r\n    --------------------------------------------------------- */\r\n    SetHashBuckets.prototype.key_eq = function () {\r\n        return this.key_eq_;\r\n    };\r\n    SetHashBuckets.prototype.find = function (val) {\r\n        var e_1, _a;\r\n        var index = this.hash_function()(val) % this.length();\r\n        var bucket = this.at(index);\r\n        try {\r\n            for (var bucket_1 = __values(bucket), bucket_1_1 = bucket_1.next(); !bucket_1_1.done; bucket_1_1 = bucket_1.next()) {\r\n                var it = bucket_1_1.value;\r\n                if (this.key_eq_(it.value, val))\r\n                    return it;\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (bucket_1_1 && !bucket_1_1.done && (_a = bucket_1.return)) _a.call(bucket_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return this.source_.end();\r\n    };\r\n    return SetHashBuckets;\r\n}(HashBuckets_1.HashBuckets));\r\nexports.SetHashBuckets = SetHashBuckets;\r\nfunction fetcher(elem) {\r\n    return elem.value;\r\n}\r\n//# sourceMappingURL=SetHashBuckets.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.make_pair = exports.Pair = void 0;\r\nvar hash_1 = require(\"../functional/hash\");\r\nvar comparators_1 = require(\"../functional/comparators\");\r\n/**\r\n * Pair of two elements.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Pair = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param first The first element.\r\n     * @param second The second element.\r\n     */\r\n    function Pair(first, second) {\r\n        this.first = first;\r\n        this.second = second;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        COMPARISON\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.equals = function (pair) {\r\n        return ((0, comparators_1.equal_to)(this.first, pair.first) &&\r\n            (0, comparators_1.equal_to)(this.second, pair.second));\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.less = function (pair) {\r\n        if ((0, comparators_1.equal_to)(this.first, pair.first) === false)\r\n            return (0, comparators_1.less)(this.first, pair.first);\r\n        else\r\n            return (0, comparators_1.less)(this.second, pair.second);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.hashCode = function () {\r\n        return (0, hash_1.hash)(this.first, this.second);\r\n    };\r\n    return Pair;\r\n}());\r\nexports.Pair = Pair;\r\n/**\r\n * Create a {@link Pair}.\r\n *\r\n * @param first The 1st element.\r\n * @param second The 2nd element.\r\n *\r\n * @return A {@link Pair} object.\r\n */\r\nfunction make_pair(first, second) {\r\n    return new Pair(first, second);\r\n}\r\nexports.make_pair = make_pair;\r\n//# sourceMappingURL=Pair.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashSet = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar UniqueSet_1 = require(\"../base/container/UniqueSet\");\r\nvar IHashContainer_1 = require(\"../internal/container/associative/IHashContainer\");\r\nvar SetElementList_1 = require(\"../internal/container/associative/SetElementList\");\r\nvar SetHashBuckets_1 = require(\"../internal/hash/SetHashBuckets\");\r\nvar Pair_1 = require(\"../utility/Pair\");\r\n/**\r\n * Unique-key Set based on Hash buckets.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashSet = /** @class */ (function (_super) {\r\n    __extends(HashSet, _super);\r\n    function HashSet() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this, function (thisArg) { return new SetElementList_1.SetElementList(thisArg); }) || this;\r\n        IHashContainer_1.IHashContainer.construct.apply(IHashContainer_1.IHashContainer, __spreadArray([_this,\r\n            HashSet,\r\n            function (hash, pred) {\r\n                _this.buckets_ = new SetHashBuckets_1.SetHashBuckets(_this, hash, pred);\r\n            }], __read(args), false));\r\n        return _this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ASSIGN & CLEAR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.clear = function () {\r\n        this.buckets_.clear();\r\n        _super.prototype.clear.call(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        // SWAP CONTENTS\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        SetElementList_1.SetElementList._Swap_associative(this.data_, obj.data_);\r\n        // SWAP BUCKETS\r\n        SetHashBuckets_1.SetHashBuckets._Swap_source(this.buckets_, obj.buckets_);\r\n        _b = __read([obj.buckets_, this.buckets_], 2), this.buckets_ = _b[0], obj.buckets_ = _b[1];\r\n    };\r\n    /* =========================================================\r\n        ACCESSORS\r\n            - MEMBER\r\n            - HASH\r\n    ============================================================\r\n        MEMBER\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.find = function (key) {\r\n        return this.buckets_.find(key);\r\n    };\r\n    HashSet.prototype.begin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.begin.call(this);\r\n        else\r\n            return this.buckets_.at(index)[0];\r\n    };\r\n    HashSet.prototype.end = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.end.call(this);\r\n        else {\r\n            var bucket = this.buckets_.at(index);\r\n            return bucket[bucket.length - 1].next();\r\n        }\r\n    };\r\n    HashSet.prototype.rbegin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.end(index).reverse();\r\n    };\r\n    HashSet.prototype.rend = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.begin(index).reverse();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        HASH\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket_count = function () {\r\n        return this.buckets_.length();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket_size = function (n) {\r\n        return this.buckets_.at(n).length;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.load_factor = function () {\r\n        return this.buckets_.load_factor();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.hash_function = function () {\r\n        return this.buckets_.hash_function();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.key_eq = function () {\r\n        return this.buckets_.key_eq();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket = function (key) {\r\n        return this.hash_function()(key) % this.buckets_.length();\r\n    };\r\n    HashSet.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        return this.buckets_.max_load_factor(z);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.reserve = function (n) {\r\n        this.buckets_.reserve(n);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.rehash = function (n) {\r\n        this.buckets_.rehash(n);\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - POST-PROCESS\r\n            - SWAP\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    HashSet.prototype._Insert_by_key = function (key) {\r\n        // TEST WHETHER EXIST\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === false)\r\n            return new Pair_1.Pair(it, false);\r\n        // INSERT\r\n        this.data_.push(key);\r\n        it = it.prev();\r\n        // POST-PROCESS\r\n        this._Handle_insert(it, it.next());\r\n        return new Pair_1.Pair(it, true);\r\n    };\r\n    HashSet.prototype._Insert_by_hint = function (hint, key) {\r\n        // FIND DUPLICATED KEY\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true) {\r\n            // INSERT\r\n            it = this.data_.insert(hint, key);\r\n            // POST-PROCESS\r\n            this._Handle_insert(it, it.next());\r\n        }\r\n        return it;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        POST-PROCESS\r\n    --------------------------------------------------------- */\r\n    HashSet.prototype._Handle_insert = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.insert(first);\r\n    };\r\n    HashSet.prototype._Handle_erase = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.erase(first);\r\n    };\r\n    return HashSet;\r\n}(UniqueSet_1.UniqueSet));\r\nexports.HashSet = HashSet;\r\n/**\r\n *\r\n */\r\n(function (HashSet) {\r\n    // BODY\r\n    HashSet.Iterator = SetElementList_1.SetElementList.Iterator;\r\n    HashSet.ReverseIterator = SetElementList_1.SetElementList.ReverseIterator;\r\n})(HashSet = exports.HashSet || (exports.HashSet = {}));\r\nexports.HashSet = HashSet;\r\n//# sourceMappingURL=HashSet.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapContainer = void 0;\r\nvar Container_1 = require(\"./Container\");\r\nvar NativeArrayIterator_1 = require(\"../../internal/iterator/disposable/NativeArrayIterator\");\r\n/**\r\n * Basic map container.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Derived type extending this {@link MapContainer}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapContainer = /** @class */ (function (_super) {\r\n    __extends(MapContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTURCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function MapContainer(factory) {\r\n        var _this = _super.call(this) || this;\r\n        _this.data_ = factory(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.assign = function (first, last) {\r\n        // INSERT\r\n        this.clear();\r\n        this.insert(first, last);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.clear = function () {\r\n        // TO BE ABSTRACT\r\n        this.data_.clear();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.begin = function () {\r\n        return this.data_.begin();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.end = function () {\r\n        return this.data_.end();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.has = function (key) {\r\n        return !this.find(key).equals(this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.size = function () {\r\n        return this.data_.size();\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - ERASE\r\n            - UTILITY\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this.insert(first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    MapContainer.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1)\r\n            return this.emplace(args[0].first, args[0].second);\r\n        else if (args[0].next instanceof Function &&\r\n            args[1].next instanceof Function)\r\n            return this._Insert_by_range(args[0], args[1]);\r\n        else\r\n            return this.emplace_hint(args[0], args[1].first, args[1].second);\r\n    };\r\n    MapContainer.prototype.erase = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1 &&\r\n            (args[0] instanceof this.end().constructor === false ||\r\n                args[0].source() !== this))\r\n            return this._Erase_by_key(args[0]);\r\n        else if (args.length === 1)\r\n            return this._Erase_by_range(args[0]);\r\n        else\r\n            return this._Erase_by_range(args[0], args[1]);\r\n    };\r\n    MapContainer.prototype._Erase_by_range = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        // ERASE\r\n        var it = this.data_.erase(first, last);\r\n        // POST-PROCESS\r\n        this._Handle_erase(first, last);\r\n        return it;\r\n    };\r\n    return MapContainer;\r\n}(Container_1.Container));\r\nexports.MapContainer = MapContainer;\r\n//# sourceMappingURL=MapContainer.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UniqueMap = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.base\r\n */\r\n//================================================================\r\nvar MapContainer_1 = require(\"./MapContainer\");\r\nvar ErrorGenerator_1 = require(\"../../internal/exception/ErrorGenerator\");\r\n/**\r\n * Basic map container blocking duplicated key.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Source Derived type extending this {@link UniqueMap}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar UniqueMap = /** @class */ (function (_super) {\r\n    __extends(UniqueMap, _super);\r\n    function UniqueMap() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueMap.prototype.count = function (key) {\r\n        return this.find(key).equals(this.end()) ? 0 : 1;\r\n    };\r\n    /**\r\n     * Get a value.\r\n     *\r\n     * @param key Key to search for.\r\n     * @return The value mapped by the key.\r\n     */\r\n    UniqueMap.prototype.get = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"get\", key);\r\n        return it.second;\r\n    };\r\n    /**\r\n     * Take a value.\r\n     *\r\n     * Get a value, or set the value and returns it.\r\n     *\r\n     * @param key Key to search for.\r\n     * @param generator Value generator when the matched key not found\r\n     * @returns Value, anyway\r\n     */\r\n    UniqueMap.prototype.take = function (key, generator) {\r\n        var it = this.find(key);\r\n        return it.equals(this.end())\r\n            ? this.emplace(key, generator()).first.second\r\n            : it.second;\r\n    };\r\n    /**\r\n     * Set a value with key.\r\n     *\r\n     * @param key Key to be mapped or search for.\r\n     * @param val Value to insert or assign.\r\n     */\r\n    UniqueMap.prototype.set = function (key, val) {\r\n        this.insert_or_assign(key, val);\r\n    };\r\n    UniqueMap.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.insert.apply(this, __spreadArray([], __read(args), false));\r\n    };\r\n    UniqueMap.prototype._Insert_by_range = function (first, last) {\r\n        for (var it = first; !it.equals(last); it = it.next())\r\n            this.emplace(it.value.first, it.value.second);\r\n    };\r\n    UniqueMap.prototype.insert_or_assign = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 2) {\r\n            return this._Insert_or_assign_with_key_value(args[0], args[1]);\r\n        }\r\n        else if (args.length === 3) {\r\n            // INSERT OR ASSIGN AN ELEMENT\r\n            return this._Insert_or_assign_with_hint(args[0], args[1], args[2]);\r\n        }\r\n    };\r\n    UniqueMap.prototype._Insert_or_assign_with_key_value = function (key, value) {\r\n        var ret = this.emplace(key, value);\r\n        if (ret.second === false)\r\n            ret.first.second = value;\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype._Insert_or_assign_with_hint = function (hint, key, value) {\r\n        var ret = this.emplace_hint(hint, key, value);\r\n        if (ret.second !== value)\r\n            ret.second = value;\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype.extract = function (param) {\r\n        if (param instanceof this.end().constructor)\r\n            return this._Extract_by_iterator(param);\r\n        else\r\n            return this._Extract_by_key(param);\r\n    };\r\n    UniqueMap.prototype._Extract_by_key = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"extract\", key);\r\n        var ret = it.value;\r\n        this._Erase_by_range(it);\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype._Extract_by_iterator = function (it) {\r\n        if (it.equals(this.end()) === true)\r\n            return this.end();\r\n        this._Erase_by_range(it);\r\n        return it;\r\n    };\r\n    UniqueMap.prototype._Erase_by_key = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            return 0;\r\n        this._Erase_by_range(it);\r\n        return 1;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        UTILITY\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueMap.prototype.merge = function (source) {\r\n        for (var it = source.begin(); !it.equals(source.end());)\r\n            if (this.has(it.first) === false) {\r\n                this.insert(it.value);\r\n                it = source.erase(it);\r\n            }\r\n            else\r\n                it = it.next();\r\n    };\r\n    return UniqueMap;\r\n}(MapContainer_1.MapContainer));\r\nexports.UniqueMap = UniqueMap;\r\n//# sourceMappingURL=UniqueMap.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapElementList = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar ListContainer_1 = require(\"../linear/ListContainer\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar ReverseIterator_1 = require(\"../../iterator/ReverseIterator\");\r\n/**\r\n * Doubly Linked List storing map elements.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Source type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapElementList = /** @class */ (function (_super) {\r\n    __extends(MapElementList, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function MapElementList(associative) {\r\n        var _this = _super.call(this) || this;\r\n        _this.associative_ = associative;\r\n        return _this;\r\n    }\r\n    MapElementList.prototype._Create_iterator = function (prev, next, val) {\r\n        return MapElementList.Iterator.create(this, prev, next, val);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    MapElementList._Swap_associative = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.associative_, x.associative_], 2), x.associative_ = _a[0], y.associative_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    MapElementList.prototype.associative = function () {\r\n        return this.associative_;\r\n    };\r\n    return MapElementList;\r\n}(ListContainer_1.ListContainer));\r\nexports.MapElementList = MapElementList;\r\n/**\r\n *\r\n */\r\n(function (MapElementList) {\r\n    /**\r\n     * Iterator of map container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template T Mapped type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var Iterator = /** @class */ (function (_super) {\r\n        __extends(Iterator, _super);\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        function Iterator(list, prev, next, val) {\r\n            var _this = _super.call(this, prev, next, val) || this;\r\n            _this.list_ = list;\r\n            return _this;\r\n        }\r\n        /**\r\n         * @internal\r\n         */\r\n        Iterator.create = function (list, prev, next, val) {\r\n            return new Iterator(list, prev, next, val);\r\n        };\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.reverse = function () {\r\n            return new ReverseIterator(this);\r\n        };\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.source = function () {\r\n            return this.list_.associative();\r\n        };\r\n        Object.defineProperty(Iterator.prototype, \"first\", {\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            get: function () {\r\n                return this.value.first;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Iterator.prototype, \"second\", {\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            get: function () {\r\n                return this.value.second;\r\n            },\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            set: function (val) {\r\n                this.value.second = val;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        return Iterator;\r\n    }(ListIterator_1.ListIterator));\r\n    MapElementList.Iterator = Iterator;\r\n    /**\r\n     * Reverse iterator of map container storing elements a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template T Mapped type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var ReverseIterator = /** @class */ (function (_super) {\r\n        __extends(ReverseIterator, _super);\r\n        function ReverseIterator() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        ReverseIterator.prototype._Create_neighbor = function (base) {\r\n            return new ReverseIterator(base);\r\n        };\r\n        Object.defineProperty(ReverseIterator.prototype, \"first\", {\r\n            /* ---------------------------------------------------------\r\n                ACCESSORS\r\n            --------------------------------------------------------- */\r\n            /**\r\n             * Get the first, key element.\r\n             *\r\n             * @return The first element.\r\n             */\r\n            get: function () {\r\n                return this.base_.first;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ReverseIterator.prototype, \"second\", {\r\n            /**\r\n             * Get the second, stored element.\r\n             *\r\n             * @return The second element.\r\n             */\r\n            get: function () {\r\n                return this.base_.second;\r\n            },\r\n            /**\r\n             * Set the second, stored element.\r\n             *\r\n             * @param val The value to set.\r\n             */\r\n            set: function (val) {\r\n                this.base_.second = val;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        return ReverseIterator;\r\n    }(ReverseIterator_1.ReverseIterator));\r\n    MapElementList.ReverseIterator = ReverseIterator;\r\n})(MapElementList = exports.MapElementList || (exports.MapElementList = {}));\r\nexports.MapElementList = MapElementList;\r\n//# sourceMappingURL=MapElementList.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapHashBuckets = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar HashBuckets_1 = require(\"./HashBuckets\");\r\n/**\r\n * Hash buckets for map containers.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapHashBuckets = /** @class */ (function (_super) {\r\n    __extends(MapHashBuckets, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor\r\n     *\r\n     * @param source Source map container\r\n     * @param hasher Hash function\r\n     * @param pred Equality function\r\n     */\r\n    function MapHashBuckets(source, hasher, pred) {\r\n        var _this = _super.call(this, fetcher, hasher) || this;\r\n        _this.source_ = source;\r\n        _this.key_eq_ = pred;\r\n        return _this;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    MapHashBuckets._Swap_source = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.source_, x.source_], 2), x.source_ = _a[0], y.source_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        FINDERS\r\n    --------------------------------------------------------- */\r\n    MapHashBuckets.prototype.key_eq = function () {\r\n        return this.key_eq_;\r\n    };\r\n    MapHashBuckets.prototype.find = function (key) {\r\n        var e_1, _a;\r\n        var index = this.hash_function()(key) % this.length();\r\n        var bucket = this.at(index);\r\n        try {\r\n            for (var bucket_1 = __values(bucket), bucket_1_1 = bucket_1.next(); !bucket_1_1.done; bucket_1_1 = bucket_1.next()) {\r\n                var it = bucket_1_1.value;\r\n                if (this.key_eq_(it.first, key))\r\n                    return it;\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (bucket_1_1 && !bucket_1_1.done && (_a = bucket_1.return)) _a.call(bucket_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return this.source_.end();\r\n    };\r\n    return MapHashBuckets;\r\n}(HashBuckets_1.HashBuckets));\r\nexports.MapHashBuckets = MapHashBuckets;\r\nfunction fetcher(elem) {\r\n    return elem.first;\r\n}\r\n//# sourceMappingURL=MapHashBuckets.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Entry = void 0;\r\nvar hash_1 = require(\"../functional/hash\");\r\nvar comparators_1 = require(\"../functional/comparators\");\r\n/**\r\n * Entry for mapping.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Entry = /** @class */ (function () {\r\n    /**\r\n     * Intializer Constructor.\r\n     *\r\n     * @param first The first, key element.\r\n     * @param second The second, mapped element.\r\n     */\r\n    function Entry(first, second) {\r\n        this.first = first;\r\n        this.second = second;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.equals = function (obj) {\r\n        return (0, comparators_1.equal_to)(this.first, obj.first);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.less = function (obj) {\r\n        return (0, comparators_1.less)(this.first, obj.first);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.hashCode = function () {\r\n        return (0, hash_1.hash)(this.first);\r\n    };\r\n    return Entry;\r\n}());\r\nexports.Entry = Entry;\r\n//# sourceMappingURL=Entry.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashMap = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar UniqueMap_1 = require(\"../base/container/UniqueMap\");\r\nvar IHashContainer_1 = require(\"../internal/container/associative/IHashContainer\");\r\nvar MapElementList_1 = require(\"../internal/container/associative/MapElementList\");\r\nvar MapHashBuckets_1 = require(\"../internal/hash/MapHashBuckets\");\r\nvar Entry_1 = require(\"../utility/Entry\");\r\nvar Pair_1 = require(\"../utility/Pair\");\r\n/**\r\n * Unique-key Map based on Hash buckets.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashMap = /** @class */ (function (_super) {\r\n    __extends(HashMap, _super);\r\n    function HashMap() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this, function (thisArg) { return new MapElementList_1.MapElementList(thisArg); }) || this;\r\n        IHashContainer_1.IHashContainer.construct.apply(IHashContainer_1.IHashContainer, __spreadArray([_this,\r\n            HashMap,\r\n            function (hash, pred) {\r\n                _this.buckets_ = new MapHashBuckets_1.MapHashBuckets(_this, hash, pred);\r\n            }], __read(args), false));\r\n        return _this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ASSIGN & CLEAR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.clear = function () {\r\n        this.buckets_.clear();\r\n        _super.prototype.clear.call(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        // SWAP CONTENTS\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        MapElementList_1.MapElementList._Swap_associative(this.data_, obj.data_);\r\n        // SWAP BUCKETS\r\n        MapHashBuckets_1.MapHashBuckets._Swap_source(this.buckets_, obj.buckets_);\r\n        _b = __read([obj.buckets_, this.buckets_], 2), this.buckets_ = _b[0], obj.buckets_ = _b[1];\r\n    };\r\n    /* =========================================================\r\n        ACCESSORS\r\n            - MEMBER\r\n            - HASH\r\n    ============================================================\r\n        MEMBER\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.find = function (key) {\r\n        return this.buckets_.find(key);\r\n    };\r\n    HashMap.prototype.begin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.begin.call(this);\r\n        else\r\n            return this.buckets_.at(index)[0];\r\n    };\r\n    HashMap.prototype.end = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.end.call(this);\r\n        else {\r\n            var bucket = this.buckets_.at(index);\r\n            return bucket[bucket.length - 1].next();\r\n        }\r\n    };\r\n    HashMap.prototype.rbegin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.end(index).reverse();\r\n    };\r\n    HashMap.prototype.rend = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.begin(index).reverse();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        HASH\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket_count = function () {\r\n        return this.buckets_.length();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket_size = function (index) {\r\n        return this.buckets_.at(index).length;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.load_factor = function () {\r\n        return this.buckets_.load_factor();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.hash_function = function () {\r\n        return this.buckets_.hash_function();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.key_eq = function () {\r\n        return this.buckets_.key_eq();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket = function (key) {\r\n        return this.hash_function()(key) % this.buckets_.length();\r\n    };\r\n    HashMap.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        return this.buckets_.max_load_factor(z);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.reserve = function (n) {\r\n        this.buckets_.reserve(n);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.rehash = function (n) {\r\n        this.buckets_.rehash(n);\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.emplace = function (key, val) {\r\n        // TEST WHETHER EXIST\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === false)\r\n            return new Pair_1.Pair(it, false);\r\n        // INSERT\r\n        this.data_.push(new Entry_1.Entry(key, val));\r\n        it = it.prev();\r\n        // POST-PROCESS\r\n        this._Handle_insert(it, it.next());\r\n        return new Pair_1.Pair(it, true);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.emplace_hint = function (hint, key, val) {\r\n        // FIND DUPLICATED KEY\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true) {\r\n            // INSERT\r\n            it = this.data_.insert(hint, new Entry_1.Entry(key, val));\r\n            // POST-PROCESS\r\n            this._Handle_insert(it, it.next());\r\n        }\r\n        return it;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        POST-PROCESS\r\n    --------------------------------------------------------- */\r\n    HashMap.prototype._Handle_insert = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.insert(first);\r\n    };\r\n    HashMap.prototype._Handle_erase = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.erase(first);\r\n    };\r\n    return HashMap;\r\n}(UniqueMap_1.UniqueMap));\r\nexports.HashMap = HashMap;\r\n/**\r\n *\r\n */\r\n(function (HashMap) {\r\n    // BODY\r\n    HashMap.Iterator = MapElementList_1.MapElementList.Iterator;\r\n    HashMap.ReverseIterator = MapElementList_1.MapElementList.ReverseIterator;\r\n})(HashMap = exports.HashMap || (exports.HashMap = {}));\r\nexports.HashMap = HashMap;\r\n//# sourceMappingURL=HashMap.js.map", "\"use strict\";\r\nvar __values = (this && this.__values) || function (o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar HashSet_1 = require(\"tstl/container/HashSet\");\r\nvar HashMap_1 = require(\"tstl/container/HashMap\");\r\nvar EventTarget = /** @class */ (function () {\r\n    function EventTarget() {\r\n        this.listeners_ = new HashMap_1.HashMap();\r\n        this.created_at_ = new Date();\r\n    }\r\n    EventTarget.prototype.dispatchEvent = function (event) {\r\n        var e_1, _a;\r\n        // FIND LISTENERS\r\n        var it = this.listeners_.find(event.type);\r\n        if (it.equals(this.listeners_.end()))\r\n            return;\r\n        // SET DEFAULT ARGUMENTS\r\n        event.target = this;\r\n        event.timeStamp = new Date().getTime() - this.created_at_.getTime();\r\n        try {\r\n            // CALL THE LISTENERS\r\n            for (var _b = __values(it.second), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var listener = _c.value;\r\n                listener(event);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    };\r\n    EventTarget.prototype.addEventListener = function (type, listener) {\r\n        var it = this.listeners_.find(type);\r\n        if (it.equals(this.listeners_.end()))\r\n            it = this.listeners_.emplace(type, new HashSet_1.HashSet()).first;\r\n        it.second.insert(listener);\r\n    };\r\n    EventTarget.prototype.removeEventListener = function (type, listener) {\r\n        var it = this.listeners_.find(type);\r\n        if (it.equals(this.listeners_.end()))\r\n            return;\r\n        it.second.erase(listener);\r\n        if (it.second.empty())\r\n            this.listeners_.erase(it);\r\n    };\r\n    return EventTarget;\r\n}());\r\nexports.EventTarget = EventTarget;\r\n//# sourceMappingURL=EventTarget.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event = /** @class */ (function () {\r\n    function Event(type, init) {\r\n        this.type = type;\r\n        if (init)\r\n            Object.assign(this, init);\r\n    }\r\n    return Event;\r\n}());\r\nexports.Event = Event;\r\n//# sourceMappingURL=Event.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar CloseEvent = /** @class */ (function (_super) {\r\n    __extends(CloseEvent, _super);\r\n    function CloseEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return CloseEvent;\r\n}(Event_1.Event));\r\nexports.CloseEvent = CloseEvent;\r\n//# sourceMappingURL=CloseEvent.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar MessageEvent = /** @class */ (function (_super) {\r\n    __extends(MessageEvent, _super);\r\n    function MessageEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return MessageEvent;\r\n}(Event_1.Event));\r\nexports.MessageEvent = MessageEvent;\r\n//# sourceMappingURL=MessageEvent.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar ErrorEvent = /** @class */ (function (_super) {\r\n    __extends(ErrorEvent, _super);\r\n    function ErrorEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return ErrorEvent;\r\n}(Event_1.Event));\r\nexports.ErrorEvent = ErrorEvent;\r\n//# sourceMappingURL=ErrorEvent.js.map", "\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar websocket_1 = require(\"websocket\");\r\nvar EventTarget_1 = require(\"./events/EventTarget\");\r\nvar Event_1 = require(\"./events/Event\");\r\nvar CloseEvent_1 = require(\"./events/CloseEvent\");\r\nvar MessageEvent_1 = require(\"./events/MessageEvent\");\r\nvar ErrorEvent_1 = require(\"./events/ErrorEvent\");\r\nvar WebSocket = /** @class */ (function (_super) {\r\n    __extends(WebSocket, _super);\r\n    /* ----------------------------------------------------------------\r\n        CONSTRUCTORS\r\n    ---------------------------------------------------------------- */\r\n    function WebSocket(url, protocols) {\r\n        var _this = _super.call(this) || this;\r\n        _this.on_ = {};\r\n        _this.state_ = WebSocket.CONNECTING;\r\n        //----\r\n        // CLIENT\r\n        //----\r\n        // PREPARE SOCKET\r\n        _this.client_ = new websocket_1.client();\r\n        _this.client_.on(\"connect\", _this._Handle_connect.bind(_this));\r\n        _this.client_.on(\"connectFailed\", _this._Handle_error.bind(_this));\r\n        if (typeof protocols === \"string\")\r\n            protocols = [protocols];\r\n        // DO CONNECT\r\n        _this.client_.connect(url, protocols);\r\n        return _this;\r\n    }\r\n    WebSocket.prototype.close = function (code, reason) {\r\n        this.state_ = WebSocket.CLOSING;\r\n        if (code === undefined)\r\n            this.connection_.sendCloseFrame();\r\n        else\r\n            this.connection_.sendCloseFrame(code, reason, true);\r\n    };\r\n    /* ================================================================\r\n        ACCESSORS\r\n            - SENDER\r\n            - PROPERTIES\r\n            - LISTENERS\r\n    ===================================================================\r\n        SENDER\r\n    ---------------------------------------------------------------- */\r\n    WebSocket.prototype.send = function (data) {\r\n        if (typeof data.valueOf() === \"string\")\r\n            this.connection_.sendUTF(data);\r\n        else {\r\n            var buffer = void 0;\r\n            if (data instanceof Buffer)\r\n                buffer = data;\r\n            else if (data instanceof Blob)\r\n                buffer = new Buffer(data, \"blob\");\r\n            else if (data.buffer)\r\n                buffer = new Buffer(data.buffer);\r\n            else\r\n                buffer = new Buffer(data);\r\n            this.connection_.sendBytes(buffer);\r\n        }\r\n    };\r\n    Object.defineProperty(WebSocket.prototype, \"url\", {\r\n        /* ----------------------------------------------------------------\r\n            PROPERTIES\r\n        ---------------------------------------------------------------- */\r\n        get: function () {\r\n            return this.client_.url.href;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"protocol\", {\r\n        get: function () {\r\n            return this.client_.protocols\r\n                ? this.client_.protocols[0]\r\n                : \"\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"extensions\", {\r\n        get: function () {\r\n            return this.connection_ && this.connection_.extensions\r\n                ? this.connection_.extensions[0].name\r\n                : \"\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"readyState\", {\r\n        get: function () {\r\n            return this.state_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"bufferedAmount\", {\r\n        get: function () {\r\n            return this.connection_.bytesWaitingToFlush;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"binaryType\", {\r\n        get: function () {\r\n            return \"arraybuffer\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onopen\", {\r\n        /* ----------------------------------------------------------------\r\n            LISTENERS\r\n        ---------------------------------------------------------------- */\r\n        get: function () {\r\n            return this.on_.open;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"open\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onclose\", {\r\n        get: function () {\r\n            return this.on_.close;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"close\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onmessage\", {\r\n        get: function () {\r\n            return this.on_.message;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"message\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onerror\", {\r\n        get: function () {\r\n            return this.on_.error;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"error\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Set_on = function (type, listener) {\r\n        if (this.on_[type])\r\n            this.removeEventListener(type, this.on_[type]);\r\n        this.addEventListener(type, listener);\r\n        this.on_[type] = listener;\r\n    };\r\n    /* ----------------------------------------------------------------\r\n        SOCKET HANDLERS\r\n    ---------------------------------------------------------------- */\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_connect = function (connection) {\r\n        this.connection_ = connection;\r\n        this.state_ = WebSocket.OPEN;\r\n        this.connection_.on(\"message\", this._Handle_message.bind(this));\r\n        this.connection_.on(\"error\", this._Handle_error.bind(this));\r\n        this.connection_.on(\"close\", this._Handle_close.bind(this));\r\n        var event = new Event_1.Event(\"open\", EVENT_INIT);\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_close = function (code, reason) {\r\n        var event = new CloseEvent_1.CloseEvent(\"close\", __assign({}, EVENT_INIT, { code: code, reason: reason }));\r\n        this.state_ = WebSocket.CLOSED;\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_message = function (message) {\r\n        var event = new MessageEvent_1.MessageEvent(\"message\", __assign({}, EVENT_INIT, { data: message.binaryData\r\n                ? message.binaryData\r\n                : message.utf8Data }));\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_error = function (error) {\r\n        var event = new ErrorEvent_1.ErrorEvent(\"error\", __assign({}, EVENT_INIT, { error: error, message: error.message }));\r\n        if (this.state_ === WebSocket.CONNECTING)\r\n            this.state_ = WebSocket.CLOSED;\r\n        this.dispatchEvent(event);\r\n    };\r\n    return WebSocket;\r\n}(EventTarget_1.EventTarget));\r\nexports.WebSocket = WebSocket;\r\n(function (WebSocket) {\r\n    WebSocket.CONNECTING = 0;\r\n    WebSocket.OPEN = 1;\r\n    WebSocket.CLOSING = 2;\r\n    WebSocket.CLOSED = 3;\r\n})(WebSocket = exports.WebSocket || (exports.WebSocket = {}));\r\nexports.WebSocket = WebSocket;\r\nvar EVENT_INIT = {\r\n    bubbles: false,\r\n    cancelable: false\r\n};\r\n//# sourceMappingURL=WebSocket.js.map", "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar node_1 = require(\"tstl/utility/node\");\r\nif (node_1.is_node())\r\n    global.WebSocket = require(\"./WebSocket\").WebSocket;\r\n//# sourceMappingURL=index.js.map", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (undefined) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var X32WordArray = C_lib.WordArray;\n\n\t    /**\n\t     * x64 namespace.\n\t     */\n\t    var C_x64 = C.x64 = {};\n\n\t    /**\n\t     * A 64-bit word.\n\t     */\n\t    var X64Word = C_x64.Word = Base.extend({\n\t        /**\n\t         * Initializes a newly created 64-bit word.\n\t         *\n\t         * @param {number} high The high 32 bits.\n\t         * @param {number} low The low 32 bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     var x64Word = CryptoJS.x64.Word.create(0x00010203, 0x04050607);\n\t         */\n\t        init: function (high, low) {\n\t            this.high = high;\n\t            this.low = low;\n\t        }\n\n\t        /**\n\t         * Bitwise NOTs this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after negating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var negated = x64Word.not();\n\t         */\n\t        // not: function () {\n\t            // var high = ~this.high;\n\t            // var low = ~this.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise ANDs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to AND with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after ANDing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var anded = x64Word.and(anotherX64Word);\n\t         */\n\t        // and: function (word) {\n\t            // var high = this.high & word.high;\n\t            // var low = this.low & word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise ORs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to OR with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after ORing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var ored = x64Word.or(anotherX64Word);\n\t         */\n\t        // or: function (word) {\n\t            // var high = this.high | word.high;\n\t            // var low = this.low | word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise XORs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to XOR with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after XORing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var xored = x64Word.xor(anotherX64Word);\n\t         */\n\t        // xor: function (word) {\n\t            // var high = this.high ^ word.high;\n\t            // var low = this.low ^ word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Shifts this word n bits to the left.\n\t         *\n\t         * @param {number} n The number of bits to shift.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after shifting.\n\t         *\n\t         * @example\n\t         *\n\t         *     var shifted = x64Word.shiftL(25);\n\t         */\n\t        // shiftL: function (n) {\n\t            // if (n < 32) {\n\t                // var high = (this.high << n) | (this.low >>> (32 - n));\n\t                // var low = this.low << n;\n\t            // } else {\n\t                // var high = this.low << (n - 32);\n\t                // var low = 0;\n\t            // }\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Shifts this word n bits to the right.\n\t         *\n\t         * @param {number} n The number of bits to shift.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after shifting.\n\t         *\n\t         * @example\n\t         *\n\t         *     var shifted = x64Word.shiftR(7);\n\t         */\n\t        // shiftR: function (n) {\n\t            // if (n < 32) {\n\t                // var low = (this.low >>> n) | (this.high << (32 - n));\n\t                // var high = this.high >>> n;\n\t            // } else {\n\t                // var low = this.high >>> (n - 32);\n\t                // var high = 0;\n\t            // }\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Rotates this word n bits to the left.\n\t         *\n\t         * @param {number} n The number of bits to rotate.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after rotating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var rotated = x64Word.rotL(25);\n\t         */\n\t        // rotL: function (n) {\n\t            // return this.shiftL(n).or(this.shiftR(64 - n));\n\t        // },\n\n\t        /**\n\t         * Rotates this word n bits to the right.\n\t         *\n\t         * @param {number} n The number of bits to rotate.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after rotating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var rotated = x64Word.rotR(7);\n\t         */\n\t        // rotR: function (n) {\n\t            // return this.shiftR(n).or(this.shiftL(64 - n));\n\t        // },\n\n\t        /**\n\t         * Adds this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to add with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after adding.\n\t         *\n\t         * @example\n\t         *\n\t         *     var added = x64Word.add(anotherX64Word);\n\t         */\n\t        // add: function (word) {\n\t            // var low = (this.low + word.low) | 0;\n\t            // var carry = (low >>> 0) < (this.low >>> 0) ? 1 : 0;\n\t            // var high = (this.high + word.high + carry) | 0;\n\n\t            // return X64Word.create(high, low);\n\t        // }\n\t    });\n\n\t    /**\n\t     * An array of 64-bit words.\n\t     *\n\t     * @property {Array} words The array of CryptoJS.x64.Word objects.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var X64WordArray = C_x64.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of CryptoJS.x64.Word objects.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create();\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\n\t         *     ]);\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\n\t         *     ], 10);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 8;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this 64-bit word array to a 32-bit word array.\n\t         *\n\t         * @return {CryptoJS.lib.WordArray} This word array's data as a 32-bit word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var x32WordArray = x64WordArray.toX32();\n\t         */\n\t        toX32: function () {\n\t            // Shortcuts\n\t            var x64Words = this.words;\n\t            var x64WordsLength = x64Words.length;\n\n\t            // Convert\n\t            var x32Words = [];\n\t            for (var i = 0; i < x64WordsLength; i++) {\n\t                var x64Word = x64Words[i];\n\t                x32Words.push(x64Word.high);\n\t                x32Words.push(x64Word.low);\n\t            }\n\n\t            return X32WordArray.create(x32Words, this.sigBytes);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {X64WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = x64WordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\n\t            // Clone \"words\" array\n\t            var words = clone.words = this.words.slice(0);\n\n\t            // Clone each X64Word object\n\t            var wordsLength = words.length;\n\t            for (var i = 0; i < wordsLength; i++) {\n\t                words[i] = words[i].clone();\n\t            }\n\n\t            return clone;\n\t        }\n\t    });\n\t}());\n\n\n\treturn CryptoJS;\n\n}));", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Check if typed arrays are supported\n\t    if (typeof ArrayBuffer != 'function') {\n\t        return;\n\t    }\n\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\n\t    // Reference original init\n\t    var superInit = WordArray.init;\n\n\t    // Augment WordArray.init to handle typed arrays\n\t    var subInit = WordArray.init = function (typedArray) {\n\t        // Convert buffers to uint8\n\t        if (typedArray instanceof ArrayBuffer) {\n\t            typedArray = new Uint8Array(typedArray);\n\t        }\n\n\t        // Convert other array views to uint8\n\t        if (\n\t            typedArray instanceof Int8Array ||\n\t            (typeof Uint8ClampedArray !== \"undefined\" && typedArray instanceof Uint8ClampedArray) ||\n\t            typedArray instanceof Int16Array ||\n\t            typedArray instanceof Uint16Array ||\n\t            typedArray instanceof Int32Array ||\n\t            typedArray instanceof Uint32Array ||\n\t            typedArray instanceof Float32Array ||\n\t            typedArray instanceof Float64Array\n\t        ) {\n\t            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\n\t        }\n\n\t        // Handle Uint8Array\n\t        if (typedArray instanceof Uint8Array) {\n\t            // Shortcut\n\t            var typedArrayByteLength = typedArray.byteLength;\n\n\t            // Extract bytes\n\t            var words = [];\n\t            for (var i = 0; i < typedArrayByteLength; i++) {\n\t                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\n\t            }\n\n\t            // Initialize this word array\n\t            superInit.call(this, words, typedArrayByteLength);\n\t        } else {\n\t            // Else call normal init\n\t            superInit.apply(this, arguments);\n\t        }\n\t    };\n\n\t    subInit.prototype = WordArray;\n\t}());\n\n\n\treturn CryptoJS.lib.WordArray;\n\n}));", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * UTF-16 BE encoding strategy.\n\t     */\n\t    var Utf16BE = C_enc.Utf16 = C_enc.Utf16BE = {\n\t        /**\n\t         * Converts a word array to a UTF-16 BE string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-16 BE string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf16String = CryptoJS.enc.Utf16.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var utf16Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 2) {\n\t                var codePoint = (words[i >>> 2] >>> (16 - (i % 4) * 8)) & 0xffff;\n\t                utf16Chars.push(String.fromCharCode(codePoint));\n\t            }\n\n\t            return utf16Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a UTF-16 BE string to a word array.\n\t         *\n\t         * @param {string} utf16Str The UTF-16 BE string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf16.parse(utf16String);\n\t         */\n\t        parse: function (utf16Str) {\n\t            // Shortcut\n\t            var utf16StrLength = utf16Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < utf16StrLength; i++) {\n\t                words[i >>> 1] |= utf16Str.charCodeAt(i) << (16 - (i % 2) * 16);\n\t            }\n\n\t            return WordArray.create(words, utf16StrLength * 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-16 LE encoding strategy.\n\t     */\n\t    C_enc.Utf16LE = {\n\t        /**\n\t         * Converts a word array to a UTF-16 LE string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-16 LE string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf16Str = CryptoJS.enc.Utf16LE.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var utf16Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 2) {\n\t                var codePoint = swapEndian((words[i >>> 2] >>> (16 - (i % 4) * 8)) & 0xffff);\n\t                utf16Chars.push(String.fromCharCode(codePoint));\n\t            }\n\n\t            return utf16Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a UTF-16 LE string to a word array.\n\t         *\n\t         * @param {string} utf16Str The UTF-16 LE string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf16LE.parse(utf16Str);\n\t         */\n\t        parse: function (utf16Str) {\n\t            // Shortcut\n\t            var utf16StrLength = utf16Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < utf16StrLength; i++) {\n\t                words[i >>> 1] |= swapEndian(utf16Str.charCodeAt(i) << (16 - (i % 2) * 16));\n\t            }\n\n\t            return WordArray.create(words, utf16StrLength * 2);\n\t        }\n\t    };\n\n\t    function swapEndian(word) {\n\t        return ((word << 8) & 0xff00ff00) | ((word >>> 8) & 0x00ff00ff);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Utf16;\n\n}));", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              var bitsCombined = bits1 | bits2;\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64url encoding strategy.\n\t     */\n\t    var Base64url = C_enc.Base64url = {\n\t        /**\n\t         * Converts a word array to a Base64url string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @param {boolean} urlSafe Whether to use url safe\n\t         *\n\t         * @return {string} The Base64url string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64url.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray, urlSafe) {\n\t            if (urlSafe === undefined) {\n\t                urlSafe = true\n\t            }\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = urlSafe ? this._safe_map : this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64url string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64url string.\n\t         *\n\t         * @param {boolean} urlSafe Whether to use url safe\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64url.parse(base64String);\n\t         */\n\t        parse: function (base64Str, urlSafe) {\n\t            if (urlSafe === undefined) {\n\t                urlSafe = true\n\t            }\n\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = urlSafe ? this._safe_map : this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                reverseMap = this._reverseMap = [];\n\t                for (var j = 0; j < map.length; j++) {\n\t                    reverseMap[map.charCodeAt(j)] = j;\n\t                }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n\t        _safe_map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_',\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t        var words = [];\n\t        var nBytes = 0;\n\t        for (var i = 0; i < base64StrLength; i++) {\n\t            if (i % 4) {\n\t                var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t                var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t                var bitsCombined = bits1 | bits2;\n\t                words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t                nBytes++;\n\t            }\n\t        }\n\t        return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64url;\n\n}));", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var T = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        for (var i = 0; i < 64; i++) {\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\n\t        }\n\t    }());\n\n\t    /**\n\t     * MD5 hash algorithm.\n\t     */\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var M_offset_0  = M[offset + 0];\n\t            var M_offset_1  = M[offset + 1];\n\t            var M_offset_2  = M[offset + 2];\n\t            var M_offset_3  = M[offset + 3];\n\t            var M_offset_4  = M[offset + 4];\n\t            var M_offset_5  = M[offset + 5];\n\t            var M_offset_6  = M[offset + 6];\n\t            var M_offset_7  = M[offset + 7];\n\t            var M_offset_8  = M[offset + 8];\n\t            var M_offset_9  = M[offset + 9];\n\t            var M_offset_10 = M[offset + 10];\n\t            var M_offset_11 = M[offset + 11];\n\t            var M_offset_12 = M[offset + 12];\n\t            var M_offset_13 = M[offset + 13];\n\t            var M_offset_14 = M[offset + 14];\n\t            var M_offset_15 = M[offset + 15];\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\n\t            // Computation\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\n\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\n\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\n\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\n\t            var nBitsTotalL = nBitsTotal;\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\n\t            );\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\n\t            );\n\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    function FF(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function GG(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function HH(a, b, c, d, x, s, t) {\n\t        var n = a + (b ^ c ^ d) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function II(a, b, c, d, x, s, t) {\n\t        var n = a + (c ^ (b | ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.MD5('message');\n\t     *     var hash = CryptoJS.MD5(wordArray);\n\t     */\n\t    C.MD5 = Hasher._createHelper(MD5);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\n\t     */\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\n\t}(Math));\n\n\n\treturn CryptoJS.MD5;\n\n}));", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-1 hash algorithm.\n\t     */\n\t    var SHA1 = C_algo.SHA1 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476,\n\t                0xc3d2e1f0\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\n\t            // Computation\n\t            for (var i = 0; i < 80; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var n = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n\t                    W[i] = (n << 1) | (n >>> 31);\n\t                }\n\n\t                var t = ((a << 5) | (a >>> 27)) + e + W[i];\n\t                if (i < 20) {\n\t                    t += ((b & c) | (~b & d)) + 0x5a827999;\n\t                } else if (i < 40) {\n\t                    t += (b ^ c ^ d) + 0x6ed9eba1;\n\t                } else if (i < 60) {\n\t                    t += ((b & c) | (b & d) | (c & d)) - 0x70e44324;\n\t                } else /* if (i < 80) */ {\n\t                    t += (b ^ c ^ d) - 0x359d3e2a;\n\t                }\n\n\t                e = d;\n\t                d = c;\n\t                c = (b << 30) | (b >>> 2);\n\t                b = a;\n\t                a = t;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA1('message');\n\t     *     var hash = CryptoJS.SHA1(wordArray);\n\t     */\n\t    C.SHA1 = Hasher._createHelper(SHA1);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA1(message, key);\n\t     */\n\t    C.HmacSHA1 = Hasher._createHmacHelper(SHA1);\n\t}());\n\n\n\treturn CryptoJS.SHA1;\n\n}));", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha256\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha256\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_algo = C.algo;\n\t    var SHA256 = C_algo.SHA256;\n\n\t    /**\n\t     * SHA-224 hash algorithm.\n\t     */\n\t    var SHA224 = C_algo.SHA224 = SHA256.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939,\n\t                0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4\n\t            ]);\n\t        },\n\n\t        _doFinalize: function () {\n\t            var hash = SHA256._doFinalize.call(this);\n\n\t            hash.sigBytes -= 4;\n\n\t            return hash;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA224('message');\n\t     *     var hash = CryptoJS.SHA224(wordArray);\n\t     */\n\t    C.SHA224 = SHA256._createHelper(SHA224);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA224(message, key);\n\t     */\n\t    C.HmacSHA224 = SHA256._createHmacHelper(SHA224);\n\t}());\n\n\n\treturn CryptoJS.SHA224;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_x64 = C.x64;\n\t    var X64Word = C_x64.Word;\n\t    var X64WordArray = C_x64.WordArray;\n\t    var C_algo = C.algo;\n\n\t    function X64Word_create() {\n\t        return X64Word.create.apply(X64Word, arguments);\n\t    }\n\n\t    // Constants\n\t    var K = [\n\t        X64Word_create(0x428a2f98, 0xd728ae22), X64Word_create(0x71374491, 0x23ef65cd),\n\t        X64Word_create(0xb5c0fbcf, 0xec4d3b2f), X64Word_create(0xe9b5dba5, 0x8189dbbc),\n\t        X64Word_create(0x3956c25b, 0xf348b538), X64Word_create(0x59f111f1, 0xb605d019),\n\t        X64Word_create(0x923f82a4, 0xaf194f9b), X64Word_create(0xab1c5ed5, 0xda6d8118),\n\t        X64Word_create(0xd807aa98, 0xa3030242), X64Word_create(0x12835b01, 0x45706fbe),\n\t        X64Word_create(0x243185be, 0x4ee4b28c), X64Word_create(0x550c7dc3, 0xd5ffb4e2),\n\t        X64Word_create(0x72be5d74, 0xf27b896f), X64Word_create(0x80deb1fe, 0x3b1696b1),\n\t        X64Word_create(0x9bdc06a7, 0x25c71235), X64Word_create(0xc19bf174, 0xcf692694),\n\t        X64Word_create(0xe49b69c1, 0x9ef14ad2), X64Word_create(0xefbe4786, 0x384f25e3),\n\t        X64Word_create(0x0fc19dc6, 0x8b8cd5b5), X64Word_create(0x240ca1cc, 0x77ac9c65),\n\t        X64Word_create(0x2de92c6f, 0x592b0275), X64Word_create(0x4a7484aa, 0x6ea6e483),\n\t        X64Word_create(0x5cb0a9dc, 0xbd41fbd4), X64Word_create(0x76f988da, 0x831153b5),\n\t        X64Word_create(0x983e5152, 0xee66dfab), X64Word_create(0xa831c66d, 0x2db43210),\n\t        X64Word_create(0xb00327c8, 0x98fb213f), X64Word_create(0xbf597fc7, 0xbeef0ee4),\n\t        X64Word_create(0xc6e00bf3, 0x3da88fc2), X64Word_create(0xd5a79147, 0x930aa725),\n\t        X64Word_create(0x06ca6351, 0xe003826f), X64Word_create(0x14292967, 0x0a0e6e70),\n\t        X64Word_create(0x27b70a85, 0x46d22ffc), X64Word_create(0x2e1b2138, 0x5c26c926),\n\t        X64Word_create(0x4d2c6dfc, 0x5ac42aed), X64Word_create(0x53380d13, 0x9d95b3df),\n\t        X64Word_create(0x650a7354, 0x8baf63de), X64Word_create(0x766a0abb, 0x3c77b2a8),\n\t        X64Word_create(0x81c2c92e, 0x47edaee6), X64Word_create(0x92722c85, 0x1482353b),\n\t        X64Word_create(0xa2bfe8a1, 0x4cf10364), X64Word_create(0xa81a664b, 0xbc423001),\n\t        X64Word_create(0xc24b8b70, 0xd0f89791), X64Word_create(0xc76c51a3, 0x0654be30),\n\t        X64Word_create(0xd192e819, 0xd6ef5218), X64Word_create(0xd6990624, 0x5565a910),\n\t        X64Word_create(0xf40e3585, 0x5771202a), X64Word_create(0x106aa070, 0x32bbd1b8),\n\t        X64Word_create(0x19a4c116, 0xb8d2d0c8), X64Word_create(0x1e376c08, 0x5141ab53),\n\t        X64Word_create(0x2748774c, 0xdf8eeb99), X64Word_create(0x34b0bcb5, 0xe19b48a8),\n\t        X64Word_create(0x391c0cb3, 0xc5c95a63), X64Word_create(0x4ed8aa4a, 0xe3418acb),\n\t        X64Word_create(0x5b9cca4f, 0x7763e373), X64Word_create(0x682e6ff3, 0xd6b2b8a3),\n\t        X64Word_create(0x748f82ee, 0x5defb2fc), X64Word_create(0x78a5636f, 0x43172f60),\n\t        X64Word_create(0x84c87814, 0xa1f0ab72), X64Word_create(0x8cc70208, 0x1a6439ec),\n\t        X64Word_create(0x90befffa, 0x23631e28), X64Word_create(0xa4506ceb, 0xde82bde9),\n\t        X64Word_create(0xbef9a3f7, 0xb2c67915), X64Word_create(0xc67178f2, 0xe372532b),\n\t        X64Word_create(0xca273ece, 0xea26619c), X64Word_create(0xd186b8c7, 0x21c0c207),\n\t        X64Word_create(0xeada7dd6, 0xcde0eb1e), X64Word_create(0xf57d4f7f, 0xee6ed178),\n\t        X64Word_create(0x06f067aa, 0x72176fba), X64Word_create(0x0a637dc5, 0xa2c898a6),\n\t        X64Word_create(0x113f9804, 0xbef90dae), X64Word_create(0x1b710b35, 0x131c471b),\n\t        X64Word_create(0x28db77f5, 0x23047d84), X64Word_create(0x32caab7b, 0x40c72493),\n\t        X64Word_create(0x3c9ebe0a, 0x15c9bebc), X64Word_create(0x431d67c4, 0x9c100d4c),\n\t        X64Word_create(0x4cc5d4be, 0xcb3e42b6), X64Word_create(0x597f299c, 0xfc657e2a),\n\t        X64Word_create(0x5fcb6fab, 0x3ad6faec), X64Word_create(0x6c44198c, 0x4a475817)\n\t    ];\n\n\t    // Reusable objects\n\t    var W = [];\n\t    (function () {\n\t        for (var i = 0; i < 80; i++) {\n\t            W[i] = X64Word_create();\n\t        }\n\t    }());\n\n\t    /**\n\t     * SHA-512 hash algorithm.\n\t     */\n\t    var SHA512 = C_algo.SHA512 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new X64WordArray.init([\n\t                new X64Word.init(0x6a09e667, 0xf3bcc908), new X64Word.init(0xbb67ae85, 0x84caa73b),\n\t                new X64Word.init(0x3c6ef372, 0xfe94f82b), new X64Word.init(0xa54ff53a, 0x5f1d36f1),\n\t                new X64Word.init(0x510e527f, 0xade682d1), new X64Word.init(0x9b05688c, 0x2b3e6c1f),\n\t                new X64Word.init(0x1f83d9ab, 0xfb41bd6b), new X64Word.init(0x5be0cd19, 0x137e2179)\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var H0 = H[0];\n\t            var H1 = H[1];\n\t            var H2 = H[2];\n\t            var H3 = H[3];\n\t            var H4 = H[4];\n\t            var H5 = H[5];\n\t            var H6 = H[6];\n\t            var H7 = H[7];\n\n\t            var H0h = H0.high;\n\t            var H0l = H0.low;\n\t            var H1h = H1.high;\n\t            var H1l = H1.low;\n\t            var H2h = H2.high;\n\t            var H2l = H2.low;\n\t            var H3h = H3.high;\n\t            var H3l = H3.low;\n\t            var H4h = H4.high;\n\t            var H4l = H4.low;\n\t            var H5h = H5.high;\n\t            var H5l = H5.low;\n\t            var H6h = H6.high;\n\t            var H6l = H6.low;\n\t            var H7h = H7.high;\n\t            var H7l = H7.low;\n\n\t            // Working variables\n\t            var ah = H0h;\n\t            var al = H0l;\n\t            var bh = H1h;\n\t            var bl = H1l;\n\t            var ch = H2h;\n\t            var cl = H2l;\n\t            var dh = H3h;\n\t            var dl = H3l;\n\t            var eh = H4h;\n\t            var el = H4l;\n\t            var fh = H5h;\n\t            var fl = H5l;\n\t            var gh = H6h;\n\t            var gl = H6l;\n\t            var hh = H7h;\n\t            var hl = H7l;\n\n\t            // Rounds\n\t            for (var i = 0; i < 80; i++) {\n\t                var Wil;\n\t                var Wih;\n\n\t                // Shortcut\n\t                var Wi = W[i];\n\n\t                // Extend message\n\t                if (i < 16) {\n\t                    Wih = Wi.high = M[offset + i * 2]     | 0;\n\t                    Wil = Wi.low  = M[offset + i * 2 + 1] | 0;\n\t                } else {\n\t                    // Gamma0\n\t                    var gamma0x  = W[i - 15];\n\t                    var gamma0xh = gamma0x.high;\n\t                    var gamma0xl = gamma0x.low;\n\t                    var gamma0h  = ((gamma0xh >>> 1) | (gamma0xl << 31)) ^ ((gamma0xh >>> 8) | (gamma0xl << 24)) ^ (gamma0xh >>> 7);\n\t                    var gamma0l  = ((gamma0xl >>> 1) | (gamma0xh << 31)) ^ ((gamma0xl >>> 8) | (gamma0xh << 24)) ^ ((gamma0xl >>> 7) | (gamma0xh << 25));\n\n\t                    // Gamma1\n\t                    var gamma1x  = W[i - 2];\n\t                    var gamma1xh = gamma1x.high;\n\t                    var gamma1xl = gamma1x.low;\n\t                    var gamma1h  = ((gamma1xh >>> 19) | (gamma1xl << 13)) ^ ((gamma1xh << 3) | (gamma1xl >>> 29)) ^ (gamma1xh >>> 6);\n\t                    var gamma1l  = ((gamma1xl >>> 19) | (gamma1xh << 13)) ^ ((gamma1xl << 3) | (gamma1xh >>> 29)) ^ ((gamma1xl >>> 6) | (gamma1xh << 26));\n\n\t                    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n\t                    var Wi7  = W[i - 7];\n\t                    var Wi7h = Wi7.high;\n\t                    var Wi7l = Wi7.low;\n\n\t                    var Wi16  = W[i - 16];\n\t                    var Wi16h = Wi16.high;\n\t                    var Wi16l = Wi16.low;\n\n\t                    Wil = gamma0l + Wi7l;\n\t                    Wih = gamma0h + Wi7h + ((Wil >>> 0) < (gamma0l >>> 0) ? 1 : 0);\n\t                    Wil = Wil + gamma1l;\n\t                    Wih = Wih + gamma1h + ((Wil >>> 0) < (gamma1l >>> 0) ? 1 : 0);\n\t                    Wil = Wil + Wi16l;\n\t                    Wih = Wih + Wi16h + ((Wil >>> 0) < (Wi16l >>> 0) ? 1 : 0);\n\n\t                    Wi.high = Wih;\n\t                    Wi.low  = Wil;\n\t                }\n\n\t                var chh  = (eh & fh) ^ (~eh & gh);\n\t                var chl  = (el & fl) ^ (~el & gl);\n\t                var majh = (ah & bh) ^ (ah & ch) ^ (bh & ch);\n\t                var majl = (al & bl) ^ (al & cl) ^ (bl & cl);\n\n\t                var sigma0h = ((ah >>> 28) | (al << 4))  ^ ((ah << 30)  | (al >>> 2)) ^ ((ah << 25) | (al >>> 7));\n\t                var sigma0l = ((al >>> 28) | (ah << 4))  ^ ((al << 30)  | (ah >>> 2)) ^ ((al << 25) | (ah >>> 7));\n\t                var sigma1h = ((eh >>> 14) | (el << 18)) ^ ((eh >>> 18) | (el << 14)) ^ ((eh << 23) | (el >>> 9));\n\t                var sigma1l = ((el >>> 14) | (eh << 18)) ^ ((el >>> 18) | (eh << 14)) ^ ((el << 23) | (eh >>> 9));\n\n\t                // t1 = h + sigma1 + ch + K[i] + W[i]\n\t                var Ki  = K[i];\n\t                var Kih = Ki.high;\n\t                var Kil = Ki.low;\n\n\t                var t1l = hl + sigma1l;\n\t                var t1h = hh + sigma1h + ((t1l >>> 0) < (hl >>> 0) ? 1 : 0);\n\t                var t1l = t1l + chl;\n\t                var t1h = t1h + chh + ((t1l >>> 0) < (chl >>> 0) ? 1 : 0);\n\t                var t1l = t1l + Kil;\n\t                var t1h = t1h + Kih + ((t1l >>> 0) < (Kil >>> 0) ? 1 : 0);\n\t                var t1l = t1l + Wil;\n\t                var t1h = t1h + Wih + ((t1l >>> 0) < (Wil >>> 0) ? 1 : 0);\n\n\t                // t2 = sigma0 + maj\n\t                var t2l = sigma0l + majl;\n\t                var t2h = sigma0h + majh + ((t2l >>> 0) < (sigma0l >>> 0) ? 1 : 0);\n\n\t                // Update working variables\n\t                hh = gh;\n\t                hl = gl;\n\t                gh = fh;\n\t                gl = fl;\n\t                fh = eh;\n\t                fl = el;\n\t                el = (dl + t1l) | 0;\n\t                eh = (dh + t1h + ((el >>> 0) < (dl >>> 0) ? 1 : 0)) | 0;\n\t                dh = ch;\n\t                dl = cl;\n\t                ch = bh;\n\t                cl = bl;\n\t                bh = ah;\n\t                bl = al;\n\t                al = (t1l + t2l) | 0;\n\t                ah = (t1h + t2h + ((al >>> 0) < (t1l >>> 0) ? 1 : 0)) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H0l = H0.low  = (H0l + al);\n\t            H0.high = (H0h + ah + ((H0l >>> 0) < (al >>> 0) ? 1 : 0));\n\t            H1l = H1.low  = (H1l + bl);\n\t            H1.high = (H1h + bh + ((H1l >>> 0) < (bl >>> 0) ? 1 : 0));\n\t            H2l = H2.low  = (H2l + cl);\n\t            H2.high = (H2h + ch + ((H2l >>> 0) < (cl >>> 0) ? 1 : 0));\n\t            H3l = H3.low  = (H3l + dl);\n\t            H3.high = (H3h + dh + ((H3l >>> 0) < (dl >>> 0) ? 1 : 0));\n\t            H4l = H4.low  = (H4l + el);\n\t            H4.high = (H4h + eh + ((H4l >>> 0) < (el >>> 0) ? 1 : 0));\n\t            H5l = H5.low  = (H5l + fl);\n\t            H5.high = (H5h + fh + ((H5l >>> 0) < (fl >>> 0) ? 1 : 0));\n\t            H6l = H6.low  = (H6l + gl);\n\t            H6.high = (H6h + gh + ((H6l >>> 0) < (gl >>> 0) ? 1 : 0));\n\t            H7l = H7.low  = (H7l + hl);\n\t            H7.high = (H7h + hh + ((H7l >>> 0) < (hl >>> 0) ? 1 : 0));\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 30] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 31] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Convert hash to 32-bit word array before returning\n\t            var hash = this._hash.toX32();\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        },\n\n\t        blockSize: 1024/32\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA512('message');\n\t     *     var hash = CryptoJS.SHA512(wordArray);\n\t     */\n\t    C.SHA512 = Hasher._createHelper(SHA512);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA512(message, key);\n\t     */\n\t    C.HmacSHA512 = Hasher._createHmacHelper(SHA512);\n\t}());\n\n\n\treturn CryptoJS.SHA512;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"), require(\"./sha512\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\", \"./sha512\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_x64 = C.x64;\n\t    var X64Word = C_x64.Word;\n\t    var X64WordArray = C_x64.WordArray;\n\t    var C_algo = C.algo;\n\t    var SHA512 = C_algo.SHA512;\n\n\t    /**\n\t     * SHA-384 hash algorithm.\n\t     */\n\t    var SHA384 = C_algo.SHA384 = SHA512.extend({\n\t        _doReset: function () {\n\t            this._hash = new X64WordArray.init([\n\t                new X64Word.init(0xcbbb9d5d, 0xc1059ed8), new X64Word.init(0x629a292a, 0x367cd507),\n\t                new X64Word.init(0x9159015a, 0x3070dd17), new X64Word.init(0x152fecd8, 0xf70e5939),\n\t                new X64Word.init(0x67332667, 0xffc00b31), new X64Word.init(0x8eb44a87, 0x68581511),\n\t                new X64Word.init(0xdb0c2e0d, 0x64f98fa7), new X64Word.init(0x47b5481d, 0xbefa4fa4)\n\t            ]);\n\t        },\n\n\t        _doFinalize: function () {\n\t            var hash = SHA512._doFinalize.call(this);\n\n\t            hash.sigBytes -= 16;\n\n\t            return hash;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA384('message');\n\t     *     var hash = CryptoJS.SHA384(wordArray);\n\t     */\n\t    C.SHA384 = SHA512._createHelper(SHA384);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA384(message, key);\n\t     */\n\t    C.HmacSHA384 = SHA512._createHmacHelper(SHA384);\n\t}());\n\n\n\treturn CryptoJS.SHA384;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_x64 = C.x64;\n\t    var X64Word = C_x64.Word;\n\t    var C_algo = C.algo;\n\n\t    // Constants tables\n\t    var RHO_OFFSETS = [];\n\t    var PI_INDEXES  = [];\n\t    var ROUND_CONSTANTS = [];\n\n\t    // Compute Constants\n\t    (function () {\n\t        // Compute rho offset constants\n\t        var x = 1, y = 0;\n\t        for (var t = 0; t < 24; t++) {\n\t            RHO_OFFSETS[x + 5 * y] = ((t + 1) * (t + 2) / 2) % 64;\n\n\t            var newX = y % 5;\n\t            var newY = (2 * x + 3 * y) % 5;\n\t            x = newX;\n\t            y = newY;\n\t        }\n\n\t        // Compute pi index constants\n\t        for (var x = 0; x < 5; x++) {\n\t            for (var y = 0; y < 5; y++) {\n\t                PI_INDEXES[x + 5 * y] = y + ((2 * x + 3 * y) % 5) * 5;\n\t            }\n\t        }\n\n\t        // Compute round constants\n\t        var LFSR = 0x01;\n\t        for (var i = 0; i < 24; i++) {\n\t            var roundConstantMsw = 0;\n\t            var roundConstantLsw = 0;\n\n\t            for (var j = 0; j < 7; j++) {\n\t                if (LFSR & 0x01) {\n\t                    var bitPosition = (1 << j) - 1;\n\t                    if (bitPosition < 32) {\n\t                        roundConstantLsw ^= 1 << bitPosition;\n\t                    } else /* if (bitPosition >= 32) */ {\n\t                        roundConstantMsw ^= 1 << (bitPosition - 32);\n\t                    }\n\t                }\n\n\t                // Compute next LFSR\n\t                if (LFSR & 0x80) {\n\t                    // Primitive polynomial over GF(2): x^8 + x^6 + x^5 + x^4 + 1\n\t                    LFSR = (LFSR << 1) ^ 0x71;\n\t                } else {\n\t                    LFSR <<= 1;\n\t                }\n\t            }\n\n\t            ROUND_CONSTANTS[i] = X64Word.create(roundConstantMsw, roundConstantLsw);\n\t        }\n\t    }());\n\n\t    // Reusable objects for temporary values\n\t    var T = [];\n\t    (function () {\n\t        for (var i = 0; i < 25; i++) {\n\t            T[i] = X64Word.create();\n\t        }\n\t    }());\n\n\t    /**\n\t     * SHA-3 hash algorithm.\n\t     */\n\t    var SHA3 = C_algo.SHA3 = Hasher.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {number} outputLength\n\t         *   The desired number of bits in the output hash.\n\t         *   Only values permitted are: 224, 256, 384, 512.\n\t         *   Default: 512\n\t         */\n\t        cfg: Hasher.cfg.extend({\n\t            outputLength: 512\n\t        }),\n\n\t        _doReset: function () {\n\t            var state = this._state = []\n\t            for (var i = 0; i < 25; i++) {\n\t                state[i] = new X64Word.init();\n\t            }\n\n\t            this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32;\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcuts\n\t            var state = this._state;\n\t            var nBlockSizeLanes = this.blockSize / 2;\n\n\t            // Absorb\n\t            for (var i = 0; i < nBlockSizeLanes; i++) {\n\t                // Shortcuts\n\t                var M2i  = M[offset + 2 * i];\n\t                var M2i1 = M[offset + 2 * i + 1];\n\n\t                // Swap endian\n\t                M2i = (\n\t                    (((M2i << 8)  | (M2i >>> 24)) & 0x00ff00ff) |\n\t                    (((M2i << 24) | (M2i >>> 8))  & 0xff00ff00)\n\t                );\n\t                M2i1 = (\n\t                    (((M2i1 << 8)  | (M2i1 >>> 24)) & 0x00ff00ff) |\n\t                    (((M2i1 << 24) | (M2i1 >>> 8))  & 0xff00ff00)\n\t                );\n\n\t                // Absorb message into state\n\t                var lane = state[i];\n\t                lane.high ^= M2i1;\n\t                lane.low  ^= M2i;\n\t            }\n\n\t            // Rounds\n\t            for (var round = 0; round < 24; round++) {\n\t                // Theta\n\t                for (var x = 0; x < 5; x++) {\n\t                    // Mix column lanes\n\t                    var tMsw = 0, tLsw = 0;\n\t                    for (var y = 0; y < 5; y++) {\n\t                        var lane = state[x + 5 * y];\n\t                        tMsw ^= lane.high;\n\t                        tLsw ^= lane.low;\n\t                    }\n\n\t                    // Temporary values\n\t                    var Tx = T[x];\n\t                    Tx.high = tMsw;\n\t                    Tx.low  = tLsw;\n\t                }\n\t                for (var x = 0; x < 5; x++) {\n\t                    // Shortcuts\n\t                    var Tx4 = T[(x + 4) % 5];\n\t                    var Tx1 = T[(x + 1) % 5];\n\t                    var Tx1Msw = Tx1.high;\n\t                    var Tx1Lsw = Tx1.low;\n\n\t                    // Mix surrounding columns\n\t                    var tMsw = Tx4.high ^ ((Tx1Msw << 1) | (Tx1Lsw >>> 31));\n\t                    var tLsw = Tx4.low  ^ ((Tx1Lsw << 1) | (Tx1Msw >>> 31));\n\t                    for (var y = 0; y < 5; y++) {\n\t                        var lane = state[x + 5 * y];\n\t                        lane.high ^= tMsw;\n\t                        lane.low  ^= tLsw;\n\t                    }\n\t                }\n\n\t                // Rho Pi\n\t                for (var laneIndex = 1; laneIndex < 25; laneIndex++) {\n\t                    var tMsw;\n\t                    var tLsw;\n\n\t                    // Shortcuts\n\t                    var lane = state[laneIndex];\n\t                    var laneMsw = lane.high;\n\t                    var laneLsw = lane.low;\n\t                    var rhoOffset = RHO_OFFSETS[laneIndex];\n\n\t                    // Rotate lanes\n\t                    if (rhoOffset < 32) {\n\t                        tMsw = (laneMsw << rhoOffset) | (laneLsw >>> (32 - rhoOffset));\n\t                        tLsw = (laneLsw << rhoOffset) | (laneMsw >>> (32 - rhoOffset));\n\t                    } else /* if (rhoOffset >= 32) */ {\n\t                        tMsw = (laneLsw << (rhoOffset - 32)) | (laneMsw >>> (64 - rhoOffset));\n\t                        tLsw = (laneMsw << (rhoOffset - 32)) | (laneLsw >>> (64 - rhoOffset));\n\t                    }\n\n\t                    // Transpose lanes\n\t                    var TPiLane = T[PI_INDEXES[laneIndex]];\n\t                    TPiLane.high = tMsw;\n\t                    TPiLane.low  = tLsw;\n\t                }\n\n\t                // Rho pi at x = y = 0\n\t                var T0 = T[0];\n\t                var state0 = state[0];\n\t                T0.high = state0.high;\n\t                T0.low  = state0.low;\n\n\t                // Chi\n\t                for (var x = 0; x < 5; x++) {\n\t                    for (var y = 0; y < 5; y++) {\n\t                        // Shortcuts\n\t                        var laneIndex = x + 5 * y;\n\t                        var lane = state[laneIndex];\n\t                        var TLane = T[laneIndex];\n\t                        var Tx1Lane = T[((x + 1) % 5) + 5 * y];\n\t                        var Tx2Lane = T[((x + 2) % 5) + 5 * y];\n\n\t                        // Mix rows\n\t                        lane.high = TLane.high ^ (~Tx1Lane.high & Tx2Lane.high);\n\t                        lane.low  = TLane.low  ^ (~Tx1Lane.low  & Tx2Lane.low);\n\t                    }\n\t                }\n\n\t                // Iota\n\t                var lane = state[0];\n\t                var roundConstant = ROUND_CONSTANTS[round];\n\t                lane.high ^= roundConstant.high;\n\t                lane.low  ^= roundConstant.low;\n\t            }\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\t            var blockSizeBits = this.blockSize * 32;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x1 << (24 - nBitsLeft % 32);\n\t            dataWords[((Math.ceil((nBitsLeft + 1) / blockSizeBits) * blockSizeBits) >>> 5) - 1] |= 0x80;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var state = this._state;\n\t            var outputLengthBytes = this.cfg.outputLength / 8;\n\t            var outputLengthLanes = outputLengthBytes / 8;\n\n\t            // Squeeze\n\t            var hashWords = [];\n\t            for (var i = 0; i < outputLengthLanes; i++) {\n\t                // Shortcuts\n\t                var lane = state[i];\n\t                var laneMsw = lane.high;\n\t                var laneLsw = lane.low;\n\n\t                // Swap endian\n\t                laneMsw = (\n\t                    (((laneMsw << 8)  | (laneMsw >>> 24)) & 0x00ff00ff) |\n\t                    (((laneMsw << 24) | (laneMsw >>> 8))  & 0xff00ff00)\n\t                );\n\t                laneLsw = (\n\t                    (((laneLsw << 8)  | (laneLsw >>> 24)) & 0x00ff00ff) |\n\t                    (((laneLsw << 24) | (laneLsw >>> 8))  & 0xff00ff00)\n\t                );\n\n\t                // Squeeze state to retrieve hash\n\t                hashWords.push(laneLsw);\n\t                hashWords.push(laneMsw);\n\t            }\n\n\t            // Return final computed hash\n\t            return new WordArray.init(hashWords, outputLengthBytes);\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\n\t            var state = clone._state = this._state.slice(0);\n\t            for (var i = 0; i < 25; i++) {\n\t                state[i] = state[i].clone();\n\t            }\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA3('message');\n\t     *     var hash = CryptoJS.SHA3(wordArray);\n\t     */\n\t    C.SHA3 = Hasher._createHelper(SHA3);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA3(message, key);\n\t     */\n\t    C.HmacSHA3 = Hasher._createHmacHelper(SHA3);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA3;\n\n}));", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/** @preserve\n\t(c) 2012 by CÃ©dric Mesnil. All rights reserved.\n\n\tRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n\t    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n\t    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t*/\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var _zl = WordArray.create([\n\t        0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,\n\t        7,  4, 13,  1, 10,  6, 15,  3, 12,  0,  9,  5,  2, 14, 11,  8,\n\t        3, 10, 14,  4,  9, 15,  8,  1,  2,  7,  0,  6, 13, 11,  5, 12,\n\t        1,  9, 11, 10,  0,  8, 12,  4, 13,  3,  7, 15, 14,  5,  6,  2,\n\t        4,  0,  5,  9,  7, 12,  2, 10, 14,  1,  3,  8, 11,  6, 15, 13]);\n\t    var _zr = WordArray.create([\n\t        5, 14,  7,  0,  9,  2, 11,  4, 13,  6, 15,  8,  1, 10,  3, 12,\n\t        6, 11,  3,  7,  0, 13,  5, 10, 14, 15,  8, 12,  4,  9,  1,  2,\n\t        15,  5,  1,  3,  7, 14,  6,  9, 11,  8, 12,  2, 10,  0,  4, 13,\n\t        8,  6,  4,  1,  3, 11, 15,  0,  5, 12,  2, 13,  9,  7, 10, 14,\n\t        12, 15, 10,  4,  1,  5,  8,  7,  6,  2, 13, 14,  0,  3,  9, 11]);\n\t    var _sl = WordArray.create([\n\t         11, 14, 15, 12,  5,  8,  7,  9, 11, 13, 14, 15,  6,  7,  9,  8,\n\t        7, 6,   8, 13, 11,  9,  7, 15,  7, 12, 15,  9, 11,  7, 13, 12,\n\t        11, 13,  6,  7, 14,  9, 13, 15, 14,  8, 13,  6,  5, 12,  7,  5,\n\t          11, 12, 14, 15, 14, 15,  9,  8,  9, 14,  5,  6,  8,  6,  5, 12,\n\t        9, 15,  5, 11,  6,  8, 13, 12,  5, 12, 13, 14, 11,  8,  5,  6 ]);\n\t    var _sr = WordArray.create([\n\t        8,  9,  9, 11, 13, 15, 15,  5,  7,  7,  8, 11, 14, 14, 12,  6,\n\t        9, 13, 15,  7, 12,  8,  9, 11,  7,  7, 12,  7,  6, 15, 13, 11,\n\t        9,  7, 15, 11,  8,  6,  6, 14, 12, 13,  5, 14, 13, 13,  7,  5,\n\t        15,  5,  8, 11, 14, 14,  6, 14,  6,  9, 12,  9, 12,  5, 15,  8,\n\t        8,  5, 12,  9, 12,  5, 14,  6,  8, 13,  6,  5, 15, 13, 11, 11 ]);\n\n\t    var _hl =  WordArray.create([ 0x00000000, 0x5A827999, 0x6ED9EBA1, 0x8F1BBCDC, 0xA953FD4E]);\n\t    var _hr =  WordArray.create([ 0x50A28BE6, 0x5C4DD124, 0x6D703EF3, 0x7A6D76E9, 0x00000000]);\n\n\t    /**\n\t     * RIPEMD160 hash algorithm.\n\t     */\n\t    var RIPEMD160 = C_algo.RIPEMD160 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash  = WordArray.create([0x67452301, 0xEFCDAB89, 0x98BADCFE, 0x10325476, 0xC3D2E1F0]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                // Swap\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\t            // Shortcut\n\t            var H  = this._hash.words;\n\t            var hl = _hl.words;\n\t            var hr = _hr.words;\n\t            var zl = _zl.words;\n\t            var zr = _zr.words;\n\t            var sl = _sl.words;\n\t            var sr = _sr.words;\n\n\t            // Working variables\n\t            var al, bl, cl, dl, el;\n\t            var ar, br, cr, dr, er;\n\n\t            ar = al = H[0];\n\t            br = bl = H[1];\n\t            cr = cl = H[2];\n\t            dr = dl = H[3];\n\t            er = el = H[4];\n\t            // Computation\n\t            var t;\n\t            for (var i = 0; i < 80; i += 1) {\n\t                t = (al +  M[offset+zl[i]])|0;\n\t                if (i<16){\n\t\t            t +=  f1(bl,cl,dl) + hl[0];\n\t                } else if (i<32) {\n\t\t            t +=  f2(bl,cl,dl) + hl[1];\n\t                } else if (i<48) {\n\t\t            t +=  f3(bl,cl,dl) + hl[2];\n\t                } else if (i<64) {\n\t\t            t +=  f4(bl,cl,dl) + hl[3];\n\t                } else {// if (i<80) {\n\t\t            t +=  f5(bl,cl,dl) + hl[4];\n\t                }\n\t                t = t|0;\n\t                t =  rotl(t,sl[i]);\n\t                t = (t+el)|0;\n\t                al = el;\n\t                el = dl;\n\t                dl = rotl(cl, 10);\n\t                cl = bl;\n\t                bl = t;\n\n\t                t = (ar + M[offset+zr[i]])|0;\n\t                if (i<16){\n\t\t            t +=  f5(br,cr,dr) + hr[0];\n\t                } else if (i<32) {\n\t\t            t +=  f4(br,cr,dr) + hr[1];\n\t                } else if (i<48) {\n\t\t            t +=  f3(br,cr,dr) + hr[2];\n\t                } else if (i<64) {\n\t\t            t +=  f2(br,cr,dr) + hr[3];\n\t                } else {// if (i<80) {\n\t\t            t +=  f1(br,cr,dr) + hr[4];\n\t                }\n\t                t = t|0;\n\t                t =  rotl(t,sr[i]) ;\n\t                t = (t+er)|0;\n\t                ar = er;\n\t                er = dr;\n\t                dr = rotl(cr, 10);\n\t                cr = br;\n\t                br = t;\n\t            }\n\t            // Intermediate hash value\n\t            t    = (H[1] + cl + dr)|0;\n\t            H[1] = (H[2] + dl + er)|0;\n\t            H[2] = (H[3] + el + ar)|0;\n\t            H[3] = (H[4] + al + br)|0;\n\t            H[4] = (H[0] + bl + cr)|0;\n\t            H[0] =  t;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotal << 8)  | (nBitsTotal >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotal << 24) | (nBitsTotal >>> 8))  & 0xff00ff00)\n\t            );\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 5; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                // Swap\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\n\t    function f1(x, y, z) {\n\t        return ((x) ^ (y) ^ (z));\n\n\t    }\n\n\t    function f2(x, y, z) {\n\t        return (((x)&(y)) | ((~x)&(z)));\n\t    }\n\n\t    function f3(x, y, z) {\n\t        return (((x) | (~(y))) ^ (z));\n\t    }\n\n\t    function f4(x, y, z) {\n\t        return (((x) & (z)) | ((y)&(~(z))));\n\t    }\n\n\t    function f5(x, y, z) {\n\t        return ((x) ^ ((y) |(~(z))));\n\n\t    }\n\n\t    function rotl(x,n) {\n\t        return (x<<n) | (x>>>(32-n));\n\t    }\n\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.RIPEMD160('message');\n\t     *     var hash = CryptoJS.RIPEMD160(wordArray);\n\t     */\n\t    C.RIPEMD160 = Hasher._createHelper(RIPEMD160);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacRIPEMD160(message, key);\n\t     */\n\t    C.HmacRIPEMD160 = Hasher._createHmacHelper(RIPEMD160);\n\t}(Math));\n\n\n\treturn CryptoJS.RIPEMD160;\n\n}));", ";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha256\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha256\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_algo = C.algo;\n\t    var SHA256 = C_algo.SHA256;\n\t    var HMAC = C_algo.HMAC;\n\n\t    /**\n\t     * Password-Based Key Derivation Function 2 algorithm.\n\t     */\n\t    var PBKDF2 = C_algo.PBKDF2 = Base.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)\n\t         * @property {Hasher} hasher The hasher to use. Default: SHA256\n\t         * @property {number} iterations The number of iterations to perform. Default: 250000\n\t         */\n\t        cfg: Base.extend({\n\t            keySize: 128/32,\n\t            hasher: SHA256,\n\t            iterations: 250000\n\t        }),\n\n\t        /**\n\t         * Initializes a newly created key derivation function.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for the derivation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create();\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8 });\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8, iterations: 1000 });\n\t         */\n\t        init: function (cfg) {\n\t            this.cfg = this.cfg.extend(cfg);\n\t        },\n\n\t        /**\n\t         * Computes the Password-Based Key Derivation Function 2.\n\t         *\n\t         * @param {WordArray|string} password The password.\n\t         * @param {WordArray|string} salt A salt.\n\t         *\n\t         * @return {WordArray} The derived key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var key = kdf.compute(password, salt);\n\t         */\n\t        compute: function (password, salt) {\n\t            // Shortcut\n\t            var cfg = this.cfg;\n\n\t            // Init HMAC\n\t            var hmac = HMAC.create(cfg.hasher, password);\n\n\t            // Initial values\n\t            var derivedKey = WordArray.create();\n\t            var blockIndex = WordArray.create([0x00000001]);\n\n\t            // Shortcuts\n\t            var derivedKeyWords = derivedKey.words;\n\t            var blockIndexWords = blockIndex.words;\n\t            var keySize = cfg.keySize;\n\t            var iterations = cfg.iterations;\n\n\t            // Generate key\n\t            while (derivedKeyWords.length < keySize) {\n\t                var block = hmac.update(salt).finalize(blockIndex);\n\t                hmac.reset();\n\n\t                // Shortcuts\n\t                var blockWords = block.words;\n\t                var blockWordsLength = blockWords.length;\n\n\t                // Iterations\n\t                var intermediate = block;\n\t                for (var i = 1; i < iterations; i++) {\n\t                    intermediate = hmac.finalize(intermediate);\n\t                    hmac.reset();\n\n\t                    // Shortcut\n\t                    var intermediateWords = intermediate.words;\n\n\t                    // XOR intermediate with block\n\t                    for (var j = 0; j < blockWordsLength; j++) {\n\t                        blockWords[j] ^= intermediateWords[j];\n\t                    }\n\t                }\n\n\t                derivedKey.concat(block);\n\t                blockIndexWords[0]++;\n\t            }\n\t            derivedKey.sigBytes = keySize * 4;\n\n\t            return derivedKey;\n\t        }\n\t    });\n\n\t    /**\n\t     * Computes the Password-Based Key Derivation Function 2.\n\t     *\n\t     * @param {WordArray|string} password The password.\n\t     * @param {WordArray|string} salt A salt.\n\t     * @param {Object} cfg (Optional) The configuration options to use for this computation.\n\t     *\n\t     * @return {WordArray} The derived key.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var key = CryptoJS.PBKDF2(password, salt);\n\t     *     var key = CryptoJS.PBKDF2(password, salt, { keySize: 8 });\n\t     *     var key = CryptoJS.PBKDF2(password, salt, { keySize: 8, iterations: 1000 });\n\t     */\n\t    C.PBKDF2 = function (password, salt, cfg) {\n\t        return PBKDF2.create(cfg).compute(password, salt);\n\t    };\n\t}());\n\n\n\treturn CryptoJS.PBKDF2;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha1\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha1\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_algo = C.algo;\n\t    var MD5 = C_algo.MD5;\n\n\t    /**\n\t     * This key derivation function is meant to conform with EVP_BytesToKey.\n\t     * www.openssl.org/docs/crypto/EVP_BytesToKey.html\n\t     */\n\t    var EvpKDF = C_algo.EvpKDF = Base.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)\n\t         * @property {Hasher} hasher The hash algorithm to use. Default: MD5\n\t         * @property {number} iterations The number of iterations to perform. Default: 1\n\t         */\n\t        cfg: Base.extend({\n\t            keySize: 128/32,\n\t            hasher: MD5,\n\t            iterations: 1\n\t        }),\n\n\t        /**\n\t         * Initializes a newly created key derivation function.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for the derivation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create();\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8 });\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8, iterations: 1000 });\n\t         */\n\t        init: function (cfg) {\n\t            this.cfg = this.cfg.extend(cfg);\n\t        },\n\n\t        /**\n\t         * Derives a key from a password.\n\t         *\n\t         * @param {WordArray|string} password The password.\n\t         * @param {WordArray|string} salt A salt.\n\t         *\n\t         * @return {WordArray} The derived key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var key = kdf.compute(password, salt);\n\t         */\n\t        compute: function (password, salt) {\n\t            var block;\n\n\t            // Shortcut\n\t            var cfg = this.cfg;\n\n\t            // Init hasher\n\t            var hasher = cfg.hasher.create();\n\n\t            // Initial values\n\t            var derivedKey = WordArray.create();\n\n\t            // Shortcuts\n\t            var derivedKeyWords = derivedKey.words;\n\t            var keySize = cfg.keySize;\n\t            var iterations = cfg.iterations;\n\n\t            // Generate key\n\t            while (derivedKeyWords.length < keySize) {\n\t                if (block) {\n\t                    hasher.update(block);\n\t                }\n\t                block = hasher.update(password).finalize(salt);\n\t                hasher.reset();\n\n\t                // Iterations\n\t                for (var i = 1; i < iterations; i++) {\n\t                    block = hasher.finalize(block);\n\t                    hasher.reset();\n\t                }\n\n\t                derivedKey.concat(block);\n\t            }\n\t            derivedKey.sigBytes = keySize * 4;\n\n\t            return derivedKey;\n\t        }\n\t    });\n\n\t    /**\n\t     * Derives a key from a password.\n\t     *\n\t     * @param {WordArray|string} password The password.\n\t     * @param {WordArray|string} salt A salt.\n\t     * @param {Object} cfg (Optional) The configuration options to use for this computation.\n\t     *\n\t     * @return {WordArray} The derived key.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var key = CryptoJS.EvpKDF(password, salt);\n\t     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8 });\n\t     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8, iterations: 1000 });\n\t     */\n\t    C.EvpKDF = function (password, salt, cfg) {\n\t        return EvpKDF.create(cfg).compute(password, salt);\n\t    };\n\t}());\n\n\n\treturn CryptoJS.EvpKDF;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./evpkdf\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./evpkdf\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Cipher core components.\n\t */\n\tCryptoJS.lib.Cipher || (function (undefined) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var WordArray = C_lib.WordArray;\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var Base64 = C_enc.Base64;\n\t    var C_algo = C.algo;\n\t    var EvpKDF = C_algo.EvpKDF;\n\n\t    /**\n\t     * Abstract base cipher template.\n\t     *\n\t     * @property {number} keySize This cipher's key size. Default: 4 (128 bits)\n\t     * @property {number} ivSize This cipher's IV size. Default: 4 (128 bits)\n\t     * @property {number} _ENC_XFORM_MODE A constant representing encryption mode.\n\t     * @property {number} _DEC_XFORM_MODE A constant representing decryption mode.\n\t     */\n\t    var Cipher = C_lib.Cipher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {WordArray} iv The IV to use for this operation.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Creates this cipher in encryption mode.\n\t         *\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {Cipher} A cipher instance.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipher = CryptoJS.algo.AES.createEncryptor(keyWordArray, { iv: ivWordArray });\n\t         */\n\t        createEncryptor: function (key, cfg) {\n\t            return this.create(this._ENC_XFORM_MODE, key, cfg);\n\t        },\n\n\t        /**\n\t         * Creates this cipher in decryption mode.\n\t         *\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {Cipher} A cipher instance.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipher = CryptoJS.algo.AES.createDecryptor(keyWordArray, { iv: ivWordArray });\n\t         */\n\t        createDecryptor: function (key, cfg) {\n\t            return this.create(this._DEC_XFORM_MODE, key, cfg);\n\t        },\n\n\t        /**\n\t         * Initializes a newly created cipher.\n\t         *\n\t         * @param {number} xformMode Either the encryption or decryption transormation mode constant.\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipher = CryptoJS.algo.AES.create(CryptoJS.algo.AES._ENC_XFORM_MODE, keyWordArray, { iv: ivWordArray });\n\t         */\n\t        init: function (xformMode, key, cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Store transform mode and key\n\t            this._xformMode = xformMode;\n\t            this._key = key;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this cipher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     cipher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-cipher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Adds data to be encrypted or decrypted.\n\t         *\n\t         * @param {WordArray|string} dataUpdate The data to encrypt or decrypt.\n\t         *\n\t         * @return {WordArray} The data after processing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var encrypted = cipher.process('data');\n\t         *     var encrypted = cipher.process(wordArray);\n\t         */\n\t        process: function (dataUpdate) {\n\t            // Append\n\t            this._append(dataUpdate);\n\n\t            // Process available blocks\n\t            return this._process();\n\t        },\n\n\t        /**\n\t         * Finalizes the encryption or decryption process.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} dataUpdate The final data to encrypt or decrypt.\n\t         *\n\t         * @return {WordArray} The data after final processing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var encrypted = cipher.finalize();\n\t         *     var encrypted = cipher.finalize('data');\n\t         *     var encrypted = cipher.finalize(wordArray);\n\t         */\n\t        finalize: function (dataUpdate) {\n\t            // Final data update\n\t            if (dataUpdate) {\n\t                this._append(dataUpdate);\n\t            }\n\n\t            // Perform concrete-cipher logic\n\t            var finalProcessedData = this._doFinalize();\n\n\t            return finalProcessedData;\n\t        },\n\n\t        keySize: 128/32,\n\n\t        ivSize: 128/32,\n\n\t        _ENC_XFORM_MODE: 1,\n\n\t        _DEC_XFORM_MODE: 2,\n\n\t        /**\n\t         * Creates shortcut functions to a cipher's object interface.\n\t         *\n\t         * @param {Cipher} cipher The cipher to create a helper for.\n\t         *\n\t         * @return {Object} An object with encrypt and decrypt shortcut functions.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var AES = CryptoJS.lib.Cipher._createHelper(CryptoJS.algo.AES);\n\t         */\n\t        _createHelper: (function () {\n\t            function selectCipherStrategy(key) {\n\t                if (typeof key == 'string') {\n\t                    return PasswordBasedCipher;\n\t                } else {\n\t                    return SerializableCipher;\n\t                }\n\t            }\n\n\t            return function (cipher) {\n\t                return {\n\t                    encrypt: function (message, key, cfg) {\n\t                        return selectCipherStrategy(key).encrypt(cipher, message, key, cfg);\n\t                    },\n\n\t                    decrypt: function (ciphertext, key, cfg) {\n\t                        return selectCipherStrategy(key).decrypt(cipher, ciphertext, key, cfg);\n\t                    }\n\t                };\n\t            };\n\t        }())\n\t    });\n\n\t    /**\n\t     * Abstract base stream cipher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 1 (32 bits)\n\t     */\n\t    var StreamCipher = C_lib.StreamCipher = Cipher.extend({\n\t        _doFinalize: function () {\n\t            // Process partial blocks\n\t            var finalProcessedBlocks = this._process(!!'flush');\n\n\t            return finalProcessedBlocks;\n\t        },\n\n\t        blockSize: 1\n\t    });\n\n\t    /**\n\t     * Mode namespace.\n\t     */\n\t    var C_mode = C.mode = {};\n\n\t    /**\n\t     * Abstract base block cipher mode template.\n\t     */\n\t    var BlockCipherMode = C_lib.BlockCipherMode = Base.extend({\n\t        /**\n\t         * Creates this mode for encryption.\n\t         *\n\t         * @param {Cipher} cipher A block cipher instance.\n\t         * @param {Array} iv The IV words.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var mode = CryptoJS.mode.CBC.createEncryptor(cipher, iv.words);\n\t         */\n\t        createEncryptor: function (cipher, iv) {\n\t            return this.Encryptor.create(cipher, iv);\n\t        },\n\n\t        /**\n\t         * Creates this mode for decryption.\n\t         *\n\t         * @param {Cipher} cipher A block cipher instance.\n\t         * @param {Array} iv The IV words.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var mode = CryptoJS.mode.CBC.createDecryptor(cipher, iv.words);\n\t         */\n\t        createDecryptor: function (cipher, iv) {\n\t            return this.Decryptor.create(cipher, iv);\n\t        },\n\n\t        /**\n\t         * Initializes a newly created mode.\n\t         *\n\t         * @param {Cipher} cipher A block cipher instance.\n\t         * @param {Array} iv The IV words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var mode = CryptoJS.mode.CBC.Encryptor.create(cipher, iv.words);\n\t         */\n\t        init: function (cipher, iv) {\n\t            this._cipher = cipher;\n\t            this._iv = iv;\n\t        }\n\t    });\n\n\t    /**\n\t     * Cipher Block Chaining mode.\n\t     */\n\t    var CBC = C_mode.CBC = (function () {\n\t        /**\n\t         * Abstract base CBC mode.\n\t         */\n\t        var CBC = BlockCipherMode.extend();\n\n\t        /**\n\t         * CBC encryptor.\n\t         */\n\t        CBC.Encryptor = CBC.extend({\n\t            /**\n\t             * Processes the data block at offset.\n\t             *\n\t             * @param {Array} words The data words to operate on.\n\t             * @param {number} offset The offset where the block starts.\n\t             *\n\t             * @example\n\t             *\n\t             *     mode.processBlock(data.words, offset);\n\t             */\n\t            processBlock: function (words, offset) {\n\t                // Shortcuts\n\t                var cipher = this._cipher;\n\t                var blockSize = cipher.blockSize;\n\n\t                // XOR and encrypt\n\t                xorBlock.call(this, words, offset, blockSize);\n\t                cipher.encryptBlock(words, offset);\n\n\t                // Remember this block to use with next block\n\t                this._prevBlock = words.slice(offset, offset + blockSize);\n\t            }\n\t        });\n\n\t        /**\n\t         * CBC decryptor.\n\t         */\n\t        CBC.Decryptor = CBC.extend({\n\t            /**\n\t             * Processes the data block at offset.\n\t             *\n\t             * @param {Array} words The data words to operate on.\n\t             * @param {number} offset The offset where the block starts.\n\t             *\n\t             * @example\n\t             *\n\t             *     mode.processBlock(data.words, offset);\n\t             */\n\t            processBlock: function (words, offset) {\n\t                // Shortcuts\n\t                var cipher = this._cipher;\n\t                var blockSize = cipher.blockSize;\n\n\t                // Remember this block to use with next block\n\t                var thisBlock = words.slice(offset, offset + blockSize);\n\n\t                // Decrypt and XOR\n\t                cipher.decryptBlock(words, offset);\n\t                xorBlock.call(this, words, offset, blockSize);\n\n\t                // This block becomes the previous block\n\t                this._prevBlock = thisBlock;\n\t            }\n\t        });\n\n\t        function xorBlock(words, offset, blockSize) {\n\t            var block;\n\n\t            // Shortcut\n\t            var iv = this._iv;\n\n\t            // Choose mixing block\n\t            if (iv) {\n\t                block = iv;\n\n\t                // Remove IV for subsequent blocks\n\t                this._iv = undefined;\n\t            } else {\n\t                block = this._prevBlock;\n\t            }\n\n\t            // XOR blocks\n\t            for (var i = 0; i < blockSize; i++) {\n\t                words[offset + i] ^= block[i];\n\t            }\n\t        }\n\n\t        return CBC;\n\t    }());\n\n\t    /**\n\t     * Padding namespace.\n\t     */\n\t    var C_pad = C.pad = {};\n\n\t    /**\n\t     * PKCS #5/7 padding strategy.\n\t     */\n\t    var Pkcs7 = C_pad.Pkcs7 = {\n\t        /**\n\t         * Pads data using the algorithm defined in PKCS #5/7.\n\t         *\n\t         * @param {WordArray} data The data to pad.\n\t         * @param {number} blockSize The multiple that the data should be padded to.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     CryptoJS.pad.Pkcs7.pad(wordArray, 4);\n\t         */\n\t        pad: function (data, blockSize) {\n\t            // Shortcut\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count padding bytes\n\t            var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;\n\n\t            // Create padding word\n\t            var paddingWord = (nPaddingBytes << 24) | (nPaddingBytes << 16) | (nPaddingBytes << 8) | nPaddingBytes;\n\n\t            // Create padding\n\t            var paddingWords = [];\n\t            for (var i = 0; i < nPaddingBytes; i += 4) {\n\t                paddingWords.push(paddingWord);\n\t            }\n\t            var padding = WordArray.create(paddingWords, nPaddingBytes);\n\n\t            // Add padding\n\t            data.concat(padding);\n\t        },\n\n\t        /**\n\t         * Unpads data that had been padded using the algorithm defined in PKCS #5/7.\n\t         *\n\t         * @param {WordArray} data The data to unpad.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     CryptoJS.pad.Pkcs7.unpad(wordArray);\n\t         */\n\t        unpad: function (data) {\n\t            // Get number of padding bytes from last byte\n\t            var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\n\n\t            // Remove padding\n\t            data.sigBytes -= nPaddingBytes;\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract base block cipher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 4 (128 bits)\n\t     */\n\t    var BlockCipher = C_lib.BlockCipher = Cipher.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {Mode} mode The block mode to use. Default: CBC\n\t         * @property {Padding} padding The padding strategy to use. Default: Pkcs7\n\t         */\n\t        cfg: Cipher.cfg.extend({\n\t            mode: CBC,\n\t            padding: Pkcs7\n\t        }),\n\n\t        reset: function () {\n\t            var modeCreator;\n\n\t            // Reset cipher\n\t            Cipher.reset.call(this);\n\n\t            // Shortcuts\n\t            var cfg = this.cfg;\n\t            var iv = cfg.iv;\n\t            var mode = cfg.mode;\n\n\t            // Reset block mode\n\t            if (this._xformMode == this._ENC_XFORM_MODE) {\n\t                modeCreator = mode.createEncryptor;\n\t            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {\n\t                modeCreator = mode.createDecryptor;\n\t                // Keep at least one block in the buffer for unpadding\n\t                this._minBufferSize = 1;\n\t            }\n\n\t            if (this._mode && this._mode.__creator == modeCreator) {\n\t                this._mode.init(this, iv && iv.words);\n\t            } else {\n\t                this._mode = modeCreator.call(mode, this, iv && iv.words);\n\t                this._mode.__creator = modeCreator;\n\t            }\n\t        },\n\n\t        _doProcessBlock: function (words, offset) {\n\t            this._mode.processBlock(words, offset);\n\t        },\n\n\t        _doFinalize: function () {\n\t            var finalProcessedBlocks;\n\n\t            // Shortcut\n\t            var padding = this.cfg.padding;\n\n\t            // Finalize\n\t            if (this._xformMode == this._ENC_XFORM_MODE) {\n\t                // Pad data\n\t                padding.pad(this._data, this.blockSize);\n\n\t                // Process final blocks\n\t                finalProcessedBlocks = this._process(!!'flush');\n\t            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {\n\t                // Process final blocks\n\t                finalProcessedBlocks = this._process(!!'flush');\n\n\t                // Unpad data\n\t                padding.unpad(finalProcessedBlocks);\n\t            }\n\n\t            return finalProcessedBlocks;\n\t        },\n\n\t        blockSize: 128/32\n\t    });\n\n\t    /**\n\t     * A collection of cipher parameters.\n\t     *\n\t     * @property {WordArray} ciphertext The raw ciphertext.\n\t     * @property {WordArray} key The key to this ciphertext.\n\t     * @property {WordArray} iv The IV used in the ciphering operation.\n\t     * @property {WordArray} salt The salt used with a key derivation function.\n\t     * @property {Cipher} algorithm The cipher algorithm.\n\t     * @property {Mode} mode The block mode used in the ciphering operation.\n\t     * @property {Padding} padding The padding scheme used in the ciphering operation.\n\t     * @property {number} blockSize The block size of the cipher.\n\t     * @property {Format} formatter The default formatting strategy to convert this cipher params object to a string.\n\t     */\n\t    var CipherParams = C_lib.CipherParams = Base.extend({\n\t        /**\n\t         * Initializes a newly created cipher params object.\n\t         *\n\t         * @param {Object} cipherParams An object with any of the possible cipher parameters.\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipherParams = CryptoJS.lib.CipherParams.create({\n\t         *         ciphertext: ciphertextWordArray,\n\t         *         key: keyWordArray,\n\t         *         iv: ivWordArray,\n\t         *         salt: saltWordArray,\n\t         *         algorithm: CryptoJS.algo.AES,\n\t         *         mode: CryptoJS.mode.CBC,\n\t         *         padding: CryptoJS.pad.PKCS7,\n\t         *         blockSize: 4,\n\t         *         formatter: CryptoJS.format.OpenSSL\n\t         *     });\n\t         */\n\t        init: function (cipherParams) {\n\t            this.mixIn(cipherParams);\n\t        },\n\n\t        /**\n\t         * Converts this cipher params object to a string.\n\t         *\n\t         * @param {Format} formatter (Optional) The formatting strategy to use.\n\t         *\n\t         * @return {string} The stringified cipher params.\n\t         *\n\t         * @throws Error If neither the formatter nor the default formatter is set.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = cipherParams + '';\n\t         *     var string = cipherParams.toString();\n\t         *     var string = cipherParams.toString(CryptoJS.format.OpenSSL);\n\t         */\n\t        toString: function (formatter) {\n\t            return (formatter || this.formatter).stringify(this);\n\t        }\n\t    });\n\n\t    /**\n\t     * Format namespace.\n\t     */\n\t    var C_format = C.format = {};\n\n\t    /**\n\t     * OpenSSL formatting strategy.\n\t     */\n\t    var OpenSSLFormatter = C_format.OpenSSL = {\n\t        /**\n\t         * Converts a cipher params object to an OpenSSL-compatible string.\n\t         *\n\t         * @param {CipherParams} cipherParams The cipher params object.\n\t         *\n\t         * @return {string} The OpenSSL-compatible string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var openSSLString = CryptoJS.format.OpenSSL.stringify(cipherParams);\n\t         */\n\t        stringify: function (cipherParams) {\n\t            var wordArray;\n\n\t            // Shortcuts\n\t            var ciphertext = cipherParams.ciphertext;\n\t            var salt = cipherParams.salt;\n\n\t            // Format\n\t            if (salt) {\n\t                wordArray = WordArray.create([0x53616c74, 0x65645f5f]).concat(salt).concat(ciphertext);\n\t            } else {\n\t                wordArray = ciphertext;\n\t            }\n\n\t            return wordArray.toString(Base64);\n\t        },\n\n\t        /**\n\t         * Converts an OpenSSL-compatible string to a cipher params object.\n\t         *\n\t         * @param {string} openSSLStr The OpenSSL-compatible string.\n\t         *\n\t         * @return {CipherParams} The cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipherParams = CryptoJS.format.OpenSSL.parse(openSSLString);\n\t         */\n\t        parse: function (openSSLStr) {\n\t            var salt;\n\n\t            // Parse base64\n\t            var ciphertext = Base64.parse(openSSLStr);\n\n\t            // Shortcut\n\t            var ciphertextWords = ciphertext.words;\n\n\t            // Test for salt\n\t            if (ciphertextWords[0] == 0x53616c74 && ciphertextWords[1] == 0x65645f5f) {\n\t                // Extract salt\n\t                salt = WordArray.create(ciphertextWords.slice(2, 4));\n\n\t                // Remove salt from ciphertext\n\t                ciphertextWords.splice(0, 4);\n\t                ciphertext.sigBytes -= 16;\n\t            }\n\n\t            return CipherParams.create({ ciphertext: ciphertext, salt: salt });\n\t        }\n\t    };\n\n\t    /**\n\t     * A cipher wrapper that returns ciphertext as a serializable cipher params object.\n\t     */\n\t    var SerializableCipher = C_lib.SerializableCipher = Base.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {Formatter} format The formatting strategy to convert cipher param objects to and from a string. Default: OpenSSL\n\t         */\n\t        cfg: Base.extend({\n\t            format: OpenSSLFormatter\n\t        }),\n\n\t        /**\n\t         * Encrypts a message.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {WordArray|string} message The message to encrypt.\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {CipherParams} A cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key);\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv });\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv, format: CryptoJS.format.OpenSSL });\n\t         */\n\t        encrypt: function (cipher, message, key, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Encrypt\n\t            var encryptor = cipher.createEncryptor(key, cfg);\n\t            var ciphertext = encryptor.finalize(message);\n\n\t            // Shortcut\n\t            var cipherCfg = encryptor.cfg;\n\n\t            // Create and return serializable cipher params\n\t            return CipherParams.create({\n\t                ciphertext: ciphertext,\n\t                key: key,\n\t                iv: cipherCfg.iv,\n\t                algorithm: cipher,\n\t                mode: cipherCfg.mode,\n\t                padding: cipherCfg.padding,\n\t                blockSize: cipher.blockSize,\n\t                formatter: cfg.format\n\t            });\n\t        },\n\n\t        /**\n\t         * Decrypts serialized ciphertext.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {WordArray} The plaintext.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, key, { iv: iv, format: CryptoJS.format.OpenSSL });\n\t         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, key, { iv: iv, format: CryptoJS.format.OpenSSL });\n\t         */\n\t        decrypt: function (cipher, ciphertext, key, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Convert string to CipherParams\n\t            ciphertext = this._parse(ciphertext, cfg.format);\n\n\t            // Decrypt\n\t            var plaintext = cipher.createDecryptor(key, cfg).finalize(ciphertext.ciphertext);\n\n\t            return plaintext;\n\t        },\n\n\t        /**\n\t         * Converts serialized ciphertext to CipherParams,\n\t         * else assumed CipherParams already and returns ciphertext unchanged.\n\t         *\n\t         * @param {CipherParams|string} ciphertext The ciphertext.\n\t         * @param {Formatter} format The formatting strategy to use to parse serialized ciphertext.\n\t         *\n\t         * @return {CipherParams} The unserialized ciphertext.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher._parse(ciphertextStringOrParams, format);\n\t         */\n\t        _parse: function (ciphertext, format) {\n\t            if (typeof ciphertext == 'string') {\n\t                return format.parse(ciphertext, this);\n\t            } else {\n\t                return ciphertext;\n\t            }\n\t        }\n\t    });\n\n\t    /**\n\t     * Key derivation function namespace.\n\t     */\n\t    var C_kdf = C.kdf = {};\n\n\t    /**\n\t     * OpenSSL key derivation function.\n\t     */\n\t    var OpenSSLKdf = C_kdf.OpenSSL = {\n\t        /**\n\t         * Derives a key and IV from a password.\n\t         *\n\t         * @param {string} password The password to derive from.\n\t         * @param {number} keySize The size in words of the key to generate.\n\t         * @param {number} ivSize The size in words of the IV to generate.\n\t         * @param {WordArray|string} salt (Optional) A 64-bit salt to use. If omitted, a salt will be generated randomly.\n\t         *\n\t         * @return {CipherParams} A cipher params object with the key, IV, and salt.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32);\n\t         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32, 'saltsalt');\n\t         */\n\t        execute: function (password, keySize, ivSize, salt, hasher) {\n\t            // Generate random salt\n\t            if (!salt) {\n\t                salt = WordArray.random(64/8);\n\t            }\n\n\t            // Derive key and IV\n\t            if (!hasher) {\n\t                var key = EvpKDF.create({ keySize: keySize + ivSize }).compute(password, salt);\n\t            } else {\n\t                var key = EvpKDF.create({ keySize: keySize + ivSize, hasher: hasher }).compute(password, salt);\n\t            }\n\n\n\t            // Separate key and IV\n\t            var iv = WordArray.create(key.words.slice(keySize), ivSize * 4);\n\t            key.sigBytes = keySize * 4;\n\n\t            // Return params\n\t            return CipherParams.create({ key: key, iv: iv, salt: salt });\n\t        }\n\t    };\n\n\t    /**\n\t     * A serializable cipher wrapper that derives the key from a password,\n\t     * and returns ciphertext as a serializable cipher params object.\n\t     */\n\t    var PasswordBasedCipher = C_lib.PasswordBasedCipher = SerializableCipher.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {KDF} kdf The key derivation function to use to generate a key and IV from a password. Default: OpenSSL\n\t         */\n\t        cfg: SerializableCipher.cfg.extend({\n\t            kdf: OpenSSLKdf\n\t        }),\n\n\t        /**\n\t         * Encrypts a message using a password.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {WordArray|string} message The message to encrypt.\n\t         * @param {string} password The password.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {CipherParams} A cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password');\n\t         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password', { format: CryptoJS.format.OpenSSL });\n\t         */\n\t        encrypt: function (cipher, message, password, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Derive key and other params\n\t            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize, cfg.salt, cfg.hasher);\n\n\t            // Add IV to config\n\t            cfg.iv = derivedParams.iv;\n\n\t            // Encrypt\n\t            var ciphertext = SerializableCipher.encrypt.call(this, cipher, message, derivedParams.key, cfg);\n\n\t            // Mix in derived params\n\t            ciphertext.mixIn(derivedParams);\n\n\t            return ciphertext;\n\t        },\n\n\t        /**\n\t         * Decrypts serialized ciphertext using a password.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.\n\t         * @param {string} password The password.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {WordArray} The plaintext.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, 'password', { format: CryptoJS.format.OpenSSL });\n\t         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, 'password', { format: CryptoJS.format.OpenSSL });\n\t         */\n\t        decrypt: function (cipher, ciphertext, password, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Convert string to CipherParams\n\t            ciphertext = this._parse(ciphertext, cfg.format);\n\n\t            // Derive key and other params\n\t            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize, ciphertext.salt, cfg.hasher);\n\n\t            // Add IV to config\n\t            cfg.iv = derivedParams.iv;\n\n\t            // Decrypt\n\t            var plaintext = SerializableCipher.decrypt.call(this, cipher, ciphertext, derivedParams.key, cfg);\n\n\t            return plaintext;\n\t        }\n\t    });\n\t}());\n\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Cipher Feedback block mode.\n\t */\n\tCryptoJS.mode.CFB = (function () {\n\t    var CFB = CryptoJS.lib.BlockCipherMode.extend();\n\n\t    CFB.Encryptor = CFB.extend({\n\t        processBlock: function (words, offset) {\n\t            // Shortcuts\n\t            var cipher = this._cipher;\n\t            var blockSize = cipher.blockSize;\n\n\t            generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\n\n\t            // Remember this block to use with next block\n\t            this._prevBlock = words.slice(offset, offset + blockSize);\n\t        }\n\t    });\n\n\t    CFB.Decryptor = CFB.extend({\n\t        processBlock: function (words, offset) {\n\t            // Shortcuts\n\t            var cipher = this._cipher;\n\t            var blockSize = cipher.blockSize;\n\n\t            // Remember this block to use with next block\n\t            var thisBlock = words.slice(offset, offset + blockSize);\n\n\t            generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\n\n\t            // This block becomes the previous block\n\t            this._prevBlock = thisBlock;\n\t        }\n\t    });\n\n\t    function generateKeystreamAndEncrypt(words, offset, blockSize, cipher) {\n\t        var keystream;\n\n\t        // Shortcut\n\t        var iv = this._iv;\n\n\t        // Generate keystream\n\t        if (iv) {\n\t            keystream = iv.slice(0);\n\n\t            // Remove IV for subsequent blocks\n\t            this._iv = undefined;\n\t        } else {\n\t            keystream = this._prevBlock;\n\t        }\n\t        cipher.encryptBlock(keystream, 0);\n\n\t        // Encrypt\n\t        for (var i = 0; i < blockSize; i++) {\n\t            words[offset + i] ^= keystream[i];\n\t        }\n\t    }\n\n\t    return CFB;\n\t}());\n\n\n\treturn CryptoJS.mode.CFB;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Counter block mode.\n\t */\n\tCryptoJS.mode.CTR = (function () {\n\t    var CTR = CryptoJS.lib.BlockCipherMode.extend();\n\n\t    var Encryptor = CTR.Encryptor = CTR.extend({\n\t        processBlock: function (words, offset) {\n\t            // Shortcuts\n\t            var cipher = this._cipher\n\t            var blockSize = cipher.blockSize;\n\t            var iv = this._iv;\n\t            var counter = this._counter;\n\n\t            // Generate keystream\n\t            if (iv) {\n\t                counter = this._counter = iv.slice(0);\n\n\t                // Remove IV for subsequent blocks\n\t                this._iv = undefined;\n\t            }\n\t            var keystream = counter.slice(0);\n\t            cipher.encryptBlock(keystream, 0);\n\n\t            // Increment counter\n\t            counter[blockSize - 1] = (counter[blockSize - 1] + 1) | 0\n\n\t            // Encrypt\n\t            for (var i = 0; i < blockSize; i++) {\n\t                words[offset + i] ^= keystream[i];\n\t            }\n\t        }\n\t    });\n\n\t    CTR.Decryptor = Encryptor;\n\n\t    return CTR;\n\t}());\n\n\n\treturn CryptoJS.mode.CTR;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/** @preserve\n\t * Counter block mode compatible with  Dr Brian Gladman fileenc.c\n\t * derived from CryptoJS.mode.CTR\n\t * Jan Hruby jhruby.web@gmail.com\n\t */\n\tCryptoJS.mode.CTRGladman = (function () {\n\t    var CTRGladman = CryptoJS.lib.BlockCipherMode.extend();\n\n\t\tfunction incWord(word)\n\t\t{\n\t\t\tif (((word >> 24) & 0xff) === 0xff) { //overflow\n\t\t\tvar b1 = (word >> 16)&0xff;\n\t\t\tvar b2 = (word >> 8)&0xff;\n\t\t\tvar b3 = word & 0xff;\n\n\t\t\tif (b1 === 0xff) // overflow b1\n\t\t\t{\n\t\t\tb1 = 0;\n\t\t\tif (b2 === 0xff)\n\t\t\t{\n\t\t\t\tb2 = 0;\n\t\t\t\tif (b3 === 0xff)\n\t\t\t\t{\n\t\t\t\t\tb3 = 0;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t++b3;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t++b2;\n\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t++b1;\n\t\t\t}\n\n\t\t\tword = 0;\n\t\t\tword += (b1 << 16);\n\t\t\tword += (b2 << 8);\n\t\t\tword += b3;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\tword += (0x01 << 24);\n\t\t\t}\n\t\t\treturn word;\n\t\t}\n\n\t\tfunction incCounter(counter)\n\t\t{\n\t\t\tif ((counter[0] = incWord(counter[0])) === 0)\n\t\t\t{\n\t\t\t\t// encr_data in fileenc.c from  Dr Brian Gladman's counts only with DWORD j < 8\n\t\t\t\tcounter[1] = incWord(counter[1]);\n\t\t\t}\n\t\t\treturn counter;\n\t\t}\n\n\t    var Encryptor = CTRGladman.Encryptor = CTRGladman.extend({\n\t        processBlock: function (words, offset) {\n\t            // Shortcuts\n\t            var cipher = this._cipher\n\t            var blockSize = cipher.blockSize;\n\t            var iv = this._iv;\n\t            var counter = this._counter;\n\n\t            // Generate keystream\n\t            if (iv) {\n\t                counter = this._counter = iv.slice(0);\n\n\t                // Remove IV for subsequent blocks\n\t                this._iv = undefined;\n\t            }\n\n\t\t\t\tincCounter(counter);\n\n\t\t\t\tvar keystream = counter.slice(0);\n\t            cipher.encryptBlock(keystream, 0);\n\n\t            // Encrypt\n\t            for (var i = 0; i < blockSize; i++) {\n\t                words[offset + i] ^= keystream[i];\n\t            }\n\t        }\n\t    });\n\n\t    CTRGladman.Decryptor = Encryptor;\n\n\t    return CTRGladman;\n\t}());\n\n\n\n\n\treturn CryptoJS.mode.CTRGladman;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Output Feedback block mode.\n\t */\n\tCryptoJS.mode.OFB = (function () {\n\t    var OFB = CryptoJS.lib.BlockCipherMode.extend();\n\n\t    var Encryptor = OFB.Encryptor = OFB.extend({\n\t        processBlock: function (words, offset) {\n\t            // Shortcuts\n\t            var cipher = this._cipher\n\t            var blockSize = cipher.blockSize;\n\t            var iv = this._iv;\n\t            var keystream = this._keystream;\n\n\t            // Generate keystream\n\t            if (iv) {\n\t                keystream = this._keystream = iv.slice(0);\n\n\t                // Remove IV for subsequent blocks\n\t                this._iv = undefined;\n\t            }\n\t            cipher.encryptBlock(keystream, 0);\n\n\t            // Encrypt\n\t            for (var i = 0; i < blockSize; i++) {\n\t                words[offset + i] ^= keystream[i];\n\t            }\n\t        }\n\t    });\n\n\t    OFB.Decryptor = Encryptor;\n\n\t    return OFB;\n\t}());\n\n\n\treturn CryptoJS.mode.OFB;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Electronic Codebook block mode.\n\t */\n\tCryptoJS.mode.ECB = (function () {\n\t    var ECB = CryptoJS.lib.BlockCipherMode.extend();\n\n\t    ECB.Encryptor = ECB.extend({\n\t        processBlock: function (words, offset) {\n\t            this._cipher.encryptBlock(words, offset);\n\t        }\n\t    });\n\n\t    ECB.Decryptor = ECB.extend({\n\t        processBlock: function (words, offset) {\n\t            this._cipher.decryptBlock(words, offset);\n\t        }\n\t    });\n\n\t    return ECB;\n\t}());\n\n\n\treturn CryptoJS.mode.ECB;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * ANSI X.923 padding strategy.\n\t */\n\tCryptoJS.pad.AnsiX923 = {\n\t    pad: function (data, blockSize) {\n\t        // Shortcuts\n\t        var dataSigBytes = data.sigBytes;\n\t        var blockSizeBytes = blockSize * 4;\n\n\t        // Count padding bytes\n\t        var nPaddingBytes = blockSizeBytes - dataSigBytes % blockSizeBytes;\n\n\t        // Compute last byte position\n\t        var lastBytePos = dataSigBytes + nPaddingBytes - 1;\n\n\t        // Pad\n\t        data.clamp();\n\t        data.words[lastBytePos >>> 2] |= nPaddingBytes << (24 - (lastBytePos % 4) * 8);\n\t        data.sigBytes += nPaddingBytes;\n\t    },\n\n\t    unpad: function (data) {\n\t        // Get number of padding bytes from last byte\n\t        var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\n\n\t        // Remove padding\n\t        data.sigBytes -= nPaddingBytes;\n\t    }\n\t};\n\n\n\treturn CryptoJS.pad.Ansix923;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * ISO 10126 padding strategy.\n\t */\n\tCryptoJS.pad.Iso10126 = {\n\t    pad: function (data, blockSize) {\n\t        // Shortcut\n\t        var blockSizeBytes = blockSize * 4;\n\n\t        // Count padding bytes\n\t        var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;\n\n\t        // Pad\n\t        data.concat(CryptoJS.lib.WordArray.random(nPaddingBytes - 1)).\n\t             concat(CryptoJS.lib.WordArray.create([nPaddingBytes << 24], 1));\n\t    },\n\n\t    unpad: function (data) {\n\t        // Get number of padding bytes from last byte\n\t        var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\n\n\t        // Remove padding\n\t        data.sigBytes -= nPaddingBytes;\n\t    }\n\t};\n\n\n\treturn CryptoJS.pad.Iso10126;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * ISO/IEC 9797-1 Padding Method 2.\n\t */\n\tCryptoJS.pad.Iso97971 = {\n\t    pad: function (data, blockSize) {\n\t        // Add 0x80 byte\n\t        data.concat(CryptoJS.lib.WordArray.create([0x80000000], 1));\n\n\t        // Zero pad the rest\n\t        CryptoJS.pad.ZeroPadding.pad(data, blockSize);\n\t    },\n\n\t    unpad: function (data) {\n\t        // Remove zero padding\n\t        CryptoJS.pad.ZeroPadding.unpad(data);\n\n\t        // Remove one more byte -- the 0x80 byte\n\t        data.sigBytes--;\n\t    }\n\t};\n\n\n\treturn CryptoJS.pad.Iso97971;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Zero padding strategy.\n\t */\n\tCryptoJS.pad.ZeroPadding = {\n\t    pad: function (data, blockSize) {\n\t        // Shortcut\n\t        var blockSizeBytes = blockSize * 4;\n\n\t        // Pad\n\t        data.clamp();\n\t        data.sigBytes += blockSizeBytes - ((data.sigBytes % blockSizeBytes) || blockSizeBytes);\n\t    },\n\n\t    unpad: function (data) {\n\t        // Shortcut\n\t        var dataWords = data.words;\n\n\t        // Unpad\n\t        var i = data.sigBytes - 1;\n\t        for (var i = data.sigBytes - 1; i >= 0; i--) {\n\t            if (((dataWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff)) {\n\t                data.sigBytes = i + 1;\n\t                break;\n\t            }\n\t        }\n\t    }\n\t};\n\n\n\treturn CryptoJS.pad.ZeroPadding;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * A noop padding strategy.\n\t */\n\tCryptoJS.pad.NoPadding = {\n\t    pad: function () {\n\t    },\n\n\t    unpad: function () {\n\t    }\n\t};\n\n\n\treturn CryptoJS.pad.NoPadding;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (undefined) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var CipherParams = C_lib.CipherParams;\n\t    var C_enc = C.enc;\n\t    var Hex = C_enc.Hex;\n\t    var C_format = C.format;\n\n\t    var HexFormatter = C_format.Hex = {\n\t        /**\n\t         * Converts the ciphertext of a cipher params object to a hexadecimally encoded string.\n\t         *\n\t         * @param {CipherParams} cipherParams The cipher params object.\n\t         *\n\t         * @return {string} The hexadecimally encoded string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.format.Hex.stringify(cipherParams);\n\t         */\n\t        stringify: function (cipherParams) {\n\t            return cipherParams.ciphertext.toString(Hex);\n\t        },\n\n\t        /**\n\t         * Converts a hexadecimally encoded ciphertext string to a cipher params object.\n\t         *\n\t         * @param {string} input The hexadecimally encoded string.\n\t         *\n\t         * @return {CipherParams} The cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipherParams = CryptoJS.format.Hex.parse(hexString);\n\t         */\n\t        parse: function (input) {\n\t            var ciphertext = Hex.parse(input);\n\t            return CipherParams.create({ ciphertext: ciphertext });\n\t        }\n\t    };\n\t}());\n\n\n\treturn CryptoJS.format.Hex;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var BlockCipher = C_lib.BlockCipher;\n\t    var C_algo = C.algo;\n\n\t    // Lookup tables\n\t    var SBOX = [];\n\t    var INV_SBOX = [];\n\t    var SUB_MIX_0 = [];\n\t    var SUB_MIX_1 = [];\n\t    var SUB_MIX_2 = [];\n\t    var SUB_MIX_3 = [];\n\t    var INV_SUB_MIX_0 = [];\n\t    var INV_SUB_MIX_1 = [];\n\t    var INV_SUB_MIX_2 = [];\n\t    var INV_SUB_MIX_3 = [];\n\n\t    // Compute lookup tables\n\t    (function () {\n\t        // Compute double table\n\t        var d = [];\n\t        for (var i = 0; i < 256; i++) {\n\t            if (i < 128) {\n\t                d[i] = i << 1;\n\t            } else {\n\t                d[i] = (i << 1) ^ 0x11b;\n\t            }\n\t        }\n\n\t        // Walk GF(2^8)\n\t        var x = 0;\n\t        var xi = 0;\n\t        for (var i = 0; i < 256; i++) {\n\t            // Compute sbox\n\t            var sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4);\n\t            sx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63;\n\t            SBOX[x] = sx;\n\t            INV_SBOX[sx] = x;\n\n\t            // Compute multiplication\n\t            var x2 = d[x];\n\t            var x4 = d[x2];\n\t            var x8 = d[x4];\n\n\t            // Compute sub bytes, mix columns tables\n\t            var t = (d[sx] * 0x101) ^ (sx * 0x1010100);\n\t            SUB_MIX_0[x] = (t << 24) | (t >>> 8);\n\t            SUB_MIX_1[x] = (t << 16) | (t >>> 16);\n\t            SUB_MIX_2[x] = (t << 8)  | (t >>> 24);\n\t            SUB_MIX_3[x] = t;\n\n\t            // Compute inv sub bytes, inv mix columns tables\n\t            var t = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100);\n\t            INV_SUB_MIX_0[sx] = (t << 24) | (t >>> 8);\n\t            INV_SUB_MIX_1[sx] = (t << 16) | (t >>> 16);\n\t            INV_SUB_MIX_2[sx] = (t << 8)  | (t >>> 24);\n\t            INV_SUB_MIX_3[sx] = t;\n\n\t            // Compute next counter\n\t            if (!x) {\n\t                x = xi = 1;\n\t            } else {\n\t                x = x2 ^ d[d[d[x8 ^ x2]]];\n\t                xi ^= d[d[xi]];\n\t            }\n\t        }\n\t    }());\n\n\t    // Precomputed Rcon lookup\n\t    var RCON = [0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36];\n\n\t    /**\n\t     * AES block cipher algorithm.\n\t     */\n\t    var AES = C_algo.AES = BlockCipher.extend({\n\t        _doReset: function () {\n\t            var t;\n\n\t            // Skip reset of nRounds has been set before and key did not change\n\t            if (this._nRounds && this._keyPriorReset === this._key) {\n\t                return;\n\t            }\n\n\t            // Shortcuts\n\t            var key = this._keyPriorReset = this._key;\n\t            var keyWords = key.words;\n\t            var keySize = key.sigBytes / 4;\n\n\t            // Compute number of rounds\n\t            var nRounds = this._nRounds = keySize + 6;\n\n\t            // Compute number of key schedule rows\n\t            var ksRows = (nRounds + 1) * 4;\n\n\t            // Compute key schedule\n\t            var keySchedule = this._keySchedule = [];\n\t            for (var ksRow = 0; ksRow < ksRows; ksRow++) {\n\t                if (ksRow < keySize) {\n\t                    keySchedule[ksRow] = keyWords[ksRow];\n\t                } else {\n\t                    t = keySchedule[ksRow - 1];\n\n\t                    if (!(ksRow % keySize)) {\n\t                        // Rot word\n\t                        t = (t << 8) | (t >>> 24);\n\n\t                        // Sub word\n\t                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];\n\n\t                        // Mix Rcon\n\t                        t ^= RCON[(ksRow / keySize) | 0] << 24;\n\t                    } else if (keySize > 6 && ksRow % keySize == 4) {\n\t                        // Sub word\n\t                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];\n\t                    }\n\n\t                    keySchedule[ksRow] = keySchedule[ksRow - keySize] ^ t;\n\t                }\n\t            }\n\n\t            // Compute inv key schedule\n\t            var invKeySchedule = this._invKeySchedule = [];\n\t            for (var invKsRow = 0; invKsRow < ksRows; invKsRow++) {\n\t                var ksRow = ksRows - invKsRow;\n\n\t                if (invKsRow % 4) {\n\t                    var t = keySchedule[ksRow];\n\t                } else {\n\t                    var t = keySchedule[ksRow - 4];\n\t                }\n\n\t                if (invKsRow < 4 || ksRow <= 4) {\n\t                    invKeySchedule[invKsRow] = t;\n\t                } else {\n\t                    invKeySchedule[invKsRow] = INV_SUB_MIX_0[SBOX[t >>> 24]] ^ INV_SUB_MIX_1[SBOX[(t >>> 16) & 0xff]] ^\n\t                                               INV_SUB_MIX_2[SBOX[(t >>> 8) & 0xff]] ^ INV_SUB_MIX_3[SBOX[t & 0xff]];\n\t                }\n\t            }\n\t        },\n\n\t        encryptBlock: function (M, offset) {\n\t            this._doCryptBlock(M, offset, this._keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX);\n\t        },\n\n\t        decryptBlock: function (M, offset) {\n\t            // Swap 2nd and 4th rows\n\t            var t = M[offset + 1];\n\t            M[offset + 1] = M[offset + 3];\n\t            M[offset + 3] = t;\n\n\t            this._doCryptBlock(M, offset, this._invKeySchedule, INV_SUB_MIX_0, INV_SUB_MIX_1, INV_SUB_MIX_2, INV_SUB_MIX_3, INV_SBOX);\n\n\t            // Inv swap 2nd and 4th rows\n\t            var t = M[offset + 1];\n\t            M[offset + 1] = M[offset + 3];\n\t            M[offset + 3] = t;\n\t        },\n\n\t        _doCryptBlock: function (M, offset, keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX) {\n\t            // Shortcut\n\t            var nRounds = this._nRounds;\n\n\t            // Get input, add round key\n\t            var s0 = M[offset]     ^ keySchedule[0];\n\t            var s1 = M[offset + 1] ^ keySchedule[1];\n\t            var s2 = M[offset + 2] ^ keySchedule[2];\n\t            var s3 = M[offset + 3] ^ keySchedule[3];\n\n\t            // Key schedule row counter\n\t            var ksRow = 4;\n\n\t            // Rounds\n\t            for (var round = 1; round < nRounds; round++) {\n\t                // Shift rows, sub bytes, mix columns, add round key\n\t                var t0 = SUB_MIX_0[s0 >>> 24] ^ SUB_MIX_1[(s1 >>> 16) & 0xff] ^ SUB_MIX_2[(s2 >>> 8) & 0xff] ^ SUB_MIX_3[s3 & 0xff] ^ keySchedule[ksRow++];\n\t                var t1 = SUB_MIX_0[s1 >>> 24] ^ SUB_MIX_1[(s2 >>> 16) & 0xff] ^ SUB_MIX_2[(s3 >>> 8) & 0xff] ^ SUB_MIX_3[s0 & 0xff] ^ keySchedule[ksRow++];\n\t                var t2 = SUB_MIX_0[s2 >>> 24] ^ SUB_MIX_1[(s3 >>> 16) & 0xff] ^ SUB_MIX_2[(s0 >>> 8) & 0xff] ^ SUB_MIX_3[s1 & 0xff] ^ keySchedule[ksRow++];\n\t                var t3 = SUB_MIX_0[s3 >>> 24] ^ SUB_MIX_1[(s0 >>> 16) & 0xff] ^ SUB_MIX_2[(s1 >>> 8) & 0xff] ^ SUB_MIX_3[s2 & 0xff] ^ keySchedule[ksRow++];\n\n\t                // Update state\n\t                s0 = t0;\n\t                s1 = t1;\n\t                s2 = t2;\n\t                s3 = t3;\n\t            }\n\n\t            // Shift rows, sub bytes, add round key\n\t            var t0 = ((SBOX[s0 >>> 24] << 24) | (SBOX[(s1 >>> 16) & 0xff] << 16) | (SBOX[(s2 >>> 8) & 0xff] << 8) | SBOX[s3 & 0xff]) ^ keySchedule[ksRow++];\n\t            var t1 = ((SBOX[s1 >>> 24] << 24) | (SBOX[(s2 >>> 16) & 0xff] << 16) | (SBOX[(s3 >>> 8) & 0xff] << 8) | SBOX[s0 & 0xff]) ^ keySchedule[ksRow++];\n\t            var t2 = ((SBOX[s2 >>> 24] << 24) | (SBOX[(s3 >>> 16) & 0xff] << 16) | (SBOX[(s0 >>> 8) & 0xff] << 8) | SBOX[s1 & 0xff]) ^ keySchedule[ksRow++];\n\t            var t3 = ((SBOX[s3 >>> 24] << 24) | (SBOX[(s0 >>> 16) & 0xff] << 16) | (SBOX[(s1 >>> 8) & 0xff] << 8) | SBOX[s2 & 0xff]) ^ keySchedule[ksRow++];\n\n\t            // Set output\n\t            M[offset]     = t0;\n\t            M[offset + 1] = t1;\n\t            M[offset + 2] = t2;\n\t            M[offset + 3] = t3;\n\t        },\n\n\t        keySize: 256/32\n\t    });\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.AES.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.AES.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.AES = BlockCipher._createHelper(AES);\n\t}());\n\n\n\treturn CryptoJS.AES;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var BlockCipher = C_lib.BlockCipher;\n\t    var C_algo = C.algo;\n\n\t    // Permuted Choice 1 constants\n\t    var PC1 = [\n\t        57, 49, 41, 33, 25, 17, 9,  1,\n\t        58, 50, 42, 34, 26, 18, 10, 2,\n\t        59, 51, 43, 35, 27, 19, 11, 3,\n\t        60, 52, 44, 36, 63, 55, 47, 39,\n\t        31, 23, 15, 7,  62, 54, 46, 38,\n\t        30, 22, 14, 6,  61, 53, 45, 37,\n\t        29, 21, 13, 5,  28, 20, 12, 4\n\t    ];\n\n\t    // Permuted Choice 2 constants\n\t    var PC2 = [\n\t        14, 17, 11, 24, 1,  5,\n\t        3,  28, 15, 6,  21, 10,\n\t        23, 19, 12, 4,  26, 8,\n\t        16, 7,  27, 20, 13, 2,\n\t        41, 52, 31, 37, 47, 55,\n\t        30, 40, 51, 45, 33, 48,\n\t        44, 49, 39, 56, 34, 53,\n\t        46, 42, 50, 36, 29, 32\n\t    ];\n\n\t    // Cumulative bit shift constants\n\t    var BIT_SHIFTS = [1,  2,  4,  6,  8,  10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28];\n\n\t    // SBOXes and round permutation constants\n\t    var SBOX_P = [\n\t        {\n\t            0x0: 0x808200,\n\t            0x10000000: 0x8000,\n\t            0x20000000: 0x808002,\n\t            0x30000000: 0x2,\n\t            0x40000000: 0x200,\n\t            0x50000000: 0x808202,\n\t            0x60000000: 0x800202,\n\t            0x70000000: 0x800000,\n\t            0x80000000: 0x202,\n\t            0x90000000: 0x800200,\n\t            0xa0000000: 0x8200,\n\t            0xb0000000: 0x808000,\n\t            0xc0000000: 0x8002,\n\t            0xd0000000: 0x800002,\n\t            0xe0000000: 0x0,\n\t            0xf0000000: 0x8202,\n\t            0x8000000: 0x0,\n\t            0x18000000: 0x808202,\n\t            0x28000000: 0x8202,\n\t            0x38000000: 0x8000,\n\t            0x48000000: 0x808200,\n\t            0x58000000: 0x200,\n\t            0x68000000: 0x808002,\n\t            0x78000000: 0x2,\n\t            0x88000000: 0x800200,\n\t            0x98000000: 0x8200,\n\t            0xa8000000: 0x808000,\n\t            0xb8000000: 0x800202,\n\t            0xc8000000: 0x800002,\n\t            0xd8000000: 0x8002,\n\t            0xe8000000: 0x202,\n\t            0xf8000000: 0x800000,\n\t            0x1: 0x8000,\n\t            0x10000001: 0x2,\n\t            0x20000001: 0x808200,\n\t            0x30000001: 0x800000,\n\t            0x40000001: 0x808002,\n\t            0x50000001: 0x8200,\n\t            0x60000001: 0x200,\n\t            0x70000001: 0x800202,\n\t            0x80000001: 0x808202,\n\t            0x90000001: 0x808000,\n\t            0xa0000001: 0x800002,\n\t            0xb0000001: 0x8202,\n\t            0xc0000001: 0x202,\n\t            0xd0000001: 0x800200,\n\t            0xe0000001: 0x8002,\n\t            0xf0000001: 0x0,\n\t            0x8000001: 0x808202,\n\t            0x18000001: 0x808000,\n\t            0x28000001: 0x800000,\n\t            0x38000001: 0x200,\n\t            0x48000001: 0x8000,\n\t            0x58000001: 0x800002,\n\t            0x68000001: 0x2,\n\t            0x78000001: 0x8202,\n\t            0x88000001: 0x8002,\n\t            0x98000001: 0x800202,\n\t            0xa8000001: 0x202,\n\t            0xb8000001: 0x808200,\n\t            0xc8000001: 0x800200,\n\t            0xd8000001: 0x0,\n\t            0xe8000001: 0x8200,\n\t            0xf8000001: 0x808002\n\t        },\n\t        {\n\t            0x0: 0x40084010,\n\t            0x1000000: 0x4000,\n\t            0x2000000: 0x80000,\n\t            0x3000000: 0x40080010,\n\t            0x4000000: 0x40000010,\n\t            0x5000000: 0x40084000,\n\t            0x6000000: 0x40004000,\n\t            0x7000000: 0x10,\n\t            0x8000000: 0x84000,\n\t            0x9000000: 0x40004010,\n\t            0xa000000: 0x40000000,\n\t            0xb000000: 0x84010,\n\t            0xc000000: 0x80010,\n\t            0xd000000: 0x0,\n\t            0xe000000: 0x4010,\n\t            0xf000000: 0x40080000,\n\t            0x800000: 0x40004000,\n\t            0x1800000: 0x84010,\n\t            0x2800000: 0x10,\n\t            0x3800000: 0x40004010,\n\t            0x4800000: 0x40084010,\n\t            0x5800000: 0x40000000,\n\t            0x6800000: 0x80000,\n\t            0x7800000: 0x40080010,\n\t            0x8800000: 0x80010,\n\t            0x9800000: 0x0,\n\t            0xa800000: 0x4000,\n\t            0xb800000: 0x40080000,\n\t            0xc800000: 0x40000010,\n\t            0xd800000: 0x84000,\n\t            0xe800000: 0x40084000,\n\t            0xf800000: 0x4010,\n\t            0x10000000: 0x0,\n\t            0x11000000: 0x40080010,\n\t            0x12000000: 0x40004010,\n\t            0x13000000: 0x40084000,\n\t            0x14000000: 0x40080000,\n\t            0x15000000: 0x10,\n\t            0x16000000: 0x84010,\n\t            0x17000000: 0x4000,\n\t            0x18000000: 0x4010,\n\t            0x19000000: 0x80000,\n\t            0x1a000000: 0x80010,\n\t            0x1b000000: 0x40000010,\n\t            0x1c000000: 0x84000,\n\t            0x1d000000: 0x40004000,\n\t            0x1e000000: 0x40000000,\n\t            0x1f000000: 0x40084010,\n\t            0x10800000: 0x84010,\n\t            0x11800000: 0x80000,\n\t            0x12800000: 0x40080000,\n\t            0x13800000: 0x4000,\n\t            0x14800000: 0x40004000,\n\t            0x15800000: 0x40084010,\n\t            0x16800000: 0x10,\n\t            0x17800000: 0x40000000,\n\t            0x18800000: 0x40084000,\n\t            0x19800000: 0x40000010,\n\t            0x1a800000: 0x40004010,\n\t            0x1b800000: 0x80010,\n\t            0x1c800000: 0x0,\n\t            0x1d800000: 0x4010,\n\t            0x1e800000: 0x40080010,\n\t            0x1f800000: 0x84000\n\t        },\n\t        {\n\t            0x0: 0x104,\n\t            0x100000: 0x0,\n\t            0x200000: 0x4000100,\n\t            0x300000: 0x10104,\n\t            0x400000: 0x10004,\n\t            0x500000: 0x4000004,\n\t            0x600000: 0x4010104,\n\t            0x700000: 0x4010000,\n\t            0x800000: 0x4000000,\n\t            0x900000: 0x4010100,\n\t            0xa00000: 0x10100,\n\t            0xb00000: 0x4010004,\n\t            0xc00000: 0x4000104,\n\t            0xd00000: 0x10000,\n\t            0xe00000: 0x4,\n\t            0xf00000: 0x100,\n\t            0x80000: 0x4010100,\n\t            0x180000: 0x4010004,\n\t            0x280000: 0x0,\n\t            0x380000: 0x4000100,\n\t            0x480000: 0x4000004,\n\t            0x580000: 0x10000,\n\t            0x680000: 0x10004,\n\t            0x780000: 0x104,\n\t            0x880000: 0x4,\n\t            0x980000: 0x100,\n\t            0xa80000: 0x4010000,\n\t            0xb80000: 0x10104,\n\t            0xc80000: 0x10100,\n\t            0xd80000: 0x4000104,\n\t            0xe80000: 0x4010104,\n\t            0xf80000: 0x4000000,\n\t            0x1000000: 0x4010100,\n\t            0x1100000: 0x10004,\n\t            0x1200000: 0x10000,\n\t            0x1300000: 0x4000100,\n\t            0x1400000: 0x100,\n\t            0x1500000: 0x4010104,\n\t            0x1600000: 0x4000004,\n\t            0x1700000: 0x0,\n\t            0x1800000: 0x4000104,\n\t            0x1900000: 0x4000000,\n\t            0x1a00000: 0x4,\n\t            0x1b00000: 0x10100,\n\t            0x1c00000: 0x4010000,\n\t            0x1d00000: 0x104,\n\t            0x1e00000: 0x10104,\n\t            0x1f00000: 0x4010004,\n\t            0x1080000: 0x4000000,\n\t            0x1180000: 0x104,\n\t            0x1280000: 0x4010100,\n\t            0x1380000: 0x0,\n\t            0x1480000: 0x10004,\n\t            0x1580000: 0x4000100,\n\t            0x1680000: 0x100,\n\t            0x1780000: 0x4010004,\n\t            0x1880000: 0x10000,\n\t            0x1980000: 0x4010104,\n\t            0x1a80000: 0x10104,\n\t            0x1b80000: 0x4000004,\n\t            0x1c80000: 0x4000104,\n\t            0x1d80000: 0x4010000,\n\t            0x1e80000: 0x4,\n\t            0x1f80000: 0x10100\n\t        },\n\t        {\n\t            0x0: 0x80401000,\n\t            0x10000: 0x80001040,\n\t            0x20000: 0x401040,\n\t            0x30000: 0x80400000,\n\t            0x40000: 0x0,\n\t            0x50000: 0x401000,\n\t            0x60000: 0x80000040,\n\t            0x70000: 0x400040,\n\t            0x80000: 0x80000000,\n\t            0x90000: 0x400000,\n\t            0xa0000: 0x40,\n\t            0xb0000: 0x80001000,\n\t            0xc0000: 0x80400040,\n\t            0xd0000: 0x1040,\n\t            0xe0000: 0x1000,\n\t            0xf0000: 0x80401040,\n\t            0x8000: 0x80001040,\n\t            0x18000: 0x40,\n\t            0x28000: 0x80400040,\n\t            0x38000: 0x80001000,\n\t            0x48000: 0x401000,\n\t            0x58000: 0x80401040,\n\t            0x68000: 0x0,\n\t            0x78000: 0x80400000,\n\t            0x88000: 0x1000,\n\t            0x98000: 0x80401000,\n\t            0xa8000: 0x400000,\n\t            0xb8000: 0x1040,\n\t            0xc8000: 0x80000000,\n\t            0xd8000: 0x400040,\n\t            0xe8000: 0x401040,\n\t            0xf8000: 0x80000040,\n\t            0x100000: 0x400040,\n\t            0x110000: 0x401000,\n\t            0x120000: 0x80000040,\n\t            0x130000: 0x0,\n\t            0x140000: 0x1040,\n\t            0x150000: 0x80400040,\n\t            0x160000: 0x80401000,\n\t            0x170000: 0x80001040,\n\t            0x180000: 0x80401040,\n\t            0x190000: 0x80000000,\n\t            0x1a0000: 0x80400000,\n\t            0x1b0000: 0x401040,\n\t            0x1c0000: 0x80001000,\n\t            0x1d0000: 0x400000,\n\t            0x1e0000: 0x40,\n\t            0x1f0000: 0x1000,\n\t            0x108000: 0x80400000,\n\t            0x118000: 0x80401040,\n\t            0x128000: 0x0,\n\t            0x138000: 0x401000,\n\t            0x148000: 0x400040,\n\t            0x158000: 0x80000000,\n\t            0x168000: 0x80001040,\n\t            0x178000: 0x40,\n\t            0x188000: 0x80000040,\n\t            0x198000: 0x1000,\n\t            0x1a8000: 0x80001000,\n\t            0x1b8000: 0x80400040,\n\t            0x1c8000: 0x1040,\n\t            0x1d8000: 0x80401000,\n\t            0x1e8000: 0x400000,\n\t            0x1f8000: 0x401040\n\t        },\n\t        {\n\t            0x0: 0x80,\n\t            0x1000: 0x1040000,\n\t            0x2000: 0x40000,\n\t            0x3000: 0x20000000,\n\t            0x4000: 0x20040080,\n\t            0x5000: 0x1000080,\n\t            0x6000: 0x21000080,\n\t            0x7000: 0x40080,\n\t            0x8000: 0x1000000,\n\t            0x9000: 0x20040000,\n\t            0xa000: 0x20000080,\n\t            0xb000: 0x21040080,\n\t            0xc000: 0x21040000,\n\t            0xd000: 0x0,\n\t            0xe000: 0x1040080,\n\t            0xf000: 0x21000000,\n\t            0x800: 0x1040080,\n\t            0x1800: 0x21000080,\n\t            0x2800: 0x80,\n\t            0x3800: 0x1040000,\n\t            0x4800: 0x40000,\n\t            0x5800: 0x20040080,\n\t            0x6800: 0x21040000,\n\t            0x7800: 0x20000000,\n\t            0x8800: 0x20040000,\n\t            0x9800: 0x0,\n\t            0xa800: 0x21040080,\n\t            0xb800: 0x1000080,\n\t            0xc800: 0x20000080,\n\t            0xd800: 0x21000000,\n\t            0xe800: 0x1000000,\n\t            0xf800: 0x40080,\n\t            0x10000: 0x40000,\n\t            0x11000: 0x80,\n\t            0x12000: 0x20000000,\n\t            0x13000: 0x21000080,\n\t            0x14000: 0x1000080,\n\t            0x15000: 0x21040000,\n\t            0x16000: 0x20040080,\n\t            0x17000: 0x1000000,\n\t            0x18000: 0x21040080,\n\t            0x19000: 0x21000000,\n\t            0x1a000: 0x1040000,\n\t            0x1b000: 0x20040000,\n\t            0x1c000: 0x40080,\n\t            0x1d000: 0x20000080,\n\t            0x1e000: 0x0,\n\t            0x1f000: 0x1040080,\n\t            0x10800: 0x21000080,\n\t            0x11800: 0x1000000,\n\t            0x12800: 0x1040000,\n\t            0x13800: 0x20040080,\n\t            0x14800: 0x20000000,\n\t            0x15800: 0x1040080,\n\t            0x16800: 0x80,\n\t            0x17800: 0x21040000,\n\t            0x18800: 0x40080,\n\t            0x19800: 0x21040080,\n\t            0x1a800: 0x0,\n\t            0x1b800: 0x21000000,\n\t            0x1c800: 0x1000080,\n\t            0x1d800: 0x40000,\n\t            0x1e800: 0x20040000,\n\t            0x1f800: 0x20000080\n\t        },\n\t        {\n\t            0x0: 0x10000008,\n\t            0x100: 0x2000,\n\t            0x200: 0x10200000,\n\t            0x300: 0x10202008,\n\t            0x400: 0x10002000,\n\t            0x500: 0x200000,\n\t            0x600: 0x200008,\n\t            0x700: 0x10000000,\n\t            0x800: 0x0,\n\t            0x900: 0x10002008,\n\t            0xa00: 0x202000,\n\t            0xb00: 0x8,\n\t            0xc00: 0x10200008,\n\t            0xd00: 0x202008,\n\t            0xe00: 0x2008,\n\t            0xf00: 0x10202000,\n\t            0x80: 0x10200000,\n\t            0x180: 0x10202008,\n\t            0x280: 0x8,\n\t            0x380: 0x200000,\n\t            0x480: 0x202008,\n\t            0x580: 0x10000008,\n\t            0x680: 0x10002000,\n\t            0x780: 0x2008,\n\t            0x880: 0x200008,\n\t            0x980: 0x2000,\n\t            0xa80: 0x10002008,\n\t            0xb80: 0x10200008,\n\t            0xc80: 0x0,\n\t            0xd80: 0x10202000,\n\t            0xe80: 0x202000,\n\t            0xf80: 0x10000000,\n\t            0x1000: 0x10002000,\n\t            0x1100: 0x10200008,\n\t            0x1200: 0x10202008,\n\t            0x1300: 0x2008,\n\t            0x1400: 0x200000,\n\t            0x1500: 0x10000000,\n\t            0x1600: 0x10000008,\n\t            0x1700: 0x202000,\n\t            0x1800: 0x202008,\n\t            0x1900: 0x0,\n\t            0x1a00: 0x8,\n\t            0x1b00: 0x10200000,\n\t            0x1c00: 0x2000,\n\t            0x1d00: 0x10002008,\n\t            0x1e00: 0x10202000,\n\t            0x1f00: 0x200008,\n\t            0x1080: 0x8,\n\t            0x1180: 0x202000,\n\t            0x1280: 0x200000,\n\t            0x1380: 0x10000008,\n\t            0x1480: 0x10002000,\n\t            0x1580: 0x2008,\n\t            0x1680: 0x10202008,\n\t            0x1780: 0x10200000,\n\t            0x1880: 0x10202000,\n\t            0x1980: 0x10200008,\n\t            0x1a80: 0x2000,\n\t            0x1b80: 0x202008,\n\t            0x1c80: 0x200008,\n\t            0x1d80: 0x0,\n\t            0x1e80: 0x10000000,\n\t            0x1f80: 0x10002008\n\t        },\n\t        {\n\t            0x0: 0x100000,\n\t            0x10: 0x2000401,\n\t            0x20: 0x400,\n\t            0x30: 0x100401,\n\t            0x40: 0x2100401,\n\t            0x50: 0x0,\n\t            0x60: 0x1,\n\t            0x70: 0x2100001,\n\t            0x80: 0x2000400,\n\t            0x90: 0x100001,\n\t            0xa0: 0x2000001,\n\t            0xb0: 0x2100400,\n\t            0xc0: 0x2100000,\n\t            0xd0: 0x401,\n\t            0xe0: 0x100400,\n\t            0xf0: 0x2000000,\n\t            0x8: 0x2100001,\n\t            0x18: 0x0,\n\t            0x28: 0x2000401,\n\t            0x38: 0x2100400,\n\t            0x48: 0x100000,\n\t            0x58: 0x2000001,\n\t            0x68: 0x2000000,\n\t            0x78: 0x401,\n\t            0x88: 0x100401,\n\t            0x98: 0x2000400,\n\t            0xa8: 0x2100000,\n\t            0xb8: 0x100001,\n\t            0xc8: 0x400,\n\t            0xd8: 0x2100401,\n\t            0xe8: 0x1,\n\t            0xf8: 0x100400,\n\t            0x100: 0x2000000,\n\t            0x110: 0x100000,\n\t            0x120: 0x2000401,\n\t            0x130: 0x2100001,\n\t            0x140: 0x100001,\n\t            0x150: 0x2000400,\n\t            0x160: 0x2100400,\n\t            0x170: 0x100401,\n\t            0x180: 0x401,\n\t            0x190: 0x2100401,\n\t            0x1a0: 0x100400,\n\t            0x1b0: 0x1,\n\t            0x1c0: 0x0,\n\t            0x1d0: 0x2100000,\n\t            0x1e0: 0x2000001,\n\t            0x1f0: 0x400,\n\t            0x108: 0x100400,\n\t            0x118: 0x2000401,\n\t            0x128: 0x2100001,\n\t            0x138: 0x1,\n\t            0x148: 0x2000000,\n\t            0x158: 0x100000,\n\t            0x168: 0x401,\n\t            0x178: 0x2100400,\n\t            0x188: 0x2000001,\n\t            0x198: 0x2100000,\n\t            0x1a8: 0x0,\n\t            0x1b8: 0x2100401,\n\t            0x1c8: 0x100401,\n\t            0x1d8: 0x400,\n\t            0x1e8: 0x2000400,\n\t            0x1f8: 0x100001\n\t        },\n\t        {\n\t            0x0: 0x8000820,\n\t            0x1: 0x20000,\n\t            0x2: 0x8000000,\n\t            0x3: 0x20,\n\t            0x4: 0x20020,\n\t            0x5: 0x8020820,\n\t            0x6: 0x8020800,\n\t            0x7: 0x800,\n\t            0x8: 0x8020000,\n\t            0x9: 0x8000800,\n\t            0xa: 0x20800,\n\t            0xb: 0x8020020,\n\t            0xc: 0x820,\n\t            0xd: 0x0,\n\t            0xe: 0x8000020,\n\t            0xf: 0x20820,\n\t            0x80000000: 0x800,\n\t            0x80000001: 0x8020820,\n\t            0x80000002: 0x8000820,\n\t            0x80000003: 0x8000000,\n\t            0x80000004: 0x8020000,\n\t            0x80000005: 0x20800,\n\t            0x80000006: 0x20820,\n\t            0x80000007: 0x20,\n\t            0x80000008: 0x8000020,\n\t            0x80000009: 0x820,\n\t            0x8000000a: 0x20020,\n\t            0x8000000b: 0x8020800,\n\t            0x8000000c: 0x0,\n\t            0x8000000d: 0x8020020,\n\t            0x8000000e: 0x8000800,\n\t            0x8000000f: 0x20000,\n\t            0x10: 0x20820,\n\t            0x11: 0x8020800,\n\t            0x12: 0x20,\n\t            0x13: 0x800,\n\t            0x14: 0x8000800,\n\t            0x15: 0x8000020,\n\t            0x16: 0x8020020,\n\t            0x17: 0x20000,\n\t            0x18: 0x0,\n\t            0x19: 0x20020,\n\t            0x1a: 0x8020000,\n\t            0x1b: 0x8000820,\n\t            0x1c: 0x8020820,\n\t            0x1d: 0x20800,\n\t            0x1e: 0x820,\n\t            0x1f: 0x8000000,\n\t            0x80000010: 0x20000,\n\t            0x80000011: 0x800,\n\t            0x80000012: 0x8020020,\n\t            0x80000013: 0x20820,\n\t            0x80000014: 0x20,\n\t            0x80000015: 0x8020000,\n\t            0x80000016: 0x8000000,\n\t            0x80000017: 0x8000820,\n\t            0x80000018: 0x8020820,\n\t            0x80000019: 0x8000020,\n\t            0x8000001a: 0x8000800,\n\t            0x8000001b: 0x0,\n\t            0x8000001c: 0x20800,\n\t            0x8000001d: 0x820,\n\t            0x8000001e: 0x20020,\n\t            0x8000001f: 0x8020800\n\t        }\n\t    ];\n\n\t    // Masks that select the SBOX input\n\t    var SBOX_MASK = [\n\t        0xf8000001, 0x1f800000, 0x01f80000, 0x001f8000,\n\t        0x0001f800, 0x00001f80, 0x000001f8, 0x8000001f\n\t    ];\n\n\t    /**\n\t     * DES block cipher algorithm.\n\t     */\n\t    var DES = C_algo.DES = BlockCipher.extend({\n\t        _doReset: function () {\n\t            // Shortcuts\n\t            var key = this._key;\n\t            var keyWords = key.words;\n\n\t            // Select 56 bits according to PC1\n\t            var keyBits = [];\n\t            for (var i = 0; i < 56; i++) {\n\t                var keyBitPos = PC1[i] - 1;\n\t                keyBits[i] = (keyWords[keyBitPos >>> 5] >>> (31 - keyBitPos % 32)) & 1;\n\t            }\n\n\t            // Assemble 16 subkeys\n\t            var subKeys = this._subKeys = [];\n\t            for (var nSubKey = 0; nSubKey < 16; nSubKey++) {\n\t                // Create subkey\n\t                var subKey = subKeys[nSubKey] = [];\n\n\t                // Shortcut\n\t                var bitShift = BIT_SHIFTS[nSubKey];\n\n\t                // Select 48 bits according to PC2\n\t                for (var i = 0; i < 24; i++) {\n\t                    // Select from the left 28 key bits\n\t                    subKey[(i / 6) | 0] |= keyBits[((PC2[i] - 1) + bitShift) % 28] << (31 - i % 6);\n\n\t                    // Select from the right 28 key bits\n\t                    subKey[4 + ((i / 6) | 0)] |= keyBits[28 + (((PC2[i + 24] - 1) + bitShift) % 28)] << (31 - i % 6);\n\t                }\n\n\t                // Since each subkey is applied to an expanded 32-bit input,\n\t                // the subkey can be broken into 8 values scaled to 32-bits,\n\t                // which allows the key to be used without expansion\n\t                subKey[0] = (subKey[0] << 1) | (subKey[0] >>> 31);\n\t                for (var i = 1; i < 7; i++) {\n\t                    subKey[i] = subKey[i] >>> ((i - 1) * 4 + 3);\n\t                }\n\t                subKey[7] = (subKey[7] << 5) | (subKey[7] >>> 27);\n\t            }\n\n\t            // Compute inverse subkeys\n\t            var invSubKeys = this._invSubKeys = [];\n\t            for (var i = 0; i < 16; i++) {\n\t                invSubKeys[i] = subKeys[15 - i];\n\t            }\n\t        },\n\n\t        encryptBlock: function (M, offset) {\n\t            this._doCryptBlock(M, offset, this._subKeys);\n\t        },\n\n\t        decryptBlock: function (M, offset) {\n\t            this._doCryptBlock(M, offset, this._invSubKeys);\n\t        },\n\n\t        _doCryptBlock: function (M, offset, subKeys) {\n\t            // Get input\n\t            this._lBlock = M[offset];\n\t            this._rBlock = M[offset + 1];\n\n\t            // Initial permutation\n\t            exchangeLR.call(this, 4,  0x0f0f0f0f);\n\t            exchangeLR.call(this, 16, 0x0000ffff);\n\t            exchangeRL.call(this, 2,  0x33333333);\n\t            exchangeRL.call(this, 8,  0x00ff00ff);\n\t            exchangeLR.call(this, 1,  0x55555555);\n\n\t            // Rounds\n\t            for (var round = 0; round < 16; round++) {\n\t                // Shortcuts\n\t                var subKey = subKeys[round];\n\t                var lBlock = this._lBlock;\n\t                var rBlock = this._rBlock;\n\n\t                // Feistel function\n\t                var f = 0;\n\t                for (var i = 0; i < 8; i++) {\n\t                    f |= SBOX_P[i][((rBlock ^ subKey[i]) & SBOX_MASK[i]) >>> 0];\n\t                }\n\t                this._lBlock = rBlock;\n\t                this._rBlock = lBlock ^ f;\n\t            }\n\n\t            // Undo swap from last round\n\t            var t = this._lBlock;\n\t            this._lBlock = this._rBlock;\n\t            this._rBlock = t;\n\n\t            // Final permutation\n\t            exchangeLR.call(this, 1,  0x55555555);\n\t            exchangeRL.call(this, 8,  0x00ff00ff);\n\t            exchangeRL.call(this, 2,  0x33333333);\n\t            exchangeLR.call(this, 16, 0x0000ffff);\n\t            exchangeLR.call(this, 4,  0x0f0f0f0f);\n\n\t            // Set output\n\t            M[offset] = this._lBlock;\n\t            M[offset + 1] = this._rBlock;\n\t        },\n\n\t        keySize: 64/32,\n\n\t        ivSize: 64/32,\n\n\t        blockSize: 64/32\n\t    });\n\n\t    // Swap bits across the left and right words\n\t    function exchangeLR(offset, mask) {\n\t        var t = ((this._lBlock >>> offset) ^ this._rBlock) & mask;\n\t        this._rBlock ^= t;\n\t        this._lBlock ^= t << offset;\n\t    }\n\n\t    function exchangeRL(offset, mask) {\n\t        var t = ((this._rBlock >>> offset) ^ this._lBlock) & mask;\n\t        this._lBlock ^= t;\n\t        this._rBlock ^= t << offset;\n\t    }\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.DES.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.DES.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.DES = BlockCipher._createHelper(DES);\n\n\t    /**\n\t     * Triple-DES block cipher algorithm.\n\t     */\n\t    var TripleDES = C_algo.TripleDES = BlockCipher.extend({\n\t        _doReset: function () {\n\t            // Shortcuts\n\t            var key = this._key;\n\t            var keyWords = key.words;\n\t            // Make sure the key length is valid (64, 128 or >= 192 bit)\n\t            if (keyWords.length !== 2 && keyWords.length !== 4 && keyWords.length < 6) {\n\t                throw new Error('Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.');\n\t            }\n\n\t            // Extend the key according to the keying options defined in 3DES standard\n\t            var key1 = keyWords.slice(0, 2);\n\t            var key2 = keyWords.length < 4 ? keyWords.slice(0, 2) : keyWords.slice(2, 4);\n\t            var key3 = keyWords.length < 6 ? keyWords.slice(0, 2) : keyWords.slice(4, 6);\n\n\t            // Create DES instances\n\t            this._des1 = DES.createEncryptor(WordArray.create(key1));\n\t            this._des2 = DES.createEncryptor(WordArray.create(key2));\n\t            this._des3 = DES.createEncryptor(WordArray.create(key3));\n\t        },\n\n\t        encryptBlock: function (M, offset) {\n\t            this._des1.encryptBlock(M, offset);\n\t            this._des2.decryptBlock(M, offset);\n\t            this._des3.encryptBlock(M, offset);\n\t        },\n\n\t        decryptBlock: function (M, offset) {\n\t            this._des3.decryptBlock(M, offset);\n\t            this._des2.encryptBlock(M, offset);\n\t            this._des1.decryptBlock(M, offset);\n\t        },\n\n\t        keySize: 192/32,\n\n\t        ivSize: 64/32,\n\n\t        blockSize: 64/32\n\t    });\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.TripleDES.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.TripleDES.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.TripleDES = BlockCipher._createHelper(TripleDES);\n\t}());\n\n\n\treturn CryptoJS.TripleDES;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var StreamCipher = C_lib.StreamCipher;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * RC4 stream cipher algorithm.\n\t     */\n\t    var RC4 = C_algo.RC4 = StreamCipher.extend({\n\t        _doReset: function () {\n\t            // Shortcuts\n\t            var key = this._key;\n\t            var keyWords = key.words;\n\t            var keySigBytes = key.sigBytes;\n\n\t            // Init sbox\n\t            var S = this._S = [];\n\t            for (var i = 0; i < 256; i++) {\n\t                S[i] = i;\n\t            }\n\n\t            // Key setup\n\t            for (var i = 0, j = 0; i < 256; i++) {\n\t                var keyByteIndex = i % keySigBytes;\n\t                var keyByte = (keyWords[keyByteIndex >>> 2] >>> (24 - (keyByteIndex % 4) * 8)) & 0xff;\n\n\t                j = (j + S[i] + keyByte) % 256;\n\n\t                // Swap\n\t                var t = S[i];\n\t                S[i] = S[j];\n\t                S[j] = t;\n\t            }\n\n\t            // Counters\n\t            this._i = this._j = 0;\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            M[offset] ^= generateKeystreamWord.call(this);\n\t        },\n\n\t        keySize: 256/32,\n\n\t        ivSize: 0\n\t    });\n\n\t    function generateKeystreamWord() {\n\t        // Shortcuts\n\t        var S = this._S;\n\t        var i = this._i;\n\t        var j = this._j;\n\n\t        // Generate keystream word\n\t        var keystreamWord = 0;\n\t        for (var n = 0; n < 4; n++) {\n\t            i = (i + 1) % 256;\n\t            j = (j + S[i]) % 256;\n\n\t            // Swap\n\t            var t = S[i];\n\t            S[i] = S[j];\n\t            S[j] = t;\n\n\t            keystreamWord |= S[(S[i] + S[j]) % 256] << (24 - n * 8);\n\t        }\n\n\t        // Update counters\n\t        this._i = i;\n\t        this._j = j;\n\n\t        return keystreamWord;\n\t    }\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.RC4.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.RC4.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.RC4 = StreamCipher._createHelper(RC4);\n\n\t    /**\n\t     * Modified RC4 stream cipher algorithm.\n\t     */\n\t    var RC4Drop = C_algo.RC4Drop = RC4.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {number} drop The number of keystream words to drop. Default 192\n\t         */\n\t        cfg: RC4.cfg.extend({\n\t            drop: 192\n\t        }),\n\n\t        _doReset: function () {\n\t            RC4._doReset.call(this);\n\n\t            // Drop\n\t            for (var i = this.cfg.drop; i > 0; i--) {\n\t                generateKeystreamWord.call(this);\n\t            }\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.RC4Drop.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.RC4Drop.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.RC4Drop = StreamCipher._createHelper(RC4Drop);\n\t}());\n\n\n\treturn CryptoJS.RC4;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var StreamCipher = C_lib.StreamCipher;\n\t    var C_algo = C.algo;\n\n\t    // Reusable objects\n\t    var S  = [];\n\t    var C_ = [];\n\t    var G  = [];\n\n\t    /**\n\t     * Rabbit stream cipher algorithm\n\t     */\n\t    var Rabbit = C_algo.Rabbit = StreamCipher.extend({\n\t        _doReset: function () {\n\t            // Shortcuts\n\t            var K = this._key.words;\n\t            var iv = this.cfg.iv;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                K[i] = (((K[i] << 8)  | (K[i] >>> 24)) & 0x00ff00ff) |\n\t                       (((K[i] << 24) | (K[i] >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Generate initial state values\n\t            var X = this._X = [\n\t                K[0], (K[3] << 16) | (K[2] >>> 16),\n\t                K[1], (K[0] << 16) | (K[3] >>> 16),\n\t                K[2], (K[1] << 16) | (K[0] >>> 16),\n\t                K[3], (K[2] << 16) | (K[1] >>> 16)\n\t            ];\n\n\t            // Generate initial counter values\n\t            var C = this._C = [\n\t                (K[2] << 16) | (K[2] >>> 16), (K[0] & 0xffff0000) | (K[1] & 0x0000ffff),\n\t                (K[3] << 16) | (K[3] >>> 16), (K[1] & 0xffff0000) | (K[2] & 0x0000ffff),\n\t                (K[0] << 16) | (K[0] >>> 16), (K[2] & 0xffff0000) | (K[3] & 0x0000ffff),\n\t                (K[1] << 16) | (K[1] >>> 16), (K[3] & 0xffff0000) | (K[0] & 0x0000ffff)\n\t            ];\n\n\t            // Carry bit\n\t            this._b = 0;\n\n\t            // Iterate the system four times\n\t            for (var i = 0; i < 4; i++) {\n\t                nextState.call(this);\n\t            }\n\n\t            // Modify the counters\n\t            for (var i = 0; i < 8; i++) {\n\t                C[i] ^= X[(i + 4) & 7];\n\t            }\n\n\t            // IV setup\n\t            if (iv) {\n\t                // Shortcuts\n\t                var IV = iv.words;\n\t                var IV_0 = IV[0];\n\t                var IV_1 = IV[1];\n\n\t                // Generate four subvectors\n\t                var i0 = (((IV_0 << 8) | (IV_0 >>> 24)) & 0x00ff00ff) | (((IV_0 << 24) | (IV_0 >>> 8)) & 0xff00ff00);\n\t                var i2 = (((IV_1 << 8) | (IV_1 >>> 24)) & 0x00ff00ff) | (((IV_1 << 24) | (IV_1 >>> 8)) & 0xff00ff00);\n\t                var i1 = (i0 >>> 16) | (i2 & 0xffff0000);\n\t                var i3 = (i2 << 16)  | (i0 & 0x0000ffff);\n\n\t                // Modify counter values\n\t                C[0] ^= i0;\n\t                C[1] ^= i1;\n\t                C[2] ^= i2;\n\t                C[3] ^= i3;\n\t                C[4] ^= i0;\n\t                C[5] ^= i1;\n\t                C[6] ^= i2;\n\t                C[7] ^= i3;\n\n\t                // Iterate the system four times\n\t                for (var i = 0; i < 4; i++) {\n\t                    nextState.call(this);\n\t                }\n\t            }\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var X = this._X;\n\n\t            // Iterate the system\n\t            nextState.call(this);\n\n\t            // Generate four keystream words\n\t            S[0] = X[0] ^ (X[5] >>> 16) ^ (X[3] << 16);\n\t            S[1] = X[2] ^ (X[7] >>> 16) ^ (X[5] << 16);\n\t            S[2] = X[4] ^ (X[1] >>> 16) ^ (X[7] << 16);\n\t            S[3] = X[6] ^ (X[3] >>> 16) ^ (X[1] << 16);\n\n\t            for (var i = 0; i < 4; i++) {\n\t                // Swap endian\n\t                S[i] = (((S[i] << 8)  | (S[i] >>> 24)) & 0x00ff00ff) |\n\t                       (((S[i] << 24) | (S[i] >>> 8))  & 0xff00ff00);\n\n\t                // Encrypt\n\t                M[offset + i] ^= S[i];\n\t            }\n\t        },\n\n\t        blockSize: 128/32,\n\n\t        ivSize: 64/32\n\t    });\n\n\t    function nextState() {\n\t        // Shortcuts\n\t        var X = this._X;\n\t        var C = this._C;\n\n\t        // Save old counter values\n\t        for (var i = 0; i < 8; i++) {\n\t            C_[i] = C[i];\n\t        }\n\n\t        // Calculate new counter values\n\t        C[0] = (C[0] + 0x4d34d34d + this._b) | 0;\n\t        C[1] = (C[1] + 0xd34d34d3 + ((C[0] >>> 0) < (C_[0] >>> 0) ? 1 : 0)) | 0;\n\t        C[2] = (C[2] + 0x34d34d34 + ((C[1] >>> 0) < (C_[1] >>> 0) ? 1 : 0)) | 0;\n\t        C[3] = (C[3] + 0x4d34d34d + ((C[2] >>> 0) < (C_[2] >>> 0) ? 1 : 0)) | 0;\n\t        C[4] = (C[4] + 0xd34d34d3 + ((C[3] >>> 0) < (C_[3] >>> 0) ? 1 : 0)) | 0;\n\t        C[5] = (C[5] + 0x34d34d34 + ((C[4] >>> 0) < (C_[4] >>> 0) ? 1 : 0)) | 0;\n\t        C[6] = (C[6] + 0x4d34d34d + ((C[5] >>> 0) < (C_[5] >>> 0) ? 1 : 0)) | 0;\n\t        C[7] = (C[7] + 0xd34d34d3 + ((C[6] >>> 0) < (C_[6] >>> 0) ? 1 : 0)) | 0;\n\t        this._b = (C[7] >>> 0) < (C_[7] >>> 0) ? 1 : 0;\n\n\t        // Calculate the g-values\n\t        for (var i = 0; i < 8; i++) {\n\t            var gx = X[i] + C[i];\n\n\t            // Construct high and low argument for squaring\n\t            var ga = gx & 0xffff;\n\t            var gb = gx >>> 16;\n\n\t            // Calculate high and low result of squaring\n\t            var gh = ((((ga * ga) >>> 17) + ga * gb) >>> 15) + gb * gb;\n\t            var gl = (((gx & 0xffff0000) * gx) | 0) + (((gx & 0x0000ffff) * gx) | 0);\n\n\t            // High XOR low\n\t            G[i] = gh ^ gl;\n\t        }\n\n\t        // Calculate new state values\n\t        X[0] = (G[0] + ((G[7] << 16) | (G[7] >>> 16)) + ((G[6] << 16) | (G[6] >>> 16))) | 0;\n\t        X[1] = (G[1] + ((G[0] << 8)  | (G[0] >>> 24)) + G[7]) | 0;\n\t        X[2] = (G[2] + ((G[1] << 16) | (G[1] >>> 16)) + ((G[0] << 16) | (G[0] >>> 16))) | 0;\n\t        X[3] = (G[3] + ((G[2] << 8)  | (G[2] >>> 24)) + G[1]) | 0;\n\t        X[4] = (G[4] + ((G[3] << 16) | (G[3] >>> 16)) + ((G[2] << 16) | (G[2] >>> 16))) | 0;\n\t        X[5] = (G[5] + ((G[4] << 8)  | (G[4] >>> 24)) + G[3]) | 0;\n\t        X[6] = (G[6] + ((G[5] << 16) | (G[5] >>> 16)) + ((G[4] << 16) | (G[4] >>> 16))) | 0;\n\t        X[7] = (G[7] + ((G[6] << 8)  | (G[6] >>> 24)) + G[5]) | 0;\n\t    }\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.Rabbit.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.Rabbit.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.Rabbit = StreamCipher._createHelper(Rabbit);\n\t}());\n\n\n\treturn CryptoJS.Rabbit;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var StreamCipher = C_lib.StreamCipher;\n\t    var C_algo = C.algo;\n\n\t    // Reusable objects\n\t    var S  = [];\n\t    var C_ = [];\n\t    var G  = [];\n\n\t    /**\n\t     * Rabbit stream cipher algorithm.\n\t     *\n\t     * This is a legacy version that neglected to convert the key to little-endian.\n\t     * This error doesn't affect the cipher's security,\n\t     * but it does affect its compatibility with other implementations.\n\t     */\n\t    var RabbitLegacy = C_algo.RabbitLegacy = StreamCipher.extend({\n\t        _doReset: function () {\n\t            // Shortcuts\n\t            var K = this._key.words;\n\t            var iv = this.cfg.iv;\n\n\t            // Generate initial state values\n\t            var X = this._X = [\n\t                K[0], (K[3] << 16) | (K[2] >>> 16),\n\t                K[1], (K[0] << 16) | (K[3] >>> 16),\n\t                K[2], (K[1] << 16) | (K[0] >>> 16),\n\t                K[3], (K[2] << 16) | (K[1] >>> 16)\n\t            ];\n\n\t            // Generate initial counter values\n\t            var C = this._C = [\n\t                (K[2] << 16) | (K[2] >>> 16), (K[0] & 0xffff0000) | (K[1] & 0x0000ffff),\n\t                (K[3] << 16) | (K[3] >>> 16), (K[1] & 0xffff0000) | (K[2] & 0x0000ffff),\n\t                (K[0] << 16) | (K[0] >>> 16), (K[2] & 0xffff0000) | (K[3] & 0x0000ffff),\n\t                (K[1] << 16) | (K[1] >>> 16), (K[3] & 0xffff0000) | (K[0] & 0x0000ffff)\n\t            ];\n\n\t            // Carry bit\n\t            this._b = 0;\n\n\t            // Iterate the system four times\n\t            for (var i = 0; i < 4; i++) {\n\t                nextState.call(this);\n\t            }\n\n\t            // Modify the counters\n\t            for (var i = 0; i < 8; i++) {\n\t                C[i] ^= X[(i + 4) & 7];\n\t            }\n\n\t            // IV setup\n\t            if (iv) {\n\t                // Shortcuts\n\t                var IV = iv.words;\n\t                var IV_0 = IV[0];\n\t                var IV_1 = IV[1];\n\n\t                // Generate four subvectors\n\t                var i0 = (((IV_0 << 8) | (IV_0 >>> 24)) & 0x00ff00ff) | (((IV_0 << 24) | (IV_0 >>> 8)) & 0xff00ff00);\n\t                var i2 = (((IV_1 << 8) | (IV_1 >>> 24)) & 0x00ff00ff) | (((IV_1 << 24) | (IV_1 >>> 8)) & 0xff00ff00);\n\t                var i1 = (i0 >>> 16) | (i2 & 0xffff0000);\n\t                var i3 = (i2 << 16)  | (i0 & 0x0000ffff);\n\n\t                // Modify counter values\n\t                C[0] ^= i0;\n\t                C[1] ^= i1;\n\t                C[2] ^= i2;\n\t                C[3] ^= i3;\n\t                C[4] ^= i0;\n\t                C[5] ^= i1;\n\t                C[6] ^= i2;\n\t                C[7] ^= i3;\n\n\t                // Iterate the system four times\n\t                for (var i = 0; i < 4; i++) {\n\t                    nextState.call(this);\n\t                }\n\t            }\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var X = this._X;\n\n\t            // Iterate the system\n\t            nextState.call(this);\n\n\t            // Generate four keystream words\n\t            S[0] = X[0] ^ (X[5] >>> 16) ^ (X[3] << 16);\n\t            S[1] = X[2] ^ (X[7] >>> 16) ^ (X[5] << 16);\n\t            S[2] = X[4] ^ (X[1] >>> 16) ^ (X[7] << 16);\n\t            S[3] = X[6] ^ (X[3] >>> 16) ^ (X[1] << 16);\n\n\t            for (var i = 0; i < 4; i++) {\n\t                // Swap endian\n\t                S[i] = (((S[i] << 8)  | (S[i] >>> 24)) & 0x00ff00ff) |\n\t                       (((S[i] << 24) | (S[i] >>> 8))  & 0xff00ff00);\n\n\t                // Encrypt\n\t                M[offset + i] ^= S[i];\n\t            }\n\t        },\n\n\t        blockSize: 128/32,\n\n\t        ivSize: 64/32\n\t    });\n\n\t    function nextState() {\n\t        // Shortcuts\n\t        var X = this._X;\n\t        var C = this._C;\n\n\t        // Save old counter values\n\t        for (var i = 0; i < 8; i++) {\n\t            C_[i] = C[i];\n\t        }\n\n\t        // Calculate new counter values\n\t        C[0] = (C[0] + 0x4d34d34d + this._b) | 0;\n\t        C[1] = (C[1] + 0xd34d34d3 + ((C[0] >>> 0) < (C_[0] >>> 0) ? 1 : 0)) | 0;\n\t        C[2] = (C[2] + 0x34d34d34 + ((C[1] >>> 0) < (C_[1] >>> 0) ? 1 : 0)) | 0;\n\t        C[3] = (C[3] + 0x4d34d34d + ((C[2] >>> 0) < (C_[2] >>> 0) ? 1 : 0)) | 0;\n\t        C[4] = (C[4] + 0xd34d34d3 + ((C[3] >>> 0) < (C_[3] >>> 0) ? 1 : 0)) | 0;\n\t        C[5] = (C[5] + 0x34d34d34 + ((C[4] >>> 0) < (C_[4] >>> 0) ? 1 : 0)) | 0;\n\t        C[6] = (C[6] + 0x4d34d34d + ((C[5] >>> 0) < (C_[5] >>> 0) ? 1 : 0)) | 0;\n\t        C[7] = (C[7] + 0xd34d34d3 + ((C[6] >>> 0) < (C_[6] >>> 0) ? 1 : 0)) | 0;\n\t        this._b = (C[7] >>> 0) < (C_[7] >>> 0) ? 1 : 0;\n\n\t        // Calculate the g-values\n\t        for (var i = 0; i < 8; i++) {\n\t            var gx = X[i] + C[i];\n\n\t            // Construct high and low argument for squaring\n\t            var ga = gx & 0xffff;\n\t            var gb = gx >>> 16;\n\n\t            // Calculate high and low result of squaring\n\t            var gh = ((((ga * ga) >>> 17) + ga * gb) >>> 15) + gb * gb;\n\t            var gl = (((gx & 0xffff0000) * gx) | 0) + (((gx & 0x0000ffff) * gx) | 0);\n\n\t            // High XOR low\n\t            G[i] = gh ^ gl;\n\t        }\n\n\t        // Calculate new state values\n\t        X[0] = (G[0] + ((G[7] << 16) | (G[7] >>> 16)) + ((G[6] << 16) | (G[6] >>> 16))) | 0;\n\t        X[1] = (G[1] + ((G[0] << 8)  | (G[0] >>> 24)) + G[7]) | 0;\n\t        X[2] = (G[2] + ((G[1] << 16) | (G[1] >>> 16)) + ((G[0] << 16) | (G[0] >>> 16))) | 0;\n\t        X[3] = (G[3] + ((G[2] << 8)  | (G[2] >>> 24)) + G[1]) | 0;\n\t        X[4] = (G[4] + ((G[3] << 16) | (G[3] >>> 16)) + ((G[2] << 16) | (G[2] >>> 16))) | 0;\n\t        X[5] = (G[5] + ((G[4] << 8)  | (G[4] >>> 24)) + G[3]) | 0;\n\t        X[6] = (G[6] + ((G[5] << 16) | (G[5] >>> 16)) + ((G[4] << 16) | (G[4] >>> 16))) | 0;\n\t        X[7] = (G[7] + ((G[6] << 8)  | (G[6] >>> 24)) + G[5]) | 0;\n\t    }\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.RabbitLegacy.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.RabbitLegacy.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.RabbitLegacy = StreamCipher._createHelper(RabbitLegacy);\n\t}());\n\n\n\treturn CryptoJS.RabbitLegacy;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./enc-base64\"), require(\"./md5\"), require(\"./evpkdf\"), require(\"./cipher-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./enc-base64\", \"./md5\", \"./evpkdf\", \"./cipher-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var BlockCipher = C_lib.BlockCipher;\n\t    var C_algo = C.algo;\n\n\t    const N = 16;\n\n\t    //Origin pbox and sbox, derived from PI\n\t    const ORIG_P = [\n\t        0x243F6A88, 0x85A308D3, 0x13198A2E, 0x03707344,\n\t        0xA4093822, 0x299F31D0, 0x082EFA98, 0xEC4E6C89,\n\t        0x452821E6, 0x38D01377, 0xBE5466CF, 0x34E90C6C,\n\t        0xC0AC29B7, 0xC97C50DD, 0x3F84D5B5, 0xB5470917,\n\t        0x9216D5D9, 0x8979FB1B\n\t    ];\n\n\t    const ORIG_S = [\n\t        [   0xD1310BA6, 0x98DFB5AC, 0x2FFD72DB, 0xD01ADFB7,\n\t            0xB8E1AFED, 0x6A267E96, 0xBA7C9045, 0xF12C7F99,\n\t            0x24A19947, 0xB3916CF7, 0x0801F2E2, 0x858EFC16,\n\t            0x636920D8, 0x71574E69, 0xA458FEA3, 0xF4933D7E,\n\t            0x0D95748F, 0x728EB658, 0x718BCD58, 0x82154AEE,\n\t            0x7B54A41D, 0xC25A59B5, 0x9C30D539, 0x2AF26013,\n\t            0xC5D1B023, 0x286085F0, 0xCA417918, 0xB8DB38EF,\n\t            0x8E79DCB0, 0x603A180E, 0x6C9E0E8B, 0xB01E8A3E,\n\t            0xD71577C1, 0xBD314B27, 0x78AF2FDA, 0x55605C60,\n\t            0xE65525F3, 0xAA55AB94, 0x57489862, 0x63E81440,\n\t            0x55CA396A, 0x2AAB10B6, 0xB4CC5C34, 0x1141E8CE,\n\t            0xA15486AF, 0x7C72E993, 0xB3EE1411, 0x636FBC2A,\n\t            0x2BA9C55D, 0x741831F6, 0xCE5C3E16, 0x9B87931E,\n\t            0xAFD6BA33, 0x6C24CF5C, 0x7A325381, 0x28958677,\n\t            0x3B8F4898, 0x6B4BB9AF, 0xC4BFE81B, 0x66282193,\n\t            0x61D809CC, 0xFB21A991, 0x487CAC60, 0x5DEC8032,\n\t            0xEF845D5D, 0xE98575B1, 0xDC262302, 0xEB651B88,\n\t            0x23893E81, 0xD396ACC5, 0x0F6D6FF3, 0x83F44239,\n\t            0x2E0B4482, 0xA4842004, 0x69C8F04A, 0x9E1F9B5E,\n\t            0x21C66842, 0xF6E96C9A, 0x670C9C61, 0xABD388F0,\n\t            0x6A51A0D2, 0xD8542F68, 0x960FA728, 0xAB5133A3,\n\t            0x6EEF0B6C, 0x137A3BE4, 0xBA3BF050, 0x7EFB2A98,\n\t            0xA1F1651D, 0x39AF0176, 0x66CA593E, 0x82430E88,\n\t            0x8CEE8619, 0x456F9FB4, 0x7D84A5C3, 0x3B8B5EBE,\n\t            0xE06F75D8, 0x85C12073, 0x401A449F, 0x56C16AA6,\n\t            0x4ED3AA62, 0x363F7706, 0x1BFEDF72, 0x429B023D,\n\t            0x37D0D724, 0xD00A1248, 0xDB0FEAD3, 0x49F1C09B,\n\t            0x075372C9, 0x80991B7B, 0x25D479D8, 0xF6E8DEF7,\n\t            0xE3FE501A, 0xB6794C3B, 0x976CE0BD, 0x04C006BA,\n\t            0xC1A94FB6, 0x409F60C4, 0x5E5C9EC2, 0x196A2463,\n\t            0x68FB6FAF, 0x3E6C53B5, 0x1339B2EB, 0x3B52EC6F,\n\t            0x6DFC511F, 0x9B30952C, 0xCC814544, 0xAF5EBD09,\n\t            0xBEE3D004, 0xDE334AFD, 0x660F2807, 0x192E4BB3,\n\t            0xC0CBA857, 0x45C8740F, 0xD20B5F39, 0xB9D3FBDB,\n\t            0x5579C0BD, 0x1A60320A, 0xD6A100C6, 0x402C7279,\n\t            0x679F25FE, 0xFB1FA3CC, 0x8EA5E9F8, 0xDB3222F8,\n\t            0x3C7516DF, 0xFD616B15, 0x2F501EC8, 0xAD0552AB,\n\t            0x323DB5FA, 0xFD238760, 0x53317B48, 0x3E00DF82,\n\t            0x9E5C57BB, 0xCA6F8CA0, 0x1A87562E, 0xDF1769DB,\n\t            0xD542A8F6, 0x287EFFC3, 0xAC6732C6, 0x8C4F5573,\n\t            0x695B27B0, 0xBBCA58C8, 0xE1FFA35D, 0xB8F011A0,\n\t            0x10FA3D98, 0xFD2183B8, 0x4AFCB56C, 0x2DD1D35B,\n\t            0x9A53E479, 0xB6F84565, 0xD28E49BC, 0x4BFB9790,\n\t            0xE1DDF2DA, 0xA4CB7E33, 0x62FB1341, 0xCEE4C6E8,\n\t            0xEF20CADA, 0x36774C01, 0xD07E9EFE, 0x2BF11FB4,\n\t            0x95DBDA4D, 0xAE909198, 0xEAAD8E71, 0x6B93D5A0,\n\t            0xD08ED1D0, 0xAFC725E0, 0x8E3C5B2F, 0x8E7594B7,\n\t            0x8FF6E2FB, 0xF2122B64, 0x8888B812, 0x900DF01C,\n\t            0x4FAD5EA0, 0x688FC31C, 0xD1CFF191, 0xB3A8C1AD,\n\t            0x2F2F2218, 0xBE0E1777, 0xEA752DFE, 0x8B021FA1,\n\t            0xE5A0CC0F, 0xB56F74E8, 0x18ACF3D6, 0xCE89E299,\n\t            0xB4A84FE0, 0xFD13E0B7, 0x7CC43B81, 0xD2ADA8D9,\n\t            0x165FA266, 0x80957705, 0x93CC7314, 0x211A1477,\n\t            0xE6AD2065, 0x77B5FA86, 0xC75442F5, 0xFB9D35CF,\n\t            0xEBCDAF0C, 0x7B3E89A0, 0xD6411BD3, 0xAE1E7E49,\n\t            0x00250E2D, 0x2071B35E, 0x226800BB, 0x57B8E0AF,\n\t            0x2464369B, 0xF009B91E, 0x5563911D, 0x59DFA6AA,\n\t            0x78C14389, 0xD95A537F, 0x207D5BA2, 0x02E5B9C5,\n\t            0x83260376, 0x6295CFA9, 0x11C81968, 0x4E734A41,\n\t            0xB3472DCA, 0x7B14A94A, 0x1B510052, 0x9A532915,\n\t            0xD60F573F, 0xBC9BC6E4, 0x2B60A476, 0x81E67400,\n\t            0x08BA6FB5, 0x571BE91F, 0xF296EC6B, 0x2A0DD915,\n\t            0xB6636521, 0xE7B9F9B6, 0xFF34052E, 0xC5855664,\n\t            0x53B02D5D, 0xA99F8FA1, 0x08BA4799, 0x6E85076A   ],\n\t        [   0x4B7A70E9, 0xB5B32944, 0xDB75092E, 0xC4192623,\n\t            0xAD6EA6B0, 0x49A7DF7D, 0x9CEE60B8, 0x8FEDB266,\n\t            0xECAA8C71, 0x699A17FF, 0x5664526C, 0xC2B19EE1,\n\t            0x193602A5, 0x75094C29, 0xA0591340, 0xE4183A3E,\n\t            0x3F54989A, 0x5B429D65, 0x6B8FE4D6, 0x99F73FD6,\n\t            0xA1D29C07, 0xEFE830F5, 0x4D2D38E6, 0xF0255DC1,\n\t            0x4CDD2086, 0x8470EB26, 0x6382E9C6, 0x021ECC5E,\n\t            0x09686B3F, 0x3EBAEFC9, 0x3C971814, 0x6B6A70A1,\n\t            0x687F3584, 0x52A0E286, 0xB79C5305, 0xAA500737,\n\t            0x3E07841C, 0x7FDEAE5C, 0x8E7D44EC, 0x5716F2B8,\n\t            0xB03ADA37, 0xF0500C0D, 0xF01C1F04, 0x0200B3FF,\n\t            0xAE0CF51A, 0x3CB574B2, 0x25837A58, 0xDC0921BD,\n\t            0xD19113F9, 0x7CA92FF6, 0x94324773, 0x22F54701,\n\t            0x3AE5E581, 0x37C2DADC, 0xC8B57634, 0x9AF3DDA7,\n\t            0xA9446146, 0x0FD0030E, 0xECC8C73E, 0xA4751E41,\n\t            0xE238CD99, 0x3BEA0E2F, 0x3280BBA1, 0x183EB331,\n\t            0x4E548B38, 0x4F6DB908, 0x6F420D03, 0xF60A04BF,\n\t            0x2CB81290, 0x24977C79, 0x5679B072, 0xBCAF89AF,\n\t            0xDE9A771F, 0xD9930810, 0xB38BAE12, 0xDCCF3F2E,\n\t            0x5512721F, 0x2E6B7124, 0x501ADDE6, 0x9F84CD87,\n\t            0x7A584718, 0x7408DA17, 0xBC9F9ABC, 0xE94B7D8C,\n\t            0xEC7AEC3A, 0xDB851DFA, 0x63094366, 0xC464C3D2,\n\t            0xEF1C1847, 0x3215D908, 0xDD433B37, 0x24C2BA16,\n\t            0x12A14D43, 0x2A65C451, 0x50940002, 0x133AE4DD,\n\t            0x71DFF89E, 0x10314E55, 0x81AC77D6, 0x5F11199B,\n\t            0x043556F1, 0xD7A3C76B, 0x3C11183B, 0x5924A509,\n\t            0xF28FE6ED, 0x97F1FBFA, 0x9EBABF2C, 0x1E153C6E,\n\t            0x86E34570, 0xEAE96FB1, 0x860E5E0A, 0x5A3E2AB3,\n\t            0x771FE71C, 0x4E3D06FA, 0x2965DCB9, 0x99E71D0F,\n\t            0x803E89D6, 0x5266C825, 0x2E4CC978, 0x9C10B36A,\n\t            0xC6150EBA, 0x94E2EA78, 0xA5FC3C53, 0x1E0A2DF4,\n\t            0xF2F74EA7, 0x361D2B3D, 0x1939260F, 0x19C27960,\n\t            0x5223A708, 0xF71312B6, 0xEBADFE6E, 0xEAC31F66,\n\t            0xE3BC4595, 0xA67BC883, 0xB17F37D1, 0x018CFF28,\n\t            0xC332DDEF, 0xBE6C5AA5, 0x65582185, 0x68AB9802,\n\t            0xEECEA50F, 0xDB2F953B, 0x2AEF7DAD, 0x5B6E2F84,\n\t            0x1521B628, 0x29076170, 0xECDD4775, 0x619F1510,\n\t            0x13CCA830, 0xEB61BD96, 0x0334FE1E, 0xAA0363CF,\n\t            0xB5735C90, 0x4C70A239, 0xD59E9E0B, 0xCBAADE14,\n\t            0xEECC86BC, 0x60622CA7, 0x9CAB5CAB, 0xB2F3846E,\n\t            0x648B1EAF, 0x19BDF0CA, 0xA02369B9, 0x655ABB50,\n\t            0x40685A32, 0x3C2AB4B3, 0x319EE9D5, 0xC021B8F7,\n\t            0x9B540B19, 0x875FA099, 0x95F7997E, 0x623D7DA8,\n\t            0xF837889A, 0x97E32D77, 0x11ED935F, 0x16681281,\n\t            0x0E358829, 0xC7E61FD6, 0x96DEDFA1, 0x7858BA99,\n\t            0x57F584A5, 0x1B227263, 0x9B83C3FF, 0x1AC24696,\n\t            0xCDB30AEB, 0x532E3054, 0x8FD948E4, 0x6DBC3128,\n\t            0x58EBF2EF, 0x34C6FFEA, 0xFE28ED61, 0xEE7C3C73,\n\t            0x5D4A14D9, 0xE864B7E3, 0x42105D14, 0x203E13E0,\n\t            0x45EEE2B6, 0xA3AAABEA, 0xDB6C4F15, 0xFACB4FD0,\n\t            0xC742F442, 0xEF6ABBB5, 0x654F3B1D, 0x41CD2105,\n\t            0xD81E799E, 0x86854DC7, 0xE44B476A, 0x3D816250,\n\t            0xCF62A1F2, 0x5B8D2646, 0xFC8883A0, 0xC1C7B6A3,\n\t            0x7F1524C3, 0x69CB7492, 0x47848A0B, 0x5692B285,\n\t            0x095BBF00, 0xAD19489D, 0x1462B174, 0x23820E00,\n\t            0x58428D2A, 0x0C55F5EA, 0x1DADF43E, 0x233F7061,\n\t            0x3372F092, 0x8D937E41, 0xD65FECF1, 0x6C223BDB,\n\t            0x7CDE3759, 0xCBEE7460, 0x4085F2A7, 0xCE77326E,\n\t            0xA6078084, 0x19F8509E, 0xE8EFD855, 0x61D99735,\n\t            0xA969A7AA, 0xC50C06C2, 0x5A04ABFC, 0x800BCADC,\n\t            0x9E447A2E, 0xC3453484, 0xFDD56705, 0x0E1E9EC9,\n\t            0xDB73DBD3, 0x105588CD, 0x675FDA79, 0xE3674340,\n\t            0xC5C43465, 0x713E38D8, 0x3D28F89E, 0xF16DFF20,\n\t            0x153E21E7, 0x8FB03D4A, 0xE6E39F2B, 0xDB83ADF7   ],\n\t        [   0xE93D5A68, 0x948140F7, 0xF64C261C, 0x94692934,\n\t            0x411520F7, 0x7602D4F7, 0xBCF46B2E, 0xD4A20068,\n\t            0xD4082471, 0x3320F46A, 0x43B7D4B7, 0x500061AF,\n\t            0x1E39F62E, 0x97244546, 0x14214F74, 0xBF8B8840,\n\t            0x4D95FC1D, 0x96B591AF, 0x70F4DDD3, 0x66A02F45,\n\t            0xBFBC09EC, 0x03BD9785, 0x7FAC6DD0, 0x31CB8504,\n\t            0x96EB27B3, 0x55FD3941, 0xDA2547E6, 0xABCA0A9A,\n\t            0x28507825, 0x530429F4, 0x0A2C86DA, 0xE9B66DFB,\n\t            0x68DC1462, 0xD7486900, 0x680EC0A4, 0x27A18DEE,\n\t            0x4F3FFEA2, 0xE887AD8C, 0xB58CE006, 0x7AF4D6B6,\n\t            0xAACE1E7C, 0xD3375FEC, 0xCE78A399, 0x406B2A42,\n\t            0x20FE9E35, 0xD9F385B9, 0xEE39D7AB, 0x3B124E8B,\n\t            0x1DC9FAF7, 0x4B6D1856, 0x26A36631, 0xEAE397B2,\n\t            0x3A6EFA74, 0xDD5B4332, 0x6841E7F7, 0xCA7820FB,\n\t            0xFB0AF54E, 0xD8FEB397, 0x454056AC, 0xBA489527,\n\t            0x55533A3A, 0x20838D87, 0xFE6BA9B7, 0xD096954B,\n\t            0x55A867BC, 0xA1159A58, 0xCCA92963, 0x99E1DB33,\n\t            0xA62A4A56, 0x3F3125F9, 0x5EF47E1C, 0x9029317C,\n\t            0xFDF8E802, 0x04272F70, 0x80BB155C, 0x05282CE3,\n\t            0x95C11548, 0xE4C66D22, 0x48C1133F, 0xC70F86DC,\n\t            0x07F9C9EE, 0x41041F0F, 0x404779A4, 0x5D886E17,\n\t            0x325F51EB, 0xD59BC0D1, 0xF2BCC18F, 0x41113564,\n\t            0x257B7834, 0x602A9C60, 0xDFF8E8A3, 0x1F636C1B,\n\t            0x0E12B4C2, 0x02E1329E, 0xAF664FD1, 0xCAD18115,\n\t            0x6B2395E0, 0x333E92E1, 0x3B240B62, 0xEEBEB922,\n\t            0x85B2A20E, 0xE6BA0D99, 0xDE720C8C, 0x2DA2F728,\n\t            0xD0127845, 0x95B794FD, 0x647D0862, 0xE7CCF5F0,\n\t            0x5449A36F, 0x877D48FA, 0xC39DFD27, 0xF33E8D1E,\n\t            0x0A476341, 0x992EFF74, 0x3A6F6EAB, 0xF4F8FD37,\n\t            0xA812DC60, 0xA1EBDDF8, 0x991BE14C, 0xDB6E6B0D,\n\t            0xC67B5510, 0x6D672C37, 0x2765D43B, 0xDCD0E804,\n\t            0xF1290DC7, 0xCC00FFA3, 0xB5390F92, 0x690FED0B,\n\t            0x667B9FFB, 0xCEDB7D9C, 0xA091CF0B, 0xD9155EA3,\n\t            0xBB132F88, 0x515BAD24, 0x7B9479BF, 0x763BD6EB,\n\t            0x37392EB3, 0xCC115979, 0x8026E297, 0xF42E312D,\n\t            0x6842ADA7, 0xC66A2B3B, 0x12754CCC, 0x782EF11C,\n\t            0x6A124237, 0xB79251E7, 0x06A1BBE6, 0x4BFB6350,\n\t            0x1A6B1018, 0x11CAEDFA, 0x3D25BDD8, 0xE2E1C3C9,\n\t            0x44421659, 0x0A121386, 0xD90CEC6E, 0xD5ABEA2A,\n\t            0x64AF674E, 0xDA86A85F, 0xBEBFE988, 0x64E4C3FE,\n\t            0x9DBC8057, 0xF0F7C086, 0x60787BF8, 0x6003604D,\n\t            0xD1FD8346, 0xF6381FB0, 0x7745AE04, 0xD736FCCC,\n\t            0x83426B33, 0xF01EAB71, 0xB0804187, 0x3C005E5F,\n\t            0x77A057BE, 0xBDE8AE24, 0x55464299, 0xBF582E61,\n\t            0x4E58F48F, 0xF2DDFDA2, 0xF474EF38, 0x8789BDC2,\n\t            0x5366F9C3, 0xC8B38E74, 0xB475F255, 0x46FCD9B9,\n\t            0x7AEB2661, 0x8B1DDF84, 0x846A0E79, 0x915F95E2,\n\t            0x466E598E, 0x20B45770, 0x8CD55591, 0xC902DE4C,\n\t            0xB90BACE1, 0xBB8205D0, 0x11A86248, 0x7574A99E,\n\t            0xB77F19B6, 0xE0A9DC09, 0x662D09A1, 0xC4324633,\n\t            0xE85A1F02, 0x09F0BE8C, 0x4A99A025, 0x1D6EFE10,\n\t            0x1AB93D1D, 0x0BA5A4DF, 0xA186F20F, 0x2868F169,\n\t            0xDCB7DA83, 0x573906FE, 0xA1E2CE9B, 0x4FCD7F52,\n\t            0x50115E01, 0xA70683FA, 0xA002B5C4, 0x0DE6D027,\n\t            0x9AF88C27, 0x773F8641, 0xC3604C06, 0x61A806B5,\n\t            0xF0177A28, 0xC0F586E0, 0x006058AA, 0x30DC7D62,\n\t            0x11E69ED7, 0x2338EA63, 0x53C2DD94, 0xC2C21634,\n\t            0xBBCBEE56, 0x90BCB6DE, 0xEBFC7DA1, 0xCE591D76,\n\t            0x6F05E409, 0x4B7C0188, 0x39720A3D, 0x7C927C24,\n\t            0x86E3725F, 0x724D9DB9, 0x1AC15BB4, 0xD39EB8FC,\n\t            0xED545578, 0x08FCA5B5, 0xD83D7CD3, 0x4DAD0FC4,\n\t            0x1E50EF5E, 0xB161E6F8, 0xA28514D9, 0x6C51133C,\n\t            0x6FD5C7E7, 0x56E14EC4, 0x362ABFCE, 0xDDC6C837,\n\t            0xD79A3234, 0x92638212, 0x670EFA8E, 0x406000E0  ],\n\t        [   0x3A39CE37, 0xD3FAF5CF, 0xABC27737, 0x5AC52D1B,\n\t            0x5CB0679E, 0x4FA33742, 0xD3822740, 0x99BC9BBE,\n\t            0xD5118E9D, 0xBF0F7315, 0xD62D1C7E, 0xC700C47B,\n\t            0xB78C1B6B, 0x21A19045, 0xB26EB1BE, 0x6A366EB4,\n\t            0x5748AB2F, 0xBC946E79, 0xC6A376D2, 0x6549C2C8,\n\t            0x530FF8EE, 0x468DDE7D, 0xD5730A1D, 0x4CD04DC6,\n\t            0x2939BBDB, 0xA9BA4650, 0xAC9526E8, 0xBE5EE304,\n\t            0xA1FAD5F0, 0x6A2D519A, 0x63EF8CE2, 0x9A86EE22,\n\t            0xC089C2B8, 0x43242EF6, 0xA51E03AA, 0x9CF2D0A4,\n\t            0x83C061BA, 0x9BE96A4D, 0x8FE51550, 0xBA645BD6,\n\t            0x2826A2F9, 0xA73A3AE1, 0x4BA99586, 0xEF5562E9,\n\t            0xC72FEFD3, 0xF752F7DA, 0x3F046F69, 0x77FA0A59,\n\t            0x80E4A915, 0x87B08601, 0x9B09E6AD, 0x3B3EE593,\n\t            0xE990FD5A, 0x9E34D797, 0x2CF0B7D9, 0x022B8B51,\n\t            0x96D5AC3A, 0x017DA67D, 0xD1CF3ED6, 0x7C7D2D28,\n\t            0x1F9F25CF, 0xADF2B89B, 0x5AD6B472, 0x5A88F54C,\n\t            0xE029AC71, 0xE019A5E6, 0x47B0ACFD, 0xED93FA9B,\n\t            0xE8D3C48D, 0x283B57CC, 0xF8D56629, 0x79132E28,\n\t            0x785F0191, 0xED756055, 0xF7960E44, 0xE3D35E8C,\n\t            0x15056DD4, 0x88F46DBA, 0x03A16125, 0x0564F0BD,\n\t            0xC3EB9E15, 0x3C9057A2, 0x97271AEC, 0xA93A072A,\n\t            0x1B3F6D9B, 0x1E6321F5, 0xF59C66FB, 0x26DCF319,\n\t            0x7533D928, 0xB155FDF5, 0x03563482, 0x8ABA3CBB,\n\t            0x28517711, 0xC20AD9F8, 0xABCC5167, 0xCCAD925F,\n\t            0x4DE81751, 0x3830DC8E, 0x379D5862, 0x9320F991,\n\t            0xEA7A90C2, 0xFB3E7BCE, 0x5121CE64, 0x774FBE32,\n\t            0xA8B6E37E, 0xC3293D46, 0x48DE5369, 0x6413E680,\n\t            0xA2AE0810, 0xDD6DB224, 0x69852DFD, 0x09072166,\n\t            0xB39A460A, 0x6445C0DD, 0x586CDECF, 0x1C20C8AE,\n\t            0x5BBEF7DD, 0x1B588D40, 0xCCD2017F, 0x6BB4E3BB,\n\t            0xDDA26A7E, 0x3A59FF45, 0x3E350A44, 0xBCB4CDD5,\n\t            0x72EACEA8, 0xFA6484BB, 0x8D6612AE, 0xBF3C6F47,\n\t            0xD29BE463, 0x542F5D9E, 0xAEC2771B, 0xF64E6370,\n\t            0x740E0D8D, 0xE75B1357, 0xF8721671, 0xAF537D5D,\n\t            0x4040CB08, 0x4EB4E2CC, 0x34D2466A, 0x0115AF84,\n\t            0xE1B00428, 0x95983A1D, 0x06B89FB4, 0xCE6EA048,\n\t            0x6F3F3B82, 0x3520AB82, 0x011A1D4B, 0x277227F8,\n\t            0x611560B1, 0xE7933FDC, 0xBB3A792B, 0x344525BD,\n\t            0xA08839E1, 0x51CE794B, 0x2F32C9B7, 0xA01FBAC9,\n\t            0xE01CC87E, 0xBCC7D1F6, 0xCF0111C3, 0xA1E8AAC7,\n\t            0x1A908749, 0xD44FBD9A, 0xD0DADECB, 0xD50ADA38,\n\t            0x0339C32A, 0xC6913667, 0x8DF9317C, 0xE0B12B4F,\n\t            0xF79E59B7, 0x43F5BB3A, 0xF2D519FF, 0x27D9459C,\n\t            0xBF97222C, 0x15E6FC2A, 0x0F91FC71, 0x9B941525,\n\t            0xFAE59361, 0xCEB69CEB, 0xC2A86459, 0x12BAA8D1,\n\t            0xB6C1075E, 0xE3056A0C, 0x10D25065, 0xCB03A442,\n\t            0xE0EC6E0E, 0x1698DB3B, 0x4C98A0BE, 0x3278E964,\n\t            0x9F1F9532, 0xE0D392DF, 0xD3A0342B, 0x8971F21E,\n\t            0x1B0A7441, 0x4BA3348C, 0xC5BE7120, 0xC37632D8,\n\t            0xDF359F8D, 0x9B992F2E, 0xE60B6F47, 0x0FE3F11D,\n\t            0xE54CDA54, 0x1EDAD891, 0xCE6279CF, 0xCD3E7E6F,\n\t            0x1618B166, 0xFD2C1D05, 0x848FD2C5, 0xF6FB2299,\n\t            0xF523F357, 0xA6327623, 0x93A83531, 0x56CCCD02,\n\t            0xACF08162, 0x5A75EBB5, 0x6E163697, 0x88D273CC,\n\t            0xDE966292, 0x81B949D0, 0x4C50901B, 0x71C65614,\n\t            0xE6C6C7BD, 0x327A140A, 0x45E1D006, 0xC3F27B9A,\n\t            0xC9AA53FD, 0x62A80F00, 0xBB25BFE2, 0x35BDD2F6,\n\t            0x71126905, 0xB2040222, 0xB6CBCF7C, 0xCD769C2B,\n\t            0x53113EC0, 0x1640E3D3, 0x38ABBD60, 0x2547ADF0,\n\t            0xBA38209C, 0xF746CE76, 0x77AFA1C5, 0x20756060,\n\t            0x85CBFE4E, 0x8AE88DD8, 0x7AAAF9B0, 0x4CF9AA7E,\n\t            0x1948C25C, 0x02FB8A8C, 0x01C36AE4, 0xD6EBE1F9,\n\t            0x90D4F869, 0xA65CDEA0, 0x3F09252D, 0xC208E69F,\n\t            0xB74E6132, 0xCE77E25B, 0x578FDFE3, 0x3AC372E6  ]\n\t    ];\n\n\t    var BLOWFISH_CTX = {\n\t        pbox: [],\n\t        sbox: []\n\t    }\n\n\t    function F(ctx, x){\n\t        let a = (x >> 24) & 0xFF;\n\t        let b = (x >> 16) & 0xFF;\n\t        let c = (x >> 8) & 0xFF;\n\t        let d = x & 0xFF;\n\n\t        let y = ctx.sbox[0][a] + ctx.sbox[1][b];\n\t        y = y ^ ctx.sbox[2][c];\n\t        y = y + ctx.sbox[3][d];\n\n\t        return y;\n\t    }\n\n\t    function BlowFish_Encrypt(ctx, left, right){\n\t        let Xl = left;\n\t        let Xr = right;\n\t        let temp;\n\n\t        for(let i = 0; i < N; ++i){\n\t            Xl = Xl ^ ctx.pbox[i];\n\t            Xr = F(ctx, Xl) ^ Xr;\n\n\t            temp = Xl;\n\t            Xl = Xr;\n\t            Xr = temp;\n\t        }\n\n\t        temp = Xl;\n\t        Xl = Xr;\n\t        Xr = temp;\n\n\t        Xr = Xr ^ ctx.pbox[N];\n\t        Xl = Xl ^ ctx.pbox[N + 1];\n\n\t        return {left: Xl, right: Xr};\n\t    }\n\n\t    function BlowFish_Decrypt(ctx, left, right){\n\t        let Xl = left;\n\t        let Xr = right;\n\t        let temp;\n\n\t        for(let i = N + 1; i > 1; --i){\n\t            Xl = Xl ^ ctx.pbox[i];\n\t            Xr = F(ctx, Xl) ^ Xr;\n\n\t            temp = Xl;\n\t            Xl = Xr;\n\t            Xr = temp;\n\t        }\n\n\t        temp = Xl;\n\t        Xl = Xr;\n\t        Xr = temp;\n\n\t        Xr = Xr ^ ctx.pbox[1];\n\t        Xl = Xl ^ ctx.pbox[0];\n\n\t        return {left: Xl, right: Xr};\n\t    }\n\n\t    /**\n\t     * Initialization ctx's pbox and sbox.\n\t     *\n\t     * @param {Object} ctx The object has pbox and sbox.\n\t     * @param {Array} key An array of 32-bit words.\n\t     * @param {int} keysize The length of the key.\n\t     *\n\t     * @example\n\t     *\n\t     *     BlowFishInit(BLOWFISH_CTX, key, 128/32);\n\t     */\n\t    function BlowFishInit(ctx, key, keysize)\n\t    {\n\t        for(let Row = 0; Row < 4; Row++)\n\t        {\n\t            ctx.sbox[Row] = [];\n\t            for(let Col = 0; Col < 256; Col++)\n\t            {\n\t                ctx.sbox[Row][Col] = ORIG_S[Row][Col];\n\t            }\n\t        }\n\n\t        let keyIndex = 0;\n\t        for(let index = 0; index < N + 2; index++)\n\t        {\n\t            ctx.pbox[index] = ORIG_P[index] ^ key[keyIndex];\n\t            keyIndex++;\n\t            if(keyIndex >= keysize)\n\t            {\n\t                keyIndex = 0;\n\t            }\n\t        }\n\n\t        let Data1 = 0;\n\t        let Data2 = 0;\n\t        let res = 0;\n\t        for(let i = 0; i < N + 2; i += 2)\n\t        {\n\t            res = BlowFish_Encrypt(ctx, Data1, Data2);\n\t            Data1 = res.left;\n\t            Data2 = res.right;\n\t            ctx.pbox[i] = Data1;\n\t            ctx.pbox[i + 1] = Data2;\n\t        }\n\n\t        for(let i = 0; i < 4; i++)\n\t        {\n\t            for(let j = 0; j < 256; j += 2)\n\t            {\n\t                res = BlowFish_Encrypt(ctx, Data1, Data2);\n\t                Data1 = res.left;\n\t                Data2 = res.right;\n\t                ctx.sbox[i][j] = Data1;\n\t                ctx.sbox[i][j + 1] = Data2;\n\t            }\n\t        }\n\n\t        return true;\n\t    }\n\n\t    /**\n\t     * Blowfish block cipher algorithm.\n\t     */\n\t    var Blowfish = C_algo.Blowfish = BlockCipher.extend({\n\t        _doReset: function () {\n\t            // Skip reset of nRounds has been set before and key did not change\n\t            if (this._keyPriorReset === this._key) {\n\t                return;\n\t            }\n\n\t            // Shortcuts\n\t            var key = this._keyPriorReset = this._key;\n\t            var keyWords = key.words;\n\t            var keySize = key.sigBytes / 4;\n\n\t            //Initialization pbox and sbox\n\t            BlowFishInit(BLOWFISH_CTX, keyWords, keySize);\n\t        },\n\n\t        encryptBlock: function (M, offset) {\n\t            var res = BlowFish_Encrypt(BLOWFISH_CTX, M[offset], M[offset + 1]);\n\t            M[offset] = res.left;\n\t            M[offset + 1] = res.right;\n\t        },\n\n\t        decryptBlock: function (M, offset) {\n\t            var res = BlowFish_Decrypt(BLOWFISH_CTX, M[offset], M[offset + 1]);\n\t            M[offset] = res.left;\n\t            M[offset + 1] = res.right;\n\t        },\n\n\t        blockSize: 64/32,\n\n\t        keySize: 128/32,\n\n\t        ivSize: 64/32\n\t    });\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.Blowfish.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.Blowfish.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.Blowfish = BlockCipher._createHelper(Blowfish);\n\t}());\n\n\n\treturn CryptoJS.Blowfish;\n\n}));", ";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"), require(\"./lib-typedarrays\"), require(\"./enc-utf16\"), require(\"./enc-base64\"), require(\"./enc-base64url\"), require(\"./md5\"), require(\"./sha1\"), require(\"./sha256\"), require(\"./sha224\"), require(\"./sha512\"), require(\"./sha384\"), require(\"./sha3\"), require(\"./ripemd160\"), require(\"./hmac\"), require(\"./pbkdf2\"), require(\"./evpkdf\"), require(\"./cipher-core\"), require(\"./mode-cfb\"), require(\"./mode-ctr\"), require(\"./mode-ctr-gladman\"), require(\"./mode-ofb\"), require(\"./mode-ecb\"), require(\"./pad-ansix923\"), require(\"./pad-iso10126\"), require(\"./pad-iso97971\"), require(\"./pad-zeropadding\"), require(\"./pad-nopadding\"), require(\"./format-hex\"), require(\"./aes\"), require(\"./tripledes\"), require(\"./rc4\"), require(\"./rabbit\"), require(\"./rabbit-legacy\"), require(\"./blowfish\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\", \"./lib-typedarrays\", \"./enc-utf16\", \"./enc-base64\", \"./enc-base64url\", \"./md5\", \"./sha1\", \"./sha256\", \"./sha224\", \"./sha512\", \"./sha384\", \"./sha3\", \"./ripemd160\", \"./hmac\", \"./pbkdf2\", \"./evpkdf\", \"./cipher-core\", \"./mode-cfb\", \"./mode-ctr\", \"./mode-ctr-gladman\", \"./mode-ofb\", \"./mode-ecb\", \"./pad-ansix923\", \"./pad-iso10126\", \"./pad-iso97971\", \"./pad-zeropadding\", \"./pad-nopadding\", \"./format-hex\", \"./aes\", \"./tripledes\", \"./rc4\", \"./rabbit\", \"./rabbit-legacy\", \"./blowfish\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS;\n\n}));", "\"use strict\";\n/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bytes = exports.stringToBytes = exports.str = exports.bytesToString = exports.hex = exports.utf8 = exports.bech32m = exports.bech32 = exports.base58check = exports.base58xmr = exports.base58xrp = exports.base58flickr = exports.base58 = exports.base64url = exports.base64 = exports.base32crockford = exports.base32hex = exports.base32 = exports.base16 = exports.utils = exports.assertNumber = void 0;\nfunction assertNumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`Wrong integer: ${n}`);\n}\nexports.assertNumber = assertNumber;\nfunction chain(...args) {\n    const wrap = (a, b) => (c) => a(b(c));\n    const encode = Array.from(args)\n        .reverse()\n        .reduce((acc, i) => (acc ? wrap(acc, i.encode) : i.encode), undefined);\n    const decode = args.reduce((acc, i) => (acc ? wrap(acc, i.decode) : i.decode), undefined);\n    return { encode, decode };\n}\nfunction alphabet(alphabet) {\n    return {\n        encode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('alphabet.encode input should be an array of numbers');\n            return digits.map((i) => {\n                assertNumber(i);\n                if (i < 0 || i >= alphabet.length)\n                    throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n                return alphabet[i];\n            });\n        },\n        decode: (input) => {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('alphabet.decode input should be array of strings');\n            return input.map((letter) => {\n                if (typeof letter !== 'string')\n                    throw new Error(`alphabet.decode: not string element=${letter}`);\n                const index = alphabet.indexOf(letter);\n                if (index === -1)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n                return index;\n            });\n        },\n    };\n}\nfunction join(separator = '') {\n    if (typeof separator !== 'string')\n        throw new Error('join separator should be string');\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n                throw new Error('join.encode input should be array of strings');\n            for (let i of from)\n                if (typeof i !== 'string')\n                    throw new Error(`join.encode: non-string input=${i}`);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error('join.decode input should be string');\n            return to.split(separator);\n        },\n    };\n}\nfunction padding(bits, chr = '=') {\n    assertNumber(bits);\n    if (typeof chr !== 'string')\n        throw new Error('padding chr should be string');\n    return {\n        encode(data) {\n            if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of data)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.encode: non-string input=${i}`);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of input)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.decode: non-string input=${i}`);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('Invalid padding: string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                if (!(((end - 1) * bits) % 8))\n                    throw new Error('Invalid padding: string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\nfunction normalize(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('normalize fn should be function');\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\nfunction convertRadix(data, from, to) {\n    if (from < 2)\n        throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n    if (!Array.isArray(data))\n        throw new Error('convertRadix: data should be array');\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data);\n    digits.forEach((d) => {\n        assertNumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`Wrong integer: ${d}`);\n    });\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < digits.length; i++) {\n            const digit = digits[i];\n            const digitBase = from * carry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                (from * carry) / from !== carry ||\n                digitBase - digit !== from * carry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            carry = digitBase % to;\n            digits[i] = Math.floor(digitBase / to);\n            if (!Number.isSafeInteger(digits[i]) || digits[i] * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!digits[i])\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = (a, b) => (!b ? a : gcd(b, a % b));\nconst radix2carry = (from, to) => from + (to - gcd(from, to));\nfunction convertRadix2(data, from, to, padding) {\n    if (!Array.isArray(data))\n        throw new Error('convertRadix2: data should be array');\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0;\n    const mask = 2 ** to - 1;\n    const res = [];\n    for (const n of data) {\n        assertNumber(n);\n        if (n >= 2 ** from)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        carry &= 2 ** pos - 1;\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\nfunction radix(num) {\n    assertNumber(num);\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), 2 ** 8, num);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix.decode input should be array of strings');\n            return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n        },\n    };\n}\nfunction radix2(bits, revPadding = false) {\n    assertNumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix2.decode input should be array of strings');\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\nfunction unsafeWrapper(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('unsafeWrapper fn should be function');\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\nfunction checksum(len, fn) {\n    assertNumber(len);\n    if (typeof fn !== 'function')\n        throw new Error('checksum fn should be function');\n    return {\n        encode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const checksum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(checksum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const newChecksum = fn(payload).slice(0, len);\n            const oldChecksum = data.slice(-len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\nexports.utils = { alphabet, chain, checksum, radix, radix2, join, padding };\nexports.base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\nexports.base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\nexports.base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\nexports.base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\nexports.base64 = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\nexports.base64url = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\nconst genBase58 = (abc) => chain(radix(58), alphabet(abc), join(''));\nexports.base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\nexports.base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\nexports.base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexports.base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += exports.base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = exports.base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\nconst base58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), exports.base58);\nexports.base58check = base58check;\nconst BECH_ALPHABET = chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        if (typeof prefix !== 'string')\n            throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n        if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n            throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n        const actualLength = prefix.length + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        prefix = prefix.toLowerCase();\n        return `${prefix}1${BECH_ALPHABET.encode(words)}${bechChecksum(prefix, words, ENCODING_CONST)}`;\n    }\n    function decode(str, limit = 90) {\n        if (typeof str !== 'string')\n            throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n        if (str.length < 8 || (limit !== false && str.length > limit))\n            throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        str = lowered;\n        const sepIndex = str.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = str.slice(0, sepIndex);\n        const _words = str.slice(sepIndex + 1);\n        if (_words.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(_words).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!_words.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    return { encode, decode, decodeToBytes, decodeUnsafe, fromWords, fromWordsUnsafe, toWords };\n}\nexports.bech32 = genBech32('bech32');\nexports.bech32m = genBech32('bech32m');\nexports.utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\nexports.hex = chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n    if (typeof s !== 'string' || s.length % 2)\n        throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n}));\nconst CODERS = {\n    utf8: exports.utf8, hex: exports.hex, base16: exports.base16, base32: exports.base32, base64: exports.base64, base64url: exports.base64url, base58: exports.base58, base58xmr: exports.base58xmr\n};\nconst coderTypeError = `Invalid encoding type. Available types: ${Object.keys(CODERS).join(', ')}`;\nconst bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!(bytes instanceof Uint8Array))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\nexports.bytesToString = bytesToString;\nexports.str = exports.bytesToString;\nconst stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\nexports.stringToBytes = stringToBytes;\nexports.bytes = exports.stringToBytes;\n", "const {bech32, hex, utf8} = require('@scure/base')\n\n// defaults for encode; default timestamp is current time at call\nconst DEFAULTNETWORK = {\n  // default network is bitcoin\n  bech32: 'bc',\n  pubKeyHash: 0x00,\n  scriptHash: 0x05,\n  validWitnessVersions: [0]\n}\nconst TESTNETWORK = {\n  bech32: 'tb',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0]\n}\nconst SIGNETNETWORK = {\n  bech32: 'tbs',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0]\n}\nconst REGTESTNETWORK = {\n  bech32: 'bcrt',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0]\n}\nconst SIMNETWORK = {\n  bech32: 'sb',\n  pubKeyHash: 0x3f,\n  scriptHash: 0x7b,\n  validWitnessVersions: [0]\n}\n\nconst FEATUREBIT_ORDER = [\n  'option_data_loss_protect',\n  'initial_routing_sync',\n  'option_upfront_shutdown_script',\n  'gossip_queries',\n  'var_onion_optin',\n  'gossip_queries_ex',\n  'option_static_remotekey',\n  'payment_secret',\n  'basic_mpp',\n  'option_support_large_channel'\n]\n\nconst DIVISORS = {\n  m: BigInt(1e3),\n  u: BigInt(1e6),\n  n: BigInt(1e9),\n  p: BigInt(1e12)\n}\n\nconst MAX_MILLISATS = BigInt('2100000000000000000')\n\nconst MILLISATS_PER_BTC = BigInt(1e11)\n\nconst TAGCODES = {\n  payment_hash: 1,\n  payment_secret: 16,\n  description: 13,\n  payee: 19,\n  description_hash: 23, // commit to longer descriptions (used by lnurl-pay)\n  expiry: 6, // default: 3600 (1 hour)\n  min_final_cltv_expiry: 24, // default: 9\n  fallback_address: 9,\n  route_hint: 3, // for extra routing info (private etc.)\n  feature_bits: 5,\n  metadata: 27\n}\n\n// reverse the keys and values of TAGCODES and insert into TAGNAMES\nconst TAGNAMES = {}\nfor (let i = 0, keys = Object.keys(TAGCODES); i < keys.length; i++) {\n  const currentName = keys[i]\n  const currentCode = TAGCODES[keys[i]].toString()\n  TAGNAMES[currentCode] = currentName\n}\n\nconst TAGPARSERS = {\n  1: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  16: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  13: words => utf8.encode(bech32.fromWordsUnsafe(words)), // string variable length\n  19: words => hex.encode(bech32.fromWordsUnsafe(words)), // 264 bits\n  23: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  27: words => hex.encode(bech32.fromWordsUnsafe(words)), // variable\n  6: wordsToIntBE, // default: 3600 (1 hour)\n  24: wordsToIntBE, // default: 9\n  3: routingInfoParser, // for extra routing info (private etc.)\n  5: featureBitsParser // keep feature bits as array of 5 bit words\n}\n\nfunction getUnknownParser(tagCode) {\n  return words => ({\n    tagCode: parseInt(tagCode),\n    words: bech32.encode('unknown', words, Number.MAX_SAFE_INTEGER)\n  })\n}\n\nfunction wordsToIntBE(words) {\n  return words.reverse().reduce((total, item, index) => {\n    return total + item * Math.pow(32, index)\n  }, 0)\n}\n\n// first convert from words to buffer, trimming padding where necessary\n// parse in 51 byte chunks. See encoder for details.\nfunction routingInfoParser(words) {\n  const routes = []\n  let pubkey,\n    shortChannelId,\n    feeBaseMSats,\n    feeProportionalMillionths,\n    cltvExpiryDelta\n  let routesBuffer = bech32.fromWordsUnsafe(words)\n  while (routesBuffer.length > 0) {\n    pubkey = hex.encode(routesBuffer.slice(0, 33)) // 33 bytes\n    shortChannelId = hex.encode(routesBuffer.slice(33, 41)) // 8 bytes\n    feeBaseMSats = parseInt(hex.encode(routesBuffer.slice(41, 45)), 16) // 4 bytes\n    feeProportionalMillionths = parseInt(\n      hex.encode(routesBuffer.slice(45, 49)),\n      16\n    ) // 4 bytes\n    cltvExpiryDelta = parseInt(hex.encode(routesBuffer.slice(49, 51)), 16) // 2 bytes\n\n    routesBuffer = routesBuffer.slice(51)\n\n    routes.push({\n      pubkey,\n      short_channel_id: shortChannelId,\n      fee_base_msat: feeBaseMSats,\n      fee_proportional_millionths: feeProportionalMillionths,\n      cltv_expiry_delta: cltvExpiryDelta\n    })\n  }\n  return routes\n}\n\nfunction featureBitsParser(words) {\n  const bools = words\n    .slice()\n    .reverse()\n    .map(word => [\n      !!(word & 0b1),\n      !!(word & 0b10),\n      !!(word & 0b100),\n      !!(word & 0b1000),\n      !!(word & 0b10000)\n    ])\n    .reduce((finalArr, itemArr) => finalArr.concat(itemArr), [])\n  while (bools.length < FEATUREBIT_ORDER.length * 2) {\n    bools.push(false)\n  }\n\n  const featureBits = {}\n\n  FEATUREBIT_ORDER.forEach((featureName, index) => {\n    let status\n    if (bools[index * 2]) {\n      status = 'required'\n    } else if (bools[index * 2 + 1]) {\n      status = 'supported'\n    } else {\n      status = 'unsupported'\n    }\n    featureBits[featureName] = status\n  })\n\n  const extraBits = bools.slice(FEATUREBIT_ORDER.length * 2)\n  featureBits.extra_bits = {\n    start_bit: FEATUREBIT_ORDER.length * 2,\n    bits: extraBits,\n    has_required: extraBits.reduce(\n      (result, bit, index) =>\n        index % 2 !== 0 ? result || false : result || bit,\n      false\n    )\n  }\n\n  return featureBits\n}\n\nfunction hrpToMillisat(hrpString, outputString) {\n  let divisor, value\n  if (hrpString.slice(-1).match(/^[munp]$/)) {\n    divisor = hrpString.slice(-1)\n    value = hrpString.slice(0, -1)\n  } else if (hrpString.slice(-1).match(/^[^munp0-9]$/)) {\n    throw new Error('Not a valid multiplier for the amount')\n  } else {\n    value = hrpString\n  }\n\n  if (!value.match(/^\\d+$/))\n    throw new Error('Not a valid human readable amount')\n\n  const valueBN = BigInt(value)\n\n  const millisatoshisBN = divisor\n    ? (valueBN * MILLISATS_PER_BTC) / DIVISORS[divisor]\n    : valueBN * MILLISATS_PER_BTC\n\n  if (\n    (divisor === 'p' && !(valueBN % BigInt(10) === BigInt(0))) ||\n    millisatoshisBN > MAX_MILLISATS\n  ) {\n    throw new Error('Amount is outside of valid range')\n  }\n\n  return outputString ? millisatoshisBN.toString() : millisatoshisBN\n}\n\n// decode will only have extra comments that aren't covered in encode comments.\n// also if anything is hard to read I'll comment.\nfunction decode(paymentRequest, network) {\n  if (typeof paymentRequest !== 'string')\n    throw new Error('Lightning Payment Request must be string')\n  if (paymentRequest.slice(0, 2).toLowerCase() !== 'ln')\n    throw new Error('Not a proper lightning payment request')\n\n  const sections = []\n  const decoded = bech32.decode(paymentRequest, Number.MAX_SAFE_INTEGER)\n  paymentRequest = paymentRequest.toLowerCase()\n  const prefix = decoded.prefix\n  let words = decoded.words\n  let letters = paymentRequest.slice(prefix.length + 1)\n  let sigWords = words.slice(-104)\n  words = words.slice(0, -104)\n\n  // Without reverse lookups, can't say that the multipier at the end must\n  // have a number before it, so instead we parse, and if the second group\n  // doesn't have anything, there's a good chance the last letter of the\n  // coin type got captured by the third group, so just re-regex without\n  // the number.\n  let prefixMatches = prefix.match(/^ln(\\S+?)(\\d*)([a-zA-Z]?)$/)\n  if (prefixMatches && !prefixMatches[2])\n    prefixMatches = prefix.match(/^ln(\\S+)$/)\n  if (!prefixMatches) {\n    throw new Error('Not a proper lightning payment request')\n  }\n\n  // \"ln\" section\n  sections.push({\n    name: 'lightning_network',\n    letters: 'ln'\n  })\n\n  // \"bc\" section\n  const bech32Prefix = prefixMatches[1]\n  let coinNetwork\n  if (!network) {\n    switch (bech32Prefix) {\n      case DEFAULTNETWORK.bech32:\n        coinNetwork = DEFAULTNETWORK\n        break\n      case TESTNETWORK.bech32:\n        coinNetwork = TESTNETWORK\n        break\n      case SIGNETNETWORK.bech32:\n        coinNetwork = SIGNETNETWORK\n        break\n      case REGTESTNETWORK.bech32:\n        coinNetwork = REGTESTNETWORK\n        break\n      case SIMNETWORK.bech32:\n        coinNetwork = SIMNETWORK\n        break\n    }\n  } else {\n    if (\n      network.bech32 === undefined ||\n      network.pubKeyHash === undefined ||\n      network.scriptHash === undefined ||\n      !Array.isArray(network.validWitnessVersions)\n    )\n      throw new Error('Invalid network')\n    coinNetwork = network\n  }\n  if (!coinNetwork || coinNetwork.bech32 !== bech32Prefix) {\n    throw new Error('Unknown coin bech32 prefix')\n  }\n  sections.push({\n    name: 'coin_network',\n    letters: bech32Prefix,\n    value: coinNetwork\n  })\n\n  // amount section\n  const value = prefixMatches[2]\n  let millisatoshis\n  if (value) {\n    const divisor = prefixMatches[3]\n    millisatoshis = hrpToMillisat(value + divisor, true)\n    sections.push({\n      name: 'amount',\n      letters: prefixMatches[2] + prefixMatches[3],\n      value: millisatoshis\n    })\n  } else {\n    millisatoshis = null\n  }\n\n  // \"1\" separator\n  sections.push({\n    name: 'separator',\n    letters: '1'\n  })\n\n  // timestamp\n  const timestamp = wordsToIntBE(words.slice(0, 7))\n  words = words.slice(7) // trim off the left 7 words\n  sections.push({\n    name: 'timestamp',\n    letters: letters.slice(0, 7),\n    value: timestamp\n  })\n  letters = letters.slice(7)\n\n  let tagName, parser, tagLength, tagWords\n  // we have no tag count to go on, so just keep hacking off words\n  // until we have none.\n  while (words.length > 0) {\n    const tagCode = words[0].toString()\n    tagName = TAGNAMES[tagCode] || 'unknown_tag'\n    parser = TAGPARSERS[tagCode] || getUnknownParser(tagCode)\n    words = words.slice(1)\n\n    tagLength = wordsToIntBE(words.slice(0, 2))\n    words = words.slice(2)\n\n    tagWords = words.slice(0, tagLength)\n    words = words.slice(tagLength)\n\n    sections.push({\n      name: tagName,\n      tag: letters[0],\n      letters: letters.slice(0, 1 + 2 + tagLength),\n      value: parser(tagWords) // see: parsers for more comments\n    })\n    letters = letters.slice(1 + 2 + tagLength)\n  }\n\n  // signature\n  sections.push({\n    name: 'signature',\n    letters: letters.slice(0, 104),\n    value: hex.encode(bech32.fromWordsUnsafe(sigWords))\n  })\n  letters = letters.slice(104)\n\n  // checksum\n  sections.push({\n    name: 'checksum',\n    letters: letters\n  })\n\n  let result = {\n    paymentRequest,\n    sections,\n\n    get expiry() {\n      let exp = sections.find(s => s.name === 'expiry')\n      if (exp) return getValue('timestamp') + exp.value\n    },\n\n    get route_hints() {\n      return sections.filter(s => s.name === 'route_hint').map(s => s.value)\n    }\n  }\n\n  for (let name in TAGCODES) {\n    if (name === 'route_hint') {\n      // route hints can be multiple, so this won't work for them\n      continue\n    }\n\n    Object.defineProperty(result, name, {\n      get() {\n        return getValue(name)\n      }\n    })\n  }\n\n  return result\n\n  function getValue(name) {\n    let section = sections.find(s => s.name === name)\n    return section ? section.value : undefined\n  }\n}\n\nmodule.exports = {\n  decode,\n  hrpToMillisat\n}\n", "// Capture the native WebSocket implementation before importing polyfill (if it exists)\nconst OriginalWebSocket = globalThis.WebSocket;\nimport \"websocket-polyfill\";\nconst PolyfilledWebSocket = globalThis.WebSocket;\nfunction hasRequiredWebSocketFeatures(wsCtor) {\n    if (!wsCtor || !wsCtor.prototype) {\n        return false;\n    }\n    const proto = wsCtor.prototype;\n    const binaryTypeDescriptor = Object.getOwnPropertyDescriptor(proto, \"binaryType\");\n    const hasSend = typeof proto.send === \"function\";\n    const hasClose = typeof proto.close === \"function\";\n    const hasBinaryTypeSetter = typeof binaryTypeDescriptor?.set === \"function\";\n    return hasSend && hasClose && hasBinaryTypeSetter;\n}\nfunction resolveDefaultWebSocket() {\n    const currentGlobal = globalThis.WebSocket;\n    const candidatesWithPriority = [];\n    if (currentGlobal &&\n        currentGlobal !== OriginalWebSocket &&\n        currentGlobal !== PolyfilledWebSocket) {\n        candidatesWithPriority.push(currentGlobal);\n    }\n    candidatesWithPriority.push(OriginalWebSocket, PolyfilledWebSocket);\n    for (const candidate of candidatesWithPriority) {\n        if (hasRequiredWebSocketFeatures(candidate)) {\n            return candidate;\n        }\n    }\n    const fallbackCandidates = [\n        OriginalWebSocket,\n        currentGlobal,\n        PolyfilledWebSocket,\n    ];\n    for (const candidate of fallbackCandidates) {\n        if (candidate) {\n            return candidate;\n        }\n    }\n    return undefined;\n}\nlet WebSocketImpl = resolveDefaultWebSocket();\nexport function useWebSocketImplementation(wsCtor) {\n    WebSocketImpl = wsCtor;\n}\nexport function resetWebSocketImplementation() {\n    WebSocketImpl = resolveDefaultWebSocket();\n}\nexport function getWebSocketImplementation() {\n    if (!WebSocketImpl) {\n        throw new Error(\"WebSocket implementation not available. Make sure websocket-polyfill is properly loaded.\");\n    }\n    return WebSocketImpl;\n}\n", "/**********************************************************************\n * In-memory WebSocket transport used for environments where creating\n * actual TCP listeners is not permitted (e.g., sandboxed CI). This\n * module provides a minimal subset of the `ws` server/client behaviour\n * that the SNSTR test suite relies on:\n *   - Server side emits `connection`, `message`, `close`, `error`\n *   - Client side exposes the DOM-style WebSocket callbacks\n * The implementation is intentionally lightweight and only supports\n * text frames (strings), which is sufficient for Nostr messages.\n *********************************************************************/\nimport { EventEmitter } from \"events\";\nconst CONNECTING = 0;\nconst OPEN = 1;\nconst CLOSING = 2;\nconst CLOSED = 3;\nclass ServerSideSocket extends EventEmitter {\n    constructor(server) {\n        super();\n        this.server = server;\n        this.readyState = OPEN;\n        this.peer = null;\n        this.terminate = () => {\n            this.close(1006, \"Server terminated\");\n        };\n    }\n    attachPeer(peer) {\n        this.peer = peer;\n    }\n    receiveFromClient(data) {\n        if (this.readyState !== OPEN) {\n            return;\n        }\n        this.emit(\"message\", data);\n    }\n    send(data) {\n        if (this.readyState !== OPEN) {\n            return;\n        }\n        const peer = this.peer;\n        if (!peer)\n            return;\n        queueMicrotask(() => peer.receiveFromServer(data));\n    }\n    close(code = 1000, reason = \"Server closing\") {\n        if (this.readyState === CLOSED) {\n            return;\n        }\n        this.readyState = CLOSING;\n        const peer = this.peer;\n        queueMicrotask(() => {\n            this.readyState = CLOSED;\n            this.emit(\"close\", code, reason);\n            if (peer) {\n                peer.handleServerClosure(code, reason);\n            }\n            this.server.deregister(this);\n        });\n    }\n}\nclass ClientSideSocket {\n    constructor(serverSocket) {\n        this.serverSocket = serverSocket;\n        this.readyState = CONNECTING;\n        this.onopen = null;\n        this.onclose = null;\n        this.onerror = null;\n        this.onmessage = null;\n        this.serverSocket.attachPeer(this);\n        queueMicrotask(() => {\n            if (this.readyState !== CONNECTING) {\n                return;\n            }\n            this.readyState = OPEN;\n            this.onopen?.({ type: \"open\" });\n        });\n    }\n    send(data) {\n        if (this.readyState !== OPEN) {\n            this.onerror?.({\n                type: \"error\",\n                error: new Error(\"Cannot send on closed WebSocket\"),\n            });\n            return;\n        }\n        this.serverSocket.receiveFromClient(data);\n    }\n    close(code = 1000, reason = \"Client closing\") {\n        if (this.readyState === CLOSED) {\n            return;\n        }\n        if (this.readyState === CONNECTING) {\n            this.readyState = CLOSING;\n            this.serverSocket.close(code, reason);\n            return;\n        }\n        this.readyState = CLOSING;\n        this.serverSocket.close(code, reason);\n    }\n    receiveFromServer(data) {\n        if (this.readyState !== OPEN) {\n            return;\n        }\n        this.onmessage?.({ type: \"message\", data });\n    }\n    handleServerClosure(code = 1000, reason = \"Server closed\") {\n        if (this.readyState === CLOSED) {\n            return;\n        }\n        this.readyState = CLOSED;\n        this.onclose?.({ type: \"close\", code, reason });\n    }\n    handleServerError(error) {\n        this.onerror?.({ type: \"error\", error });\n    }\n}\nexport class InMemoryWebSocketServer extends EventEmitter {\n    constructor(port) {\n        super();\n        this.clients = new Set();\n        this.port = port;\n    }\n    connectClient() {\n        const serverSocket = new ServerSideSocket(this);\n        const clientSocket = new ClientSideSocket(serverSocket);\n        this.clients.add(serverSocket);\n        queueMicrotask(() => this.emit(\"connection\", serverSocket));\n        return clientSocket;\n    }\n    close() {\n        for (const client of [...this.clients]) {\n            client.close(1000, \"Server shutting down\");\n        }\n        this.emit(\"close\");\n    }\n    deregister(socket) {\n        this.clients.delete(socket);\n    }\n}\nconst serverRegistry = new Map();\nlet nextDynamicPort = 64000;\nfunction getNextPort() {\n    while (serverRegistry.has(nextDynamicPort)) {\n        nextDynamicPort++;\n    }\n    return nextDynamicPort++;\n}\nexport function registerInMemoryServer(requestedPort) {\n    let port = typeof requestedPort === \"number\" && requestedPort > 0\n        ? requestedPort\n        : getNextPort();\n    if (serverRegistry.has(port)) {\n        port = getNextPort();\n    }\n    const server = new InMemoryWebSocketServer(port);\n    serverRegistry.set(port, server);\n    return { port, server };\n}\nexport function getInMemoryServer(port) {\n    return serverRegistry.get(port);\n}\nexport function unregisterInMemoryServer(port) {\n    const server = serverRegistry.get(port);\n    if (server) {\n        server.close();\n        serverRegistry.delete(port);\n    }\n}\nexport function createInMemoryWebSocket(url) {\n    try {\n        const parsed = new URL(url);\n        const hostname = parsed.hostname;\n        const normalizedHostname = hostname.startsWith(\"[\") && hostname.endsWith(\"]\")\n            ? hostname.slice(1, -1)\n            : hostname;\n        const protocol = parsed.protocol;\n        if (normalizedHostname !== \"127.0.0.1\" &&\n            normalizedHostname !== \"localhost\" &&\n            normalizedHostname !== \"::1\") {\n            return undefined;\n        }\n        let port;\n        if (parsed.port) {\n            port = Number(parsed.port);\n        }\n        else if (protocol === \"ws:\") {\n            port = 80;\n        }\n        else if (protocol === \"wss:\") {\n            port = 443;\n        }\n        else {\n            return undefined;\n        }\n        if (!Number.isFinite(port) || port <= 0) {\n            return undefined;\n        }\n        const server = getInMemoryServer(port);\n        if (!server) {\n            return undefined;\n        }\n        return server.connectClient();\n    }\n    catch (_error) {\n        return undefined;\n    }\n}\n", "/**\n * Relay event types as specified in NIP-01\n */\nexport var RelayEvent;\n(function (RelayEvent) {\n    /** Fired when a connection to a relay is established */\n    RelayEvent[\"Connect\"] = \"connect\";\n    /** Fired when a connection to a relay is closed */\n    RelayEvent[\"Disconnect\"] = \"disconnect\";\n    /** Fired when an error occurs */\n    RelayEvent[\"Error\"] = \"error\";\n    /** Fired when a relay sends a NOTICE message */\n    RelayEvent[\"Notice\"] = \"notice\";\n    /** Fired when a relay confirms an event was received (OK message) */\n    RelayEvent[\"OK\"] = \"ok\";\n    /** Fired when a relay closes a subscription */\n    RelayEvent[\"Closed\"] = \"closed\";\n    /** Fired when a relay sends an authentication challenge (NIP-42) */\n    RelayEvent[\"Auth\"] = \"auth\";\n})(RelayEvent || (RelayEvent = {}));\n/**\n * Relay status indicating the current connection state\n */\nexport var RelayStatus;\n(function (RelayStatus) {\n    /** Not connected or disconnected */\n    RelayStatus[\"DISCONNECTED\"] = \"disconnected\";\n    /** Connection in progress */\n    RelayStatus[\"CONNECTING\"] = \"connecting\";\n    /** Successfully connected */\n    RelayStatus[\"CONNECTED\"] = \"connected\";\n    /** Waiting to reconnect after a disconnection */\n    RelayStatus[\"RECONNECTING\"] = \"reconnecting\";\n    /** Permanently closed (e.g., after calling disconnect) */\n    RelayStatus[\"CLOSED\"] = \"closed\";\n})(RelayStatus || (RelayStatus = {}));\n/**\n * NIP-01 defined event kinds with their semantic meanings\n * https://github.com/nostr-protocol/nips/blob/master/01.md\n */\nexport var NostrKind;\n(function (NostrKind) {\n    /** Metadata: Profile information (replaceable) */\n    NostrKind[NostrKind[\"Metadata\"] = 0] = \"Metadata\";\n    /** Short note: Standard text note */\n    NostrKind[NostrKind[\"ShortNote\"] = 1] = \"ShortNote\";\n    /** Recommend relay: Relay recommendations (replaceable) */\n    NostrKind[NostrKind[\"RecommendRelay\"] = 2] = \"RecommendRelay\";\n    /** Contacts: Follow list (replaceable) */\n    NostrKind[NostrKind[\"Contacts\"] = 3] = \"Contacts\";\n    /** Direct message: Encrypted direct message */\n    NostrKind[NostrKind[\"DirectMessage\"] = 4] = \"DirectMessage\";\n    /** Deletion: Event deletion request */\n    NostrKind[NostrKind[\"Deletion\"] = 5] = \"Deletion\";\n    /** Repost: Repost of another note */\n    NostrKind[NostrKind[\"Repost\"] = 6] = \"Repost\";\n    /** Reaction: Reaction to another note */\n    NostrKind[NostrKind[\"Reaction\"] = 7] = \"Reaction\";\n    /** Badge award: Award badge to a user */\n    NostrKind[NostrKind[\"BadgeAward\"] = 8] = \"BadgeAward\";\n})(NostrKind || (NostrKind = {}));\n/**\n * WebSocket ready states\n */\nexport var WebSocketReadyState;\n(function (WebSocketReadyState) {\n    /** Connection has not yet been established */\n    WebSocketReadyState[WebSocketReadyState[\"CONNECTING\"] = 0] = \"CONNECTING\";\n    /** Connection is established and communication is possible */\n    WebSocketReadyState[WebSocketReadyState[\"OPEN\"] = 1] = \"OPEN\";\n    /** Connection is going through the closing handshake */\n    WebSocketReadyState[WebSocketReadyState[\"CLOSING\"] = 2] = \"CLOSING\";\n    /** Connection has been closed or could not be opened */\n    WebSocketReadyState[WebSocketReadyState[\"CLOSED\"] = 3] = \"CLOSED\";\n})(WebSocketReadyState || (WebSocketReadyState = {}));\n/**\n * Enum for standard relay error types\n */\nexport var RelayErrorType;\n(function (RelayErrorType) {\n    /** Connection error when attempting to connect to relay */\n    RelayErrorType[\"CONNECTION_ERROR\"] = \"connection_error\";\n    /** Timeout occurred during a relay operation */\n    RelayErrorType[\"TIMEOUT\"] = \"timeout\";\n    /** Connection was lost or closed during an operation */\n    RelayErrorType[\"DISCONNECTED\"] = \"disconnected\";\n    /** Failed to validate an event (signature, id, etc.) */\n    RelayErrorType[\"VALIDATION_ERROR\"] = \"validation_error\";\n    /** Event was rejected by the relay */\n    RelayErrorType[\"EVENT_REJECTED\"] = \"event_rejected\";\n    /** Rate limit exceeded on the relay */\n    RelayErrorType[\"RATE_LIMITED\"] = \"rate_limited\";\n    /** Authentication required but not provided */\n    RelayErrorType[\"AUTH_REQUIRED\"] = \"auth_required\";\n    /** Authentication attempt failed */\n    RelayErrorType[\"AUTH_FAILED\"] = \"auth_failed\";\n    /** IP address is blocked or restricted */\n    RelayErrorType[\"IP_BLOCKED\"] = \"ip_blocked\";\n    /** Relay is in read-only mode */\n    RelayErrorType[\"READ_ONLY\"] = \"read_only\";\n    /** Event payload is too large */\n    RelayErrorType[\"PAYLOAD_TOO_LARGE\"] = \"payload_too_large\";\n    /** Relay could not process the message */\n    RelayErrorType[\"INVALID_MESSAGE\"] = \"invalid_message\";\n    /** Maximum subscriptions reached */\n    RelayErrorType[\"MAX_SUBSCRIPTIONS\"] = \"max_subscriptions\";\n    /** Unknown error */\n    RelayErrorType[\"UNKNOWN\"] = \"unknown\";\n})(RelayErrorType || (RelayErrorType = {}));\nexport var NIP20Prefix;\n(function (NIP20Prefix) {\n    NIP20Prefix[\"Duplicate\"] = \"duplicate:\";\n    NIP20Prefix[\"PoW\"] = \"pow:\";\n    NIP20Prefix[\"RateLimited\"] = \"rate-limited:\";\n    NIP20Prefix[\"Invalid\"] = \"invalid:\";\n    NIP20Prefix[\"Error\"] = \"error:\";\n    NIP20Prefix[\"Blocked\"] = \"blocked:\";\n    NIP20Prefix[\"AuthRequired\"] = \"auth-required:\";\n    NIP20Prefix[\"Restricted\"] = \"restricted:\";\n})(NIP20Prefix || (NIP20Prefix = {}));\n", "/**\n * Internal webcrypto alias.\n * We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n * See utils.ts for details.\n * @module\n */\ndeclare const globalThis: Record<string, any> | undefined;\nexport const crypto: any =\n  typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n", "/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\n\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nexport function isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n\n/** Asserts something is positive integer. */\nexport function anumber(n: number): void {\n  if (!Number.isSafeInteger(n) || n < 0) throw new Error('positive integer expected, got ' + n);\n}\n\n/** Asserts something is Uint8Array. */\nexport function abytes(b: Uint8Array | undefined, ...lengths: number[]): void {\n  if (!isBytes(b)) throw new Error('Uint8Array expected');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n\n/** Asserts something is hash */\nexport function ahash(h: IHash): void {\n  if (typeof h !== 'function' || typeof h.create !== 'function')\n    throw new Error('Hash should be wrapped by utils.createHasher');\n  anumber(h.outputLen);\n  anumber(h.blockLen);\n}\n\n/** Asserts a hash instance has not been destroyed / finished */\nexport function aexists(instance: any, checkFinished = true): void {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\n\n/** Asserts output is properly-sized byte array */\nexport function aoutput(out: any, instance: any): void {\n  abytes(out);\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error('digestInto() expects output buffer of length at least ' + min);\n  }\n}\n\n/** Generic type encompassing 8/16/32-byte arrays - but not 64-byte. */\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\n/** Cast u8 / u16 / u32 to u8. */\nexport function u8(arr: TypedArray): Uint8Array {\n  return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** Cast u8 / u16 / u32 to u32. */\nexport function u32(arr: TypedArray): Uint32Array {\n  return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nexport function clean(...arrays: TypedArray[]): void {\n  for (let i = 0; i < arrays.length; i++) {\n    arrays[i].fill(0);\n  }\n}\n\n/** Create DataView of an array for easy byte-level manipulation. */\nexport function createView(arr: TypedArray): DataView {\n  return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** The rotate right (circular right shift) operation for uint32 */\nexport function rotr(word: number, shift: number): number {\n  return (word << (32 - shift)) | (word >>> shift);\n}\n\n/** The rotate left (circular left shift) operation for uint32 */\nexport function rotl(word: number, shift: number): number {\n  return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE: boolean = /* @__PURE__ */ (() =>\n  new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n\n/** The byte swap operation for uint32 */\nexport function byteSwap(word: number): number {\n  return (\n    ((word << 24) & 0xff000000) |\n    ((word << 8) & 0xff0000) |\n    ((word >>> 8) & 0xff00) |\n    ((word >>> 24) & 0xff)\n  );\n}\n/** Conditionally byte swap if on a big-endian platform */\nexport const swap8IfBE: (n: number) => number = isLE\n  ? (n: number) => n\n  : (n: number) => byteSwap(n);\n\n/** @deprecated */\nexport const byteSwapIfBE: typeof swap8IfBE = swap8IfBE;\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr: Uint32Array): Uint32Array {\n  for (let i = 0; i < arr.length; i++) {\n    arr[i] = byteSwap(arr[i]);\n  }\n  return arr;\n}\n\nexport const swap32IfBE: (u: Uint32Array) => Uint32Array = isLE\n  ? (u: Uint32Array) => u\n  : byteSwap32;\n\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin: boolean = /* @__PURE__ */ (() =>\n  // @ts-ignore\n  typeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) =>\n  i.toString(16).padStart(2, '0')\n);\n\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes: Uint8Array): string {\n  abytes(bytes);\n  // @ts-ignore\n  if (hasHexBuiltin) return bytes.toHex();\n  // pre-caching improves the speed 6x\n  let hex = '';\n  for (let i = 0; i < bytes.length; i++) {\n    hex += hexes[bytes[i]];\n  }\n  return hex;\n}\n\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 } as const;\nfunction asciiToBase16(ch: number): number | undefined {\n  if (ch >= asciis._0 && ch <= asciis._9) return ch - asciis._0; // '2' => 50-48\n  if (ch >= asciis.A && ch <= asciis.F) return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n  if (ch >= asciis.a && ch <= asciis.f) return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n  return;\n}\n\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  // @ts-ignore\n  if (hasHexBuiltin) return Uint8Array.fromHex(hex);\n  const hl = hex.length;\n  const al = hl / 2;\n  if (hl % 2) throw new Error('hex string expected, got unpadded hex of length ' + hl);\n  const array = new Uint8Array(al);\n  for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n    const n1 = asciiToBase16(hex.charCodeAt(hi));\n    const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n    if (n1 === undefined || n2 === undefined) {\n      const char = hex[hi] + hex[hi + 1];\n      throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n    }\n    array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n  }\n  return array;\n}\n\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nexport const nextTick = async (): Promise<void> => {};\n\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nexport async function asyncLoop(\n  iters: number,\n  tick: number,\n  cb: (i: number) => void\n): Promise<void> {\n  let ts = Date.now();\n  for (let i = 0; i < iters; i++) {\n    cb(i);\n    // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n    const diff = Date.now() - ts;\n    if (diff >= 0 && diff < tick) continue;\n    await nextTick();\n    ts += diff;\n  }\n}\n\n// Global symbols, but ts doesn't see them: https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts string to bytes using UTF8 encoding.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') throw new Error('string expected');\n  return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\nexport function bytesToUtf8(bytes: Uint8Array): string {\n  return new TextDecoder().decode(bytes);\n}\n\n/** Accepted input of hash functions. Strings are converted to byte arrays. */\nexport type Input = string | Uint8Array;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data: Input): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  abytes(data);\n  return data;\n}\n\n/** KDFs can accept string or Uint8Array for user convenience. */\nexport type KDFInput = string | Uint8Array;\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nexport function kdfInputToBytes(data: KDFInput): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  abytes(data);\n  return data;\n}\n\n/** Copies several Uint8Arrays into one. */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  let sum = 0;\n  for (let i = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    abytes(a);\n    sum += a.length;\n  }\n  const res = new Uint8Array(sum);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    res.set(a, pad);\n    pad += a.length;\n  }\n  return res;\n}\n\ntype EmptyObj = {};\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts?: T2\n): T1 & T2 {\n  if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n    throw new Error('options should be object or undefined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\n/** Hash interface. */\nexport type IHash = {\n  (data: Uint8Array): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create: any;\n};\n\n/** For runtime check if class implements interface */\nexport abstract class Hash<T extends Hash<T>> {\n  abstract blockLen: number; // Bytes per block\n  abstract outputLen: number; // Bytes in output\n  abstract update(buf: Input): this;\n  // Writes digest into buf\n  abstract digestInto(buf: Uint8Array): void;\n  abstract digest(): Uint8Array;\n  /**\n   * Resets internal state. Makes Hash instance unusable.\n   * Reset is impossible for keyed hashes if key is consumed into state. If digest is not consumed\n   * by user, they will need to manually call `destroy()` when zeroing is necessary.\n   */\n  abstract destroy(): void;\n  /**\n   * Clones hash instance. Unsafe: doesn't check whether `to` is valid. Can be used as `clone()`\n   * when no options are passed.\n   * Reasons to use `_cloneInto` instead of clone: 1) performance 2) reuse instance => all internal\n   * buffers are overwritten => causes buffer overwrite which is used for digest in some cases.\n   * There are no guarantees for clean-up because it's impossible in JS.\n   */\n  abstract _cloneInto(to?: T): T;\n  // Safe version that clones internal state\n  abstract clone(): T;\n}\n\n/**\n * XOF: streaming API to read digest in chunks.\n * Same as 'squeeze' in keccak/k12 and 'seek' in blake3, but more generic name.\n * When hash used in XOF mode it is up to user to call '.destroy' afterwards, since we cannot\n * destroy state, next call can require more bytes.\n */\nexport type HashXOF<T extends Hash<T>> = Hash<T> & {\n  xof(bytes: number): Uint8Array; // Read 'bytes' bytes from digest stream\n  xofInto(buf: Uint8Array): Uint8Array; // read buf.length bytes from digest stream into buf\n};\n\n/** Hash function */\nexport type CHash = ReturnType<typeof createHasher>;\n/** Hash function with output */\nexport type CHashO = ReturnType<typeof createOptHasher>;\n/** XOF with output */\nexport type CHashXO = ReturnType<typeof createXOFer>;\n\n/** Wraps hash function, creating an interface on top of it */\nexport function createHasher<T extends Hash<T>>(\n  hashCons: () => Hash<T>\n): {\n  (msg: Input): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(): Hash<T>;\n} {\n  const hashC = (msg: Input): Uint8Array => hashCons().update(toBytes(msg)).digest();\n  const tmp = hashCons();\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = () => hashCons();\n  return hashC;\n}\n\nexport function createOptHasher<H extends Hash<H>, T extends Object>(\n  hashCons: (opts?: T) => Hash<H>\n): {\n  (msg: Input, opts?: T): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(opts?: T): Hash<H>;\n} {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts?: T) => hashCons(opts);\n  return hashC;\n}\n\nexport function createXOFer<H extends HashXOF<H>, T extends Object>(\n  hashCons: (opts?: T) => HashXOF<H>\n): {\n  (msg: Input, opts?: T): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(opts?: T): HashXOF<H>;\n} {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts?: T) => hashCons(opts);\n  return hashC;\n}\nexport const wrapConstructor: typeof createHasher = createHasher;\nexport const wrapConstructorWithOpts: typeof createOptHasher = createOptHasher;\nexport const wrapXOFConstructorWithOpts: typeof createXOFer = createXOFer;\n\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32): Uint8Array {\n  if (crypto && typeof crypto.getRandomValues === 'function') {\n    return crypto.getRandomValues(new Uint8Array(bytesLength));\n  }\n  // Legacy Node.js compatibility\n  if (crypto && typeof crypto.randomBytes === 'function') {\n    return Uint8Array.from(crypto.randomBytes(bytesLength));\n  }\n  throw new Error('crypto.getRandomValues must be defined');\n}\n", "/**\n * Internal Merkle-Damgard hash utils.\n * @module\n */\nimport { type Input, Hash, abytes, aexists, aoutput, clean, createView, toBytes } from './utils.ts';\n\n/** Polyfill for Safari 14. https://caniuse.com/mdn-javascript_builtins_dataview_setbiguint64 */\nexport function setBigUint64(\n  view: DataView,\n  byteOffset: number,\n  value: bigint,\n  isLE: boolean\n): void {\n  if (typeof view.setBigUint64 === 'function') return view.setBigUint64(byteOffset, value, isLE);\n  const _32n = BigInt(32);\n  const _u32_max = BigInt(0xffffffff);\n  const wh = Number((value >> _32n) & _u32_max);\n  const wl = Number(value & _u32_max);\n  const h = isLE ? 4 : 0;\n  const l = isLE ? 0 : 4;\n  view.setUint32(byteOffset + h, wh, isLE);\n  view.setUint32(byteOffset + l, wl, isLE);\n}\n\n/** Choice: a ? b : c */\nexport function Chi(a: number, b: number, c: number): number {\n  return (a & b) ^ (~a & c);\n}\n\n/** Majority function, true if any two inputs is true. */\nexport function Maj(a: number, b: number, c: number): number {\n  return (a & b) ^ (a & c) ^ (b & c);\n}\n\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nexport abstract class HashMD<T extends HashMD<T>> extends Hash<T> {\n  protected abstract process(buf: DataView, offset: number): void;\n  protected abstract get(): number[];\n  protected abstract set(...args: number[]): void;\n  abstract destroy(): void;\n  protected abstract roundClean(): void;\n\n  readonly blockLen: number;\n  readonly outputLen: number;\n  readonly padOffset: number;\n  readonly isLE: boolean;\n\n  // For partial updates less than block size\n  protected buffer: Uint8Array;\n  protected view: DataView;\n  protected finished = false;\n  protected length = 0;\n  protected pos = 0;\n  protected destroyed = false;\n\n  constructor(blockLen: number, outputLen: number, padOffset: number, isLE: boolean) {\n    super();\n    this.blockLen = blockLen;\n    this.outputLen = outputLen;\n    this.padOffset = padOffset;\n    this.isLE = isLE;\n    this.buffer = new Uint8Array(blockLen);\n    this.view = createView(this.buffer);\n  }\n  update(data: Input): this {\n    aexists(this);\n    data = toBytes(data);\n    abytes(data);\n    const { view, buffer, blockLen } = this;\n    const len = data.length;\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      // Fast path: we have at least one block in input, cast it to view and process\n      if (take === blockLen) {\n        const dataView = createView(data);\n        for (; blockLen <= len - pos; pos += blockLen) this.process(dataView, pos);\n        continue;\n      }\n      buffer.set(data.subarray(pos, pos + take), this.pos);\n      this.pos += take;\n      pos += take;\n      if (this.pos === blockLen) {\n        this.process(view, 0);\n        this.pos = 0;\n      }\n    }\n    this.length += data.length;\n    this.roundClean();\n    return this;\n  }\n  digestInto(out: Uint8Array): void {\n    aexists(this);\n    aoutput(out, this);\n    this.finished = true;\n    // Padding\n    // We can avoid allocation of buffer for padding completely if it\n    // was previously not allocated here. But it won't change performance.\n    const { buffer, view, blockLen, isLE } = this;\n    let { pos } = this;\n    // append the bit '1' to the message\n    buffer[pos++] = 0b10000000;\n    clean(this.buffer.subarray(pos));\n    // we have less than padOffset left in buffer, so we cannot put length in\n    // current block, need process it and pad again\n    if (this.padOffset > blockLen - pos) {\n      this.process(view, 0);\n      pos = 0;\n    }\n    // Pad until full block byte with zeros\n    for (let i = pos; i < blockLen; i++) buffer[i] = 0;\n    // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n    // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n    // So we just write lowest 64 bits of that value.\n    setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n    this.process(view, 0);\n    const oview = createView(out);\n    const len = this.outputLen;\n    // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n    if (len % 4) throw new Error('_sha2: outputLen should be aligned to 32bit');\n    const outLen = len / 4;\n    const state = this.get();\n    if (outLen > state.length) throw new Error('_sha2: outputLen bigger than state');\n    for (let i = 0; i < outLen; i++) oview.setUint32(4 * i, state[i], isLE);\n  }\n  digest(): Uint8Array {\n    const { buffer, outputLen } = this;\n    this.digestInto(buffer);\n    const res = buffer.slice(0, outputLen);\n    this.destroy();\n    return res;\n  }\n  _cloneInto(to?: T): T {\n    to ||= new (this.constructor as any)() as T;\n    to.set(...this.get());\n    const { blockLen, buffer, length, finished, destroyed, pos } = this;\n    to.destroyed = destroyed;\n    to.finished = finished;\n    to.length = length;\n    to.pos = pos;\n    if (length % blockLen) to.buffer.set(buffer);\n    return to;\n  }\n  clone(): T {\n    return this._cloneInto();\n  }\n}\n\n/**\n * Initial SHA-2 state: fractional parts of square roots of first 16 primes 2..53.\n * Check out `test/misc/sha2-gen-iv.js` for recomputation guide.\n */\n\n/** Initial SHA256 state. Bits 0..32 of frac part of sqrt of primes 2..19 */\nexport const SHA256_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,\n]);\n\n/** Initial SHA224 state. Bits 32..64 of frac part of sqrt of primes 23..53 */\nexport const SHA224_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939, 0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4,\n]);\n\n/** Initial SHA384 state. Bits 0..64 of frac part of sqrt of primes 23..53 */\nexport const SHA384_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0xcbbb9d5d, 0xc1059ed8, 0x629a292a, 0x367cd507, 0x9159015a, 0x3070dd17, 0x152fecd8, 0xf70e5939,\n  0x67332667, 0xffc00b31, 0x8eb44a87, 0x68581511, 0xdb0c2e0d, 0x64f98fa7, 0x47b5481d, 0xbefa4fa4,\n]);\n\n/** Initial SHA512 state. Bits 0..64 of frac part of sqrt of primes 2..19 */\nexport const SHA512_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b, 0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n  0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f, 0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179,\n]);\n", "/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\n\nfunction fromBig(\n  n: bigint,\n  le = false\n): {\n  h: number;\n  l: number;\n} {\n  if (le) return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n  return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\n\nfunction split(lst: bigint[], le = false): Uint32Array[] {\n  const len = lst.length;\n  let Ah = new Uint32Array(len);\n  let Al = new Uint32Array(len);\n  for (let i = 0; i < len; i++) {\n    const { h, l } = fromBig(lst[i], le);\n    [Ah[i], Al[i]] = [h, l];\n  }\n  return [Ah, Al];\n}\n\nconst toBig = (h: number, l: number): bigint => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h: number, _l: number, s: number): number => h >>> s;\nconst shrSL = (h: number, l: number, s: number): number => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h: number, l: number, s: number): number => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h: number, l: number, s: number): number => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h: number, l: number, s: number): number => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h: number, l: number, s: number): number => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h: number, l: number): number => l;\nconst rotr32L = (h: number, _l: number): number => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h: number, l: number, s: number): number => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h: number, l: number, s: number): number => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h: number, l: number, s: number): number => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h: number, l: number, s: number): number => (h << (s - 32)) | (l >>> (64 - s));\n\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(\n  Ah: number,\n  Al: number,\n  Bh: number,\n  Bl: number\n): {\n  h: number;\n  l: number;\n} {\n  const l = (Al >>> 0) + (Bl >>> 0);\n  return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al: number, Bl: number, Cl: number): number => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low: number, Ah: number, Bh: number, Ch: number): number =>\n  (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al: number, Bl: number, Cl: number, Dl: number): number =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number): number =>\n  (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al: number, Bl: number, Cl: number, Dl: number, El: number): number =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number): number =>\n  (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n\n// prettier-ignore\nexport {\n  add, add3H, add3L, add4H, add4L, add5H, add5L, fromBig, rotlBH, rotlBL, rotlSH, rotlSL, rotr32H, rotr32L, rotrBH, rotrBL, rotrSH, rotrSL, shrSH, shrSL, split, toBig\n};\n// prettier-ignore\nconst u64: { fromBig: typeof fromBig; split: typeof split; toBig: (h: number, l: number) => bigint; shrSH: (h: number, _l: number, s: number) => number; shrSL: (h: number, l: number, s: number) => number; rotrSH: (h: number, l: number, s: number) => number; rotrSL: (h: number, l: number, s: number) => number; rotrBH: (h: number, l: number, s: number) => number; rotrBL: (h: number, l: number, s: number) => number; rotr32H: (_h: number, l: number) => number; rotr32L: (h: number, _l: number) => number; rotlSH: (h: number, l: number, s: number) => number; rotlSL: (h: number, l: number, s: number) => number; rotlBH: (h: number, l: number, s: number) => number; rotlBL: (h: number, l: number, s: number) => number; add: typeof add; add3L: (Al: number, Bl: number, Cl: number) => number; add3H: (low: number, Ah: number, Bh: number, Ch: number) => number; add4L: (Al: number, Bl: number, Cl: number, Dl: number) => number; add4H: (low: number, Ah: number, Bh: number, Ch: number, Dh: number) => number; add5H: (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number) => number; add5L: (Al: number, Bl: number, Cl: number, Dl: number, El: number) => number; } = {\n  fromBig, split, toBig,\n  shrSH, shrSL,\n  rotrSH, rotrSL, rotrBH, rotrBL,\n  rotr32H, rotr32L,\n  rotlSH, rotlSL, rotlBH, rotlBL,\n  add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n", "/**\n * SHA2 hash function. A.k.a. sha256, sha384, sha512, sha512_224, sha512_256.\n * SHA256 is the fastest hash implementable in JS, even faster than Blake3.\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\n * [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\nimport { Chi, HashMD, Maj, SHA224_IV, SHA256_IV, SHA384_IV, SHA512_IV } from './_md.ts';\nimport * as u64 from './_u64.ts';\nimport { type CHash, clean, createHasher, rotr } from './utils.ts';\n\n/**\n * Round constants:\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\n */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n\n/** Reusable temporary buffer. \"W\" comes straight from spec. */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nexport class SHA256 extends HashMD<SHA256> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  protected A: number = SHA256_IV[0] | 0;\n  protected B: number = SHA256_IV[1] | 0;\n  protected C: number = SHA256_IV[2] | 0;\n  protected D: number = SHA256_IV[3] | 0;\n  protected E: number = SHA256_IV[4] | 0;\n  protected F: number = SHA256_IV[5] | 0;\n  protected G: number = SHA256_IV[6] | 0;\n  protected H: number = SHA256_IV[7] | 0;\n\n  constructor(outputLen: number = 32) {\n    super(64, outputLen, 8, false);\n  }\n  protected get(): [number, number, number, number, number, number, number, number] {\n    const { A, B, C, D, E, F, G, H } = this;\n    return [A, B, C, D, E, F, G, H];\n  }\n  // prettier-ignore\n  protected set(\n    A: number, B: number, C: number, D: number, E: number, F: number, G: number, H: number\n  ): void {\n    this.A = A | 0;\n    this.B = B | 0;\n    this.C = C | 0;\n    this.D = D | 0;\n    this.E = E | 0;\n    this.F = F | 0;\n    this.G = G | 0;\n    this.H = H | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) SHA256_W[i] = view.getUint32(offset, false);\n    for (let i = 16; i < 64; i++) {\n      const W15 = SHA256_W[i - 15];\n      const W2 = SHA256_W[i - 2];\n      const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n      const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n      SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n    }\n    // Compression function main loop, 64 rounds\n    let { A, B, C, D, E, F, G, H } = this;\n    for (let i = 0; i < 64; i++) {\n      const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n      const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n      const T2 = (sigma0 + Maj(A, B, C)) | 0;\n      H = G;\n      G = F;\n      F = E;\n      E = (D + T1) | 0;\n      D = C;\n      C = B;\n      B = A;\n      A = (T1 + T2) | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    A = (A + this.A) | 0;\n    B = (B + this.B) | 0;\n    C = (C + this.C) | 0;\n    D = (D + this.D) | 0;\n    E = (E + this.E) | 0;\n    F = (F + this.F) | 0;\n    G = (G + this.G) | 0;\n    H = (H + this.H) | 0;\n    this.set(A, B, C, D, E, F, G, H);\n  }\n  protected roundClean(): void {\n    clean(SHA256_W);\n  }\n  destroy(): void {\n    this.set(0, 0, 0, 0, 0, 0, 0, 0);\n    clean(this.buffer);\n  }\n}\n\nexport class SHA224 extends SHA256 {\n  protected A: number = SHA224_IV[0] | 0;\n  protected B: number = SHA224_IV[1] | 0;\n  protected C: number = SHA224_IV[2] | 0;\n  protected D: number = SHA224_IV[3] | 0;\n  protected E: number = SHA224_IV[4] | 0;\n  protected F: number = SHA224_IV[5] | 0;\n  protected G: number = SHA224_IV[6] | 0;\n  protected H: number = SHA224_IV[7] | 0;\n  constructor() {\n    super(28);\n  }\n}\n\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\n\n// Round contants\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\n// prettier-ignore\nconst K512 = /* @__PURE__ */ (() => u64.split([\n  '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n  '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n  '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n  '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n  '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n  '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n  '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n  '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n  '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n  '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n  '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n  '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n  '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n  '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n  '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n  '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n  '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n  '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n  '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n  '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\nconst SHA512_Kh = /* @__PURE__ */ (() => K512[0])();\nconst SHA512_Kl = /* @__PURE__ */ (() => K512[1])();\n\n// Reusable temporary buffers\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\n\nexport class SHA512 extends HashMD<SHA512> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  // h -- high 32 bits, l -- low 32 bits\n  protected Ah: number = SHA512_IV[0] | 0;\n  protected Al: number = SHA512_IV[1] | 0;\n  protected Bh: number = SHA512_IV[2] | 0;\n  protected Bl: number = SHA512_IV[3] | 0;\n  protected Ch: number = SHA512_IV[4] | 0;\n  protected Cl: number = SHA512_IV[5] | 0;\n  protected Dh: number = SHA512_IV[6] | 0;\n  protected Dl: number = SHA512_IV[7] | 0;\n  protected Eh: number = SHA512_IV[8] | 0;\n  protected El: number = SHA512_IV[9] | 0;\n  protected Fh: number = SHA512_IV[10] | 0;\n  protected Fl: number = SHA512_IV[11] | 0;\n  protected Gh: number = SHA512_IV[12] | 0;\n  protected Gl: number = SHA512_IV[13] | 0;\n  protected Hh: number = SHA512_IV[14] | 0;\n  protected Hl: number = SHA512_IV[15] | 0;\n\n  constructor(outputLen: number = 64) {\n    super(128, outputLen, 16, false);\n  }\n  // prettier-ignore\n  protected get(): [\n    number, number, number, number, number, number, number, number,\n    number, number, number, number, number, number, number, number\n  ] {\n    const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n  }\n  // prettier-ignore\n  protected set(\n    Ah: number, Al: number, Bh: number, Bl: number, Ch: number, Cl: number, Dh: number, Dl: number,\n    Eh: number, El: number, Fh: number, Fl: number, Gh: number, Gl: number, Hh: number, Hl: number\n  ): void {\n    this.Ah = Ah | 0;\n    this.Al = Al | 0;\n    this.Bh = Bh | 0;\n    this.Bl = Bl | 0;\n    this.Ch = Ch | 0;\n    this.Cl = Cl | 0;\n    this.Dh = Dh | 0;\n    this.Dl = Dl | 0;\n    this.Eh = Eh | 0;\n    this.El = El | 0;\n    this.Fh = Fh | 0;\n    this.Fl = Fl | 0;\n    this.Gh = Gh | 0;\n    this.Gl = Gl | 0;\n    this.Hh = Hh | 0;\n    this.Hl = Hl | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) {\n      SHA512_W_H[i] = view.getUint32(offset);\n      SHA512_W_L[i] = view.getUint32((offset += 4));\n    }\n    for (let i = 16; i < 80; i++) {\n      // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n      const W15h = SHA512_W_H[i - 15] | 0;\n      const W15l = SHA512_W_L[i - 15] | 0;\n      const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n      const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n      // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n      const W2h = SHA512_W_H[i - 2] | 0;\n      const W2l = SHA512_W_L[i - 2] | 0;\n      const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n      const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n      // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n      const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n      const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n      SHA512_W_H[i] = SUMh | 0;\n      SHA512_W_L[i] = SUMl | 0;\n    }\n    let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    // Compression function main loop, 80 rounds\n    for (let i = 0; i < 80; i++) {\n      // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n      const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n      const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n      //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n      const CHIl = (El & Fl) ^ (~El & Gl);\n      // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n      // prettier-ignore\n      const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n      const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n      const T1l = T1ll | 0;\n      // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n      const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n      const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n      const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n      const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n      Hh = Gh | 0;\n      Hl = Gl | 0;\n      Gh = Fh | 0;\n      Gl = Fl | 0;\n      Fh = Eh | 0;\n      Fl = El | 0;\n      ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n      Dh = Ch | 0;\n      Dl = Cl | 0;\n      Ch = Bh | 0;\n      Cl = Bl | 0;\n      Bh = Ah | 0;\n      Bl = Al | 0;\n      const All = u64.add3L(T1l, sigma0l, MAJl);\n      Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n      Al = All | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n    ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n    ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n    ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n    ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n    ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n    ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n    ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n    this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n  }\n  protected roundClean(): void {\n    clean(SHA512_W_H, SHA512_W_L);\n  }\n  destroy(): void {\n    clean(this.buffer);\n    this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n  }\n}\n\nexport class SHA384 extends SHA512 {\n  protected Ah: number = SHA384_IV[0] | 0;\n  protected Al: number = SHA384_IV[1] | 0;\n  protected Bh: number = SHA384_IV[2] | 0;\n  protected Bl: number = SHA384_IV[3] | 0;\n  protected Ch: number = SHA384_IV[4] | 0;\n  protected Cl: number = SHA384_IV[5] | 0;\n  protected Dh: number = SHA384_IV[6] | 0;\n  protected Dl: number = SHA384_IV[7] | 0;\n  protected Eh: number = SHA384_IV[8] | 0;\n  protected El: number = SHA384_IV[9] | 0;\n  protected Fh: number = SHA384_IV[10] | 0;\n  protected Fl: number = SHA384_IV[11] | 0;\n  protected Gh: number = SHA384_IV[12] | 0;\n  protected Gl: number = SHA384_IV[13] | 0;\n  protected Hh: number = SHA384_IV[14] | 0;\n  protected Hl: number = SHA384_IV[15] | 0;\n\n  constructor() {\n    super(48);\n  }\n}\n\n/**\n * Truncated SHA512/256 and SHA512/224.\n * SHA512_IV is XORed with 0xa5a5a5a5a5a5a5a5, then used as \"intermediary\" IV of SHA512/t.\n * Then t hashes string to produce result IV.\n * See `test/misc/sha2-gen-iv.js`.\n */\n\n/** SHA512/224 IV */\nconst T224_IV = /* @__PURE__ */ Uint32Array.from([\n  0x8c3d37c8, 0x19544da2, 0x73e19966, 0x89dcd4d6, 0x1dfab7ae, 0x32ff9c82, 0x679dd514, 0x582f9fcf,\n  0x0f6d2b69, 0x7bd44da8, 0x77e36f73, 0x04c48942, 0x3f9d85a8, 0x6a1d36c8, 0x1112e6ad, 0x91d692a1,\n]);\n\n/** SHA512/256 IV */\nconst T256_IV = /* @__PURE__ */ Uint32Array.from([\n  0x22312194, 0xfc2bf72c, 0x9f555fa3, 0xc84c64c2, 0x2393b86b, 0x6f53b151, 0x96387719, 0x5940eabd,\n  0x96283ee2, 0xa88effe3, 0xbe5e1e25, 0x53863992, 0x2b0199fc, 0x2c85b8aa, 0x0eb72ddc, 0x81c52ca2,\n]);\n\nexport class SHA512_224 extends SHA512 {\n  protected Ah: number = T224_IV[0] | 0;\n  protected Al: number = T224_IV[1] | 0;\n  protected Bh: number = T224_IV[2] | 0;\n  protected Bl: number = T224_IV[3] | 0;\n  protected Ch: number = T224_IV[4] | 0;\n  protected Cl: number = T224_IV[5] | 0;\n  protected Dh: number = T224_IV[6] | 0;\n  protected Dl: number = T224_IV[7] | 0;\n  protected Eh: number = T224_IV[8] | 0;\n  protected El: number = T224_IV[9] | 0;\n  protected Fh: number = T224_IV[10] | 0;\n  protected Fl: number = T224_IV[11] | 0;\n  protected Gh: number = T224_IV[12] | 0;\n  protected Gl: number = T224_IV[13] | 0;\n  protected Hh: number = T224_IV[14] | 0;\n  protected Hl: number = T224_IV[15] | 0;\n\n  constructor() {\n    super(28);\n  }\n}\n\nexport class SHA512_256 extends SHA512 {\n  protected Ah: number = T256_IV[0] | 0;\n  protected Al: number = T256_IV[1] | 0;\n  protected Bh: number = T256_IV[2] | 0;\n  protected Bl: number = T256_IV[3] | 0;\n  protected Ch: number = T256_IV[4] | 0;\n  protected Cl: number = T256_IV[5] | 0;\n  protected Dh: number = T256_IV[6] | 0;\n  protected Dl: number = T256_IV[7] | 0;\n  protected Eh: number = T256_IV[8] | 0;\n  protected El: number = T256_IV[9] | 0;\n  protected Fh: number = T256_IV[10] | 0;\n  protected Fl: number = T256_IV[11] | 0;\n  protected Gh: number = T256_IV[12] | 0;\n  protected Gl: number = T256_IV[13] | 0;\n  protected Hh: number = T256_IV[14] | 0;\n  protected Hl: number = T256_IV[15] | 0;\n\n  constructor() {\n    super(32);\n  }\n}\n\n/**\n * SHA2-256 hash function from RFC 4634.\n *\n * It is the fastest JS hash, even faster than Blake3.\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n */\nexport const sha256: CHash = /* @__PURE__ */ createHasher(() => new SHA256());\n/** SHA2-224 hash function from RFC 4634 */\nexport const sha224: CHash = /* @__PURE__ */ createHasher(() => new SHA224());\n\n/** SHA2-512 hash function from RFC 4634. */\nexport const sha512: CHash = /* @__PURE__ */ createHasher(() => new SHA512());\n/** SHA2-384 hash function from RFC 4634. */\nexport const sha384: CHash = /* @__PURE__ */ createHasher(() => new SHA384());\n\n/**\n * SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_256: CHash = /* @__PURE__ */ createHasher(() => new SHA512_256());\n/**\n * SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_224: CHash = /* @__PURE__ */ createHasher(() => new SHA512_224());\n", "/**\n * HMAC: RFC2104 message authentication code.\n * @module\n */\nimport { abytes, aexists, ahash, clean, Hash, toBytes, type CHash, type Input } from './utils.ts';\n\nexport class HMAC<T extends Hash<T>> extends Hash<HMAC<T>> {\n  oHash: T;\n  iHash: T;\n  blockLen: number;\n  outputLen: number;\n  private finished = false;\n  private destroyed = false;\n\n  constructor(hash: CHash, _key: Input) {\n    super();\n    ahash(hash);\n    const key = toBytes(_key);\n    this.iHash = hash.create() as T;\n    if (typeof this.iHash.update !== 'function')\n      throw new Error('Expected instance of class which extends utils.Hash');\n    this.blockLen = this.iHash.blockLen;\n    this.outputLen = this.iHash.outputLen;\n    const blockLen = this.blockLen;\n    const pad = new Uint8Array(blockLen);\n    // blockLen can be bigger than outputLen\n    pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36;\n    this.iHash.update(pad);\n    // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n    this.oHash = hash.create() as T;\n    // Undo internal XOR && apply outer XOR\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36 ^ 0x5c;\n    this.oHash.update(pad);\n    clean(pad);\n  }\n  update(buf: Input): this {\n    aexists(this);\n    this.iHash.update(buf);\n    return this;\n  }\n  digestInto(out: Uint8Array): void {\n    aexists(this);\n    abytes(out, this.outputLen);\n    this.finished = true;\n    this.iHash.digestInto(out);\n    this.oHash.update(out);\n    this.oHash.digestInto(out);\n    this.destroy();\n  }\n  digest(): Uint8Array {\n    const out = new Uint8Array(this.oHash.outputLen);\n    this.digestInto(out);\n    return out;\n  }\n  _cloneInto(to?: HMAC<T>): HMAC<T> {\n    // Create new instance without calling constructor since key already in state and we don't know it.\n    to ||= Object.create(Object.getPrototypeOf(this), {});\n    const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n    to = to as this;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    to.blockLen = blockLen;\n    to.outputLen = outputLen;\n    to.oHash = oHash._cloneInto(to.oHash);\n    to.iHash = iHash._cloneInto(to.iHash);\n    return to;\n  }\n  clone(): HMAC<T> {\n    return this._cloneInto();\n  }\n  destroy(): void {\n    this.destroyed = true;\n    this.oHash.destroy();\n    this.iHash.destroy();\n  }\n}\n\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n * @example\n * import { hmac } from '@noble/hashes/hmac';\n * import { sha256 } from '@noble/hashes/sha2';\n * const mac1 = hmac(sha256, 'key', 'message');\n */\nexport const hmac: {\n  (hash: CHash, key: Input, message: Input): Uint8Array;\n  create(hash: CHash, key: Input): HMAC<any>;\n} = (hash: CHash, key: Input, message: Input): Uint8Array =>\n  new HMAC<any>(hash, key).update(message).digest();\nhmac.create = (hash: CHash, key: Input) => new HMAC<any>(hash, key);\n", "/**\n * Hex, bytes and number utilities.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport {\n  abytes as abytes_,\n  bytesToHex as bytesToHex_,\n  concatBytes as concatBytes_,\n  hexToBytes as hexToBytes_,\n  isBytes as isBytes_,\n} from '@noble/hashes/utils.js';\nexport {\n  abytes,\n  anumber,\n  bytesToHex,\n  bytesToUtf8,\n  concatBytes,\n  hexToBytes,\n  isBytes,\n  randomBytes,\n  utf8ToBytes,\n} from '@noble/hashes/utils.js';\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nexport type Hex = Uint8Array | string; // hex strings are accepted for simplicity\nexport type PrivKey = Hex | bigint; // bigints are accepted to ease learning curve\nexport type CHash = {\n  (message: Uint8Array | string): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create(opts?: { dkLen?: number }): any; // For shake\n};\nexport type FHash = (message: Uint8Array | string) => Uint8Array;\n\nexport function abool(title: string, value: boolean): void {\n  if (typeof value !== 'boolean') throw new Error(title + ' boolean expected, got ' + value);\n}\n\n// tmp name until v2\nexport function _abool2(value: boolean, title: string = ''): boolean {\n  if (typeof value !== 'boolean') {\n    const prefix = title && `\"${title}\"`;\n    throw new Error(prefix + 'expected boolean, got type=' + typeof value);\n  }\n  return value;\n}\n\n// tmp name until v2\n/** Asserts something is Uint8Array. */\nexport function _abytes2(value: Uint8Array, length?: number, title: string = ''): Uint8Array {\n  const bytes = isBytes_(value);\n  const len = value?.length;\n  const needsLen = length !== undefined;\n  if (!bytes || (needsLen && len !== length)) {\n    const prefix = title && `\"${title}\" `;\n    const ofLen = needsLen ? ` of length ${length}` : '';\n    const got = bytes ? `length=${len}` : `type=${typeof value}`;\n    throw new Error(prefix + 'expected Uint8Array' + ofLen + ', got ' + got);\n  }\n  return value;\n}\n\n// Used in weierstrass, der\nexport function numberToHexUnpadded(num: number | bigint): string {\n  const hex = num.toString(16);\n  return hex.length & 1 ? '0' + hex : hex;\n}\n\nexport function hexToNumber(hex: string): bigint {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  return hex === '' ? _0n : BigInt('0x' + hex); // Big Endian\n}\n\n// BE: Big Endian, LE: Little Endian\nexport function bytesToNumberBE(bytes: Uint8Array): bigint {\n  return hexToNumber(bytesToHex_(bytes));\n}\nexport function bytesToNumberLE(bytes: Uint8Array): bigint {\n  abytes_(bytes);\n  return hexToNumber(bytesToHex_(Uint8Array.from(bytes).reverse()));\n}\n\nexport function numberToBytesBE(n: number | bigint, len: number): Uint8Array {\n  return hexToBytes_(n.toString(16).padStart(len * 2, '0'));\n}\nexport function numberToBytesLE(n: number | bigint, len: number): Uint8Array {\n  return numberToBytesBE(n, len).reverse();\n}\n// Unpadded, rarely used\nexport function numberToVarBytesBE(n: number | bigint): Uint8Array {\n  return hexToBytes_(numberToHexUnpadded(n));\n}\n\n/**\n * Takes hex string or Uint8Array, converts to Uint8Array.\n * Validates output length.\n * Will throw error for other types.\n * @param title descriptive title for an error e.g. 'secret key'\n * @param hex hex string or Uint8Array\n * @param expectedLength optional, will compare to result array's length\n * @returns\n */\nexport function ensureBytes(title: string, hex: Hex, expectedLength?: number): Uint8Array {\n  let res: Uint8Array;\n  if (typeof hex === 'string') {\n    try {\n      res = hexToBytes_(hex);\n    } catch (e) {\n      throw new Error(title + ' must be hex string or Uint8Array, cause: ' + e);\n    }\n  } else if (isBytes_(hex)) {\n    // Uint8Array.from() instead of hash.slice() because node.js Buffer\n    // is instance of Uint8Array, and its slice() creates **mutable** copy\n    res = Uint8Array.from(hex);\n  } else {\n    throw new Error(title + ' must be hex string or Uint8Array');\n  }\n  const len = res.length;\n  if (typeof expectedLength === 'number' && len !== expectedLength)\n    throw new Error(title + ' of length ' + expectedLength + ' expected, got ' + len);\n  return res;\n}\n\n// Compares 2 u8a-s in kinda constant time\nexport function equalBytes(a: Uint8Array, b: Uint8Array): boolean {\n  if (a.length !== b.length) return false;\n  let diff = 0;\n  for (let i = 0; i < a.length; i++) diff |= a[i] ^ b[i];\n  return diff === 0;\n}\n/**\n * Copies Uint8Array. We can't use u8a.slice(), because u8a can be Buffer,\n * and Buffer#slice creates mutable copy. Never use Buffers!\n */\nexport function copyBytes(bytes: Uint8Array): Uint8Array {\n  return Uint8Array.from(bytes);\n}\n\n/**\n * Decodes 7-bit ASCII string to Uint8Array, throws on non-ascii symbols\n * Should be safe to use for things expected to be ASCII.\n * Returns exact same result as utf8ToBytes for ASCII or throws.\n */\nexport function asciiToBytes(ascii: string): Uint8Array {\n  return Uint8Array.from(ascii, (c, i) => {\n    const charCode = c.charCodeAt(0);\n    if (c.length !== 1 || charCode > 127) {\n      throw new Error(\n        `string contains non-ASCII character \"${ascii[i]}\" with code ${charCode} at position ${i}`\n      );\n    }\n    return charCode;\n  });\n}\n\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\n// export const utf8ToBytes: typeof utf8ToBytes_ = utf8ToBytes_;\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\n// export const bytesToUtf8: typeof bytesToUtf8_ = bytesToUtf8_;\n\n// Is positive bigint\nconst isPosBig = (n: bigint) => typeof n === 'bigint' && _0n <= n;\n\nexport function inRange(n: bigint, min: bigint, max: bigint): boolean {\n  return isPosBig(n) && isPosBig(min) && isPosBig(max) && min <= n && n < max;\n}\n\n/**\n * Asserts min <= n < max. NOTE: It's < max and not <= max.\n * @example\n * aInRange('x', x, 1n, 256n); // would assume x is in (1n..255n)\n */\nexport function aInRange(title: string, n: bigint, min: bigint, max: bigint): void {\n  // Why min <= n < max and not a (min < n < max) OR b (min <= n <= max)?\n  // consider P=256n, min=0n, max=P\n  // - a for min=0 would require -1:          `inRange('x', x, -1n, P)`\n  // - b would commonly require subtraction:  `inRange('x', x, 0n, P - 1n)`\n  // - our way is the cleanest:               `inRange('x', x, 0n, P)\n  if (!inRange(n, min, max))\n    throw new Error('expected valid ' + title + ': ' + min + ' <= n < ' + max + ', got ' + n);\n}\n\n// Bit operations\n\n/**\n * Calculates amount of bits in a bigint.\n * Same as `n.toString(2).length`\n * TODO: merge with nLength in modular\n */\nexport function bitLen(n: bigint): number {\n  let len;\n  for (len = 0; n > _0n; n >>= _1n, len += 1);\n  return len;\n}\n\n/**\n * Gets single bit at position.\n * NOTE: first bit position is 0 (same as arrays)\n * Same as `!!+Array.from(n.toString(2)).reverse()[pos]`\n */\nexport function bitGet(n: bigint, pos: number): bigint {\n  return (n >> BigInt(pos)) & _1n;\n}\n\n/**\n * Sets single bit at position.\n */\nexport function bitSet(n: bigint, pos: number, value: boolean): bigint {\n  return n | ((value ? _1n : _0n) << BigInt(pos));\n}\n\n/**\n * Calculate mask for N bits. Not using ** operator with bigints because of old engines.\n * Same as BigInt(`0b${Array(i).fill('1').join('')}`)\n */\nexport const bitMask = (n: number): bigint => (_1n << BigInt(n)) - _1n;\n\n// DRBG\n\ntype Pred<T> = (v: Uint8Array) => T | undefined;\n/**\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n * @returns function that will call DRBG until 2nd arg returns something meaningful\n * @example\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\n */\nexport function createHmacDrbg<T>(\n  hashLen: number,\n  qByteLen: number,\n  hmacFn: (key: Uint8Array, ...messages: Uint8Array[]) => Uint8Array\n): (seed: Uint8Array, predicate: Pred<T>) => T {\n  if (typeof hashLen !== 'number' || hashLen < 2) throw new Error('hashLen must be a number');\n  if (typeof qByteLen !== 'number' || qByteLen < 2) throw new Error('qByteLen must be a number');\n  if (typeof hmacFn !== 'function') throw new Error('hmacFn must be a function');\n  // Step B, Step C: set hashLen to 8*ceil(hlen/8)\n  const u8n = (len: number) => new Uint8Array(len); // creates Uint8Array\n  const u8of = (byte: number) => Uint8Array.of(byte); // another shortcut\n  let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n  let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\n  let i = 0; // Iterations counter, will throw when over 1000\n  const reset = () => {\n    v.fill(1);\n    k.fill(0);\n    i = 0;\n  };\n  const h = (...b: Uint8Array[]) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\n  const reseed = (seed = u8n(0)) => {\n    // HMAC-DRBG reseed() function. Steps D-G\n    k = h(u8of(0x00), seed); // k = hmac(k || v || 0x00 || seed)\n    v = h(); // v = hmac(k || v)\n    if (seed.length === 0) return;\n    k = h(u8of(0x01), seed); // k = hmac(k || v || 0x01 || seed)\n    v = h(); // v = hmac(k || v)\n  };\n  const gen = () => {\n    // HMAC-DRBG generate() function\n    if (i++ >= 1000) throw new Error('drbg: tried 1000 values');\n    let len = 0;\n    const out: Uint8Array[] = [];\n    while (len < qByteLen) {\n      v = h();\n      const sl = v.slice();\n      out.push(sl);\n      len += v.length;\n    }\n    return concatBytes_(...out);\n  };\n  const genUntil = (seed: Uint8Array, pred: Pred<T>): T => {\n    reset();\n    reseed(seed); // Steps D-G\n    let res: T | undefined = undefined; // Step H: grind until k is in [1..n-1]\n    while (!(res = pred(gen()))) reseed();\n    reset();\n    return res;\n  };\n  return genUntil;\n}\n\n// Validating curves and fields\n\nconst validatorFns = {\n  bigint: (val: any): boolean => typeof val === 'bigint',\n  function: (val: any): boolean => typeof val === 'function',\n  boolean: (val: any): boolean => typeof val === 'boolean',\n  string: (val: any): boolean => typeof val === 'string',\n  stringOrUint8Array: (val: any): boolean => typeof val === 'string' || isBytes_(val),\n  isSafeInteger: (val: any): boolean => Number.isSafeInteger(val),\n  array: (val: any): boolean => Array.isArray(val),\n  field: (val: any, object: any): any => (object as any).Fp.isValid(val),\n  hash: (val: any): boolean => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\n} as const;\ntype Validator = keyof typeof validatorFns;\ntype ValMap<T extends Record<string, any>> = { [K in keyof T]?: Validator };\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\n\nexport function validateObject<T extends Record<string, any>>(\n  object: T,\n  validators: ValMap<T>,\n  optValidators: ValMap<T> = {}\n): T {\n  const checkField = (fieldName: keyof T, type: Validator, isOptional: boolean) => {\n    const checkVal = validatorFns[type];\n    if (typeof checkVal !== 'function') throw new Error('invalid validator function');\n\n    const val = object[fieldName as keyof typeof object];\n    if (isOptional && val === undefined) return;\n    if (!checkVal(val, object)) {\n      throw new Error(\n        'param ' + String(fieldName) + ' is invalid. Expected ' + type + ', got ' + val\n      );\n    }\n  };\n  for (const [fieldName, type] of Object.entries(validators)) checkField(fieldName, type!, false);\n  for (const [fieldName, type] of Object.entries(optValidators)) checkField(fieldName, type!, true);\n  return object;\n}\n// validate type tests\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\n// // Should fail type-check\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\n\nexport function isHash(val: CHash): boolean {\n  return typeof val === 'function' && Number.isSafeInteger(val.outputLen);\n}\nexport function _validateObject(\n  object: Record<string, any>,\n  fields: Record<string, string>,\n  optFields: Record<string, string> = {}\n): void {\n  if (!object || typeof object !== 'object') throw new Error('expected valid options object');\n  type Item = keyof typeof object;\n  function checkField(fieldName: Item, expectedType: string, isOpt: boolean) {\n    const val = object[fieldName];\n    if (isOpt && val === undefined) return;\n    const current = typeof val;\n    if (current !== expectedType || val === null)\n      throw new Error(`param \"${fieldName}\" is invalid: expected ${expectedType}, got ${current}`);\n  }\n  Object.entries(fields).forEach(([k, v]) => checkField(k, v, false));\n  Object.entries(optFields).forEach(([k, v]) => checkField(k, v, true));\n}\n\n/**\n * throws not implemented error\n */\nexport const notImplemented = (): never => {\n  throw new Error('not implemented');\n};\n\n/**\n * Memoizes (caches) computation result.\n * Uses WeakMap: the value is going auto-cleaned by GC after last reference is removed.\n */\nexport function memoized<T extends object, R, O extends any[]>(\n  fn: (arg: T, ...args: O) => R\n): (arg: T, ...args: O) => R {\n  const map = new WeakMap<T, R>();\n  return (arg: T, ...args: O): R => {\n    const val = map.get(arg);\n    if (val !== undefined) return val;\n    const computed = fn(arg, ...args);\n    map.set(arg, computed);\n    return computed;\n  };\n}\n", "/**\n * Utils for modular division and fields.\n * Field over 11 is a finite (Galois) field is integer number operations `mod 11`.\n * There is no division: it is replaced by modular multiplicative inverse.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport {\n  _validateObject,\n  anumber,\n  bitMask,\n  bytesToNumberBE,\n  bytesToNumberLE,\n  ensureBytes,\n  numberToBytesBE,\n  numberToBytesLE,\n} from '../utils.ts';\n\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = /* @__PURE__ */ BigInt(2), _3n = /* @__PURE__ */ BigInt(3);\n// prettier-ignore\nconst _4n = /* @__PURE__ */ BigInt(4), _5n = /* @__PURE__ */ BigInt(5), _7n = /* @__PURE__ */ BigInt(7);\n// prettier-ignore\nconst _8n = /* @__PURE__ */ BigInt(8), _9n = /* @__PURE__ */ BigInt(9), _16n = /* @__PURE__ */ BigInt(16);\n\n// Calculates a modulo b\nexport function mod(a: bigint, b: bigint): bigint {\n  const result = a % b;\n  return result >= _0n ? result : b + result;\n}\n/**\n * Efficiently raise num to power and do modular division.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n * @example\n * pow(2n, 6n, 11n) // 64n % 11n == 9n\n */\nexport function pow(num: bigint, power: bigint, modulo: bigint): bigint {\n  return FpPow(Field(modulo), num, power);\n}\n\n/** Does `x^(2^power)` mod p. `pow2(30, 4)` == `30^(2^4)` */\nexport function pow2(x: bigint, power: bigint, modulo: bigint): bigint {\n  let res = x;\n  while (power-- > _0n) {\n    res *= res;\n    res %= modulo;\n  }\n  return res;\n}\n\n/**\n * Inverses number over modulo.\n * Implemented using [Euclidean GCD](https://brilliant.org/wiki/extended-euclidean-algorithm/).\n */\nexport function invert(number: bigint, modulo: bigint): bigint {\n  if (number === _0n) throw new Error('invert: expected non-zero number');\n  if (modulo <= _0n) throw new Error('invert: expected positive modulus, got ' + modulo);\n  // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\n  let a = mod(number, modulo);\n  let b = modulo;\n  // prettier-ignore\n  let x = _0n, y = _1n, u = _1n, v = _0n;\n  while (a !== _0n) {\n    // JIT applies optimization if those two lines follow each other\n    const q = b / a;\n    const r = b % a;\n    const m = x - u * q;\n    const n = y - v * q;\n    // prettier-ignore\n    b = a, a = r, x = u, y = v, u = m, v = n;\n  }\n  const gcd = b;\n  if (gcd !== _1n) throw new Error('invert: does not exist');\n  return mod(x, modulo);\n}\n\nfunction assertIsSquare<T>(Fp: IField<T>, root: T, n: T): void {\n  if (!Fp.eql(Fp.sqr(root), n)) throw new Error('Cannot find square root');\n}\n\n// Not all roots are possible! Example which will throw:\n// const NUM =\n// n = 72057594037927816n;\n// Fp = Field(BigInt('0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab'));\nfunction sqrt3mod4<T>(Fp: IField<T>, n: T) {\n  const p1div4 = (Fp.ORDER + _1n) / _4n;\n  const root = Fp.pow(n, p1div4);\n  assertIsSquare(Fp, root, n);\n  return root;\n}\n\nfunction sqrt5mod8<T>(Fp: IField<T>, n: T) {\n  const p5div8 = (Fp.ORDER - _5n) / _8n;\n  const n2 = Fp.mul(n, _2n);\n  const v = Fp.pow(n2, p5div8);\n  const nv = Fp.mul(n, v);\n  const i = Fp.mul(Fp.mul(nv, _2n), v);\n  const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\n  assertIsSquare(Fp, root, n);\n  return root;\n}\n\n// Based on RFC9380, Kong algorithm\n// prettier-ignore\nfunction sqrt9mod16(P: bigint): <T>(Fp: IField<T>, n: T) => T {\n  const Fp_ = Field(P);\n  const tn = tonelliShanks(P);\n  const c1 = tn(Fp_, Fp_.neg(Fp_.ONE));//  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\n  const c2 = tn(Fp_, c1);              //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\n  const c3 = tn(Fp_, Fp_.neg(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\n  const c4 = (P + _7n) / _16n;         //  4. c4 = (q + 7) / 16        # Integer arithmetic\n  return <T>(Fp: IField<T>, n: T) => {\n    let tv1 = Fp.pow(n, c4);           //  1. tv1 = x^c4\n    let tv2 = Fp.mul(tv1, c1);         //  2. tv2 = c1 * tv1\n    const tv3 = Fp.mul(tv1, c2);       //  3. tv3 = c2 * tv1\n    const tv4 = Fp.mul(tv1, c3);       //  4. tv4 = c3 * tv1\n    const e1 = Fp.eql(Fp.sqr(tv2), n); //  5.  e1 = (tv2^2) == x\n    const e2 = Fp.eql(Fp.sqr(tv3), n); //  6.  e2 = (tv3^2) == x\n    tv1 = Fp.cmov(tv1, tv2, e1);       //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\n    tv2 = Fp.cmov(tv4, tv3, e2);       //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\n    const e3 = Fp.eql(Fp.sqr(tv2), n); //  9.  e3 = (tv2^2) == x\n    const root = Fp.cmov(tv1, tv2, e3);// 10.  z = CMOV(tv1, tv2, e3)   # Select sqrt from tv1 & tv2\n    assertIsSquare(Fp, root, n);\n    return root;\n  };\n}\n\n/**\n * Tonelli-Shanks square root search algorithm.\n * 1. https://eprint.iacr.org/2012/685.pdf (page 12)\n * 2. Square Roots from 1; 24, 51, 10 to Dan Shanks\n * @param P field order\n * @returns function that takes field Fp (created from P) and number n\n */\nexport function tonelliShanks(P: bigint): <T>(Fp: IField<T>, n: T) => T {\n  // Initialization (precomputation).\n  // Caching initialization could boost perf by 7%.\n  if (P < _3n) throw new Error('sqrt is not defined for small field');\n  // Factor P - 1 = Q * 2^S, where Q is odd\n  let Q = P - _1n;\n  let S = 0;\n  while (Q % _2n === _0n) {\n    Q /= _2n;\n    S++;\n  }\n\n  // Find the first quadratic non-residue Z >= 2\n  let Z = _2n;\n  const _Fp = Field(P);\n  while (FpLegendre(_Fp, Z) === 1) {\n    // Basic primality test for P. After x iterations, chance of\n    // not finding quadratic non-residue is 2^x, so 2^1000.\n    if (Z++ > 1000) throw new Error('Cannot find square root: probably non-prime P');\n  }\n  // Fast-path; usually done before Z, but we do \"primality test\".\n  if (S === 1) return sqrt3mod4;\n\n  // Slow-path\n  // TODO: test on Fp2 and others\n  let cc = _Fp.pow(Z, Q); // c = z^Q\n  const Q1div2 = (Q + _1n) / _2n;\n  return function tonelliSlow<T>(Fp: IField<T>, n: T): T {\n    if (Fp.is0(n)) return n;\n    // Check if n is a quadratic residue using Legendre symbol\n    if (FpLegendre(Fp, n) !== 1) throw new Error('Cannot find square root');\n\n    // Initialize variables for the main loop\n    let M = S;\n    let c = Fp.mul(Fp.ONE, cc); // c = z^Q, move cc from field _Fp into field Fp\n    let t = Fp.pow(n, Q); // t = n^Q, first guess at the fudge factor\n    let R = Fp.pow(n, Q1div2); // R = n^((Q+1)/2), first guess at the square root\n\n    // Main loop\n    // while t != 1\n    while (!Fp.eql(t, Fp.ONE)) {\n      if (Fp.is0(t)) return Fp.ZERO; // if t=0 return R=0\n      let i = 1;\n\n      // Find the smallest i >= 1 such that t^(2^i) â¡ 1 (mod P)\n      let t_tmp = Fp.sqr(t); // t^(2^1)\n      while (!Fp.eql(t_tmp, Fp.ONE)) {\n        i++;\n        t_tmp = Fp.sqr(t_tmp); // t^(2^2)...\n        if (i === M) throw new Error('Cannot find square root');\n      }\n\n      // Calculate the exponent for b: 2^(M - i - 1)\n      const exponent = _1n << BigInt(M - i - 1); // bigint is important\n      const b = Fp.pow(c, exponent); // b = 2^(M - i - 1)\n\n      // Update variables\n      M = i;\n      c = Fp.sqr(b); // c = b^2\n      t = Fp.mul(t, c); // t = (t * b^2)\n      R = Fp.mul(R, b); // R = R*b\n    }\n    return R;\n  };\n}\n\n/**\n * Square root for a finite field. Will try optimized versions first:\n *\n * 1. P â¡ 3 (mod 4)\n * 2. P â¡ 5 (mod 8)\n * 3. P â¡ 9 (mod 16)\n * 4. Tonelli-Shanks algorithm\n *\n * Different algorithms can give different roots, it is up to user to decide which one they want.\n * For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\n */\nexport function FpSqrt(P: bigint): <T>(Fp: IField<T>, n: T) => T {\n  // P â¡ 3 (mod 4) => ân = n^((P+1)/4)\n  if (P % _4n === _3n) return sqrt3mod4;\n  // P â¡ 5 (mod 8) => Atkin algorithm, page 10 of https://eprint.iacr.org/2012/685.pdf\n  if (P % _8n === _5n) return sqrt5mod8;\n  // P â¡ 9 (mod 16) => Kong algorithm, page 11 of https://eprint.iacr.org/2012/685.pdf (algorithm 4)\n  if (P % _16n === _9n) return sqrt9mod16(P);\n  // Tonelli-Shanks algorithm\n  return tonelliShanks(P);\n}\n\n// Little-endian check for first LE bit (last BE bit);\nexport const isNegativeLE = (num: bigint, modulo: bigint): boolean =>\n  (mod(num, modulo) & _1n) === _1n;\n\n/** Field is not always over prime: for example, Fp2 has ORDER(q)=p^m. */\nexport interface IField<T> {\n  ORDER: bigint;\n  isLE: boolean;\n  BYTES: number;\n  BITS: number;\n  MASK: bigint;\n  ZERO: T;\n  ONE: T;\n  // 1-arg\n  create: (num: T) => T;\n  isValid: (num: T) => boolean;\n  is0: (num: T) => boolean;\n  isValidNot0: (num: T) => boolean;\n  neg(num: T): T;\n  inv(num: T): T;\n  sqrt(num: T): T;\n  sqr(num: T): T;\n  // 2-args\n  eql(lhs: T, rhs: T): boolean;\n  add(lhs: T, rhs: T): T;\n  sub(lhs: T, rhs: T): T;\n  mul(lhs: T, rhs: T | bigint): T;\n  pow(lhs: T, power: bigint): T;\n  div(lhs: T, rhs: T | bigint): T;\n  // N for NonNormalized (for now)\n  addN(lhs: T, rhs: T): T;\n  subN(lhs: T, rhs: T): T;\n  mulN(lhs: T, rhs: T | bigint): T;\n  sqrN(num: T): T;\n\n  // Optional\n  // Should be same as sgn0 function in\n  // [RFC9380](https://www.rfc-editor.org/rfc/rfc9380#section-4.1).\n  // NOTE: sgn0 is 'negative in LE', which is same as odd. And negative in LE is kinda strange definition anyway.\n  isOdd?(num: T): boolean; // Odd instead of even since we have it for Fp2\n  allowedLengths?: number[];\n  // legendre?(num: T): T;\n  invertBatch: (lst: T[]) => T[];\n  toBytes(num: T): Uint8Array;\n  fromBytes(bytes: Uint8Array, skipValidation?: boolean): T;\n  // If c is False, CMOV returns a, otherwise it returns b.\n  cmov(a: T, b: T, c: boolean): T;\n}\n// prettier-ignore\nconst FIELD_FIELDS = [\n  'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\n  'eql', 'add', 'sub', 'mul', 'pow', 'div',\n  'addN', 'subN', 'mulN', 'sqrN'\n] as const;\nexport function validateField<T>(field: IField<T>): IField<T> {\n  const initial = {\n    ORDER: 'bigint',\n    MASK: 'bigint',\n    BYTES: 'number',\n    BITS: 'number',\n  } as Record<string, string>;\n  const opts = FIELD_FIELDS.reduce((map, val: string) => {\n    map[val] = 'function';\n    return map;\n  }, initial);\n  _validateObject(field, opts);\n  // const max = 16384;\n  // if (field.BYTES < 1 || field.BYTES > max) throw new Error('invalid field');\n  // if (field.BITS < 1 || field.BITS > 8 * max) throw new Error('invalid field');\n  return field;\n}\n\n// Generic field functions\n\n/**\n * Same as `pow` but for Fp: non-constant-time.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n */\nexport function FpPow<T>(Fp: IField<T>, num: T, power: bigint): T {\n  if (power < _0n) throw new Error('invalid exponent, negatives unsupported');\n  if (power === _0n) return Fp.ONE;\n  if (power === _1n) return num;\n  let p = Fp.ONE;\n  let d = num;\n  while (power > _0n) {\n    if (power & _1n) p = Fp.mul(p, d);\n    d = Fp.sqr(d);\n    power >>= _1n;\n  }\n  return p;\n}\n\n/**\n * Efficiently invert an array of Field elements.\n * Exception-free. Will return `undefined` for 0 elements.\n * @param passZero map 0 to 0 (instead of undefined)\n */\nexport function FpInvertBatch<T>(Fp: IField<T>, nums: T[], passZero = false): T[] {\n  const inverted = new Array(nums.length).fill(passZero ? Fp.ZERO : undefined);\n  // Walk from first to last, multiply them by each other MOD p\n  const multipliedAcc = nums.reduce((acc, num, i) => {\n    if (Fp.is0(num)) return acc;\n    inverted[i] = acc;\n    return Fp.mul(acc, num);\n  }, Fp.ONE);\n  // Invert last element\n  const invertedAcc = Fp.inv(multipliedAcc);\n  // Walk from last to first, multiply them by inverted each other MOD p\n  nums.reduceRight((acc, num, i) => {\n    if (Fp.is0(num)) return acc;\n    inverted[i] = Fp.mul(acc, inverted[i]);\n    return Fp.mul(acc, num);\n  }, invertedAcc);\n  return inverted;\n}\n\n// TODO: remove\nexport function FpDiv<T>(Fp: IField<T>, lhs: T, rhs: T | bigint): T {\n  return Fp.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, Fp.ORDER) : Fp.inv(rhs));\n}\n\n/**\n * Legendre symbol.\n * Legendre constant is used to calculate Legendre symbol (a | p)\n * which denotes the value of a^((p-1)/2) (mod p).\n *\n * * (a | p) â¡ 1    if a is a square (mod p), quadratic residue\n * * (a | p) â¡ -1   if a is not a square (mod p), quadratic non residue\n * * (a | p) â¡ 0    if a â¡ 0 (mod p)\n */\nexport function FpLegendre<T>(Fp: IField<T>, n: T): -1 | 0 | 1 {\n  // We can use 3rd argument as optional cache of this value\n  // but seems unneeded for now. The operation is very fast.\n  const p1mod2 = (Fp.ORDER - _1n) / _2n;\n  const powered = Fp.pow(n, p1mod2);\n  const yes = Fp.eql(powered, Fp.ONE);\n  const zero = Fp.eql(powered, Fp.ZERO);\n  const no = Fp.eql(powered, Fp.neg(Fp.ONE));\n  if (!yes && !zero && !no) throw new Error('invalid Legendre symbol result');\n  return yes ? 1 : zero ? 0 : -1;\n}\n\n// This function returns True whenever the value x is a square in the field F.\nexport function FpIsSquare<T>(Fp: IField<T>, n: T): boolean {\n  const l = FpLegendre(Fp, n);\n  return l === 1;\n}\n\nexport type NLength = { nByteLength: number; nBitLength: number };\n// CURVE.n lengths\nexport function nLength(n: bigint, nBitLength?: number): NLength {\n  // Bit size, byte size of CURVE.n\n  if (nBitLength !== undefined) anumber(nBitLength);\n  const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\n  const nByteLength = Math.ceil(_nBitLength / 8);\n  return { nBitLength: _nBitLength, nByteLength };\n}\n\ntype FpField = IField<bigint> & Required<Pick<IField<bigint>, 'isOdd'>>;\ntype SqrtFn = (n: bigint) => bigint;\ntype FieldOpts = Partial<{\n  sqrt: SqrtFn;\n  isLE: boolean;\n  BITS: number;\n  modFromBytes: boolean; // bls12-381 requires mod(n) instead of rejecting keys >= n\n  allowedLengths?: readonly number[]; // for P521 (adds padding for smaller sizes)\n}>;\n/**\n * Creates a finite field. Major performance optimizations:\n * * 1. Denormalized operations like mulN instead of mul.\n * * 2. Identical object shape: never add or remove keys.\n * * 3. `Object.freeze`.\n * Fragile: always run a benchmark on a change.\n * Security note: operations don't check 'isValid' for all elements for performance reasons,\n * it is caller responsibility to check this.\n * This is low-level code, please make sure you know what you're doing.\n *\n * Note about field properties:\n * * CHARACTERISTIC p = prime number, number of elements in main subgroup.\n * * ORDER q = similar to cofactor in curves, may be composite `q = p^m`.\n *\n * @param ORDER field order, probably prime, or could be composite\n * @param bitLen how many bits the field consumes\n * @param isLE (default: false) if encoding / decoding should be in little-endian\n * @param redef optional faster redefinitions of sqrt and other methods\n */\nexport function Field(\n  ORDER: bigint,\n  bitLenOrOpts?: number | FieldOpts, // TODO: use opts only in v2?\n  isLE = false,\n  opts: { sqrt?: SqrtFn } = {}\n): Readonly<FpField> {\n  if (ORDER <= _0n) throw new Error('invalid field: expected ORDER > 0, got ' + ORDER);\n  let _nbitLength: number | undefined = undefined;\n  let _sqrt: SqrtFn | undefined = undefined;\n  let modFromBytes: boolean = false;\n  let allowedLengths: undefined | readonly number[] = undefined;\n  if (typeof bitLenOrOpts === 'object' && bitLenOrOpts != null) {\n    if (opts.sqrt || isLE) throw new Error('cannot specify opts in two arguments');\n    const _opts = bitLenOrOpts;\n    if (_opts.BITS) _nbitLength = _opts.BITS;\n    if (_opts.sqrt) _sqrt = _opts.sqrt;\n    if (typeof _opts.isLE === 'boolean') isLE = _opts.isLE;\n    if (typeof _opts.modFromBytes === 'boolean') modFromBytes = _opts.modFromBytes;\n    allowedLengths = _opts.allowedLengths;\n  } else {\n    if (typeof bitLenOrOpts === 'number') _nbitLength = bitLenOrOpts;\n    if (opts.sqrt) _sqrt = opts.sqrt;\n  }\n  const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, _nbitLength);\n  if (BYTES > 2048) throw new Error('invalid field: expected ORDER of <= 2048 bytes');\n  let sqrtP: ReturnType<typeof FpSqrt>; // cached sqrtP\n  const f: Readonly<FpField> = Object.freeze({\n    ORDER,\n    isLE,\n    BITS,\n    BYTES,\n    MASK: bitMask(BITS),\n    ZERO: _0n,\n    ONE: _1n,\n    allowedLengths: allowedLengths,\n    create: (num) => mod(num, ORDER),\n    isValid: (num) => {\n      if (typeof num !== 'bigint')\n        throw new Error('invalid field element: expected bigint, got ' + typeof num);\n      return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\n    },\n    is0: (num) => num === _0n,\n    // is valid and invertible\n    isValidNot0: (num: bigint) => !f.is0(num) && f.isValid(num),\n    isOdd: (num) => (num & _1n) === _1n,\n    neg: (num) => mod(-num, ORDER),\n    eql: (lhs, rhs) => lhs === rhs,\n\n    sqr: (num) => mod(num * num, ORDER),\n    add: (lhs, rhs) => mod(lhs + rhs, ORDER),\n    sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\n    mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\n    pow: (num, power) => FpPow(f, num, power),\n    div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\n\n    // Same as above, but doesn't normalize\n    sqrN: (num) => num * num,\n    addN: (lhs, rhs) => lhs + rhs,\n    subN: (lhs, rhs) => lhs - rhs,\n    mulN: (lhs, rhs) => lhs * rhs,\n\n    inv: (num) => invert(num, ORDER),\n    sqrt:\n      _sqrt ||\n      ((n) => {\n        if (!sqrtP) sqrtP = FpSqrt(ORDER);\n        return sqrtP(f, n);\n      }),\n    toBytes: (num) => (isLE ? numberToBytesLE(num, BYTES) : numberToBytesBE(num, BYTES)),\n    fromBytes: (bytes, skipValidation = true) => {\n      if (allowedLengths) {\n        if (!allowedLengths.includes(bytes.length) || bytes.length > BYTES) {\n          throw new Error(\n            'Field.fromBytes: expected ' + allowedLengths + ' bytes, got ' + bytes.length\n          );\n        }\n        const padded = new Uint8Array(BYTES);\n        // isLE add 0 to right, !isLE to the left.\n        padded.set(bytes, isLE ? 0 : padded.length - bytes.length);\n        bytes = padded;\n      }\n      if (bytes.length !== BYTES)\n        throw new Error('Field.fromBytes: expected ' + BYTES + ' bytes, got ' + bytes.length);\n      let scalar = isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\n      if (modFromBytes) scalar = mod(scalar, ORDER);\n      if (!skipValidation)\n        if (!f.isValid(scalar)) throw new Error('invalid field element: outside of range 0..ORDER');\n      // NOTE: we don't validate scalar here, please use isValid. This done such way because some\n      // protocol may allow non-reduced scalar that reduced later or changed some other way.\n      return scalar;\n    },\n    // TODO: we don't need it here, move out to separate fn\n    invertBatch: (lst) => FpInvertBatch(f, lst),\n    // We can't move this out because Fp6, Fp12 implement it\n    // and it's unclear what to return in there.\n    cmov: (a, b, c) => (c ? b : a),\n  } as FpField);\n  return Object.freeze(f);\n}\n\n// Generic random scalar, we can do same for other fields if via Fp2.mul(Fp2.ONE, Fp2.random)?\n// This allows unsafe methods like ignore bias or zero. These unsafe, but often used in different protocols (if deterministic RNG).\n// which mean we cannot force this via opts.\n// Not sure what to do with randomBytes, we can accept it inside opts if wanted.\n// Probably need to export getMinHashLength somewhere?\n// random(bytes?: Uint8Array, unsafeAllowZero = false, unsafeAllowBias = false) {\n//   const LEN = !unsafeAllowBias ? getMinHashLength(ORDER) : BYTES;\n//   if (bytes === undefined) bytes = randomBytes(LEN); // _opts.randomBytes?\n//   const num = isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\n//   // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\n//   const reduced = unsafeAllowZero ? mod(num, ORDER) : mod(num, ORDER - _1n) + _1n;\n//   return reduced;\n// },\n\nexport function FpSqrtOdd<T>(Fp: IField<T>, elm: T): T {\n  if (!Fp.isOdd) throw new Error(\"Field doesn't have isOdd\");\n  const root = Fp.sqrt(elm);\n  return Fp.isOdd(root) ? root : Fp.neg(root);\n}\n\nexport function FpSqrtEven<T>(Fp: IField<T>, elm: T): T {\n  if (!Fp.isOdd) throw new Error(\"Field doesn't have isOdd\");\n  const root = Fp.sqrt(elm);\n  return Fp.isOdd(root) ? Fp.neg(root) : root;\n}\n\n/**\n * \"Constant-time\" private key generation utility.\n * Same as mapKeyToField, but accepts less bytes (40 instead of 48 for 32-byte field).\n * Which makes it slightly more biased, less secure.\n * @deprecated use `mapKeyToField` instead\n */\nexport function hashToPrivateScalar(\n  hash: string | Uint8Array,\n  groupOrder: bigint,\n  isLE = false\n): bigint {\n  hash = ensureBytes('privateHash', hash);\n  const hashLen = hash.length;\n  const minLen = nLength(groupOrder).nByteLength + 8;\n  if (minLen < 24 || hashLen < minLen || hashLen > 1024)\n    throw new Error(\n      'hashToPrivateScalar: expected ' + minLen + '-1024 bytes of input, got ' + hashLen\n    );\n  const num = isLE ? bytesToNumberLE(hash) : bytesToNumberBE(hash);\n  return mod(num, groupOrder - _1n) + _1n;\n}\n\n/**\n * Returns total number of bytes consumed by the field element.\n * For example, 32 bytes for usual 256-bit weierstrass curve.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of field\n */\nexport function getFieldBytesLength(fieldOrder: bigint): number {\n  if (typeof fieldOrder !== 'bigint') throw new Error('field order must be bigint');\n  const bitLength = fieldOrder.toString(2).length;\n  return Math.ceil(bitLength / 8);\n}\n\n/**\n * Returns minimal amount of bytes that can be safely reduced\n * by field order.\n * Should be 2^-128 for 128-bit curve such as P256.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of target hash\n */\nexport function getMinHashLength(fieldOrder: bigint): number {\n  const length = getFieldBytesLength(fieldOrder);\n  return length + Math.ceil(length / 2);\n}\n\n/**\n * \"Constant-time\" private key generation utility.\n * Can take (n + n/2) or more bytes of uniform input e.g. from CSPRNG or KDF\n * and convert them into private scalar, with the modulo bias being negligible.\n * Needs at least 48 bytes of input for 32-byte private key.\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\n * FIPS 186-5, A.2 https://csrc.nist.gov/publications/detail/fips/186/5/final\n * RFC 9380, https://www.rfc-editor.org/rfc/rfc9380#section-5\n * @param hash hash output from SHA3 or a similar function\n * @param groupOrder size of subgroup - (e.g. secp256k1.CURVE.n)\n * @param isLE interpret hash bytes as LE num\n * @returns valid private scalar\n */\nexport function mapHashToField(key: Uint8Array, fieldOrder: bigint, isLE = false): Uint8Array {\n  const len = key.length;\n  const fieldLen = getFieldBytesLength(fieldOrder);\n  const minLen = getMinHashLength(fieldOrder);\n  // No small numbers: need to understand bias story. No huge numbers: easier to detect JS timings.\n  if (len < 16 || len < minLen || len > 1024)\n    throw new Error('expected ' + minLen + '-1024 bytes of input, got ' + len);\n  const num = isLE ? bytesToNumberLE(key) : bytesToNumberBE(key);\n  // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\n  const reduced = mod(num, fieldOrder - _1n) + _1n;\n  return isLE ? numberToBytesLE(reduced, fieldLen) : numberToBytesBE(reduced, fieldLen);\n}\n", "/**\n * Methods for elliptic curve multiplication by scalars.\n * Contains wNAF, pippenger.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { bitLen, bitMask, validateObject } from '../utils.ts';\nimport { Field, FpInvertBatch, nLength, validateField, type IField } from './modular.ts';\n\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\n\nexport type AffinePoint<T> = {\n  x: T;\n  y: T;\n} & { Z?: never };\n\n// This was initialy do this way to re-use montgomery ladder in field (add->mul,double->sqr), but\n// that didn't happen and there is probably not much reason to have separate Group like this?\nexport interface Group<T extends Group<T>> {\n  double(): T;\n  negate(): T;\n  add(other: T): T;\n  subtract(other: T): T;\n  equals(other: T): boolean;\n  multiply(scalar: bigint): T;\n  toAffine?(invertedZ?: any): AffinePoint<any>;\n}\n\n// We can't \"abstract out\" coordinates (X, Y, Z; and T in Edwards): argument names of constructor\n// are not accessible. See Typescript gh-56093, gh-41594.\n//\n// We have to use recursive types, so it will return actual point, not constained `CurvePoint`.\n// If, at any point, P is `any`, it will erase all types and replace it\n// with `any`, because of recursion, `any implements CurvePoint`,\n// but we lose all constrains on methods.\n\n/** Base interface for all elliptic curve Points. */\nexport interface CurvePoint<F, P extends CurvePoint<F, P>> extends Group<P> {\n  /** Affine x coordinate. Different from projective / extended X coordinate. */\n  x: F;\n  /** Affine y coordinate. Different from projective / extended Y coordinate. */\n  y: F;\n  Z?: F;\n  double(): P;\n  negate(): P;\n  add(other: P): P;\n  subtract(other: P): P;\n  equals(other: P): boolean;\n  multiply(scalar: bigint): P;\n  assertValidity(): void;\n  clearCofactor(): P;\n  is0(): boolean;\n  isTorsionFree(): boolean;\n  isSmallOrder(): boolean;\n  multiplyUnsafe(scalar: bigint): P;\n  /**\n   * Massively speeds up `p.multiply(n)` by using precompute tables (caching). See {@link wNAF}.\n   * @param isLazy calculate cache now. Default (true) ensures it's deferred to first `multiply()`\n   */\n  precompute(windowSize?: number, isLazy?: boolean): P;\n  /** Converts point to 2D xy affine coordinates */\n  toAffine(invertedZ?: F): AffinePoint<F>;\n  toBytes(): Uint8Array;\n  toHex(): string;\n}\n\n/** Base interface for all elliptic curve Point constructors. */\nexport interface CurvePointCons<P extends CurvePoint<any, P>> {\n  [Symbol.hasInstance]: (item: unknown) => boolean;\n  BASE: P;\n  ZERO: P;\n  /** Field for basic curve math */\n  Fp: IField<P_F<P>>;\n  /** Scalar field, for scalars in multiply and others */\n  Fn: IField<bigint>;\n  /** Creates point from x, y. Does NOT validate if the point is valid. Use `.assertValidity()`. */\n  fromAffine(p: AffinePoint<P_F<P>>): P;\n  fromBytes(bytes: Uint8Array): P;\n  fromHex(hex: Uint8Array | string): P;\n}\n\n// Type inference helpers: PC - PointConstructor, P - Point, Fp - Field element\n// Short names, because we use them a lot in result types:\n// * we can't do 'P = GetCurvePoint<PC>': this is default value and doesn't constrain anything\n// * we can't do 'type X = GetCurvePoint<PC>': it won't be accesible for arguments/return types\n// * `CurvePointCons<P extends CurvePoint<any, P>>` constraints from interface definition\n//   won't propagate, if `PC extends CurvePointCons<any>`: the P would be 'any', which is incorrect\n// * PC could be super specific with super specific P, which implements CurvePoint<any, P>.\n//   this means we need to do stuff like\n//   `function test<P extends CurvePoint<any, P>, PC extends CurvePointCons<P>>(`\n//   if we want type safety around P, otherwise PC_P<PC> will be any\n\n/** Returns Fp type from Point (P_F<P> == P.F) */\nexport type P_F<P extends CurvePoint<any, P>> = P extends CurvePoint<infer F, P> ? F : never;\n/** Returns Fp type from PointCons (PC_F<PC> == PC.P.F) */\nexport type PC_F<PC extends CurvePointCons<CurvePoint<any, any>>> = PC['Fp']['ZERO'];\n/** Returns Point type from PointCons (PC_P<PC> == PC.P) */\nexport type PC_P<PC extends CurvePointCons<CurvePoint<any, any>>> = PC['ZERO'];\n\n// Ugly hack to get proper type inference, because in typescript fails to infer resursively.\n// The hack allows to do up to 10 chained operations without applying type erasure.\n//\n// Types which won't work:\n// * `CurvePointCons<CurvePoint<any, any>>`, will return `any` after 1 operation\n// * `CurvePointCons<any>: WeierstrassPointCons<bigint> extends CurvePointCons<any> = false`\n// * `P extends CurvePoint, PC extends CurvePointCons<P>`\n//     * It can't infer P from PC alone\n//     * Too many relations between F, P & PC\n//     * It will infer P/F if `arg: CurvePointCons<F, P>`, but will fail if PC is generic\n//     * It will work correctly if there is an additional argument of type P\n//     * But generally, we don't want to parametrize `CurvePointCons` over `F`: it will complicate\n//       types, making them un-inferable\n// prettier-ignore\nexport type PC_ANY = CurvePointCons<\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any,\n  CurvePoint<any, any>\n  >>>>>>>>>\n>;\n\nexport interface CurveLengths {\n  secretKey?: number;\n  publicKey?: number;\n  publicKeyUncompressed?: number;\n  publicKeyHasPrefix?: boolean;\n  signature?: number;\n  seed?: number;\n}\nexport type GroupConstructor<T> = {\n  BASE: T;\n  ZERO: T;\n};\n/** @deprecated */\nexport type ExtendedGroupConstructor<T> = GroupConstructor<T> & {\n  Fp: IField<any>;\n  Fn: IField<bigint>;\n  fromAffine(ap: AffinePoint<any>): T;\n};\nexport type Mapper<T> = (i: T[]) => T[];\n\nexport function negateCt<T extends { negate: () => T }>(condition: boolean, item: T): T {\n  const neg = item.negate();\n  return condition ? neg : item;\n}\n\n/**\n * Takes a bunch of Projective Points but executes only one\n * inversion on all of them. Inversion is very slow operation,\n * so this improves performance massively.\n * Optimization: converts a list of projective points to a list of identical points with Z=1.\n */\nexport function normalizeZ<P extends CurvePoint<any, P>, PC extends CurvePointCons<P>>(\n  c: PC,\n  points: P[]\n): P[] {\n  const invertedZs = FpInvertBatch(\n    c.Fp,\n    points.map((p) => p.Z!)\n  );\n  return points.map((p, i) => c.fromAffine(p.toAffine(invertedZs[i])));\n}\n\nfunction validateW(W: number, bits: number) {\n  if (!Number.isSafeInteger(W) || W <= 0 || W > bits)\n    throw new Error('invalid window size, expected [1..' + bits + '], got W=' + W);\n}\n\n/** Internal wNAF opts for specific W and scalarBits */\nexport type WOpts = {\n  windows: number;\n  windowSize: number;\n  mask: bigint;\n  maxNumber: number;\n  shiftBy: bigint;\n};\n\nfunction calcWOpts(W: number, scalarBits: number): WOpts {\n  validateW(W, scalarBits);\n  const windows = Math.ceil(scalarBits / W) + 1; // W=8 33. Not 32, because we skip zero\n  const windowSize = 2 ** (W - 1); // W=8 128. Not 256, because we skip zero\n  const maxNumber = 2 ** W; // W=8 256\n  const mask = bitMask(W); // W=8 255 == mask 0b11111111\n  const shiftBy = BigInt(W); // W=8 8\n  return { windows, windowSize, mask, maxNumber, shiftBy };\n}\n\nfunction calcOffsets(n: bigint, window: number, wOpts: WOpts) {\n  const { windowSize, mask, maxNumber, shiftBy } = wOpts;\n  let wbits = Number(n & mask); // extract W bits.\n  let nextN = n >> shiftBy; // shift number by W bits.\n\n  // What actually happens here:\n  // const highestBit = Number(mask ^ (mask >> 1n));\n  // let wbits2 = wbits - 1; // skip zero\n  // if (wbits2 & highestBit) { wbits2 ^= Number(mask); // (~);\n\n  // split if bits > max: +224 => 256-32\n  if (wbits > windowSize) {\n    // we skip zero, which means instead of `>= size-1`, we do `> size`\n    wbits -= maxNumber; // -32, can be maxNumber - wbits, but then we need to set isNeg here.\n    nextN += _1n; // +256 (carry)\n  }\n  const offsetStart = window * windowSize;\n  const offset = offsetStart + Math.abs(wbits) - 1; // -1 because we skip zero\n  const isZero = wbits === 0; // is current window slice a 0?\n  const isNeg = wbits < 0; // is current window slice negative?\n  const isNegF = window % 2 !== 0; // fake random statement for noise\n  const offsetF = offsetStart; // fake offset for noise\n  return { nextN, offset, isZero, isNeg, isNegF, offsetF };\n}\n\nfunction validateMSMPoints(points: any[], c: any) {\n  if (!Array.isArray(points)) throw new Error('array expected');\n  points.forEach((p, i) => {\n    if (!(p instanceof c)) throw new Error('invalid point at index ' + i);\n  });\n}\nfunction validateMSMScalars(scalars: any[], field: any) {\n  if (!Array.isArray(scalars)) throw new Error('array of scalars expected');\n  scalars.forEach((s, i) => {\n    if (!field.isValid(s)) throw new Error('invalid scalar at index ' + i);\n  });\n}\n\n// Since points in different groups cannot be equal (different object constructor),\n// we can have single place to store precomputes.\n// Allows to make points frozen / immutable.\nconst pointPrecomputes = new WeakMap<any, any[]>();\nconst pointWindowSizes = new WeakMap<any, number>();\n\nfunction getW(P: any): number {\n  // To disable precomputes:\n  // return 1;\n  return pointWindowSizes.get(P) || 1;\n}\n\nfunction assert0(n: bigint): void {\n  if (n !== _0n) throw new Error('invalid wNAF');\n}\n\n/**\n * Elliptic curve multiplication of Point by scalar. Fragile.\n * Table generation takes **30MB of ram and 10ms on high-end CPU**,\n * but may take much longer on slow devices. Actual generation will happen on\n * first call of `multiply()`. By default, `BASE` point is precomputed.\n *\n * Scalars should always be less than curve order: this should be checked inside of a curve itself.\n * Creates precomputation tables for fast multiplication:\n * - private scalar is split by fixed size windows of W bits\n * - every window point is collected from window's table & added to accumulator\n * - since windows are different, same point inside tables won't be accessed more than once per calc\n * - each multiplication is 'Math.ceil(CURVE_ORDER / ð) + 1' point additions (fixed for any scalar)\n * - +1 window is neccessary for wNAF\n * - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\n *\n * @todo Research returning 2d JS array of windows, instead of a single window.\n * This would allow windows to be in different memory locations\n */\nexport class wNAF<PC extends PC_ANY> {\n  private readonly BASE: PC_P<PC>;\n  private readonly ZERO: PC_P<PC>;\n  private readonly Fn: PC['Fn'];\n  readonly bits: number;\n\n  // Parametrized with a given Point class (not individual point)\n  constructor(Point: PC, bits: number) {\n    this.BASE = Point.BASE;\n    this.ZERO = Point.ZERO;\n    this.Fn = Point.Fn;\n    this.bits = bits;\n  }\n\n  // non-const time multiplication ladder\n  _unsafeLadder(elm: PC_P<PC>, n: bigint, p: PC_P<PC> = this.ZERO): PC_P<PC> {\n    let d: PC_P<PC> = elm;\n    while (n > _0n) {\n      if (n & _1n) p = p.add(d);\n      d = d.double();\n      n >>= _1n;\n    }\n    return p;\n  }\n\n  /**\n   * Creates a wNAF precomputation window. Used for caching.\n   * Default window size is set by `utils.precompute()` and is equal to 8.\n   * Number of precomputed points depends on the curve size:\n   * 2^(ðâ1) * (Math.ceil(ð / ð) + 1), where:\n   * - ð is the window size\n   * - ð is the bitlength of the curve order.\n   * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n   * @param point Point instance\n   * @param W window size\n   * @returns precomputed point tables flattened to a single array\n   */\n  private precomputeWindow(point: PC_P<PC>, W: number): PC_P<PC>[] {\n    const { windows, windowSize } = calcWOpts(W, this.bits);\n    const points: PC_P<PC>[] = [];\n    let p: PC_P<PC> = point;\n    let base = p;\n    for (let window = 0; window < windows; window++) {\n      base = p;\n      points.push(base);\n      // i=1, bc we skip 0\n      for (let i = 1; i < windowSize; i++) {\n        base = base.add(p);\n        points.push(base);\n      }\n      p = base.double();\n    }\n    return points;\n  }\n\n  /**\n   * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n   * More compact implementation:\n   * https://github.com/paulmillr/noble-secp256k1/blob/47cb1669b6e506ad66b35fe7d76132ae97465da2/index.ts#L502-L541\n   * @returns real and fake (for const-time) points\n   */\n  private wNAF(W: number, precomputes: PC_P<PC>[], n: bigint): { p: PC_P<PC>; f: PC_P<PC> } {\n    // Scalar should be smaller than field order\n    if (!this.Fn.isValid(n)) throw new Error('invalid scalar');\n    // Accumulators\n    let p = this.ZERO;\n    let f = this.BASE;\n    // This code was first written with assumption that 'f' and 'p' will never be infinity point:\n    // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\n    // there is negate now: it is possible that negated element from low value\n    // would be the same as high element, which will create carry into next window.\n    // It's not obvious how this can fail, but still worth investigating later.\n    const wo = calcWOpts(W, this.bits);\n    for (let window = 0; window < wo.windows; window++) {\n      // (n === _0n) is handled and not early-exited. isEven and offsetF are used for noise\n      const { nextN, offset, isZero, isNeg, isNegF, offsetF } = calcOffsets(n, window, wo);\n      n = nextN;\n      if (isZero) {\n        // bits are 0: add garbage to fake point\n        // Important part for const-time getPublicKey: add random \"noise\" point to f.\n        f = f.add(negateCt(isNegF, precomputes[offsetF]));\n      } else {\n        // bits are 1: add to result point\n        p = p.add(negateCt(isNeg, precomputes[offset]));\n      }\n    }\n    assert0(n);\n    // Return both real and fake points: JIT won't eliminate f.\n    // At this point there is a way to F be infinity-point even if p is not,\n    // which makes it less const-time: around 1 bigint multiply.\n    return { p, f };\n  }\n\n  /**\n   * Implements ec unsafe (non const-time) multiplication using precomputed tables and w-ary non-adjacent form.\n   * @param acc accumulator point to add result of multiplication\n   * @returns point\n   */\n  private wNAFUnsafe(\n    W: number,\n    precomputes: PC_P<PC>[],\n    n: bigint,\n    acc: PC_P<PC> = this.ZERO\n  ): PC_P<PC> {\n    const wo = calcWOpts(W, this.bits);\n    for (let window = 0; window < wo.windows; window++) {\n      if (n === _0n) break; // Early-exit, skip 0 value\n      const { nextN, offset, isZero, isNeg } = calcOffsets(n, window, wo);\n      n = nextN;\n      if (isZero) {\n        // Window bits are 0: skip processing.\n        // Move to next window.\n        continue;\n      } else {\n        const item = precomputes[offset];\n        acc = acc.add(isNeg ? item.negate() : item); // Re-using acc allows to save adds in MSM\n      }\n    }\n    assert0(n);\n    return acc;\n  }\n\n  private getPrecomputes(W: number, point: PC_P<PC>, transform?: Mapper<PC_P<PC>>): PC_P<PC>[] {\n    // Calculate precomputes on a first run, reuse them after\n    let comp = pointPrecomputes.get(point);\n    if (!comp) {\n      comp = this.precomputeWindow(point, W) as PC_P<PC>[];\n      if (W !== 1) {\n        // Doing transform outside of if brings 15% perf hit\n        if (typeof transform === 'function') comp = transform(comp);\n        pointPrecomputes.set(point, comp);\n      }\n    }\n    return comp;\n  }\n\n  cached(\n    point: PC_P<PC>,\n    scalar: bigint,\n    transform?: Mapper<PC_P<PC>>\n  ): { p: PC_P<PC>; f: PC_P<PC> } {\n    const W = getW(point);\n    return this.wNAF(W, this.getPrecomputes(W, point, transform), scalar);\n  }\n\n  unsafe(point: PC_P<PC>, scalar: bigint, transform?: Mapper<PC_P<PC>>, prev?: PC_P<PC>): PC_P<PC> {\n    const W = getW(point);\n    if (W === 1) return this._unsafeLadder(point, scalar, prev); // For W=1 ladder is ~x2 faster\n    return this.wNAFUnsafe(W, this.getPrecomputes(W, point, transform), scalar, prev);\n  }\n\n  // We calculate precomputes for elliptic curve point multiplication\n  // using windowed method. This specifies window size and\n  // stores precomputed values. Usually only base point would be precomputed.\n  createCache(P: PC_P<PC>, W: number): void {\n    validateW(W, this.bits);\n    pointWindowSizes.set(P, W);\n    pointPrecomputes.delete(P);\n  }\n\n  hasCache(elm: PC_P<PC>): boolean {\n    return getW(elm) !== 1;\n  }\n}\n\n/**\n * Endomorphism-specific multiplication for Koblitz curves.\n * Cost: 128 dbl, 0-256 adds.\n */\nexport function mulEndoUnsafe<P extends CurvePoint<any, P>, PC extends CurvePointCons<P>>(\n  Point: PC,\n  point: P,\n  k1: bigint,\n  k2: bigint\n): { p1: P; p2: P } {\n  let acc = point;\n  let p1 = Point.ZERO;\n  let p2 = Point.ZERO;\n  while (k1 > _0n || k2 > _0n) {\n    if (k1 & _1n) p1 = p1.add(acc);\n    if (k2 & _1n) p2 = p2.add(acc);\n    acc = acc.double();\n    k1 >>= _1n;\n    k2 >>= _1n;\n  }\n  return { p1, p2 };\n}\n\n/**\n * Pippenger algorithm for multi-scalar multiplication (MSM, Pa + Qb + Rc + ...).\n * 30x faster vs naive addition on L=4096, 10x faster than precomputes.\n * For N=254bit, L=1, it does: 1024 ADD + 254 DBL. For L=5: 1536 ADD + 254 DBL.\n * Algorithmically constant-time (for same L), even when 1 point + scalar, or when scalar = 0.\n * @param c Curve Point constructor\n * @param fieldN field over CURVE.N - important that it's not over CURVE.P\n * @param points array of L curve points\n * @param scalars array of L scalars (aka secret keys / bigints)\n */\nexport function pippenger<P extends CurvePoint<any, P>, PC extends CurvePointCons<P>>(\n  c: PC,\n  fieldN: IField<bigint>,\n  points: P[],\n  scalars: bigint[]\n): P {\n  // If we split scalars by some window (let's say 8 bits), every chunk will only\n  // take 256 buckets even if there are 4096 scalars, also re-uses double.\n  // TODO:\n  // - https://eprint.iacr.org/2024/750.pdf\n  // - https://tches.iacr.org/index.php/TCHES/article/view/10287\n  // 0 is accepted in scalars\n  validateMSMPoints(points, c);\n  validateMSMScalars(scalars, fieldN);\n  const plength = points.length;\n  const slength = scalars.length;\n  if (plength !== slength) throw new Error('arrays of points and scalars must have equal length');\n  // if (plength === 0) throw new Error('array must be of length >= 2');\n  const zero = c.ZERO;\n  const wbits = bitLen(BigInt(plength));\n  let windowSize = 1; // bits\n  if (wbits > 12) windowSize = wbits - 3;\n  else if (wbits > 4) windowSize = wbits - 2;\n  else if (wbits > 0) windowSize = 2;\n  const MASK = bitMask(windowSize);\n  const buckets = new Array(Number(MASK) + 1).fill(zero); // +1 for zero array\n  const lastBits = Math.floor((fieldN.BITS - 1) / windowSize) * windowSize;\n  let sum = zero;\n  for (let i = lastBits; i >= 0; i -= windowSize) {\n    buckets.fill(zero);\n    for (let j = 0; j < slength; j++) {\n      const scalar = scalars[j];\n      const wbits = Number((scalar >> BigInt(i)) & MASK);\n      buckets[wbits] = buckets[wbits].add(points[j]);\n    }\n    let resI = zero; // not using this will do small speed-up, but will lose ct\n    // Skip first bucket, because it is zero\n    for (let j = buckets.length - 1, sumI = zero; j > 0; j--) {\n      sumI = sumI.add(buckets[j]);\n      resI = resI.add(sumI);\n    }\n    sum = sum.add(resI);\n    if (i !== 0) for (let j = 0; j < windowSize; j++) sum = sum.double();\n  }\n  return sum as P;\n}\n/**\n * Precomputed multi-scalar multiplication (MSM, Pa + Qb + Rc + ...).\n * @param c Curve Point constructor\n * @param fieldN field over CURVE.N - important that it's not over CURVE.P\n * @param points array of L curve points\n * @returns function which multiplies points with scaars\n */\nexport function precomputeMSMUnsafe<P extends CurvePoint<any, P>, PC extends CurvePointCons<P>>(\n  c: PC,\n  fieldN: IField<bigint>,\n  points: P[],\n  windowSize: number\n): (scalars: bigint[]) => P {\n  /**\n   * Performance Analysis of Window-based Precomputation\n   *\n   * Base Case (256-bit scalar, 8-bit window):\n   * - Standard precomputation requires:\n   *   - 31 additions per scalar Ã 256 scalars = 7,936 ops\n   *   - Plus 255 summary additions = 8,191 total ops\n   *   Note: Summary additions can be optimized via accumulator\n   *\n   * Chunked Precomputation Analysis:\n   * - Using 32 chunks requires:\n   *   - 255 additions per chunk\n   *   - 256 doublings\n   *   - Total: (255 Ã 32) + 256 = 8,416 ops\n   *\n   * Memory Usage Comparison:\n   * Window Size | Standard Points | Chunked Points\n   * ------------|-----------------|---------------\n   *     4-bit   |     520         |      15\n   *     8-bit   |    4,224        |     255\n   *    10-bit   |   13,824        |   1,023\n   *    16-bit   |  557,056        |  65,535\n   *\n   * Key Advantages:\n   * 1. Enables larger window sizes due to reduced memory overhead\n   * 2. More efficient for smaller scalar counts:\n   *    - 16 chunks: (16 Ã 255) + 256 = 4,336 ops\n   *    - ~2x faster than standard 8,191 ops\n   *\n   * Limitations:\n   * - Not suitable for plain precomputes (requires 256 constant doublings)\n   * - Performance degrades with larger scalar counts:\n   *   - Optimal for ~256 scalars\n   *   - Less efficient for 4096+ scalars (Pippenger preferred)\n   */\n  validateW(windowSize, fieldN.BITS);\n  validateMSMPoints(points, c);\n  const zero = c.ZERO;\n  const tableSize = 2 ** windowSize - 1; // table size (without zero)\n  const chunks = Math.ceil(fieldN.BITS / windowSize); // chunks of item\n  const MASK = bitMask(windowSize);\n  const tables = points.map((p: P) => {\n    const res = [];\n    for (let i = 0, acc = p; i < tableSize; i++) {\n      res.push(acc);\n      acc = acc.add(p);\n    }\n    return res;\n  });\n  return (scalars: bigint[]): P => {\n    validateMSMScalars(scalars, fieldN);\n    if (scalars.length > points.length)\n      throw new Error('array of scalars must be smaller than array of points');\n    let res = zero;\n    for (let i = 0; i < chunks; i++) {\n      // No need to double if accumulator is still zero.\n      if (res !== zero) for (let j = 0; j < windowSize; j++) res = res.double();\n      const shiftBy = BigInt(chunks * windowSize - (i + 1) * windowSize);\n      for (let j = 0; j < scalars.length; j++) {\n        const n = scalars[j];\n        const curr = Number((n >> shiftBy) & MASK);\n        if (!curr) continue; // skip zero scalars chunks\n        res = res.add(tables[j][curr - 1]);\n      }\n    }\n    return res;\n  };\n}\n\n// TODO: remove\n/**\n * Generic BasicCurve interface: works even for polynomial fields (BLS): P, n, h would be ok.\n * Though generator can be different (Fp2 / Fp6 for BLS).\n */\nexport type BasicCurve<T> = {\n  Fp: IField<T>; // Field over which we'll do calculations (Fp)\n  n: bigint; // Curve order, total count of valid points in the field\n  nBitLength?: number; // bit length of curve order\n  nByteLength?: number; // byte length of curve order\n  h: bigint; // cofactor. we can assign default=1, but users will just ignore it w/o validation\n  hEff?: bigint; // Number to multiply to clear cofactor\n  Gx: T; // base point X coordinate\n  Gy: T; // base point Y coordinate\n  allowInfinityPoint?: boolean; // bls12-381 requires it. ZERO point is valid, but invalid pubkey\n};\n\n// TODO: remove\n/** @deprecated */\nexport function validateBasic<FP, T>(\n  curve: BasicCurve<FP> & T\n): Readonly<\n  {\n    readonly nBitLength: number;\n    readonly nByteLength: number;\n  } & BasicCurve<FP> &\n    T & {\n      p: bigint;\n    }\n> {\n  validateField(curve.Fp);\n  validateObject(\n    curve,\n    {\n      n: 'bigint',\n      h: 'bigint',\n      Gx: 'field',\n      Gy: 'field',\n    },\n    {\n      nBitLength: 'isSafeInteger',\n      nByteLength: 'isSafeInteger',\n    }\n  );\n  // Set defaults\n  return Object.freeze({\n    ...nLength(curve.n, curve.nBitLength),\n    ...curve,\n    ...{ p: curve.Fp.ORDER },\n  } as const);\n}\n\nexport type ValidCurveParams<T> = {\n  p: bigint;\n  n: bigint;\n  h: bigint;\n  a: T;\n  b?: T;\n  d?: T;\n  Gx: T;\n  Gy: T;\n};\n\nfunction createField<T>(order: bigint, field?: IField<T>, isLE?: boolean): IField<T> {\n  if (field) {\n    if (field.ORDER !== order) throw new Error('Field.ORDER must match order: Fp == p, Fn == n');\n    validateField(field);\n    return field;\n  } else {\n    return Field(order, { isLE }) as unknown as IField<T>;\n  }\n}\nexport type FpFn<T> = { Fp: IField<T>; Fn: IField<bigint> };\n\n/** Validates CURVE opts and creates fields */\nexport function _createCurveFields<T>(\n  type: 'weierstrass' | 'edwards',\n  CURVE: ValidCurveParams<T>,\n  curveOpts: Partial<FpFn<T>> = {},\n  FpFnLE?: boolean\n): FpFn<T> & { CURVE: ValidCurveParams<T> } {\n  if (FpFnLE === undefined) FpFnLE = type === 'edwards';\n  if (!CURVE || typeof CURVE !== 'object') throw new Error(`expected valid ${type} CURVE object`);\n  for (const p of ['p', 'n', 'h'] as const) {\n    const val = CURVE[p];\n    if (!(typeof val === 'bigint' && val > _0n))\n      throw new Error(`CURVE.${p} must be positive bigint`);\n  }\n  const Fp = createField(CURVE.p, curveOpts.Fp, FpFnLE);\n  const Fn = createField(CURVE.n, curveOpts.Fn, FpFnLE);\n  const _b: 'b' | 'd' = type === 'weierstrass' ? 'b' : 'd';\n  const params = ['Gx', 'Gy', 'a', _b] as const;\n  for (const p of params) {\n    // @ts-ignore\n    if (!Fp.isValid(CURVE[p]))\n      throw new Error(`CURVE.${p} must be valid field element of CURVE.Fp`);\n  }\n  CURVE = Object.freeze(Object.assign({}, CURVE));\n  return { CURVE, Fp, Fn };\n}\n", "/**\n * Short Weierstrass curve methods. The formula is: yÂ² = xÂ³ + ax + b.\n *\n * ### Design rationale for types\n *\n * * Interaction between classes from different curves should fail:\n *   `k256.Point.BASE.add(p256.Point.BASE)`\n * * For this purpose we want to use `instanceof` operator, which is fast and works during runtime\n * * Different calls of `curve()` would return different classes -\n *   `curve(params) !== curve(params)`: if somebody decided to monkey-patch their curve,\n *   it won't affect others\n *\n * TypeScript can't infer types for classes created inside a function. Classes is one instance\n * of nominative types in TypeScript and interfaces only check for shape, so it's hard to create\n * unique type for every function call.\n *\n * We can use generic types via some param, like curve opts, but that would:\n *     1. Enable interaction between `curve(params)` and `curve(params)` (curves of same params)\n *     which is hard to debug.\n *     2. Params can be generic and we can't enforce them to be constant value:\n *     if somebody creates curve from non-constant params,\n *     it would be allowed to interact with other curves with non-constant params\n *\n * @todo https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-7.html#unique-symbol\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { hmac as nobleHmac } from '@noble/hashes/hmac.js';\nimport { ahash } from '@noble/hashes/utils';\nimport {\n  _validateObject,\n  _abool2 as abool,\n  _abytes2 as abytes,\n  aInRange,\n  bitLen,\n  bitMask,\n  bytesToHex,\n  bytesToNumberBE,\n  concatBytes,\n  createHmacDrbg,\n  ensureBytes,\n  hexToBytes,\n  inRange,\n  isBytes,\n  memoized,\n  numberToHexUnpadded,\n  randomBytes as randomBytesWeb,\n  type CHash,\n  type Hex,\n  type PrivKey,\n} from '../utils.ts';\nimport {\n  _createCurveFields,\n  mulEndoUnsafe,\n  negateCt,\n  normalizeZ,\n  pippenger,\n  wNAF,\n  type AffinePoint,\n  type BasicCurve,\n  type CurveLengths,\n  type CurvePoint,\n  type CurvePointCons,\n} from './curve.ts';\nimport {\n  Field,\n  FpInvertBatch,\n  getMinHashLength,\n  mapHashToField,\n  nLength,\n  validateField,\n  type IField,\n  type NLength,\n} from './modular.ts';\n\nexport type { AffinePoint };\nexport type HmacFnSync = (key: Uint8Array, ...messages: Uint8Array[]) => Uint8Array;\n\ntype EndoBasis = [[bigint, bigint], [bigint, bigint]];\n/**\n * When Weierstrass curve has `a=0`, it becomes Koblitz curve.\n * Koblitz curves allow using **efficiently-computable GLV endomorphism Ï**.\n * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\n * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\n *\n * Endomorphism consists of beta, lambda and splitScalar:\n *\n * 1. GLV endomorphism Ï transforms a point: `P = (x, y) â¦ Ï(P) = (Î²Â·x mod p, y)`\n * 2. GLV scalar decomposition transforms a scalar: `k â¡ kâ + kâÂ·Î» (mod n)`\n * 3. Then these are combined: `kÂ·P = kâÂ·P + kâÂ·Ï(P)`\n * 4. Two 128-bit point-by-scalar multiplications + one point addition is faster than\n *    one 256-bit multiplication.\n *\n * where\n * * beta: Î² â Fâ with Î²Â³ = 1, Î² â  1\n * * lambda: Î» â Fâ with Î»Â³ = 1, Î» â  1\n * * splitScalar decomposes k â¦ kâ, kâ, by using reduced basis vectors.\n *   Gauss lattice reduction calculates them from initial basis vectors `(n, 0), (-Î», 0)`\n *\n * Check out `test/misc/endomorphism.js` and\n * [gist](https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066).\n */\nexport type EndomorphismOpts = {\n  beta: bigint;\n  basises?: EndoBasis;\n  splitScalar?: (k: bigint) => { k1neg: boolean; k1: bigint; k2neg: boolean; k2: bigint };\n};\n\n// We construct basis in such way that den is always positive and equals n, but num sign depends on basis (not on secret value)\nconst divNearest = (num: bigint, den: bigint) => (num + (num >= 0 ? den : -den) / _2n) / den;\n\nexport type ScalarEndoParts = { k1neg: boolean; k1: bigint; k2neg: boolean; k2: bigint };\n\n/**\n * Splits scalar for GLV endomorphism.\n */\nexport function _splitEndoScalar(k: bigint, basis: EndoBasis, n: bigint): ScalarEndoParts {\n  // Split scalar into two such that part is ~half bits: `abs(part) < sqrt(N)`\n  // Since part can be negative, we need to do this on point.\n  // TODO: verifyScalar function which consumes lambda\n  const [[a1, b1], [a2, b2]] = basis;\n  const c1 = divNearest(b2 * k, n);\n  const c2 = divNearest(-b1 * k, n);\n  // |k1|/|k2| is < sqrt(N), but can be negative.\n  // If we do `k1 mod N`, we'll get big scalar (`> sqrt(N)`): so, we do cheaper negation instead.\n  let k1 = k - c1 * a1 - c2 * a2;\n  let k2 = -c1 * b1 - c2 * b2;\n  const k1neg = k1 < _0n;\n  const k2neg = k2 < _0n;\n  if (k1neg) k1 = -k1;\n  if (k2neg) k2 = -k2;\n  // Double check that resulting scalar less than half bits of N: otherwise wNAF will fail.\n  // This should only happen on wrong basises. Also, math inside is too complex and I don't trust it.\n  const MAX_NUM = bitMask(Math.ceil(bitLen(n) / 2)) + _1n; // Half bits of N\n  if (k1 < _0n || k1 >= MAX_NUM || k2 < _0n || k2 >= MAX_NUM) {\n    throw new Error('splitScalar (endomorphism): failed, k=' + k);\n  }\n  return { k1neg, k1, k2neg, k2 };\n}\n\nexport type ECDSASigFormat = 'compact' | 'recovered' | 'der';\nexport type ECDSARecoverOpts = {\n  prehash?: boolean;\n};\nexport type ECDSAVerifyOpts = {\n  prehash?: boolean;\n  lowS?: boolean;\n  format?: ECDSASigFormat;\n};\nexport type ECDSASignOpts = {\n  prehash?: boolean;\n  lowS?: boolean;\n  format?: ECDSASigFormat;\n  extraEntropy?: Uint8Array | boolean;\n};\n\nfunction validateSigFormat(format: string): ECDSASigFormat {\n  if (!['compact', 'recovered', 'der'].includes(format))\n    throw new Error('Signature format must be \"compact\", \"recovered\", or \"der\"');\n  return format as ECDSASigFormat;\n}\n\nfunction validateSigOpts<T extends ECDSASignOpts, D extends Required<ECDSASignOpts>>(\n  opts: T,\n  def: D\n): Required<ECDSASignOpts> {\n  const optsn: ECDSASignOpts = {};\n  for (let optName of Object.keys(def)) {\n    // @ts-ignore\n    optsn[optName] = opts[optName] === undefined ? def[optName] : opts[optName];\n  }\n  abool(optsn.lowS!, 'lowS');\n  abool(optsn.prehash!, 'prehash');\n  if (optsn.format !== undefined) validateSigFormat(optsn.format);\n  return optsn as Required<ECDSASignOpts>;\n}\n\n/** Instance methods for 3D XYZ projective points. */\nexport interface WeierstrassPoint<T> extends CurvePoint<T, WeierstrassPoint<T>> {\n  /** projective X coordinate. Different from affine x. */\n  readonly X: T;\n  /** projective Y coordinate. Different from affine y. */\n  readonly Y: T;\n  /** projective z coordinate */\n  readonly Z: T;\n  /** affine x coordinate. Different from projective X. */\n  get x(): T;\n  /** affine y coordinate. Different from projective Y. */\n  get y(): T;\n  /** Encodes point using IEEE P1363 (DER) encoding. First byte is 2/3/4. Default = isCompressed. */\n  toBytes(isCompressed?: boolean): Uint8Array;\n  toHex(isCompressed?: boolean): string;\n\n  /** @deprecated use `.X` */\n  readonly px: T;\n  /** @deprecated use `.Y` */\n  readonly py: T;\n  /** @deprecated use `.Z` */\n  readonly pz: T;\n  /** @deprecated use `toBytes` */\n  toRawBytes(isCompressed?: boolean): Uint8Array;\n  /** @deprecated use `multiplyUnsafe` */\n  multiplyAndAddUnsafe(\n    Q: WeierstrassPoint<T>,\n    a: bigint,\n    b: bigint\n  ): WeierstrassPoint<T> | undefined;\n  /** @deprecated use `p.y % 2n === 0n` */\n  hasEvenY(): boolean;\n  /** @deprecated use `p.precompute(windowSize)` */\n  _setWindowSize(windowSize: number): void;\n}\n\n/** Static methods for 3D XYZ projective points. */\nexport interface WeierstrassPointCons<T> extends CurvePointCons<WeierstrassPoint<T>> {\n  /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\n  new (X: T, Y: T, Z: T): WeierstrassPoint<T>;\n  CURVE(): WeierstrassOpts<T>;\n  /** @deprecated use `Point.BASE.multiply(Point.Fn.fromBytes(privateKey))` */\n  fromPrivateKey(privateKey: PrivKey): WeierstrassPoint<T>;\n  /** @deprecated use `import { normalizeZ } from '@noble/curves/abstract/curve.js';` */\n  normalizeZ(points: WeierstrassPoint<T>[]): WeierstrassPoint<T>[];\n  /** @deprecated use `import { pippenger } from '@noble/curves/abstract/curve.js';` */\n  msm(points: WeierstrassPoint<T>[], scalars: bigint[]): WeierstrassPoint<T>;\n}\n\n/**\n * Weierstrass curve options.\n *\n * * p: prime characteristic (order) of finite field, in which arithmetics is done\n * * n: order of prime subgroup a.k.a total amount of valid curve points\n * * h: cofactor, usually 1. h*n is group order; n is subgroup order\n * * a: formula param, must be in field of p\n * * b: formula param, must be in field of p\n * * Gx: x coordinate of generator point a.k.a. base point\n * * Gy: y coordinate of generator point\n */\nexport type WeierstrassOpts<T> = Readonly<{\n  p: bigint;\n  n: bigint;\n  h: bigint;\n  a: T;\n  b: T;\n  Gx: T;\n  Gy: T;\n}>;\n\n// When a cofactor != 1, there can be an effective methods to:\n// 1. Determine whether a point is torsion-free\n// 2. Clear torsion component\n// wrapPrivateKey: bls12-381 requires mod(n) instead of rejecting keys >= n\nexport type WeierstrassExtraOpts<T> = Partial<{\n  Fp: IField<T>;\n  Fn: IField<bigint>;\n  allowInfinityPoint: boolean;\n  endo: EndomorphismOpts;\n  isTorsionFree: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => boolean;\n  clearCofactor: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => WeierstrassPoint<T>;\n  fromBytes: (bytes: Uint8Array) => AffinePoint<T>;\n  toBytes: (\n    c: WeierstrassPointCons<T>,\n    point: WeierstrassPoint<T>,\n    isCompressed: boolean\n  ) => Uint8Array;\n}>;\n\n/**\n * Options for ECDSA signatures over a Weierstrass curve.\n *\n * * lowS: (default: true) whether produced / verified signatures occupy low half of ecdsaOpts.p. Prevents malleability.\n * * hmac: (default: noble-hashes hmac) function, would be used to init hmac-drbg for k generation.\n * * randomBytes: (default: webcrypto os-level CSPRNG) custom method for fetching secure randomness.\n * * bits2int, bits2int_modN: used in sigs, sometimes overridden by curves\n */\nexport type ECDSAOpts = Partial<{\n  lowS: boolean;\n  hmac: HmacFnSync;\n  randomBytes: (bytesLength?: number) => Uint8Array;\n  bits2int: (bytes: Uint8Array) => bigint;\n  bits2int_modN: (bytes: Uint8Array) => bigint;\n}>;\n\n/**\n * Elliptic Curve Diffie-Hellman interface.\n * Provides keygen, secret-to-public conversion, calculating shared secrets.\n */\nexport interface ECDH {\n  keygen: (seed?: Uint8Array) => { secretKey: Uint8Array; publicKey: Uint8Array };\n  getPublicKey: (secretKey: PrivKey, isCompressed?: boolean) => Uint8Array;\n  getSharedSecret: (secretKeyA: PrivKey, publicKeyB: Hex, isCompressed?: boolean) => Uint8Array;\n  Point: WeierstrassPointCons<bigint>;\n  utils: {\n    isValidSecretKey: (secretKey: PrivKey) => boolean;\n    isValidPublicKey: (publicKey: Uint8Array, isCompressed?: boolean) => boolean;\n    randomSecretKey: (seed?: Uint8Array) => Uint8Array;\n    /** @deprecated use `randomSecretKey` */\n    randomPrivateKey: (seed?: Uint8Array) => Uint8Array;\n    /** @deprecated use `isValidSecretKey` */\n    isValidPrivateKey: (secretKey: PrivKey) => boolean;\n    /** @deprecated use `Point.Fn.fromBytes()` */\n    normPrivateKeyToScalar: (key: PrivKey) => bigint;\n    /** @deprecated use `point.precompute()` */\n    precompute: (windowSize?: number, point?: WeierstrassPoint<bigint>) => WeierstrassPoint<bigint>;\n  };\n  lengths: CurveLengths;\n}\n\n/**\n * ECDSA interface.\n * Only supported for prime fields, not Fp2 (extension fields).\n */\nexport interface ECDSA extends ECDH {\n  sign: (message: Hex, secretKey: PrivKey, opts?: ECDSASignOpts) => ECDSASigRecovered;\n  verify: (\n    signature: Uint8Array,\n    message: Uint8Array,\n    publicKey: Uint8Array,\n    opts?: ECDSAVerifyOpts\n  ) => boolean;\n  recoverPublicKey(signature: Uint8Array, message: Uint8Array, opts?: ECDSARecoverOpts): Uint8Array;\n  Signature: ECDSASignatureCons;\n}\nexport class DERErr extends Error {\n  constructor(m = '') {\n    super(m);\n  }\n}\nexport type IDER = {\n  // asn.1 DER encoding utils\n  Err: typeof DERErr;\n  // Basic building block is TLV (Tag-Length-Value)\n  _tlv: {\n    encode: (tag: number, data: string) => string;\n    // v - value, l - left bytes (unparsed)\n    decode(tag: number, data: Uint8Array): { v: Uint8Array; l: Uint8Array };\n  };\n  // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n  // since we always use positive integers here. It must always be empty:\n  // - add zero byte if exists\n  // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n  _int: {\n    encode(num: bigint): string;\n    decode(data: Uint8Array): bigint;\n  };\n  toSig(hex: string | Uint8Array): { r: bigint; s: bigint };\n  hexFromSig(sig: { r: bigint; s: bigint }): string;\n};\n/**\n * ASN.1 DER encoding utilities. ASN is very complex & fragile. Format:\n *\n *     [0x30 (SEQUENCE), bytelength, 0x02 (INTEGER), intLength, R, 0x02 (INTEGER), intLength, S]\n *\n * Docs: https://letsencrypt.org/docs/a-warm-welcome-to-asn1-and-der/, https://luca.ntop.org/Teaching/Appunti/asn1.html\n */\nexport const DER: IDER = {\n  // asn.1 DER encoding utils\n  Err: DERErr,\n  // Basic building block is TLV (Tag-Length-Value)\n  _tlv: {\n    encode: (tag: number, data: string): string => {\n      const { Err: E } = DER;\n      if (tag < 0 || tag > 256) throw new E('tlv.encode: wrong tag');\n      if (data.length & 1) throw new E('tlv.encode: unpadded data');\n      const dataLen = data.length / 2;\n      const len = numberToHexUnpadded(dataLen);\n      if ((len.length / 2) & 0b1000_0000) throw new E('tlv.encode: long form length too big');\n      // length of length with long form flag\n      const lenLen = dataLen > 127 ? numberToHexUnpadded((len.length / 2) | 0b1000_0000) : '';\n      const t = numberToHexUnpadded(tag);\n      return t + lenLen + len + data;\n    },\n    // v - value, l - left bytes (unparsed)\n    decode(tag: number, data: Uint8Array): { v: Uint8Array; l: Uint8Array } {\n      const { Err: E } = DER;\n      let pos = 0;\n      if (tag < 0 || tag > 256) throw new E('tlv.encode: wrong tag');\n      if (data.length < 2 || data[pos++] !== tag) throw new E('tlv.decode: wrong tlv');\n      const first = data[pos++];\n      const isLong = !!(first & 0b1000_0000); // First bit of first length byte is flag for short/long form\n      let length = 0;\n      if (!isLong) length = first;\n      else {\n        // Long form: [longFlag(1bit), lengthLength(7bit), length (BE)]\n        const lenLen = first & 0b0111_1111;\n        if (!lenLen) throw new E('tlv.decode(long): indefinite length not supported');\n        if (lenLen > 4) throw new E('tlv.decode(long): byte length is too big'); // this will overflow u32 in js\n        const lengthBytes = data.subarray(pos, pos + lenLen);\n        if (lengthBytes.length !== lenLen) throw new E('tlv.decode: length bytes not complete');\n        if (lengthBytes[0] === 0) throw new E('tlv.decode(long): zero leftmost byte');\n        for (const b of lengthBytes) length = (length << 8) | b;\n        pos += lenLen;\n        if (length < 128) throw new E('tlv.decode(long): not minimal encoding');\n      }\n      const v = data.subarray(pos, pos + length);\n      if (v.length !== length) throw new E('tlv.decode: wrong value length');\n      return { v, l: data.subarray(pos + length) };\n    },\n  },\n  // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n  // since we always use positive integers here. It must always be empty:\n  // - add zero byte if exists\n  // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n  _int: {\n    encode(num: bigint): string {\n      const { Err: E } = DER;\n      if (num < _0n) throw new E('integer: negative integers are not allowed');\n      let hex = numberToHexUnpadded(num);\n      // Pad with zero byte if negative flag is present\n      if (Number.parseInt(hex[0], 16) & 0b1000) hex = '00' + hex;\n      if (hex.length & 1) throw new E('unexpected DER parsing assertion: unpadded hex');\n      return hex;\n    },\n    decode(data: Uint8Array): bigint {\n      const { Err: E } = DER;\n      if (data[0] & 0b1000_0000) throw new E('invalid signature integer: negative');\n      if (data[0] === 0x00 && !(data[1] & 0b1000_0000))\n        throw new E('invalid signature integer: unnecessary leading zero');\n      return bytesToNumberBE(data);\n    },\n  },\n  toSig(hex: string | Uint8Array): { r: bigint; s: bigint } {\n    // parse DER signature\n    const { Err: E, _int: int, _tlv: tlv } = DER;\n    const data = ensureBytes('signature', hex);\n    const { v: seqBytes, l: seqLeftBytes } = tlv.decode(0x30, data);\n    if (seqLeftBytes.length) throw new E('invalid signature: left bytes after parsing');\n    const { v: rBytes, l: rLeftBytes } = tlv.decode(0x02, seqBytes);\n    const { v: sBytes, l: sLeftBytes } = tlv.decode(0x02, rLeftBytes);\n    if (sLeftBytes.length) throw new E('invalid signature: left bytes after parsing');\n    return { r: int.decode(rBytes), s: int.decode(sBytes) };\n  },\n  hexFromSig(sig: { r: bigint; s: bigint }): string {\n    const { _tlv: tlv, _int: int } = DER;\n    const rs = tlv.encode(0x02, int.encode(sig.r));\n    const ss = tlv.encode(0x02, int.encode(sig.s));\n    const seq = rs + ss;\n    return tlv.encode(0x30, seq);\n  },\n};\n\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\n\nexport function _normFnElement(Fn: IField<bigint>, key: PrivKey): bigint {\n  const { BYTES: expected } = Fn;\n  let num: bigint;\n  if (typeof key === 'bigint') {\n    num = key;\n  } else {\n    let bytes = ensureBytes('private key', key);\n    try {\n      num = Fn.fromBytes(bytes);\n    } catch (error) {\n      throw new Error(`invalid private key: expected ui8a of size ${expected}, got ${typeof key}`);\n    }\n  }\n  if (!Fn.isValidNot0(num)) throw new Error('invalid private key: out of range [1..N-1]');\n  return num;\n}\n\n/**\n * Creates weierstrass Point constructor, based on specified curve options.\n *\n * @example\n```js\nconst opts = {\n  p: BigInt('0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff'),\n  n: BigInt('0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551'),\n  h: BigInt(1),\n  a: BigInt('0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc'),\n  b: BigInt('0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b'),\n  Gx: BigInt('0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296'),\n  Gy: BigInt('0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5'),\n};\nconst p256_Point = weierstrass(opts);\n```\n */\nexport function weierstrassN<T>(\n  params: WeierstrassOpts<T>,\n  extraOpts: WeierstrassExtraOpts<T> = {}\n): WeierstrassPointCons<T> {\n  const validated = _createCurveFields('weierstrass', params, extraOpts);\n  const { Fp, Fn } = validated;\n  let CURVE = validated.CURVE as WeierstrassOpts<T>;\n  const { h: cofactor, n: CURVE_ORDER } = CURVE;\n  _validateObject(\n    extraOpts,\n    {},\n    {\n      allowInfinityPoint: 'boolean',\n      clearCofactor: 'function',\n      isTorsionFree: 'function',\n      fromBytes: 'function',\n      toBytes: 'function',\n      endo: 'object',\n      wrapPrivateKey: 'boolean',\n    }\n  );\n\n  const { endo } = extraOpts;\n  if (endo) {\n    // validateObject(endo, { beta: 'bigint', splitScalar: 'function' });\n    if (!Fp.is0(CURVE.a) || typeof endo.beta !== 'bigint' || !Array.isArray(endo.basises)) {\n      throw new Error('invalid endo: expected \"beta\": bigint and \"basises\": array');\n    }\n  }\n\n  const lengths = getWLengths(Fp, Fn);\n\n  function assertCompressionIsSupported() {\n    if (!Fp.isOdd) throw new Error('compression is not supported: Field does not have .isOdd()');\n  }\n\n  // Implements IEEE P1363 point encoding\n  function pointToBytes(\n    _c: WeierstrassPointCons<T>,\n    point: WeierstrassPoint<T>,\n    isCompressed: boolean\n  ): Uint8Array {\n    const { x, y } = point.toAffine();\n    const bx = Fp.toBytes(x);\n    abool(isCompressed, 'isCompressed');\n    if (isCompressed) {\n      assertCompressionIsSupported();\n      const hasEvenY = !Fp.isOdd!(y);\n      return concatBytes(pprefix(hasEvenY), bx);\n    } else {\n      return concatBytes(Uint8Array.of(0x04), bx, Fp.toBytes(y));\n    }\n  }\n  function pointFromBytes(bytes: Uint8Array) {\n    abytes(bytes, undefined, 'Point');\n    const { publicKey: comp, publicKeyUncompressed: uncomp } = lengths; // e.g. for 32-byte: 33, 65\n    const length = bytes.length;\n    const head = bytes[0];\n    const tail = bytes.subarray(1);\n    // No actual validation is done here: use .assertValidity()\n    if (length === comp && (head === 0x02 || head === 0x03)) {\n      const x = Fp.fromBytes(tail);\n      if (!Fp.isValid(x)) throw new Error('bad point: is not on curve, wrong x');\n      const y2 = weierstrassEquation(x); // yÂ² = xÂ³ + ax + b\n      let y: T;\n      try {\n        y = Fp.sqrt(y2); // y = yÂ² ^ (p+1)/4\n      } catch (sqrtError) {\n        const err = sqrtError instanceof Error ? ': ' + sqrtError.message : '';\n        throw new Error('bad point: is not on curve, sqrt error' + err);\n      }\n      assertCompressionIsSupported();\n      const isYOdd = Fp.isOdd!(y); // (y & _1n) === _1n;\n      const isHeadOdd = (head & 1) === 1; // ECDSA-specific\n      if (isHeadOdd !== isYOdd) y = Fp.neg(y);\n      return { x, y };\n    } else if (length === uncomp && head === 0x04) {\n      // TODO: more checks\n      const L = Fp.BYTES;\n      const x = Fp.fromBytes(tail.subarray(0, L));\n      const y = Fp.fromBytes(tail.subarray(L, L * 2));\n      if (!isValidXY(x, y)) throw new Error('bad point: is not on curve');\n      return { x, y };\n    } else {\n      throw new Error(\n        `bad point: got length ${length}, expected compressed=${comp} or uncompressed=${uncomp}`\n      );\n    }\n  }\n\n  const encodePoint = extraOpts.toBytes || pointToBytes;\n  const decodePoint = extraOpts.fromBytes || pointFromBytes;\n  function weierstrassEquation(x: T): T {\n    const x2 = Fp.sqr(x); // x * x\n    const x3 = Fp.mul(x2, x); // xÂ² * x\n    return Fp.add(Fp.add(x3, Fp.mul(x, CURVE.a)), CURVE.b); // xÂ³ + a * x + b\n  }\n\n  // TODO: move top-level\n  /** Checks whether equation holds for given x, y: yÂ² == xÂ³ + ax + b */\n  function isValidXY(x: T, y: T): boolean {\n    const left = Fp.sqr(y); // yÂ²\n    const right = weierstrassEquation(x); // xÂ³ + ax + b\n    return Fp.eql(left, right);\n  }\n\n  // Validate whether the passed curve params are valid.\n  // Test 1: equation yÂ² = xÂ³ + ax + b should work for generator point.\n  if (!isValidXY(CURVE.Gx, CURVE.Gy)) throw new Error('bad curve params: generator point');\n\n  // Test 2: discriminant Î part should be non-zero: 4aÂ³ + 27bÂ² != 0.\n  // Guarantees curve is genus-1, smooth (non-singular).\n  const _4a3 = Fp.mul(Fp.pow(CURVE.a, _3n), _4n);\n  const _27b2 = Fp.mul(Fp.sqr(CURVE.b), BigInt(27));\n  if (Fp.is0(Fp.add(_4a3, _27b2))) throw new Error('bad curve params: a or b');\n\n  /** Asserts coordinate is valid: 0 <= n < Fp.ORDER. */\n  function acoord(title: string, n: T, banZero = false) {\n    if (!Fp.isValid(n) || (banZero && Fp.is0(n))) throw new Error(`bad point coordinate ${title}`);\n    return n;\n  }\n\n  function aprjpoint(other: unknown) {\n    if (!(other instanceof Point)) throw new Error('ProjectivePoint expected');\n  }\n\n  function splitEndoScalarN(k: bigint) {\n    if (!endo || !endo.basises) throw new Error('no endo');\n    return _splitEndoScalar(k, endo.basises, Fn.ORDER);\n  }\n\n  // Memoized toAffine / validity check. They are heavy. Points are immutable.\n\n  // Converts Projective point to affine (x, y) coordinates.\n  // Can accept precomputed Z^-1 - for example, from invertBatch.\n  // (X, Y, Z) â (x=X/Z, y=Y/Z)\n  const toAffineMemo = memoized((p: Point, iz?: T): AffinePoint<T> => {\n    const { X, Y, Z } = p;\n    // Fast-path for normalized points\n    if (Fp.eql(Z, Fp.ONE)) return { x: X, y: Y };\n    const is0 = p.is0();\n    // If invZ was 0, we return zero point. However we still want to execute\n    // all operations, so we replace invZ with a random number, 1.\n    if (iz == null) iz = is0 ? Fp.ONE : Fp.inv(Z);\n    const x = Fp.mul(X, iz);\n    const y = Fp.mul(Y, iz);\n    const zz = Fp.mul(Z, iz);\n    if (is0) return { x: Fp.ZERO, y: Fp.ZERO };\n    if (!Fp.eql(zz, Fp.ONE)) throw new Error('invZ was invalid');\n    return { x, y };\n  });\n  // NOTE: on exception this will crash 'cached' and no value will be set.\n  // Otherwise true will be return\n  const assertValidMemo = memoized((p: Point) => {\n    if (p.is0()) {\n      // (0, 1, 0) aka ZERO is invalid in most contexts.\n      // In BLS, ZERO can be serialized, so we allow it.\n      // (0, 0, 0) is invalid representation of ZERO.\n      if (extraOpts.allowInfinityPoint && !Fp.is0(p.Y)) return;\n      throw new Error('bad point: ZERO');\n    }\n    // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n    const { x, y } = p.toAffine();\n    if (!Fp.isValid(x) || !Fp.isValid(y)) throw new Error('bad point: x or y not field elements');\n    if (!isValidXY(x, y)) throw new Error('bad point: equation left != right');\n    if (!p.isTorsionFree()) throw new Error('bad point: not in prime-order subgroup');\n    return true;\n  });\n\n  function finishEndo(\n    endoBeta: EndomorphismOpts['beta'],\n    k1p: Point,\n    k2p: Point,\n    k1neg: boolean,\n    k2neg: boolean\n  ) {\n    k2p = new Point(Fp.mul(k2p.X, endoBeta), k2p.Y, k2p.Z);\n    k1p = negateCt(k1neg, k1p);\n    k2p = negateCt(k2neg, k2p);\n    return k1p.add(k2p);\n  }\n\n  /**\n   * Projective Point works in 3d / projective (homogeneous) coordinates:(X, Y, Z) â (x=X/Z, y=Y/Z).\n   * Default Point works in 2d / affine coordinates: (x, y).\n   * We're doing calculations in projective, because its operations don't require costly inversion.\n   */\n  class Point implements WeierstrassPoint<T> {\n    // base / generator point\n    static readonly BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n    // zero / infinity / identity point\n    static readonly ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO); // 0, 1, 0\n    // math field\n    static readonly Fp = Fp;\n    // scalar field\n    static readonly Fn = Fn;\n\n    readonly X: T;\n    readonly Y: T;\n    readonly Z: T;\n\n    /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\n    constructor(X: T, Y: T, Z: T) {\n      this.X = acoord('x', X);\n      this.Y = acoord('y', Y, true);\n      this.Z = acoord('z', Z);\n      Object.freeze(this);\n    }\n\n    static CURVE(): WeierstrassOpts<T> {\n      return CURVE;\n    }\n\n    /** Does NOT validate if the point is valid. Use `.assertValidity()`. */\n    static fromAffine(p: AffinePoint<T>): Point {\n      const { x, y } = p || {};\n      if (!p || !Fp.isValid(x) || !Fp.isValid(y)) throw new Error('invalid affine point');\n      if (p instanceof Point) throw new Error('projective point not allowed');\n      // (0, 0) would've produced (0, 0, 1) - instead, we need (0, 1, 0)\n      if (Fp.is0(x) && Fp.is0(y)) return Point.ZERO;\n      return new Point(x, y, Fp.ONE);\n    }\n\n    static fromBytes(bytes: Uint8Array): Point {\n      const P = Point.fromAffine(decodePoint(abytes(bytes, undefined, 'point')));\n      P.assertValidity();\n      return P;\n    }\n    static fromHex(hex: Hex): Point {\n      return Point.fromBytes(ensureBytes('pointHex', hex));\n    }\n\n    get x(): T {\n      return this.toAffine().x;\n    }\n    get y(): T {\n      return this.toAffine().y;\n    }\n\n    /**\n     *\n     * @param windowSize\n     * @param isLazy true will defer table computation until the first multiplication\n     * @returns\n     */\n    precompute(windowSize: number = 8, isLazy = true): Point {\n      wnaf.createCache(this, windowSize);\n      if (!isLazy) this.multiply(_3n); // random number\n      return this;\n    }\n\n    // TODO: return `this`\n    /** A point on curve is valid if it conforms to equation. */\n    assertValidity(): void {\n      assertValidMemo(this);\n    }\n\n    hasEvenY(): boolean {\n      const { y } = this.toAffine();\n      if (!Fp.isOdd) throw new Error(\"Field doesn't support isOdd\");\n      return !Fp.isOdd(y);\n    }\n\n    /** Compare one point to another. */\n    equals(other: Point): boolean {\n      aprjpoint(other);\n      const { X: X1, Y: Y1, Z: Z1 } = this;\n      const { X: X2, Y: Y2, Z: Z2 } = other;\n      const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n      const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n      return U1 && U2;\n    }\n\n    /** Flips point to one corresponding to (x, -y) in Affine coordinates. */\n    negate(): Point {\n      return new Point(this.X, Fp.neg(this.Y), this.Z);\n    }\n\n    // Renes-Costello-Batina exception-free doubling formula.\n    // There is 30% faster Jacobian formula, but it is not complete.\n    // https://eprint.iacr.org/2015/1060, algorithm 3\n    // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n    double() {\n      const { a, b } = CURVE;\n      const b3 = Fp.mul(b, _3n);\n      const { X: X1, Y: Y1, Z: Z1 } = this;\n      let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n      let t0 = Fp.mul(X1, X1); // step 1\n      let t1 = Fp.mul(Y1, Y1);\n      let t2 = Fp.mul(Z1, Z1);\n      let t3 = Fp.mul(X1, Y1);\n      t3 = Fp.add(t3, t3); // step 5\n      Z3 = Fp.mul(X1, Z1);\n      Z3 = Fp.add(Z3, Z3);\n      X3 = Fp.mul(a, Z3);\n      Y3 = Fp.mul(b3, t2);\n      Y3 = Fp.add(X3, Y3); // step 10\n      X3 = Fp.sub(t1, Y3);\n      Y3 = Fp.add(t1, Y3);\n      Y3 = Fp.mul(X3, Y3);\n      X3 = Fp.mul(t3, X3);\n      Z3 = Fp.mul(b3, Z3); // step 15\n      t2 = Fp.mul(a, t2);\n      t3 = Fp.sub(t0, t2);\n      t3 = Fp.mul(a, t3);\n      t3 = Fp.add(t3, Z3);\n      Z3 = Fp.add(t0, t0); // step 20\n      t0 = Fp.add(Z3, t0);\n      t0 = Fp.add(t0, t2);\n      t0 = Fp.mul(t0, t3);\n      Y3 = Fp.add(Y3, t0);\n      t2 = Fp.mul(Y1, Z1); // step 25\n      t2 = Fp.add(t2, t2);\n      t0 = Fp.mul(t2, t3);\n      X3 = Fp.sub(X3, t0);\n      Z3 = Fp.mul(t2, t1);\n      Z3 = Fp.add(Z3, Z3); // step 30\n      Z3 = Fp.add(Z3, Z3);\n      return new Point(X3, Y3, Z3);\n    }\n\n    // Renes-Costello-Batina exception-free addition formula.\n    // There is 30% faster Jacobian formula, but it is not complete.\n    // https://eprint.iacr.org/2015/1060, algorithm 1\n    // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n    add(other: Point): Point {\n      aprjpoint(other);\n      const { X: X1, Y: Y1, Z: Z1 } = this;\n      const { X: X2, Y: Y2, Z: Z2 } = other;\n      let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n      const a = CURVE.a;\n      const b3 = Fp.mul(CURVE.b, _3n);\n      let t0 = Fp.mul(X1, X2); // step 1\n      let t1 = Fp.mul(Y1, Y2);\n      let t2 = Fp.mul(Z1, Z2);\n      let t3 = Fp.add(X1, Y1);\n      let t4 = Fp.add(X2, Y2); // step 5\n      t3 = Fp.mul(t3, t4);\n      t4 = Fp.add(t0, t1);\n      t3 = Fp.sub(t3, t4);\n      t4 = Fp.add(X1, Z1);\n      let t5 = Fp.add(X2, Z2); // step 10\n      t4 = Fp.mul(t4, t5);\n      t5 = Fp.add(t0, t2);\n      t4 = Fp.sub(t4, t5);\n      t5 = Fp.add(Y1, Z1);\n      X3 = Fp.add(Y2, Z2); // step 15\n      t5 = Fp.mul(t5, X3);\n      X3 = Fp.add(t1, t2);\n      t5 = Fp.sub(t5, X3);\n      Z3 = Fp.mul(a, t4);\n      X3 = Fp.mul(b3, t2); // step 20\n      Z3 = Fp.add(X3, Z3);\n      X3 = Fp.sub(t1, Z3);\n      Z3 = Fp.add(t1, Z3);\n      Y3 = Fp.mul(X3, Z3);\n      t1 = Fp.add(t0, t0); // step 25\n      t1 = Fp.add(t1, t0);\n      t2 = Fp.mul(a, t2);\n      t4 = Fp.mul(b3, t4);\n      t1 = Fp.add(t1, t2);\n      t2 = Fp.sub(t0, t2); // step 30\n      t2 = Fp.mul(a, t2);\n      t4 = Fp.add(t4, t2);\n      t0 = Fp.mul(t1, t4);\n      Y3 = Fp.add(Y3, t0);\n      t0 = Fp.mul(t5, t4); // step 35\n      X3 = Fp.mul(t3, X3);\n      X3 = Fp.sub(X3, t0);\n      t0 = Fp.mul(t3, t1);\n      Z3 = Fp.mul(t5, Z3);\n      Z3 = Fp.add(Z3, t0); // step 40\n      return new Point(X3, Y3, Z3);\n    }\n\n    subtract(other: Point) {\n      return this.add(other.negate());\n    }\n\n    is0(): boolean {\n      return this.equals(Point.ZERO);\n    }\n\n    /**\n     * Constant time multiplication.\n     * Uses wNAF method. Windowed method may be 10% faster,\n     * but takes 2x longer to generate and consumes 2x memory.\n     * Uses precomputes when available.\n     * Uses endomorphism for Koblitz curves.\n     * @param scalar by which the point would be multiplied\n     * @returns New point\n     */\n    multiply(scalar: bigint): Point {\n      const { endo } = extraOpts;\n      if (!Fn.isValidNot0(scalar)) throw new Error('invalid scalar: out of range'); // 0 is invalid\n      let point: Point, fake: Point; // Fake point is used to const-time mult\n      const mul = (n: bigint) => wnaf.cached(this, n, (p) => normalizeZ(Point, p));\n      /** See docs for {@link EndomorphismOpts} */\n      if (endo) {\n        const { k1neg, k1, k2neg, k2 } = splitEndoScalarN(scalar);\n        const { p: k1p, f: k1f } = mul(k1);\n        const { p: k2p, f: k2f } = mul(k2);\n        fake = k1f.add(k2f);\n        point = finishEndo(endo.beta, k1p, k2p, k1neg, k2neg);\n      } else {\n        const { p, f } = mul(scalar);\n        point = p;\n        fake = f;\n      }\n      // Normalize `z` for both points, but return only real one\n      return normalizeZ(Point, [point, fake])[0];\n    }\n\n    /**\n     * Non-constant-time multiplication. Uses double-and-add algorithm.\n     * It's faster, but should only be used when you don't care about\n     * an exposed secret key e.g. sig verification, which works over *public* keys.\n     */\n    multiplyUnsafe(sc: bigint): Point {\n      const { endo } = extraOpts;\n      const p = this as Point;\n      if (!Fn.isValid(sc)) throw new Error('invalid scalar: out of range'); // 0 is valid\n      if (sc === _0n || p.is0()) return Point.ZERO;\n      if (sc === _1n) return p; // fast-path\n      if (wnaf.hasCache(this)) return this.multiply(sc);\n      if (endo) {\n        const { k1neg, k1, k2neg, k2 } = splitEndoScalarN(sc);\n        const { p1, p2 } = mulEndoUnsafe(Point, p, k1, k2); // 30% faster vs wnaf.unsafe\n        return finishEndo(endo.beta, p1, p2, k1neg, k2neg);\n      } else {\n        return wnaf.unsafe(p, sc);\n      }\n    }\n\n    multiplyAndAddUnsafe(Q: Point, a: bigint, b: bigint): Point | undefined {\n      const sum = this.multiplyUnsafe(a).add(Q.multiplyUnsafe(b));\n      return sum.is0() ? undefined : sum;\n    }\n\n    /**\n     * Converts Projective point to affine (x, y) coordinates.\n     * @param invertedZ Z^-1 (inverted zero) - optional, precomputation is useful for invertBatch\n     */\n    toAffine(invertedZ?: T): AffinePoint<T> {\n      return toAffineMemo(this, invertedZ);\n    }\n\n    /**\n     * Checks whether Point is free of torsion elements (is in prime subgroup).\n     * Always torsion-free for cofactor=1 curves.\n     */\n    isTorsionFree(): boolean {\n      const { isTorsionFree } = extraOpts;\n      if (cofactor === _1n) return true;\n      if (isTorsionFree) return isTorsionFree(Point, this);\n      return wnaf.unsafe(this, CURVE_ORDER).is0();\n    }\n\n    clearCofactor(): Point {\n      const { clearCofactor } = extraOpts;\n      if (cofactor === _1n) return this; // Fast-path\n      if (clearCofactor) return clearCofactor(Point, this) as Point;\n      return this.multiplyUnsafe(cofactor);\n    }\n\n    isSmallOrder(): boolean {\n      // can we use this.clearCofactor()?\n      return this.multiplyUnsafe(cofactor).is0();\n    }\n\n    toBytes(isCompressed = true): Uint8Array {\n      abool(isCompressed, 'isCompressed');\n      this.assertValidity();\n      return encodePoint(Point, this, isCompressed);\n    }\n\n    toHex(isCompressed = true): string {\n      return bytesToHex(this.toBytes(isCompressed));\n    }\n\n    toString() {\n      return `<Point ${this.is0() ? 'ZERO' : this.toHex()}>`;\n    }\n\n    // TODO: remove\n    get px(): T {\n      return this.X;\n    }\n    get py(): T {\n      return this.X;\n    }\n    get pz(): T {\n      return this.Z;\n    }\n    toRawBytes(isCompressed = true): Uint8Array {\n      return this.toBytes(isCompressed);\n    }\n    _setWindowSize(windowSize: number) {\n      this.precompute(windowSize);\n    }\n    static normalizeZ(points: Point[]): Point[] {\n      return normalizeZ(Point, points);\n    }\n    static msm(points: Point[], scalars: bigint[]): Point {\n      return pippenger(Point, Fn, points, scalars);\n    }\n    static fromPrivateKey(privateKey: PrivKey) {\n      return Point.BASE.multiply(_normFnElement(Fn, privateKey));\n    }\n  }\n  const bits = Fn.BITS;\n  const wnaf = new wNAF(Point, extraOpts.endo ? Math.ceil(bits / 2) : bits);\n  Point.BASE.precompute(8); // Enable precomputes. Slows down first publicKey computation by 20ms.\n  return Point;\n}\n\n/** Methods of ECDSA signature instance. */\nexport interface ECDSASignature {\n  readonly r: bigint;\n  readonly s: bigint;\n  readonly recovery?: number;\n  addRecoveryBit(recovery: number): ECDSASigRecovered;\n  hasHighS(): boolean;\n  toBytes(format?: string): Uint8Array;\n  toHex(format?: string): string;\n\n  /** @deprecated */\n  assertValidity(): void;\n  /** @deprecated */\n  normalizeS(): ECDSASignature;\n  /** @deprecated use standalone method `curve.recoverPublicKey(sig.toBytes('recovered'), msg)` */\n  recoverPublicKey(msgHash: Hex): WeierstrassPoint<bigint>;\n  /** @deprecated use `.toBytes('compact')` */\n  toCompactRawBytes(): Uint8Array;\n  /** @deprecated use `.toBytes('compact')` */\n  toCompactHex(): string;\n  /** @deprecated use `.toBytes('der')` */\n  toDERRawBytes(): Uint8Array;\n  /** @deprecated use `.toBytes('der')` */\n  toDERHex(): string;\n}\nexport type ECDSASigRecovered = ECDSASignature & {\n  readonly recovery: number;\n};\n/** Methods of ECDSA signature constructor. */\nexport type ECDSASignatureCons = {\n  new (r: bigint, s: bigint, recovery?: number): ECDSASignature;\n  fromBytes(bytes: Uint8Array, format?: ECDSASigFormat): ECDSASignature;\n  fromHex(hex: string, format?: ECDSASigFormat): ECDSASignature;\n\n  /** @deprecated use `.fromBytes(bytes, 'compact')` */\n  fromCompact(hex: Hex): ECDSASignature;\n  /** @deprecated use `.fromBytes(bytes, 'der')` */\n  fromDER(hex: Hex): ECDSASignature;\n};\n\n// Points start with byte 0x02 when y is even; otherwise 0x03\nfunction pprefix(hasEvenY: boolean): Uint8Array {\n  return Uint8Array.of(hasEvenY ? 0x02 : 0x03);\n}\n\n/**\n * Implementation of the Shallue and van de Woestijne method for any weierstrass curve.\n * TODO: check if there is a way to merge this with uvRatio in Edwards; move to modular.\n * b = True and y = sqrt(u / v) if (u / v) is square in F, and\n * b = False and y = sqrt(Z * (u / v)) otherwise.\n * @param Fp\n * @param Z\n * @returns\n */\nexport function SWUFpSqrtRatio<T>(\n  Fp: IField<T>,\n  Z: T\n): (u: T, v: T) => { isValid: boolean; value: T } {\n  // Generic implementation\n  const q = Fp.ORDER;\n  let l = _0n;\n  for (let o = q - _1n; o % _2n === _0n; o /= _2n) l += _1n;\n  const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n  // We need 2n ** c1 and 2n ** (c1-1). We can't use **; but we can use <<.\n  // 2n ** c1 == 2n << (c1-1)\n  const _2n_pow_c1_1 = _2n << (c1 - _1n - _1n);\n  const _2n_pow_c1 = _2n_pow_c1_1 * _2n;\n  const c2 = (q - _1n) / _2n_pow_c1; // 2. c2 = (q - 1) / (2^c1)  # Integer arithmetic\n  const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n  const c4 = _2n_pow_c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n  const c5 = _2n_pow_c1_1; // 5. c5 = 2^(c1 - 1)                  # Integer arithmetic\n  const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n  const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n  let sqrtRatio = (u: T, v: T): { isValid: boolean; value: T } => {\n    let tv1 = c6; // 1. tv1 = c6\n    let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n    let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n    tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n    let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n    tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n    tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n    tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n    tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n    let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n    tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n    let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n    tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n    tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n    tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n    tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n    // 17. for i in (c1, c1 - 1, ..., 2):\n    for (let i = c1; i > _1n; i--) {\n      let tv5 = i - _2n; // 18.    tv5 = i - 2\n      tv5 = _2n << (tv5 - _1n); // 19.    tv5 = 2^tv5\n      let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\n      const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n      tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n      tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n      tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n      tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n      tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n    }\n    return { isValid: isQR, value: tv3 };\n  };\n  if (Fp.ORDER % _4n === _3n) {\n    // sqrt_ratio_3mod4(u, v)\n    const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n    const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n    sqrtRatio = (u: T, v: T) => {\n      let tv1 = Fp.sqr(v); // 1. tv1 = v^2\n      const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n      tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n      let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\n      y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n      const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\n      const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n      const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n      let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n      return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\n    };\n  }\n  // No curves uses that\n  // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n  return sqrtRatio;\n}\n/**\n * Simplified Shallue-van de Woestijne-Ulas Method\n * https://www.rfc-editor.org/rfc/rfc9380#section-6.6.2\n */\nexport function mapToCurveSimpleSWU<T>(\n  Fp: IField<T>,\n  opts: {\n    A: T;\n    B: T;\n    Z: T;\n  }\n): (u: T) => { x: T; y: T } {\n  validateField(Fp);\n  const { A, B, Z } = opts;\n  if (!Fp.isValid(A) || !Fp.isValid(B) || !Fp.isValid(Z))\n    throw new Error('mapToCurveSimpleSWU: invalid opts');\n  const sqrtRatio = SWUFpSqrtRatio(Fp, Z);\n  if (!Fp.isOdd) throw new Error('Field does not have .isOdd()');\n  // Input: u, an element of F.\n  // Output: (x, y), a point on E.\n  return (u: T): { x: T; y: T } => {\n    // prettier-ignore\n    let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n    tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n    tv1 = Fp.mul(tv1, Z); // 2.  tv1 = Z * tv1\n    tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n    tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n    tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n    tv3 = Fp.mul(tv3, B); // 6.  tv3 = B * tv3\n    tv4 = Fp.cmov(Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n    tv4 = Fp.mul(tv4, A); // 8.  tv4 = A * tv4\n    tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n    tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n    tv5 = Fp.mul(tv6, A); // 11. tv5 = A * tv6\n    tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n    tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n    tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n    tv5 = Fp.mul(tv6, B); // 15. tv5 = B * tv6\n    tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n    x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n    const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n    y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n    y = Fp.mul(y, value); // 20.   y = y * y1\n    x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n    y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n    const e1 = Fp.isOdd!(u) === Fp.isOdd!(y); // 23.  e1 = sgn0(u) == sgn0(y)\n    y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n    const tv4_inv = FpInvertBatch(Fp, [tv4], true)[0];\n    x = Fp.mul(x, tv4_inv); // 25.   x = x / tv4\n    return { x, y };\n  };\n}\n\nfunction getWLengths<T>(Fp: IField<T>, Fn: IField<bigint>) {\n  return {\n    secretKey: Fn.BYTES,\n    publicKey: 1 + Fp.BYTES,\n    publicKeyUncompressed: 1 + 2 * Fp.BYTES,\n    publicKeyHasPrefix: true,\n    signature: 2 * Fn.BYTES,\n  };\n}\n\n/**\n * Sometimes users only need getPublicKey, getSharedSecret, and secret key handling.\n * This helper ensures no signature functionality is present. Less code, smaller bundle size.\n */\nexport function ecdh(\n  Point: WeierstrassPointCons<bigint>,\n  ecdhOpts: { randomBytes?: (bytesLength?: number) => Uint8Array } = {}\n): ECDH {\n  const { Fn } = Point;\n  const randomBytes_ = ecdhOpts.randomBytes || randomBytesWeb;\n  const lengths = Object.assign(getWLengths(Point.Fp, Fn), { seed: getMinHashLength(Fn.ORDER) });\n\n  function isValidSecretKey(secretKey: PrivKey) {\n    try {\n      return !!_normFnElement(Fn, secretKey);\n    } catch (error) {\n      return false;\n    }\n  }\n\n  function isValidPublicKey(publicKey: Uint8Array, isCompressed?: boolean): boolean {\n    const { publicKey: comp, publicKeyUncompressed } = lengths;\n    try {\n      const l = publicKey.length;\n      if (isCompressed === true && l !== comp) return false;\n      if (isCompressed === false && l !== publicKeyUncompressed) return false;\n      return !!Point.fromBytes(publicKey);\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Produces cryptographically secure secret key from random of size\n   * (groupLen + ceil(groupLen / 2)) with modulo bias being negligible.\n   */\n  function randomSecretKey(seed = randomBytes_(lengths.seed)): Uint8Array {\n    return mapHashToField(abytes(seed, lengths.seed, 'seed'), Fn.ORDER);\n  }\n\n  /**\n   * Computes public key for a secret key. Checks for validity of the secret key.\n   * @param isCompressed whether to return compact (default), or full key\n   * @returns Public key, full when isCompressed=false; short when isCompressed=true\n   */\n  function getPublicKey(secretKey: PrivKey, isCompressed = true): Uint8Array {\n    return Point.BASE.multiply(_normFnElement(Fn, secretKey)).toBytes(isCompressed);\n  }\n\n  function keygen(seed?: Uint8Array) {\n    const secretKey = randomSecretKey(seed);\n    return { secretKey, publicKey: getPublicKey(secretKey) };\n  }\n\n  /**\n   * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n   */\n  function isProbPub(item: PrivKey | PubKey): boolean | undefined {\n    if (typeof item === 'bigint') return false;\n    if (item instanceof Point) return true;\n    const { secretKey, publicKey, publicKeyUncompressed } = lengths;\n    if (Fn.allowedLengths || secretKey === publicKey) return undefined;\n    const l = ensureBytes('key', item).length;\n    return l === publicKey || l === publicKeyUncompressed;\n  }\n\n  /**\n   * ECDH (Elliptic Curve Diffie Hellman).\n   * Computes shared public key from secret key A and public key B.\n   * Checks: 1) secret key validity 2) shared key is on-curve.\n   * Does NOT hash the result.\n   * @param isCompressed whether to return compact (default), or full key\n   * @returns shared public key\n   */\n  function getSharedSecret(secretKeyA: PrivKey, publicKeyB: Hex, isCompressed = true): Uint8Array {\n    if (isProbPub(secretKeyA) === true) throw new Error('first arg must be private key');\n    if (isProbPub(publicKeyB) === false) throw new Error('second arg must be public key');\n    const s = _normFnElement(Fn, secretKeyA);\n    const b = Point.fromHex(publicKeyB); // checks for being on-curve\n    return b.multiply(s).toBytes(isCompressed);\n  }\n\n  const utils = {\n    isValidSecretKey,\n    isValidPublicKey,\n    randomSecretKey,\n\n    // TODO: remove\n    isValidPrivateKey: isValidSecretKey,\n    randomPrivateKey: randomSecretKey,\n    normPrivateKeyToScalar: (key: PrivKey) => _normFnElement(Fn, key),\n    precompute(windowSize = 8, point = Point.BASE): WeierstrassPoint<bigint> {\n      return point.precompute(windowSize, false);\n    },\n  };\n\n  return Object.freeze({ getPublicKey, getSharedSecret, keygen, Point, utils, lengths });\n}\n\n/**\n * Creates ECDSA signing interface for given elliptic curve `Point` and `hash` function.\n * We need `hash` for 2 features:\n * 1. Message prehash-ing. NOT used if `sign` / `verify` are called with `prehash: false`\n * 2. k generation in `sign`, using HMAC-drbg(hash)\n *\n * ECDSAOpts are only rarely needed.\n *\n * @example\n * ```js\n * const p256_Point = weierstrass(...);\n * const p256_sha256 = ecdsa(p256_Point, sha256);\n * const p256_sha224 = ecdsa(p256_Point, sha224);\n * const p256_sha224_r = ecdsa(p256_Point, sha224, { randomBytes: (length) => { ... } });\n * ```\n */\nexport function ecdsa(\n  Point: WeierstrassPointCons<bigint>,\n  hash: CHash,\n  ecdsaOpts: ECDSAOpts = {}\n): ECDSA {\n  ahash(hash);\n  _validateObject(\n    ecdsaOpts,\n    {},\n    {\n      hmac: 'function',\n      lowS: 'boolean',\n      randomBytes: 'function',\n      bits2int: 'function',\n      bits2int_modN: 'function',\n    }\n  );\n\n  const randomBytes = ecdsaOpts.randomBytes || randomBytesWeb;\n  const hmac: HmacFnSync =\n    ecdsaOpts.hmac ||\n    (((key, ...msgs) => nobleHmac(hash, key, concatBytes(...msgs))) satisfies HmacFnSync);\n\n  const { Fp, Fn } = Point;\n  const { ORDER: CURVE_ORDER, BITS: fnBits } = Fn;\n  const { keygen, getPublicKey, getSharedSecret, utils, lengths } = ecdh(Point, ecdsaOpts);\n  const defaultSigOpts: Required<ECDSASignOpts> = {\n    prehash: false,\n    lowS: typeof ecdsaOpts.lowS === 'boolean' ? ecdsaOpts.lowS : false,\n    format: undefined as any, //'compact' as ECDSASigFormat,\n    extraEntropy: false,\n  };\n  const defaultSigOpts_format = 'compact';\n\n  function isBiggerThanHalfOrder(number: bigint) {\n    const HALF = CURVE_ORDER >> _1n;\n    return number > HALF;\n  }\n  function validateRS(title: string, num: bigint): bigint {\n    if (!Fn.isValidNot0(num))\n      throw new Error(`invalid signature ${title}: out of range 1..Point.Fn.ORDER`);\n    return num;\n  }\n  function validateSigLength(bytes: Uint8Array, format: ECDSASigFormat) {\n    validateSigFormat(format);\n    const size = lengths.signature!;\n    const sizer = format === 'compact' ? size : format === 'recovered' ? size + 1 : undefined;\n    return abytes(bytes, sizer, `${format} signature`);\n  }\n\n  /**\n   * ECDSA signature with its (r, s) properties. Supports compact, recovered & DER representations.\n   */\n  class Signature implements ECDSASignature {\n    readonly r: bigint;\n    readonly s: bigint;\n    readonly recovery?: number;\n    constructor(r: bigint, s: bigint, recovery?: number) {\n      this.r = validateRS('r', r); // r in [1..N-1];\n      this.s = validateRS('s', s); // s in [1..N-1];\n      if (recovery != null) this.recovery = recovery;\n      Object.freeze(this);\n    }\n\n    static fromBytes(bytes: Uint8Array, format: ECDSASigFormat = defaultSigOpts_format): Signature {\n      validateSigLength(bytes, format);\n      let recid: number | undefined;\n      if (format === 'der') {\n        const { r, s } = DER.toSig(abytes(bytes));\n        return new Signature(r, s);\n      }\n      if (format === 'recovered') {\n        recid = bytes[0];\n        format = 'compact';\n        bytes = bytes.subarray(1);\n      }\n      const L = Fn.BYTES;\n      const r = bytes.subarray(0, L);\n      const s = bytes.subarray(L, L * 2);\n      return new Signature(Fn.fromBytes(r), Fn.fromBytes(s), recid);\n    }\n\n    static fromHex(hex: string, format?: ECDSASigFormat) {\n      return this.fromBytes(hexToBytes(hex), format);\n    }\n\n    addRecoveryBit(recovery: number): RecoveredSignature {\n      return new Signature(this.r, this.s, recovery) as RecoveredSignature;\n    }\n\n    recoverPublicKey(messageHash: Hex): WeierstrassPoint<bigint> {\n      const FIELD_ORDER = Fp.ORDER;\n      const { r, s, recovery: rec } = this;\n      if (rec == null || ![0, 1, 2, 3].includes(rec)) throw new Error('recovery id invalid');\n\n      // ECDSA recovery is hard for cofactor > 1 curves.\n      // In sign, `r = q.x mod n`, and here we recover q.x from r.\n      // While recovering q.x >= n, we need to add r+n for cofactor=1 curves.\n      // However, for cofactor>1, r+n may not get q.x:\n      // r+n*i would need to be done instead where i is unknown.\n      // To easily get i, we either need to:\n      // a. increase amount of valid recid values (4, 5...); OR\n      // b. prohibit non-prime-order signatures (recid > 1).\n      const hasCofactor = CURVE_ORDER * _2n < FIELD_ORDER;\n      if (hasCofactor && rec > 1) throw new Error('recovery id is ambiguous for h>1 curve');\n\n      const radj = rec === 2 || rec === 3 ? r + CURVE_ORDER : r;\n      if (!Fp.isValid(radj)) throw new Error('recovery id 2 or 3 invalid');\n      const x = Fp.toBytes(radj);\n      const R = Point.fromBytes(concatBytes(pprefix((rec & 1) === 0), x));\n      const ir = Fn.inv(radj); // r^-1\n      const h = bits2int_modN(ensureBytes('msgHash', messageHash)); // Truncate hash\n      const u1 = Fn.create(-h * ir); // -hr^-1\n      const u2 = Fn.create(s * ir); // sr^-1\n      // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1). unsafe is fine: there is no private data.\n      const Q = Point.BASE.multiplyUnsafe(u1).add(R.multiplyUnsafe(u2));\n      if (Q.is0()) throw new Error('point at infinify');\n      Q.assertValidity();\n      return Q;\n    }\n\n    // Signatures should be low-s, to prevent malleability.\n    hasHighS(): boolean {\n      return isBiggerThanHalfOrder(this.s);\n    }\n\n    toBytes(format: ECDSASigFormat = defaultSigOpts_format) {\n      validateSigFormat(format);\n      if (format === 'der') return hexToBytes(DER.hexFromSig(this));\n      const r = Fn.toBytes(this.r);\n      const s = Fn.toBytes(this.s);\n      if (format === 'recovered') {\n        if (this.recovery == null) throw new Error('recovery bit must be present');\n        return concatBytes(Uint8Array.of(this.recovery), r, s);\n      }\n      return concatBytes(r, s);\n    }\n\n    toHex(format?: ECDSASigFormat) {\n      return bytesToHex(this.toBytes(format));\n    }\n\n    // TODO: remove\n    assertValidity(): void {}\n    static fromCompact(hex: Hex) {\n      return Signature.fromBytes(ensureBytes('sig', hex), 'compact');\n    }\n    static fromDER(hex: Hex) {\n      return Signature.fromBytes(ensureBytes('sig', hex), 'der');\n    }\n    normalizeS() {\n      return this.hasHighS() ? new Signature(this.r, Fn.neg(this.s), this.recovery) : this;\n    }\n    toDERRawBytes() {\n      return this.toBytes('der');\n    }\n    toDERHex() {\n      return bytesToHex(this.toBytes('der'));\n    }\n    toCompactRawBytes() {\n      return this.toBytes('compact');\n    }\n    toCompactHex() {\n      return bytesToHex(this.toBytes('compact'));\n    }\n  }\n  type RecoveredSignature = Signature & { recovery: number };\n\n  // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n  // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n  // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n  // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n  const bits2int =\n    ecdsaOpts.bits2int ||\n    function bits2int_def(bytes: Uint8Array): bigint {\n      // Our custom check \"just in case\", for protection against DoS\n      if (bytes.length > 8192) throw new Error('input is too large');\n      // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n      // for some cases, since bytes.length * 8 is not actual bitLength.\n      const num = bytesToNumberBE(bytes); // check for == u8 done here\n      const delta = bytes.length * 8 - fnBits; // truncate to nBitLength leftmost bits\n      return delta > 0 ? num >> BigInt(delta) : num;\n    };\n  const bits2int_modN =\n    ecdsaOpts.bits2int_modN ||\n    function bits2int_modN_def(bytes: Uint8Array): bigint {\n      return Fn.create(bits2int(bytes)); // can't use bytesToNumberBE here\n    };\n  // Pads output with zero as per spec\n  const ORDER_MASK = bitMask(fnBits);\n  /** Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`. */\n  function int2octets(num: bigint): Uint8Array {\n    // IMPORTANT: the check ensures working for case `Fn.BYTES != Fn.BITS * 8`\n    aInRange('num < 2^' + fnBits, num, _0n, ORDER_MASK);\n    return Fn.toBytes(num);\n  }\n\n  function validateMsgAndHash(message: Uint8Array, prehash: boolean) {\n    abytes(message, undefined, 'message');\n    return prehash ? abytes(hash(message), undefined, 'prehashed message') : message;\n  }\n\n  /**\n   * Steps A, D of RFC6979 3.2.\n   * Creates RFC6979 seed; converts msg/privKey to numbers.\n   * Used only in sign, not in verify.\n   *\n   * Warning: we cannot assume here that message has same amount of bytes as curve order,\n   * this will be invalid at least for P521. Also it can be bigger for P224 + SHA256.\n   */\n  function prepSig(message: Uint8Array, privateKey: PrivKey, opts: ECDSASignOpts) {\n    if (['recovered', 'canonical'].some((k) => k in opts))\n      throw new Error('sign() legacy options not supported');\n    const { lowS, prehash, extraEntropy } = validateSigOpts(opts, defaultSigOpts);\n    message = validateMsgAndHash(message, prehash); // RFC6979 3.2 A: h1 = H(m)\n    // We can't later call bits2octets, since nested bits2int is broken for curves\n    // with fnBits % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n    // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n    const h1int = bits2int_modN(message);\n    const d = _normFnElement(Fn, privateKey); // validate secret key, convert to bigint\n    const seedArgs = [int2octets(d), int2octets(h1int)];\n    // extraEntropy. RFC6979 3.6: additional k' (optional).\n    if (extraEntropy != null && extraEntropy !== false) {\n      // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n      // gen random bytes OR pass as-is\n      const e = extraEntropy === true ? randomBytes(lengths.secretKey) : extraEntropy;\n      seedArgs.push(ensureBytes('extraEntropy', e)); // check for being bytes\n    }\n    const seed = concatBytes(...seedArgs); // Step D of RFC6979 3.2\n    const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n    // Converts signature params into point w r/s, checks result for validity.\n    // To transform k => Signature:\n    // q = kâG\n    // r = q.x mod n\n    // s = k^-1(m + rd) mod n\n    // Can use scalar blinding b^-1(bm + bdr) where b â [1,qâ1] according to\n    // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n    // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n    function k2sig(kBytes: Uint8Array): RecoveredSignature | undefined {\n      // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n      // Important: all mod() calls here must be done over N\n      const k = bits2int(kBytes); // mod n, not mod p\n      if (!Fn.isValidNot0(k)) return; // Valid scalars (including k) must be in 1..N-1\n      const ik = Fn.inv(k); // k^-1 mod n\n      const q = Point.BASE.multiply(k).toAffine(); // q = kâG\n      const r = Fn.create(q.x); // r = q.x mod n\n      if (r === _0n) return;\n      const s = Fn.create(ik * Fn.create(m + r * d)); // Not using blinding here, see comment above\n      if (s === _0n) return;\n      let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n      let normS = s;\n      if (lowS && isBiggerThanHalfOrder(s)) {\n        normS = Fn.neg(s); // if lowS was passed, ensure s is always\n        recovery ^= 1; // // in the bottom half of N\n      }\n      return new Signature(r, normS, recovery) as RecoveredSignature; // use normS, not s\n    }\n    return { seed, k2sig };\n  }\n\n  /**\n   * Signs message hash with a secret key.\n   *\n   * ```\n   * sign(m, d) where\n   *   k = rfc6979_hmac_drbg(m, d)\n   *   (x, y) = G Ã k\n   *   r = x mod n\n   *   s = (m + dr) / k mod n\n   * ```\n   */\n  function sign(message: Hex, secretKey: PrivKey, opts: ECDSASignOpts = {}): RecoveredSignature {\n    message = ensureBytes('message', message);\n    const { seed, k2sig } = prepSig(message, secretKey, opts); // Steps A, D of RFC6979 3.2.\n    const drbg = createHmacDrbg<RecoveredSignature>(hash.outputLen, Fn.BYTES, hmac);\n    const sig = drbg(seed, k2sig); // Steps B, C, D, E, F, G\n    return sig;\n  }\n\n  function tryParsingSig(sg: Hex | SignatureLike) {\n    // Try to deduce format\n    let sig: Signature | undefined = undefined;\n    const isHex = typeof sg === 'string' || isBytes(sg);\n    const isObj =\n      !isHex &&\n      sg !== null &&\n      typeof sg === 'object' &&\n      typeof sg.r === 'bigint' &&\n      typeof sg.s === 'bigint';\n    if (!isHex && !isObj)\n      throw new Error('invalid signature, expected Uint8Array, hex string or Signature instance');\n    if (isObj) {\n      sig = new Signature(sg.r, sg.s);\n    } else if (isHex) {\n      try {\n        sig = Signature.fromBytes(ensureBytes('sig', sg), 'der');\n      } catch (derError) {\n        if (!(derError instanceof DER.Err)) throw derError;\n      }\n      if (!sig) {\n        try {\n          sig = Signature.fromBytes(ensureBytes('sig', sg), 'compact');\n        } catch (error) {\n          return false;\n        }\n      }\n    }\n    if (!sig) return false;\n    return sig;\n  }\n\n  /**\n   * Verifies a signature against message and public key.\n   * Rejects lowS signatures by default: see {@link ECDSAVerifyOpts}.\n   * Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n   *\n   * ```\n   * verify(r, s, h, P) where\n   *   u1 = hs^-1 mod n\n   *   u2 = rs^-1 mod n\n   *   R = u1âG + u2âP\n   *   mod(R.x, n) == r\n   * ```\n   */\n  function verify(\n    signature: Hex | SignatureLike,\n    message: Hex,\n    publicKey: Hex,\n    opts: ECDSAVerifyOpts = {}\n  ): boolean {\n    const { lowS, prehash, format } = validateSigOpts(opts, defaultSigOpts);\n    publicKey = ensureBytes('publicKey', publicKey);\n    message = validateMsgAndHash(ensureBytes('message', message), prehash);\n    if ('strict' in opts) throw new Error('options.strict was renamed to lowS');\n    const sig =\n      format === undefined\n        ? tryParsingSig(signature)\n        : Signature.fromBytes(ensureBytes('sig', signature as Hex), format);\n    if (sig === false) return false;\n    try {\n      const P = Point.fromBytes(publicKey);\n      if (lowS && sig.hasHighS()) return false;\n      const { r, s } = sig;\n      const h = bits2int_modN(message); // mod n, not mod p\n      const is = Fn.inv(s); // s^-1 mod n\n      const u1 = Fn.create(h * is); // u1 = hs^-1 mod n\n      const u2 = Fn.create(r * is); // u2 = rs^-1 mod n\n      const R = Point.BASE.multiplyUnsafe(u1).add(P.multiplyUnsafe(u2)); // u1âG + u2âP\n      if (R.is0()) return false;\n      const v = Fn.create(R.x); // v = r.x mod n\n      return v === r;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function recoverPublicKey(\n    signature: Uint8Array,\n    message: Uint8Array,\n    opts: ECDSARecoverOpts = {}\n  ): Uint8Array {\n    const { prehash } = validateSigOpts(opts, defaultSigOpts);\n    message = validateMsgAndHash(message, prehash);\n    return Signature.fromBytes(signature, 'recovered').recoverPublicKey(message).toBytes();\n  }\n\n  return Object.freeze({\n    keygen,\n    getPublicKey,\n    getSharedSecret,\n    utils,\n    lengths,\n    Point,\n    sign,\n    verify,\n    recoverPublicKey,\n    Signature,\n    hash,\n  });\n}\n\n// TODO: remove everything below\n/** @deprecated use ECDSASignature */\nexport type SignatureType = ECDSASignature;\n/** @deprecated use ECDSASigRecovered */\nexport type RecoveredSignatureType = ECDSASigRecovered;\n/** @deprecated switch to Uint8Array signatures in format 'compact' */\nexport type SignatureLike = { r: bigint; s: bigint };\nexport type ECDSAExtraEntropy = Hex | boolean;\n/** @deprecated use `ECDSAExtraEntropy` */\nexport type Entropy = Hex | boolean;\nexport type BasicWCurve<T> = BasicCurve<T> & {\n  // Params: a, b\n  a: T;\n  b: T;\n\n  // Optional params\n  allowedPrivateKeyLengths?: readonly number[]; // for P521\n  wrapPrivateKey?: boolean; // bls12-381 requires mod(n) instead of rejecting keys >= n\n  endo?: EndomorphismOpts;\n  // When a cofactor != 1, there can be an effective methods to:\n  // 1. Determine whether a point is torsion-free\n  isTorsionFree?: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => boolean;\n  // 2. Clear torsion component\n  clearCofactor?: (c: WeierstrassPointCons<T>, point: WeierstrassPoint<T>) => WeierstrassPoint<T>;\n};\n/** @deprecated use ECDSASignOpts */\nexport type SignOpts = ECDSASignOpts;\n/** @deprecated use ECDSASignOpts */\nexport type VerOpts = ECDSAVerifyOpts;\n\n/** @deprecated use WeierstrassPoint */\nexport type ProjPointType<T> = WeierstrassPoint<T>;\n/** @deprecated use WeierstrassPointCons */\nexport type ProjConstructor<T> = WeierstrassPointCons<T>;\n/** @deprecated use ECDSASignatureCons */\nexport type SignatureConstructor = ECDSASignatureCons;\n\n// TODO: remove\nexport type CurvePointsType<T> = BasicWCurve<T> & {\n  fromBytes?: (bytes: Uint8Array) => AffinePoint<T>;\n  toBytes?: (\n    c: WeierstrassPointCons<T>,\n    point: WeierstrassPoint<T>,\n    isCompressed: boolean\n  ) => Uint8Array;\n};\n\n// LegacyWeierstrassOpts\nexport type CurvePointsTypeWithLength<T> = Readonly<CurvePointsType<T> & Partial<NLength>>;\n\n// LegacyWeierstrass\nexport type CurvePointsRes<T> = {\n  Point: WeierstrassPointCons<T>;\n\n  /** @deprecated use `Point.CURVE()` */\n  CURVE: CurvePointsType<T>;\n  /** @deprecated use `Point` */\n  ProjectivePoint: WeierstrassPointCons<T>;\n  /** @deprecated use `Point.Fn.fromBytes(privateKey)` */\n  normPrivateKeyToScalar: (key: PrivKey) => bigint;\n  /** @deprecated */\n  weierstrassEquation: (x: T) => T;\n  /** @deprecated use `Point.Fn.isValidNot0(num)` */\n  isWithinCurveOrder: (num: bigint) => boolean;\n};\n\n// Aliases to legacy types\n// export type CurveType = LegacyECDSAOpts;\n// export type CurveFn = LegacyECDSA;\n// export type CurvePointsRes<T> = LegacyWeierstrass<T>;\n// export type CurvePointsType<T> = LegacyWeierstrassOpts<T>;\n// export type CurvePointsTypeWithLength<T> = LegacyWeierstrassOpts<T>;\n// export type BasicWCurve<T> = LegacyWeierstrassOpts<T>;\n\n/** @deprecated use `Uint8Array` */\nexport type PubKey = Hex | WeierstrassPoint<bigint>;\nexport type CurveType = BasicWCurve<bigint> & {\n  hash: CHash; // CHash not FHash because we need outputLen for DRBG\n  hmac?: HmacFnSync;\n  randomBytes?: (bytesLength?: number) => Uint8Array;\n  lowS?: boolean;\n  bits2int?: (bytes: Uint8Array) => bigint;\n  bits2int_modN?: (bytes: Uint8Array) => bigint;\n};\nexport type CurveFn = {\n  /** @deprecated use `Point.CURVE()` */\n  CURVE: CurvePointsType<bigint>;\n  keygen: ECDSA['keygen'];\n  getPublicKey: ECDSA['getPublicKey'];\n  getSharedSecret: ECDSA['getSharedSecret'];\n  sign: ECDSA['sign'];\n  verify: ECDSA['verify'];\n  Point: WeierstrassPointCons<bigint>;\n  /** @deprecated use `Point` */\n  ProjectivePoint: WeierstrassPointCons<bigint>;\n  Signature: ECDSASignatureCons;\n  utils: ECDSA['utils'];\n  lengths: ECDSA['lengths'];\n};\n/** @deprecated use `weierstrass` in newer releases */\nexport function weierstrassPoints<T>(c: CurvePointsTypeWithLength<T>): CurvePointsRes<T> {\n  const { CURVE, curveOpts } = _weierstrass_legacy_opts_to_new(c);\n  const Point = weierstrassN(CURVE, curveOpts);\n  return _weierstrass_new_output_to_legacy(c, Point);\n}\nexport type WsPointComposed<T> = {\n  CURVE: WeierstrassOpts<T>;\n  curveOpts: WeierstrassExtraOpts<T>;\n};\nexport type WsComposed = {\n  /** @deprecated use `Point.CURVE()` */\n  CURVE: WeierstrassOpts<bigint>;\n  hash: CHash;\n  curveOpts: WeierstrassExtraOpts<bigint>;\n  ecdsaOpts: ECDSAOpts;\n};\nfunction _weierstrass_legacy_opts_to_new<T>(c: CurvePointsType<T>): WsPointComposed<T> {\n  const CURVE: WeierstrassOpts<T> = {\n    a: c.a,\n    b: c.b,\n    p: c.Fp.ORDER,\n    n: c.n,\n    h: c.h,\n    Gx: c.Gx,\n    Gy: c.Gy,\n  };\n  const Fp = c.Fp;\n  let allowedLengths = c.allowedPrivateKeyLengths\n    ? Array.from(new Set(c.allowedPrivateKeyLengths.map((l) => Math.ceil(l / 2))))\n    : undefined;\n  const Fn = Field(CURVE.n, {\n    BITS: c.nBitLength,\n    allowedLengths: allowedLengths,\n    modFromBytes: c.wrapPrivateKey,\n  });\n  const curveOpts: WeierstrassExtraOpts<T> = {\n    Fp,\n    Fn,\n    allowInfinityPoint: c.allowInfinityPoint,\n    endo: c.endo,\n    isTorsionFree: c.isTorsionFree,\n    clearCofactor: c.clearCofactor,\n    fromBytes: c.fromBytes,\n    toBytes: c.toBytes,\n  };\n  return { CURVE, curveOpts };\n}\nfunction _ecdsa_legacy_opts_to_new(c: CurveType): WsComposed {\n  const { CURVE, curveOpts } = _weierstrass_legacy_opts_to_new(c);\n  const ecdsaOpts: ECDSAOpts = {\n    hmac: c.hmac,\n    randomBytes: c.randomBytes,\n    lowS: c.lowS,\n    bits2int: c.bits2int,\n    bits2int_modN: c.bits2int_modN,\n  };\n  return { CURVE, curveOpts, hash: c.hash, ecdsaOpts };\n}\nexport function _legacyHelperEquat<T>(Fp: IField<T>, a: T, b: T): (x: T) => T {\n  /**\n   * yÂ² = xÂ³ + ax + b: Short weierstrass curve formula. Takes x, returns yÂ².\n   * @returns yÂ²\n   */\n  function weierstrassEquation(x: T): T {\n    const x2 = Fp.sqr(x); // x * x\n    const x3 = Fp.mul(x2, x); // xÂ² * x\n    return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // xÂ³ + a * x + b\n  }\n  return weierstrassEquation;\n}\nfunction _weierstrass_new_output_to_legacy<T>(\n  c: CurvePointsType<T>,\n  Point: WeierstrassPointCons<T>\n): CurvePointsRes<T> {\n  const { Fp, Fn } = Point;\n  function isWithinCurveOrder(num: bigint): boolean {\n    return inRange(num, _1n, Fn.ORDER);\n  }\n  const weierstrassEquation = _legacyHelperEquat(Fp, c.a, c.b);\n  return Object.assign(\n    {},\n    {\n      CURVE: c,\n      Point: Point,\n      ProjectivePoint: Point,\n      normPrivateKeyToScalar: (key: PrivKey) => _normFnElement(Fn, key),\n      weierstrassEquation,\n      isWithinCurveOrder,\n    }\n  );\n}\nfunction _ecdsa_new_output_to_legacy(c: CurveType, _ecdsa: ECDSA): CurveFn {\n  const Point = _ecdsa.Point;\n  return Object.assign({}, _ecdsa, {\n    ProjectivePoint: Point,\n    CURVE: Object.assign({}, c, nLength(Point.Fn.ORDER, Point.Fn.BITS)),\n  });\n}\n\n// _ecdsa_legacy\nexport function weierstrass(c: CurveType): CurveFn {\n  const { CURVE, curveOpts, hash, ecdsaOpts } = _ecdsa_legacy_opts_to_new(c);\n  const Point = weierstrassN(CURVE, curveOpts);\n  const signs = ecdsa(Point, hash, ecdsaOpts);\n  return _ecdsa_new_output_to_legacy(c, signs);\n}\n", "/**\n * Utilities for short weierstrass curves, combined with noble-hashes.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { type CurveFn, type CurveType, weierstrass } from './abstract/weierstrass.ts';\nimport type { CHash } from './utils.ts';\n\n/** connects noble-curves to noble-hashes */\nexport function getHash(hash: CHash): { hash: CHash } {\n  return { hash };\n}\n/** Same API as @noble/hashes, with ability to create curve with custom hash */\nexport type CurveDef = Readonly<Omit<CurveType, 'hash'>>;\nexport type CurveFnWithCreate = CurveFn & { create: (hash: CHash) => CurveFn };\n\n/** @deprecated use new `weierstrass()` and `ecdsa()` methods */\nexport function createCurve(curveDef: CurveDef, defHash: CHash): CurveFnWithCreate {\n  const create = (hash: CHash): CurveFn => weierstrass({ ...curveDef, hash: hash });\n  return { ...create(defHash), create };\n}\n", "/**\n * hash-to-curve from RFC 9380.\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F.\n * https://www.rfc-editor.org/rfc/rfc9380\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport type { CHash } from '../utils.ts';\nimport {\n  _validateObject,\n  abytes,\n  bytesToNumberBE,\n  concatBytes,\n  isBytes,\n  isHash,\n  utf8ToBytes,\n} from '../utils.ts';\nimport type { AffinePoint, Group, GroupConstructor } from './curve.ts';\nimport { FpInvertBatch, mod, type IField } from './modular.ts';\n\nexport type UnicodeOrBytes = string | Uint8Array;\n\n/**\n * * `DST` is a domain separation tag, defined in section 2.2.5\n * * `p` characteristic of F, where F is a finite field of characteristic p and order q = p^m\n * * `m` is extension degree (1 for prime fields)\n * * `k` is the target security target in bits (e.g. 128), from section 5.1\n * * `expand` is `xmd` (SHA2, SHA3, BLAKE) or `xof` (SHAKE, BLAKE-XOF)\n * * `hash` conforming to `utils.CHash` interface, with `outputLen` / `blockLen` props\n */\nexport type H2COpts = {\n  DST: UnicodeOrBytes;\n  expand: 'xmd' | 'xof';\n  hash: CHash;\n  p: bigint;\n  m: number;\n  k: number;\n};\nexport type H2CHashOpts = {\n  expand: 'xmd' | 'xof';\n  hash: CHash;\n};\n// todo: remove\nexport type Opts = H2COpts;\n\n// Octet Stream to Integer. \"spec\" implementation of os2ip is 2.5x slower vs bytesToNumberBE.\nconst os2ip = bytesToNumberBE;\n\n// Integer to Octet Stream (numberToBytesBE)\nfunction i2osp(value: number, length: number): Uint8Array {\n  anum(value);\n  anum(length);\n  if (value < 0 || value >= 1 << (8 * length)) throw new Error('invalid I2OSP input: ' + value);\n  const res = Array.from({ length }).fill(0) as number[];\n  for (let i = length - 1; i >= 0; i--) {\n    res[i] = value & 0xff;\n    value >>>= 8;\n  }\n  return new Uint8Array(res);\n}\n\nfunction strxor(a: Uint8Array, b: Uint8Array): Uint8Array {\n  const arr = new Uint8Array(a.length);\n  for (let i = 0; i < a.length; i++) {\n    arr[i] = a[i] ^ b[i];\n  }\n  return arr;\n}\n\nfunction anum(item: unknown): void {\n  if (!Number.isSafeInteger(item)) throw new Error('number expected');\n}\n\nfunction normDST(DST: UnicodeOrBytes): Uint8Array {\n  if (!isBytes(DST) && typeof DST !== 'string') throw new Error('DST must be Uint8Array or string');\n  return typeof DST === 'string' ? utf8ToBytes(DST) : DST;\n}\n\n/**\n * Produces a uniformly random byte string using a cryptographic hash function H that outputs b bits.\n * [RFC 9380 5.3.1](https://www.rfc-editor.org/rfc/rfc9380#section-5.3.1).\n */\nexport function expand_message_xmd(\n  msg: Uint8Array,\n  DST: UnicodeOrBytes,\n  lenInBytes: number,\n  H: CHash\n): Uint8Array {\n  abytes(msg);\n  anum(lenInBytes);\n  DST = normDST(DST);\n  // https://www.rfc-editor.org/rfc/rfc9380#section-5.3.3\n  if (DST.length > 255) DST = H(concatBytes(utf8ToBytes('H2C-OVERSIZE-DST-'), DST));\n  const { outputLen: b_in_bytes, blockLen: r_in_bytes } = H;\n  const ell = Math.ceil(lenInBytes / b_in_bytes);\n  if (lenInBytes > 65535 || ell > 255) throw new Error('expand_message_xmd: invalid lenInBytes');\n  const DST_prime = concatBytes(DST, i2osp(DST.length, 1));\n  const Z_pad = i2osp(0, r_in_bytes);\n  const l_i_b_str = i2osp(lenInBytes, 2); // len_in_bytes_str\n  const b = new Array<Uint8Array>(ell);\n  const b_0 = H(concatBytes(Z_pad, msg, l_i_b_str, i2osp(0, 1), DST_prime));\n  b[0] = H(concatBytes(b_0, i2osp(1, 1), DST_prime));\n  for (let i = 1; i <= ell; i++) {\n    const args = [strxor(b_0, b[i - 1]), i2osp(i + 1, 1), DST_prime];\n    b[i] = H(concatBytes(...args));\n  }\n  const pseudo_random_bytes = concatBytes(...b);\n  return pseudo_random_bytes.slice(0, lenInBytes);\n}\n\n/**\n * Produces a uniformly random byte string using an extendable-output function (XOF) H.\n * 1. The collision resistance of H MUST be at least k bits.\n * 2. H MUST be an XOF that has been proved indifferentiable from\n *    a random oracle under a reasonable cryptographic assumption.\n * [RFC 9380 5.3.2](https://www.rfc-editor.org/rfc/rfc9380#section-5.3.2).\n */\nexport function expand_message_xof(\n  msg: Uint8Array,\n  DST: UnicodeOrBytes,\n  lenInBytes: number,\n  k: number,\n  H: CHash\n): Uint8Array {\n  abytes(msg);\n  anum(lenInBytes);\n  DST = normDST(DST);\n  // https://www.rfc-editor.org/rfc/rfc9380#section-5.3.3\n  // DST = H('H2C-OVERSIZE-DST-' || a_very_long_DST, Math.ceil((lenInBytes * k) / 8));\n  if (DST.length > 255) {\n    const dkLen = Math.ceil((2 * k) / 8);\n    DST = H.create({ dkLen }).update(utf8ToBytes('H2C-OVERSIZE-DST-')).update(DST).digest();\n  }\n  if (lenInBytes > 65535 || DST.length > 255)\n    throw new Error('expand_message_xof: invalid lenInBytes');\n  return (\n    H.create({ dkLen: lenInBytes })\n      .update(msg)\n      .update(i2osp(lenInBytes, 2))\n      // 2. DST_prime = DST || I2OSP(len(DST), 1)\n      .update(DST)\n      .update(i2osp(DST.length, 1))\n      .digest()\n  );\n}\n\n/**\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F.\n * [RFC 9380 5.2](https://www.rfc-editor.org/rfc/rfc9380#section-5.2).\n * @param msg a byte string containing the message to hash\n * @param count the number of elements of F to output\n * @param options `{DST: string, p: bigint, m: number, k: number, expand: 'xmd' | 'xof', hash: H}`, see above\n * @returns [u_0, ..., u_(count - 1)], a list of field elements.\n */\nexport function hash_to_field(msg: Uint8Array, count: number, options: H2COpts): bigint[][] {\n  _validateObject(options, {\n    p: 'bigint',\n    m: 'number',\n    k: 'number',\n    hash: 'function',\n  });\n  const { p, k, m, hash, expand, DST } = options;\n  if (!isHash(options.hash)) throw new Error('expected valid hash');\n  abytes(msg);\n  anum(count);\n  const log2p = p.toString(2).length;\n  const L = Math.ceil((log2p + k) / 8); // section 5.1 of ietf draft link above\n  const len_in_bytes = count * m * L;\n  let prb; // pseudo_random_bytes\n  if (expand === 'xmd') {\n    prb = expand_message_xmd(msg, DST, len_in_bytes, hash);\n  } else if (expand === 'xof') {\n    prb = expand_message_xof(msg, DST, len_in_bytes, k, hash);\n  } else if (expand === '_internal_pass') {\n    // for internal tests only\n    prb = msg;\n  } else {\n    throw new Error('expand must be \"xmd\" or \"xof\"');\n  }\n  const u = new Array(count);\n  for (let i = 0; i < count; i++) {\n    const e = new Array(m);\n    for (let j = 0; j < m; j++) {\n      const elm_offset = L * (j + i * m);\n      const tv = prb.subarray(elm_offset, elm_offset + L);\n      e[j] = mod(os2ip(tv), p);\n    }\n    u[i] = e;\n  }\n  return u;\n}\n\nexport type XY<T> = (x: T, y: T) => { x: T; y: T };\nexport type XYRatio<T> = [T[], T[], T[], T[]]; // xn/xd, yn/yd\nexport function isogenyMap<T, F extends IField<T>>(field: F, map: XYRatio<T>): XY<T> {\n  // Make same order as in spec\n  const coeff = map.map((i) => Array.from(i).reverse());\n  return (x: T, y: T) => {\n    const [xn, xd, yn, yd] = coeff.map((val) =>\n      val.reduce((acc, i) => field.add(field.mul(acc, x), i))\n    );\n    // 6.6.3\n    // Exceptional cases of iso_map are inputs that cause the denominator of\n    // either rational function to evaluate to zero; such cases MUST return\n    // the identity point on E.\n    const [xd_inv, yd_inv] = FpInvertBatch(field, [xd, yd], true);\n    x = field.mul(xn, xd_inv); // xNum / xDen\n    y = field.mul(y, field.mul(yn, yd_inv)); // y * (yNum / yDev)\n    return { x, y };\n  };\n}\n\n/** Point interface, which curves must implement to work correctly with the module. */\nexport interface H2CPoint<T> extends Group<H2CPoint<T>> {\n  add(rhs: H2CPoint<T>): H2CPoint<T>;\n  toAffine(iz?: bigint): AffinePoint<T>;\n  clearCofactor(): H2CPoint<T>;\n  assertValidity(): void;\n}\n\nexport interface H2CPointConstructor<T> extends GroupConstructor<H2CPoint<T>> {\n  fromAffine(ap: AffinePoint<T>): H2CPoint<T>;\n}\n\nexport type MapToCurve<T> = (scalar: bigint[]) => AffinePoint<T>;\n\n// Separated from initialization opts, so users won't accidentally change per-curve parameters\n// (changing DST is ok!)\nexport type htfBasicOpts = { DST: UnicodeOrBytes };\nexport type H2CMethod<T> = (msg: Uint8Array, options?: htfBasicOpts) => H2CPoint<T>;\n// TODO: remove\nexport type HTFMethod<T> = H2CMethod<T>;\nexport type MapMethod<T> = (scalars: bigint[]) => H2CPoint<T>;\nexport type H2CHasherBase<T> = {\n  hashToCurve: H2CMethod<T>;\n  hashToScalar: (msg: Uint8Array, options: htfBasicOpts) => bigint;\n};\n/**\n * RFC 9380 methods, with cofactor clearing. See https://www.rfc-editor.org/rfc/rfc9380#section-3.\n *\n * * hashToCurve: `map(hash(input))`, encodes RANDOM bytes to curve (WITH hashing)\n * * encodeToCurve: `map(hash(input))`, encodes NON-UNIFORM bytes to curve (WITH hashing)\n * * mapToCurve: `map(scalars)`, encodes NON-UNIFORM scalars to curve (NO hashing)\n */\nexport type H2CHasher<T> = H2CHasherBase<T> & {\n  encodeToCurve: H2CMethod<T>;\n  mapToCurve: MapMethod<T>;\n  defaults: H2COpts & { encodeDST?: UnicodeOrBytes };\n};\n// TODO: remove\nexport type Hasher<T> = H2CHasher<T>;\n\nexport const _DST_scalar: Uint8Array = utf8ToBytes('HashToScalar-');\n\n/** Creates hash-to-curve methods from EC Point and mapToCurve function. See {@link H2CHasher}. */\nexport function createHasher<T>(\n  Point: H2CPointConstructor<T>,\n  mapToCurve: MapToCurve<T>,\n  defaults: H2COpts & { encodeDST?: UnicodeOrBytes }\n): H2CHasher<T> {\n  if (typeof mapToCurve !== 'function') throw new Error('mapToCurve() must be defined');\n  function map(num: bigint[]) {\n    return Point.fromAffine(mapToCurve(num));\n  }\n  function clear(initial: H2CPoint<T>) {\n    const P = initial.clearCofactor();\n    if (P.equals(Point.ZERO)) return Point.ZERO; // zero will throw in assert\n    P.assertValidity();\n    return P;\n  }\n\n  return {\n    defaults,\n\n    hashToCurve(msg: Uint8Array, options?: htfBasicOpts): H2CPoint<T> {\n      const opts = Object.assign({}, defaults, options);\n      const u = hash_to_field(msg, 2, opts);\n      const u0 = map(u[0]);\n      const u1 = map(u[1]);\n      return clear(u0.add(u1));\n    },\n    encodeToCurve(msg: Uint8Array, options?: htfBasicOpts): H2CPoint<T> {\n      const optsDst = defaults.encodeDST ? { DST: defaults.encodeDST } : {};\n      const opts = Object.assign({}, defaults, optsDst, options);\n      const u = hash_to_field(msg, 1, opts);\n      const u0 = map(u[0]);\n      return clear(u0);\n    },\n    /** See {@link H2CHasher} */\n    mapToCurve(scalars: bigint[]): H2CPoint<T> {\n      if (!Array.isArray(scalars)) throw new Error('expected array of bigints');\n      for (const i of scalars)\n        if (typeof i !== 'bigint') throw new Error('expected array of bigints');\n      return clear(map(scalars));\n    },\n\n    // hash_to_scalar can produce 0: https://www.rfc-editor.org/errata/eid8393\n    // RFC 9380, draft-irtf-cfrg-bbs-signatures-08\n    hashToScalar(msg: Uint8Array, options?: htfBasicOpts): bigint {\n      // @ts-ignore\n      const N = Point.Fn.ORDER;\n      const opts = Object.assign({}, defaults, { p: N, m: 1, DST: _DST_scalar }, options);\n      return hash_to_field(msg, 1, opts)[0][0];\n    },\n  };\n}\n", "/**\n * SECG secp256k1. See [pdf](https://www.secg.org/sec2-v2.pdf).\n *\n * Belongs to Koblitz curves: it has efficiently-computable GLV endomorphism Ï,\n * check out {@link EndomorphismOpts}. Seems to be rigid (not backdoored).\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { sha256 } from '@noble/hashes/sha2.js';\nimport { randomBytes } from '@noble/hashes/utils.js';\nimport { createCurve, type CurveFnWithCreate } from './_shortw_utils.ts';\nimport type { CurveLengths } from './abstract/curve.ts';\nimport {\n  createHasher,\n  type H2CHasher,\n  type H2CMethod,\n  isogenyMap,\n} from './abstract/hash-to-curve.ts';\nimport { Field, mapHashToField, mod, pow2 } from './abstract/modular.ts';\nimport {\n  _normFnElement,\n  type EndomorphismOpts,\n  mapToCurveSimpleSWU,\n  type WeierstrassPoint as PointType,\n  type WeierstrassOpts,\n  type WeierstrassPointCons,\n} from './abstract/weierstrass.ts';\nimport type { Hex, PrivKey } from './utils.ts';\nimport {\n  bytesToNumberBE,\n  concatBytes,\n  ensureBytes,\n  inRange,\n  numberToBytesBE,\n  utf8ToBytes,\n} from './utils.ts';\n\n// Seems like generator was produced from some seed:\n// `Point.BASE.multiply(Point.Fn.inv(2n, N)).toAffine().x`\n// // gives short x 0x3b78ce563f89a0ed9414f5aa28ad0d96d6795f9c63n\nconst secp256k1_CURVE: WeierstrassOpts<bigint> = {\n  p: BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f'),\n  n: BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141'),\n  h: BigInt(1),\n  a: BigInt(0),\n  b: BigInt(7),\n  Gx: BigInt('0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798'),\n  Gy: BigInt('0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8'),\n};\n\nconst secp256k1_ENDO: EndomorphismOpts = {\n  beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n  basises: [\n    [BigInt('0x3086d221a7d46bcde86c90e49284eb15'), -BigInt('0xe4437ed6010e88286f547fa90abfe4c3')],\n    [BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8'), BigInt('0x3086d221a7d46bcde86c90e49284eb15')],\n  ],\n};\n\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nconst _2n = /* @__PURE__ */ BigInt(2);\n\n/**\n * ân = n^((p+1)/4) for fields p = 3 mod 4. We unwrap the loop and multiply bit-by-bit.\n * (P+1n/4n).toString(2) would produce bits [223x 1, 0, 22x 1, 4x 0, 11, 00]\n */\nfunction sqrtMod(y: bigint): bigint {\n  const P = secp256k1_CURVE.p;\n  // prettier-ignore\n  const _3n = BigInt(3), _6n = BigInt(6), _11n = BigInt(11), _22n = BigInt(22);\n  // prettier-ignore\n  const _23n = BigInt(23), _44n = BigInt(44), _88n = BigInt(88);\n  const b2 = (y * y * y) % P; // x^3, 11\n  const b3 = (b2 * b2 * y) % P; // x^7\n  const b6 = (pow2(b3, _3n, P) * b3) % P;\n  const b9 = (pow2(b6, _3n, P) * b3) % P;\n  const b11 = (pow2(b9, _2n, P) * b2) % P;\n  const b22 = (pow2(b11, _11n, P) * b11) % P;\n  const b44 = (pow2(b22, _22n, P) * b22) % P;\n  const b88 = (pow2(b44, _44n, P) * b44) % P;\n  const b176 = (pow2(b88, _88n, P) * b88) % P;\n  const b220 = (pow2(b176, _44n, P) * b44) % P;\n  const b223 = (pow2(b220, _3n, P) * b3) % P;\n  const t1 = (pow2(b223, _23n, P) * b22) % P;\n  const t2 = (pow2(t1, _6n, P) * b2) % P;\n  const root = pow2(t2, _2n, P);\n  if (!Fpk1.eql(Fpk1.sqr(root), y)) throw new Error('Cannot find square root');\n  return root;\n}\n\nconst Fpk1 = Field(secp256k1_CURVE.p, { sqrt: sqrtMod });\n\n/**\n * secp256k1 curve, ECDSA and ECDH methods.\n *\n * Field: `2n**256n - 2n**32n - 2n**9n - 2n**8n - 2n**7n - 2n**6n - 2n**4n - 1n`\n *\n * @example\n * ```js\n * import { secp256k1 } from '@noble/curves/secp256k1';\n * const { secretKey, publicKey } = secp256k1.keygen();\n * const msg = new TextEncoder().encode('hello');\n * const sig = secp256k1.sign(msg, secretKey);\n * const isValid = secp256k1.verify(sig, msg, publicKey) === true;\n * ```\n */\nexport const secp256k1: CurveFnWithCreate = createCurve(\n  { ...secp256k1_CURVE, Fp: Fpk1, lowS: true, endo: secp256k1_ENDO },\n  sha256\n);\n\n// Schnorr signatures are superior to ECDSA from above. Below is Schnorr-specific BIP0340 code.\n// https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\nconst TAGGED_HASH_PREFIXES: { [tag: string]: Uint8Array } = {};\nfunction taggedHash(tag: string, ...messages: Uint8Array[]): Uint8Array {\n  let tagP = TAGGED_HASH_PREFIXES[tag];\n  if (tagP === undefined) {\n    const tagH = sha256(utf8ToBytes(tag));\n    tagP = concatBytes(tagH, tagH);\n    TAGGED_HASH_PREFIXES[tag] = tagP;\n  }\n  return sha256(concatBytes(tagP, ...messages));\n}\n\n// ECDSA compact points are 33-byte. Schnorr is 32: we strip first byte 0x02 or 0x03\nconst pointToBytes = (point: PointType<bigint>) => point.toBytes(true).slice(1);\nconst Pointk1 = /* @__PURE__ */ (() => secp256k1.Point)();\nconst hasEven = (y: bigint) => y % _2n === _0n;\n\n// Calculate point, scalar and bytes\nfunction schnorrGetExtPubKey(priv: PrivKey) {\n  const { Fn, BASE } = Pointk1;\n  const d_ = _normFnElement(Fn, priv);\n  const p = BASE.multiply(d_); // P = d'âG; 0 < d' < n check is done inside\n  const scalar = hasEven(p.y) ? d_ : Fn.neg(d_);\n  return { scalar, bytes: pointToBytes(p) };\n}\n/**\n * lift_x from BIP340. Convert 32-byte x coordinate to elliptic curve point.\n * @returns valid point checked for being on-curve\n */\nfunction lift_x(x: bigint): PointType<bigint> {\n  const Fp = Fpk1;\n  if (!Fp.isValidNot0(x)) throw new Error('invalid x: Fail if x â¥ p');\n  const xx = Fp.create(x * x);\n  const c = Fp.create(xx * x + BigInt(7)); // Let c = xÂ³ + 7 mod p.\n  let y = Fp.sqrt(c); // Let y = c^(p+1)/4 mod p. Same as sqrt().\n  // Return the unique point P such that x(P) = x and\n  // y(P) = y if y mod 2 = 0 or y(P) = p-y otherwise.\n  if (!hasEven(y)) y = Fp.neg(y);\n  const p = Pointk1.fromAffine({ x, y });\n  p.assertValidity();\n  return p;\n}\nconst num = bytesToNumberBE;\n/**\n * Create tagged hash, convert it to bigint, reduce modulo-n.\n */\nfunction challenge(...args: Uint8Array[]): bigint {\n  return Pointk1.Fn.create(num(taggedHash('BIP0340/challenge', ...args)));\n}\n\n/**\n * Schnorr public key is just `x` coordinate of Point as per BIP340.\n */\nfunction schnorrGetPublicKey(secretKey: Hex): Uint8Array {\n  return schnorrGetExtPubKey(secretKey).bytes; // d'=int(sk). Fail if d'=0 or d'â¥n. Ret bytes(d'âG)\n}\n\n/**\n * Creates Schnorr signature as per BIP340. Verifies itself before returning anything.\n * auxRand is optional and is not the sole source of k generation: bad CSPRNG won't be dangerous.\n */\nfunction schnorrSign(message: Hex, secretKey: PrivKey, auxRand: Hex = randomBytes(32)): Uint8Array {\n  const { Fn } = Pointk1;\n  const m = ensureBytes('message', message);\n  const { bytes: px, scalar: d } = schnorrGetExtPubKey(secretKey); // checks for isWithinCurveOrder\n  const a = ensureBytes('auxRand', auxRand, 32); // Auxiliary random data a: a 32-byte array\n  const t = Fn.toBytes(d ^ num(taggedHash('BIP0340/aux', a))); // Let t be the byte-wise xor of bytes(d) and hash/aux(a)\n  const rand = taggedHash('BIP0340/nonce', t, px, m); // Let rand = hash/nonce(t || bytes(P) || m)\n  // Let k' = int(rand) mod n. Fail if k' = 0. Let R = k'âG\n  const { bytes: rx, scalar: k } = schnorrGetExtPubKey(rand);\n  const e = challenge(rx, px, m); // Let e = int(hash/challenge(bytes(R) || bytes(P) || m)) mod n.\n  const sig = new Uint8Array(64); // Let sig = bytes(R) || bytes((k + ed) mod n).\n  sig.set(rx, 0);\n  sig.set(Fn.toBytes(Fn.create(k + e * d)), 32);\n  // If Verify(bytes(P), m, sig) (see below) returns failure, abort\n  if (!schnorrVerify(sig, m, px)) throw new Error('sign: Invalid signature produced');\n  return sig;\n}\n\n/**\n * Verifies Schnorr signature.\n * Will swallow errors & return false except for initial type validation of arguments.\n */\nfunction schnorrVerify(signature: Hex, message: Hex, publicKey: Hex): boolean {\n  const { Fn, BASE } = Pointk1;\n  const sig = ensureBytes('signature', signature, 64);\n  const m = ensureBytes('message', message);\n  const pub = ensureBytes('publicKey', publicKey, 32);\n  try {\n    const P = lift_x(num(pub)); // P = lift_x(int(pk)); fail if that fails\n    const r = num(sig.subarray(0, 32)); // Let r = int(sig[0:32]); fail if r â¥ p.\n    if (!inRange(r, _1n, secp256k1_CURVE.p)) return false;\n    const s = num(sig.subarray(32, 64)); // Let s = int(sig[32:64]); fail if s â¥ n.\n    if (!inRange(s, _1n, secp256k1_CURVE.n)) return false;\n    // int(challenge(bytes(r)||bytes(P)||m))%n\n    const e = challenge(Fn.toBytes(r), pointToBytes(P), m);\n    // R = sâG - eâP, where -eP == (n-e)P\n    const R = BASE.multiplyUnsafe(s).add(P.multiplyUnsafe(Fn.neg(e)));\n    const { x, y } = R.toAffine();\n    // Fail if is_infinite(R) / not has_even_y(R) / x(R) â  r.\n    if (R.is0() || !hasEven(y) || x !== r) return false;\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport type SecpSchnorr = {\n  keygen: (seed?: Uint8Array) => { secretKey: Uint8Array; publicKey: Uint8Array };\n  getPublicKey: typeof schnorrGetPublicKey;\n  sign: typeof schnorrSign;\n  verify: typeof schnorrVerify;\n  Point: WeierstrassPointCons<bigint>;\n  utils: {\n    randomSecretKey: (seed?: Uint8Array) => Uint8Array;\n    pointToBytes: (point: PointType<bigint>) => Uint8Array;\n    lift_x: typeof lift_x;\n    taggedHash: typeof taggedHash;\n\n    /** @deprecated use `randomSecretKey` */\n    randomPrivateKey: (seed?: Uint8Array) => Uint8Array;\n    /** @deprecated use `utils` */\n    numberToBytesBE: typeof numberToBytesBE;\n    /** @deprecated use `utils` */\n    bytesToNumberBE: typeof bytesToNumberBE;\n    /** @deprecated use `modular` */\n    mod: typeof mod;\n  };\n  lengths: CurveLengths;\n};\n/**\n * Schnorr signatures over secp256k1.\n * https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\n * @example\n * ```js\n * import { schnorr } from '@noble/curves/secp256k1';\n * const { secretKey, publicKey } = schnorr.keygen();\n * // const publicKey = schnorr.getPublicKey(secretKey);\n * const msg = new TextEncoder().encode('hello');\n * const sig = schnorr.sign(msg, secretKey);\n * const isValid = schnorr.verify(sig, msg, publicKey);\n * ```\n */\nexport const schnorr: SecpSchnorr = /* @__PURE__ */ (() => {\n  const size = 32;\n  const seedLength = 48;\n  const randomSecretKey = (seed = randomBytes(seedLength)): Uint8Array => {\n    return mapHashToField(seed, secp256k1_CURVE.n);\n  };\n  // TODO: remove\n  secp256k1.utils.randomSecretKey;\n  function keygen(seed?: Uint8Array) {\n    const secretKey = randomSecretKey(seed);\n    return { secretKey, publicKey: schnorrGetPublicKey(secretKey) };\n  }\n  return {\n    keygen,\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    Point: Pointk1,\n    utils: {\n      randomSecretKey: randomSecretKey,\n      randomPrivateKey: randomSecretKey,\n      taggedHash,\n\n      // TODO: remove\n      lift_x,\n      pointToBytes,\n      numberToBytesBE,\n      bytesToNumberBE,\n      mod,\n    },\n    lengths: {\n      secretKey: size,\n      publicKey: size,\n      publicKeyHasPrefix: false,\n      signature: size * 2,\n      seed: seedLength,\n    },\n  };\n})();\n\nconst isoMap = /* @__PURE__ */ (() =>\n  isogenyMap(\n    Fpk1,\n    [\n      // xNum\n      [\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7',\n        '0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581',\n        '0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262',\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c',\n      ],\n      // xDen\n      [\n        '0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b',\n        '0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n      ],\n      // yNum\n      [\n        '0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c',\n        '0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3',\n        '0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931',\n        '0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84',\n      ],\n      // yDen\n      [\n        '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b',\n        '0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573',\n        '0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n      ],\n    ].map((i) => i.map((j) => BigInt(j))) as [bigint[], bigint[], bigint[], bigint[]]\n  ))();\nconst mapSWU = /* @__PURE__ */ (() =>\n  mapToCurveSimpleSWU(Fpk1, {\n    A: BigInt('0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533'),\n    B: BigInt('1771'),\n    Z: Fpk1.create(BigInt('-11')),\n  }))();\n\n/** Hashing / encoding to secp256k1 points / field. RFC 9380 methods. */\nexport const secp256k1_hasher: H2CHasher<bigint> = /* @__PURE__ */ (() =>\n  createHasher(\n    secp256k1.Point,\n    (scalars: bigint[]) => {\n      const { x, y } = mapSWU(Fpk1.create(scalars[0]));\n      return isoMap(x, y);\n    },\n    {\n      DST: 'secp256k1_XMD:SHA-256_SSWU_RO_',\n      encodeDST: 'secp256k1_XMD:SHA-256_SSWU_NU_',\n      p: Fpk1.ORDER,\n      m: 1,\n      k: 128,\n      expand: 'xmd',\n      hash: sha256,\n    }\n  ))();\n\n/** @deprecated use `import { secp256k1_hasher } from '@noble/curves/secp256k1.js';` */\nexport const hashToCurve: H2CMethod<bigint> = /* @__PURE__ */ (() =>\n  secp256k1_hasher.hashToCurve)();\n\n/** @deprecated use `import { secp256k1_hasher } from '@noble/curves/secp256k1.js';` */\nexport const encodeToCurve: H2CMethod<bigint> = /* @__PURE__ */ (() =>\n  secp256k1_hasher.encodeToCurve)();\n", "import { schnorr } from \"@noble/curves/secp256k1\";\nimport { bytesToHex, hexToBytes } from \"@noble/hashes/utils\";\nimport { sha256 as nobleSha256 } from \"@noble/hashes/sha2\";\n/**\n * Sign an event with the given private key\n */\nexport async function signEvent(eventId, privateKey) {\n    const privateKeyBytes = hexToBytes(privateKey);\n    const eventIdBytes = hexToBytes(eventId);\n    const signatureBytes = await schnorr.sign(eventIdBytes, privateKeyBytes);\n    return bytesToHex(signatureBytes);\n}\n/**\n * Verify the signature of an event\n */\nexport async function verifySignature(eventId, signature, publicKey) {\n    try {\n        const eventIdBytes = hexToBytes(eventId);\n        const signatureBytes = hexToBytes(signature);\n        const publicKeyBytes = hexToBytes(publicKey);\n        return await schnorr.verify(signatureBytes, eventIdBytes, publicKeyBytes);\n    }\n    catch (error) {\n        console.error(\"Failed to verify signature:\", error);\n        return false;\n    }\n}\n/**\n * Generate a keypair for Nostr\n */\nexport async function generateKeypair() {\n    // Use the library's built-in private key generation\n    // This ensures the private key is in the valid range (1 <= privateKey < curve order)\n    const privateKey = bytesToHex(schnorr.utils.randomPrivateKey());\n    const publicKey = getPublicKey(privateKey);\n    return { privateKey, publicKey };\n}\n/**\n * Get the public key from a private key\n */\nexport function getPublicKey(privateKey) {\n    const privateKeyBytes = hexToBytes(privateKey);\n    const publicKeyBytes = schnorr.getPublicKey(privateKeyBytes);\n    return bytesToHex(publicKeyBytes);\n}\n// NIP-04 functions have been moved to the dedicated module at src/nip04/index.ts\n// For NIP-04 encryption/decryption, please import from '../nip04/index.js' instead\n/**\n * Compute SHA-256 hash of data\n * @param data The data to hash (string or Uint8Array)\n * @returns The hash as a Uint8Array\n */\nexport function sha256Hex(data) {\n    if (typeof data === \"string\") {\n        data = new TextEncoder().encode(data);\n    }\n    return bytesToHex(nobleSha256(data));\n}\n", "/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\nexport interface Coder<F, T> {\n  encode(from: F): T;\n  decode(to: T): F;\n}\n\nexport interface BytesCoder extends Coder<Uint8Array, string> {\n  encode: (data: Uint8Array) => string;\n  decode: (str: string) => Uint8Array;\n}\n\nfunction isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is Uint8Array. */\nfunction abytes(b: Uint8Array | undefined, ...lengths: number[]): void {\n  if (!isBytes(b)) throw new Error('Uint8Array expected');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n\nfunction isArrayOf(isString: boolean, arr: any[]) {\n  if (!Array.isArray(arr)) return false;\n  if (arr.length === 0) return true;\n  if (isString) {\n    return arr.every((item) => typeof item === 'string');\n  } else {\n    return arr.every((item) => Number.isSafeInteger(item));\n  }\n}\n\n// no abytes: seems to have 10% slowdown. Why?!\n\nfunction afn(input: Function): input is Function {\n  if (typeof input !== 'function') throw new Error('function expected');\n  return true;\n}\n\nfunction astr(label: string, input: unknown): input is string {\n  if (typeof input !== 'string') throw new Error(`${label}: string expected`);\n  return true;\n}\n\nfunction anumber(n: number): void {\n  if (!Number.isSafeInteger(n)) throw new Error(`invalid integer: ${n}`);\n}\n\nfunction aArr(input: any[]) {\n  if (!Array.isArray(input)) throw new Error('array expected');\n}\nfunction astrArr(label: string, input: string[]) {\n  if (!isArrayOf(true, input)) throw new Error(`${label}: array of strings expected`);\n}\nfunction anumArr(label: string, input: number[]) {\n  if (!isArrayOf(false, input)) throw new Error(`${label}: array of numbers expected`);\n}\n\n// TODO: some recusive type inference so it would check correct order of input/output inside rest?\n// like <string, number>, <number, bytes>, <bytes, float>\ntype Chain = [Coder<any, any>, ...Coder<any, any>[]];\n// Extract info from Coder type\ntype Input<F> = F extends Coder<infer T, any> ? T : never;\ntype Output<F> = F extends Coder<any, infer T> ? T : never;\n// Generic function for arrays\ntype First<T> = T extends [infer U, ...any[]] ? U : never;\ntype Last<T> = T extends [...any[], infer U] ? U : never;\ntype Tail<T> = T extends [any, ...infer U] ? U : never;\n\ntype AsChain<C extends Chain, Rest = Tail<C>> = {\n  // C[K] = Coder<Input<C[K]>, Input<Rest[k]>>\n  [K in keyof C]: Coder<Input<C[K]>, Input<K extends keyof Rest ? Rest[K] : any>>;\n};\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction chain<T extends Chain & AsChain<T>>(...args: T): Coder<Input<First<T>>, Output<Last<T>>> {\n  const id = (a: any) => a;\n  // Wrap call in closure so JIT can inline calls\n  const wrap = (a: any, b: any) => (c: any) => a(b(c));\n  // Construct chain of args[-1].encode(args[-2].encode([...]))\n  const encode = args.map((x) => x.encode).reduceRight(wrap, id);\n  // Construct chain of args[0].decode(args[1].decode(...))\n  const decode = args.map((x) => x.decode).reduce(wrap, id);\n  return { encode, decode };\n}\n\n/**\n * Encodes integer radix representation to array of strings using alphabet and back.\n * Could also be array of strings.\n * @__NO_SIDE_EFFECTS__\n */\nfunction alphabet(letters: string | string[]): Coder<number[], string[]> {\n  // mapping 1 to \"b\"\n  const lettersA = typeof letters === 'string' ? letters.split('') : letters;\n  const len = lettersA.length;\n  astrArr('alphabet', lettersA);\n\n  // mapping \"b\" to 1\n  const indexes = new Map(lettersA.map((l, i) => [l, i]));\n  return {\n    encode: (digits: number[]) => {\n      aArr(digits);\n      return digits.map((i) => {\n        if (!Number.isSafeInteger(i) || i < 0 || i >= len)\n          throw new Error(\n            `alphabet.encode: digit index outside alphabet \"${i}\". Allowed: ${letters}`\n          );\n        return lettersA[i]!;\n      });\n    },\n    decode: (input: string[]): number[] => {\n      aArr(input);\n      return input.map((letter) => {\n        astr('alphabet.decode', letter);\n        const i = indexes.get(letter);\n        if (i === undefined) throw new Error(`Unknown letter: \"${letter}\". Allowed: ${letters}`);\n        return i;\n      });\n    },\n  };\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction join(separator = ''): Coder<string[], string> {\n  astr('join', separator);\n  return {\n    encode: (from) => {\n      astrArr('join.decode', from);\n      return from.join(separator);\n    },\n    decode: (to) => {\n      astr('join.decode', to);\n      return to.split(separator);\n    },\n  };\n}\n\n/**\n * Pad strings array so it has integer number of bits\n * @__NO_SIDE_EFFECTS__\n */\nfunction padding(bits: number, chr = '='): Coder<string[], string[]> {\n  anumber(bits);\n  astr('padding', chr);\n  return {\n    encode(data: string[]): string[] {\n      astrArr('padding.encode', data);\n      while ((data.length * bits) % 8) data.push(chr);\n      return data;\n    },\n    decode(input: string[]): string[] {\n      astrArr('padding.decode', input);\n      let end = input.length;\n      if ((end * bits) % 8)\n        throw new Error('padding: invalid, string should have whole number of bytes');\n      for (; end > 0 && input[end - 1] === chr; end--) {\n        const last = end - 1;\n        const byte = last * bits;\n        if (byte % 8 === 0) throw new Error('padding: invalid, string has too much padding');\n      }\n      return input.slice(0, end);\n    },\n  };\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction normalize<T>(fn: (val: T) => T): Coder<T, T> {\n  afn(fn);\n  return { encode: (from: T) => from, decode: (to: T) => fn(to) };\n}\n\n/**\n * Slow: O(n^2) time complexity\n */\nfunction convertRadix(data: number[], from: number, to: number): number[] {\n  // base 1 is impossible\n  if (from < 2) throw new Error(`convertRadix: invalid from=${from}, base cannot be less than 2`);\n  if (to < 2) throw new Error(`convertRadix: invalid to=${to}, base cannot be less than 2`);\n  aArr(data);\n  if (!data.length) return [];\n  let pos = 0;\n  const res = [];\n  const digits = Array.from(data, (d) => {\n    anumber(d);\n    if (d < 0 || d >= from) throw new Error(`invalid integer: ${d}`);\n    return d;\n  });\n  const dlen = digits.length;\n  while (true) {\n    let carry = 0;\n    let done = true;\n    for (let i = pos; i < dlen; i++) {\n      const digit = digits[i]!;\n      const fromCarry = from * carry;\n      const digitBase = fromCarry + digit;\n      if (\n        !Number.isSafeInteger(digitBase) ||\n        fromCarry / from !== carry ||\n        digitBase - digit !== fromCarry\n      ) {\n        throw new Error('convertRadix: carry overflow');\n      }\n      const div = digitBase / to;\n      carry = digitBase % to;\n      const rounded = Math.floor(div);\n      digits[i] = rounded;\n      if (!Number.isSafeInteger(rounded) || rounded * to + carry !== digitBase)\n        throw new Error('convertRadix: carry overflow');\n      if (!done) continue;\n      else if (!rounded) pos = i;\n      else done = false;\n    }\n    res.push(carry);\n    if (done) break;\n  }\n  for (let i = 0; i < data.length - 1 && data[i] === 0; i++) res.push(0);\n  return res.reverse();\n}\n\nconst gcd = (a: number, b: number): number => (b === 0 ? a : gcd(b, a % b));\nconst radix2carry = /* @__NO_SIDE_EFFECTS__ */ (from: number, to: number) =>\n  from + (to - gcd(from, to));\nconst powers: number[] = /* @__PURE__ */ (() => {\n  let res = [];\n  for (let i = 0; i < 40; i++) res.push(2 ** i);\n  return res;\n})();\n/**\n * Implemented with numbers, because BigInt is 5x slower\n */\nfunction convertRadix2(data: number[], from: number, to: number, padding: boolean): number[] {\n  aArr(data);\n  if (from <= 0 || from > 32) throw new Error(`convertRadix2: wrong from=${from}`);\n  if (to <= 0 || to > 32) throw new Error(`convertRadix2: wrong to=${to}`);\n  if (radix2carry(from, to) > 32) {\n    throw new Error(\n      `convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`\n    );\n  }\n  let carry = 0;\n  let pos = 0; // bitwise position in current element\n  const max = powers[from]!;\n  const mask = powers[to]! - 1;\n  const res: number[] = [];\n  for (const n of data) {\n    anumber(n);\n    if (n >= max) throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n    carry = (carry << from) | n;\n    if (pos + from > 32) throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n    pos += from;\n    for (; pos >= to; pos -= to) res.push(((carry >> (pos - to)) & mask) >>> 0);\n    const pow = powers[pos];\n    if (pow === undefined) throw new Error('invalid carry');\n    carry &= pow - 1; // clean carry, otherwise it will cause overflow\n  }\n  carry = (carry << (to - pos)) & mask;\n  if (!padding && pos >= from) throw new Error('Excess padding');\n  if (!padding && carry > 0) throw new Error(`Non-zero padding: ${carry}`);\n  if (padding && pos > 0) res.push(carry >>> 0);\n  return res;\n}\n\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix(num: number): Coder<Uint8Array, number[]> {\n  anumber(num);\n  const _256 = 2 ** 8;\n  return {\n    encode: (bytes: Uint8Array) => {\n      if (!isBytes(bytes)) throw new Error('radix.encode input should be Uint8Array');\n      return convertRadix(Array.from(bytes), _256, num);\n    },\n    decode: (digits: number[]) => {\n      anumArr('radix.decode', digits);\n      return Uint8Array.from(convertRadix(digits, num, _256));\n    },\n  };\n}\n\n/**\n * If both bases are power of same number (like `2**8 <-> 2**64`),\n * there is a linear algorithm. For now we have implementation for power-of-two bases only.\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix2(bits: number, revPadding = false): Coder<Uint8Array, number[]> {\n  anumber(bits);\n  if (bits <= 0 || bits > 32) throw new Error('radix2: bits should be in (0..32]');\n  if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n    throw new Error('radix2: carry overflow');\n  return {\n    encode: (bytes: Uint8Array) => {\n      if (!isBytes(bytes)) throw new Error('radix2.encode input should be Uint8Array');\n      return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n    },\n    decode: (digits: number[]) => {\n      anumArr('radix2.decode', digits);\n      return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n    },\n  };\n}\n\ntype ArgumentTypes<F extends Function> = F extends (...args: infer A) => any ? A : never;\nfunction unsafeWrapper<T extends (...args: any) => any>(fn: T) {\n  afn(fn);\n  return function (...args: ArgumentTypes<T>): ReturnType<T> | void {\n    try {\n      return fn.apply(null, args);\n    } catch (e) {}\n  };\n}\n\nfunction checksum(\n  len: number,\n  fn: (data: Uint8Array) => Uint8Array\n): Coder<Uint8Array, Uint8Array> {\n  anumber(len);\n  afn(fn);\n  return {\n    encode(data: Uint8Array) {\n      if (!isBytes(data)) throw new Error('checksum.encode: input should be Uint8Array');\n      const sum = fn(data).slice(0, len);\n      const res = new Uint8Array(data.length + len);\n      res.set(data);\n      res.set(sum, data.length);\n      return res;\n    },\n    decode(data: Uint8Array) {\n      if (!isBytes(data)) throw new Error('checksum.decode: input should be Uint8Array');\n      const payload = data.slice(0, -len);\n      const oldChecksum = data.slice(-len);\n      const newChecksum = fn(payload).slice(0, len);\n      for (let i = 0; i < len; i++)\n        if (newChecksum[i] !== oldChecksum[i]) throw new Error('Invalid checksum');\n      return payload;\n    },\n  };\n}\n\n// prettier-ignore\nexport const utils: { alphabet: typeof alphabet; chain: typeof chain; checksum: typeof checksum; convertRadix: typeof convertRadix; convertRadix2: typeof convertRadix2; radix: typeof radix; radix2: typeof radix2; join: typeof join; padding: typeof padding; } = {\n  alphabet, chain, checksum, convertRadix, convertRadix2, radix, radix2, join, padding,\n};\n\n// RFC 4648 aka RFC 3548\n// ---------------------\n\n/**\n * base16 encoding from RFC 4648.\n * @example\n * ```js\n * base16.encode(Uint8Array.from([0x12, 0xab]));\n * // => '12AB'\n * ```\n */\nexport const base16: BytesCoder = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\n\n/**\n * base32 encoding from RFC 4648. Has padding.\n * Use `base32nopad` for unpadded version.\n * Also check out `base32hex`, `base32hexnopad`, `base32crockford`.\n * @example\n * ```js\n * base32.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'CKVQ===='\n * base32.decode('CKVQ====');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32: BytesCoder = chain(\n  radix2(5),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'),\n  padding(5),\n  join('')\n);\n\n/**\n * base32 encoding from RFC 4648. No padding.\n * Use `base32` for padded version.\n * Also check out `base32hex`, `base32hexnopad`, `base32crockford`.\n * @example\n * ```js\n * base32nopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'CKVQ'\n * base32nopad.decode('CKVQ');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32nopad: BytesCoder = chain(\n  radix2(5),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'),\n  join('')\n);\n/**\n * base32 encoding from RFC 4648. Padded. Compared to ordinary `base32`, slightly different alphabet.\n * Use `base32hexnopad` for unpadded version.\n * @example\n * ```js\n * base32hex.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ALG===='\n * base32hex.decode('2ALG====');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32hex: BytesCoder = chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'),\n  padding(5),\n  join('')\n);\n\n/**\n * base32 encoding from RFC 4648. No padding. Compared to ordinary `base32`, slightly different alphabet.\n * Use `base32hex` for padded version.\n * @example\n * ```js\n * base32hexnopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ALG'\n * base32hexnopad.decode('2ALG');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32hexnopad: BytesCoder = chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'),\n  join('')\n);\n/**\n * base32 encoding from RFC 4648. Doug Crockford's version.\n * https://www.crockford.com/base32.html\n * @example\n * ```js\n * base32crockford.encode(Uint8Array.from([0x12, 0xab]));\n * // => '2ANG'\n * base32crockford.decode('2ANG');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base32crockford: BytesCoder = chain(\n  radix2(5),\n  alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'),\n  join(''),\n  normalize((s: string) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1'))\n);\n\n// Built-in base64 conversion https://caniuse.com/mdn-javascript_builtins_uint8array_frombase64\n// prettier-ignore\nconst hasBase64Builtin: boolean = /* @__PURE__ */ (() =>\n  typeof (Uint8Array as any).from([]).toBase64 === 'function' &&\n  typeof (Uint8Array as any).fromBase64 === 'function')();\n\nconst decodeBase64Builtin = (s: string, isUrl: boolean) => {\n  astr('base64', s);\n  const re = isUrl ? /^[A-Za-z0-9=_-]+$/ : /^[A-Za-z0-9=+/]+$/;\n  const alphabet = isUrl ? 'base64url' : 'base64';\n  if (s.length > 0 && !re.test(s)) throw new Error('invalid base64');\n  return (Uint8Array as any).fromBase64(s, { alphabet, lastChunkHandling: 'strict' });\n};\n\n/**\n * base64 from RFC 4648. Padded.\n * Use `base64nopad` for unpadded version.\n * Also check out `base64url`, `base64urlnopad`.\n * Falls back to built-in function, when available.\n * @example\n * ```js\n * base64.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs='\n * base64.decode('Eqs=');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\n// prettier-ignore\nexport const base64: BytesCoder = hasBase64Builtin ? {\n  encode(b) { abytes(b); return (b as any).toBase64(); },\n  decode(s) { return decodeBase64Builtin(s, false); },\n} : chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'),\n  padding(6),\n  join('')\n);\n/**\n * base64 from RFC 4648. No padding.\n * Use `base64` for padded version.\n * @example\n * ```js\n * base64nopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs'\n * base64nopad.decode('Eqs');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base64nopad: BytesCoder = chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'),\n  join('')\n);\n\n/**\n * base64 from RFC 4648, using URL-safe alphabet. Padded.\n * Use `base64urlnopad` for unpadded version.\n * Falls back to built-in function, when available.\n * @example\n * ```js\n * base64url.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs='\n * base64url.decode('Eqs=');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\n// prettier-ignore\nexport const base64url: BytesCoder = hasBase64Builtin ? {\n  encode(b) { abytes(b); return (b as any).toBase64({ alphabet: 'base64url' }); },\n  decode(s) { return decodeBase64Builtin(s, true); },\n} : chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'),\n  padding(6),\n  join('')\n);\n\n/**\n * base64 from RFC 4648, using URL-safe alphabet. No padding.\n * Use `base64url` for padded version.\n * @example\n * ```js\n * base64urlnopad.encode(Uint8Array.from([0x12, 0xab]));\n * // => 'Eqs'\n * base64urlnopad.decode('Eqs');\n * // => Uint8Array.from([0x12, 0xab])\n * ```\n */\nexport const base64urlnopad: BytesCoder = chain(\n  radix2(6),\n  alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'),\n  join('')\n);\n\n// base58 code\n// -----------\nconst genBase58 = /* @__NO_SIDE_EFFECTS__ */ (abc: string) =>\n  chain(radix(58), alphabet(abc), join(''));\n\n/**\n * base58: base64 without ambigous characters +, /, 0, O, I, l.\n * Quadratic (O(n^2)) - so, can't be used on large inputs.\n * @example\n * ```js\n * base58.decode('01abcdef');\n * // => '3UhJW'\n * ```\n */\nexport const base58: BytesCoder = genBase58(\n  '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n);\n/**\n * base58: flickr version. Check out `base58`.\n */\nexport const base58flickr: BytesCoder = genBase58(\n  '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n);\n/**\n * base58: XRP version. Check out `base58`.\n */\nexport const base58xrp: BytesCoder = genBase58(\n  'rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz'\n);\n\n// Data len (index) -> encoded block len\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\n\n/**\n * base58: XMR version. Check out `base58`.\n * Done in 8-byte blocks (which equals 11 chars in decoding). Last (non-full) block padded with '1' to size in XMR_BLOCK_LEN.\n * Block encoding significantly reduces quadratic complexity of base58.\n */\nexport const base58xmr: BytesCoder = {\n  encode(data: Uint8Array) {\n    let res = '';\n    for (let i = 0; i < data.length; i += 8) {\n      const block = data.subarray(i, i + 8);\n      res += base58.encode(block).padStart(XMR_BLOCK_LEN[block.length]!, '1');\n    }\n    return res;\n  },\n  decode(str: string) {\n    let res: number[] = [];\n    for (let i = 0; i < str.length; i += 11) {\n      const slice = str.slice(i, i + 11);\n      const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n      const block = base58.decode(slice);\n      for (let j = 0; j < block.length - blockLen; j++) {\n        if (block[j] !== 0) throw new Error('base58xmr: wrong padding');\n      }\n      res = res.concat(Array.from(block.slice(block.length - blockLen)));\n    }\n    return Uint8Array.from(res);\n  },\n};\n\n/**\n * Method, which creates base58check encoder.\n * Requires function, calculating sha256.\n */\nexport const createBase58check = (sha256: (data: Uint8Array) => Uint8Array): BytesCoder =>\n  chain(\n    checksum(4, (data) => sha256(sha256(data))),\n    base58\n  );\n\n/**\n * Use `createBase58check` instead.\n * @deprecated\n */\nexport const base58check: (sha256: (data: Uint8Array) => Uint8Array) => BytesCoder =\n  createBase58check;\n\n// Bech32 code\n// -----------\nexport interface Bech32Decoded<Prefix extends string = string> {\n  prefix: Prefix;\n  words: number[];\n}\nexport interface Bech32DecodedWithArray<Prefix extends string = string> {\n  prefix: Prefix;\n  words: number[];\n  bytes: Uint8Array;\n}\n\nconst BECH_ALPHABET: Coder<number[], string> = chain(\n  alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'),\n  join('')\n);\n\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre: number): number {\n  const b = pre >> 25;\n  let chk = (pre & 0x1ffffff) << 5;\n  for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n    if (((b >> i) & 1) === 1) chk ^= POLYMOD_GENERATORS[i]!;\n  }\n  return chk;\n}\n\nfunction bechChecksum(prefix: string, words: number[], encodingConst = 1): string {\n  const len = prefix.length;\n  let chk = 1;\n  for (let i = 0; i < len; i++) {\n    const c = prefix.charCodeAt(i);\n    if (c < 33 || c > 126) throw new Error(`Invalid prefix (${prefix})`);\n    chk = bech32Polymod(chk) ^ (c >> 5);\n  }\n  chk = bech32Polymod(chk);\n  for (let i = 0; i < len; i++) chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n  for (let v of words) chk = bech32Polymod(chk) ^ v;\n  for (let i = 0; i < 6; i++) chk = bech32Polymod(chk);\n  chk ^= encodingConst;\n  return BECH_ALPHABET.encode(convertRadix2([chk % powers[30]!], 30, 5, false));\n}\n\nexport interface Bech32 {\n  encode<Prefix extends string>(\n    prefix: Prefix,\n    words: number[] | Uint8Array,\n    limit?: number | false\n  ): `${Lowercase<Prefix>}1${string}`;\n  decode<Prefix extends string>(\n    str: `${Prefix}1${string}`,\n    limit?: number | false\n  ): Bech32Decoded<Prefix>;\n  encodeFromBytes(prefix: string, bytes: Uint8Array): string;\n  decodeToBytes(str: string): Bech32DecodedWithArray;\n  decodeUnsafe(str: string, limit?: number | false): void | Bech32Decoded<string>;\n  fromWords(to: number[]): Uint8Array;\n  fromWordsUnsafe(to: number[]): void | Uint8Array;\n  toWords(from: Uint8Array): number[];\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction genBech32(encoding: 'bech32' | 'bech32m'): Bech32 {\n  const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n  const _words = radix2(5);\n  const fromWords = _words.decode;\n  const toWords = _words.encode;\n  const fromWordsUnsafe = unsafeWrapper(fromWords);\n\n  function encode<Prefix extends string>(\n    prefix: Prefix,\n    words: number[] | Uint8Array,\n    limit: number | false = 90\n  ): `${Lowercase<Prefix>}1${string}` {\n    astr('bech32.encode prefix', prefix);\n    if (isBytes(words)) words = Array.from(words);\n    anumArr('bech32.encode', words);\n    const plen = prefix.length;\n    if (plen === 0) throw new TypeError(`Invalid prefix length ${plen}`);\n    const actualLength = plen + 7 + words.length;\n    if (limit !== false && actualLength > limit)\n      throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n    const lowered = prefix.toLowerCase();\n    const sum = bechChecksum(lowered, words, ENCODING_CONST);\n    return `${lowered}1${BECH_ALPHABET.encode(words)}${sum}` as `${Lowercase<Prefix>}1${string}`;\n  }\n\n  function decode<Prefix extends string>(\n    str: `${Prefix}1${string}`,\n    limit?: number | false\n  ): Bech32Decoded<Prefix>;\n  function decode(str: string, limit?: number | false): Bech32Decoded;\n  function decode(str: string, limit: number | false = 90): Bech32Decoded {\n    astr('bech32.decode input', str);\n    const slen = str.length;\n    if (slen < 8 || (limit !== false && slen > limit))\n      throw new TypeError(`invalid string length: ${slen} (${str}). Expected (8..${limit})`);\n    // don't allow mixed case\n    const lowered = str.toLowerCase();\n    if (str !== lowered && str !== str.toUpperCase())\n      throw new Error(`String must be lowercase or uppercase`);\n    const sepIndex = lowered.lastIndexOf('1');\n    if (sepIndex === 0 || sepIndex === -1)\n      throw new Error(`Letter \"1\" must be present between prefix and data only`);\n    const prefix = lowered.slice(0, sepIndex);\n    const data = lowered.slice(sepIndex + 1);\n    if (data.length < 6) throw new Error('Data must be at least 6 characters long');\n    const words = BECH_ALPHABET.decode(data).slice(0, -6);\n    const sum = bechChecksum(prefix, words, ENCODING_CONST);\n    if (!data.endsWith(sum)) throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n    return { prefix, words };\n  }\n\n  const decodeUnsafe = unsafeWrapper(decode);\n\n  function decodeToBytes(str: string): Bech32DecodedWithArray {\n    const { prefix, words } = decode(str, false);\n    return { prefix, words, bytes: fromWords(words) };\n  }\n\n  function encodeFromBytes(prefix: string, bytes: Uint8Array) {\n    return encode(prefix, toWords(bytes));\n  }\n\n  return {\n    encode,\n    decode,\n    encodeFromBytes,\n    decodeToBytes,\n    decodeUnsafe,\n    fromWords,\n    fromWordsUnsafe,\n    toWords,\n  };\n}\n\n/**\n * bech32 from BIP 173. Operates on words.\n * For high-level, check out scure-btc-signer:\n * https://github.com/paulmillr/scure-btc-signer.\n */\nexport const bech32: Bech32 = genBech32('bech32');\n\n/**\n * bech32m from BIP 350. Operates on words.\n * It was to mitigate `bech32` weaknesses.\n * For high-level, check out scure-btc-signer:\n * https://github.com/paulmillr/scure-btc-signer.\n */\nexport const bech32m: Bech32 = genBech32('bech32m');\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * UTF-8-to-byte decoder. Uses built-in TextDecoder / TextEncoder.\n * @example\n * ```js\n * const b = utf8.decode(\"hey\"); // => new Uint8Array([ 104, 101, 121 ])\n * const str = utf8.encode(b); // \"hey\"\n * ```\n */\nexport const utf8: BytesCoder = {\n  encode: (data) => new TextDecoder().decode(data),\n  decode: (str) => new TextEncoder().encode(str),\n};\n\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\n// prettier-ignore\nconst hasHexBuiltin: boolean = /* @__PURE__ */ (() =>\n  typeof (Uint8Array as any).from([]).toHex === 'function' &&\n  typeof (Uint8Array as any).fromHex === 'function')();\n// prettier-ignore\nconst hexBuiltin: BytesCoder = {\n  encode(data) { abytes(data); return (data as any).toHex(); },\n  decode(s) { astr('hex', s); return (Uint8Array as any).fromHex(s); },\n};\n/**\n * hex string decoder. Uses built-in function, when available.\n * @example\n * ```js\n * const b = hex.decode(\"0102ff\"); // => new Uint8Array([ 1, 2, 255 ])\n * const str = hex.encode(b); // \"0102ff\"\n * ```\n */\nexport const hex: BytesCoder = hasHexBuiltin\n  ? hexBuiltin\n  : chain(\n      radix2(4),\n      alphabet('0123456789abcdef'),\n      join(''),\n      normalize((s: string) => {\n        if (typeof s !== 'string' || s.length % 2 !== 0)\n          throw new TypeError(\n            `hex.decode: expected string, got ${typeof s} with length ${s.length}`\n          );\n        return s.toLowerCase();\n      })\n    );\n\nexport type SomeCoders = {\n  utf8: BytesCoder;\n  hex: BytesCoder;\n  base16: BytesCoder;\n  base32: BytesCoder;\n  base64: BytesCoder;\n  base64url: BytesCoder;\n  base58: BytesCoder;\n  base58xmr: BytesCoder;\n};\n// prettier-ignore\nconst CODERS: SomeCoders = {\n  utf8, hex, base16, base32, base64, base64url, base58, base58xmr\n};\ntype CoderType = keyof SomeCoders;\nconst coderTypeError =\n  'Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr';\n\n/** @deprecated */\nexport const bytesToString = (type: CoderType, bytes: Uint8Array): string => {\n  if (typeof type !== 'string' || !CODERS.hasOwnProperty(type)) throw new TypeError(coderTypeError);\n  if (!isBytes(bytes)) throw new TypeError('bytesToString() expects Uint8Array');\n  return CODERS[type].encode(bytes);\n};\n\n/** @deprecated */\nexport const str: (type: CoderType, bytes: Uint8Array) => string = bytesToString; // as in python, but for bytes only\n\n/** @deprecated */\nexport const stringToBytes = (type: CoderType, str: string): Uint8Array => {\n  if (!CODERS.hasOwnProperty(type)) throw new TypeError(coderTypeError);\n  if (typeof str !== 'string') throw new TypeError('stringToBytes() expects string');\n  return CODERS[type].decode(str);\n};\n/** @deprecated */\nexport const bytes: (type: CoderType, str: string) => Uint8Array = stringToBytes;\n", "/**\n * TypeScript types for NIP-19 Bech32-Encoded Entities\n */\n/**\n * NIP-19 prefix enum for different entity types\n */\nexport var Prefix;\n(function (Prefix) {\n    Prefix[\"PublicKey\"] = \"npub\";\n    Prefix[\"PrivateKey\"] = \"nsec\";\n    Prefix[\"Note\"] = \"note\";\n    Prefix[\"Profile\"] = \"nprofile\";\n    Prefix[\"Event\"] = \"nevent\";\n    Prefix[\"Address\"] = \"naddr\";\n})(Prefix || (Prefix = {}));\n/**\n * TLV (Type-Length-Value) types as defined in NIP-19\n */\nexport var TLVType;\n(function (TLVType) {\n    TLVType[TLVType[\"Special\"] = 0] = \"Special\";\n    TLVType[TLVType[\"Relay\"] = 1] = \"Relay\";\n    TLVType[TLVType[\"Author\"] = 2] = \"Author\";\n    TLVType[TLVType[\"Kind\"] = 3] = \"Kind\";\n})(TLVType || (TLVType = {}));\n", "/**\n * NIP-19 Security Utilities\n *\n * This module provides security enhancements for NIP-19 decoded entities\n * to prevent attacks like XSS through invalid relay URLs.\n */\n/**\n * Validates if a hostname is valid according to RFC standards\n * - Must not be empty\n * - Must not exceed 255 characters total\n * - Each label must be 1-63 characters\n * - Labels must not start or end with hyphens\n * - Labels must contain only alphanumeric characters and hyphens\n * - Must not have consecutive dots\n * - Must not start or end with dots\n * - Must have at least one label (no bare TLD restriction for flexibility)\n */\nfunction isValidHostname(hostname) {\n    // Basic checks\n    if (!hostname || typeof hostname !== \"string\") {\n        return false;\n    }\n    // Check total length (RFC 1035: 255 characters max)\n    if (hostname.length > 255) {\n        return false;\n    }\n    // Check for leading or trailing dots\n    if (hostname.startsWith(\".\") || hostname.endsWith(\".\")) {\n        return false;\n    }\n    // Check for consecutive dots\n    if (hostname.includes(\"..\")) {\n        return false;\n    }\n    // Split into labels and validate each\n    const labels = hostname.split(\".\");\n    // Must have at least one label\n    if (labels.length === 0) {\n        return false;\n    }\n    for (const label of labels) {\n        // Each label must be 1-63 characters (RFC 1035)\n        if (label.length === 0 || label.length > 63) {\n            return false;\n        }\n        // Labels must not start or end with hyphens (RFC 1035)\n        if (label.startsWith(\"-\") || label.endsWith(\"-\")) {\n            return false;\n        }\n        // Labels must contain only alphanumeric characters and hyphens\n        if (!/^[a-zA-Z0-9-]+$/.test(label)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Validates if a relay URL is safe to use\n * - Must start with wss:// or ws://\n * - Must be a valid URL\n * - No credentials (username/password) in URL\n * - No URL confusion or redirection tricks\n * - Valid port numbers (1-65535, not 0)\n * - No null bytes or dangerous characters in hostname\n * - No null bytes in query parameters\n */\nexport function isValidRelayUrl(url) {\n    try {\n        // Basic protocol check\n        if (!url.startsWith(\"wss://\") && !url.startsWith(\"ws://\")) {\n            return false;\n        }\n        // Check for null bytes and other control characters in the entire URL\n        // Use a function to check each character code instead of regex with control chars\n        if ([...url].some((char) => {\n            const code = char.charCodeAt(0);\n            return code <= 0x1f || (code >= 0x7f && code <= 0x9f);\n        })) {\n            return false;\n        }\n        // Check for encoded null bytes in the URL\n        if (url.includes(\"%00\") ||\n            url.toLowerCase().includes(\"%0a\") ||\n            url.toLowerCase().includes(\"%0d\")) {\n            return false;\n        }\n        // Check for URL confusion attacks (@ symbol in host part)\n        if (url.includes(\"@\")) {\n            return false;\n        }\n        // Check for backslashes that might be used for escaping\n        if (url.includes(\"\\\\\")) {\n            return false;\n        }\n        // Check for multiple slashes (protocol:///)\n        if (/^ws+:\\/\\/\\//.test(url)) {\n            return false;\n        }\n        // Normalize the URL to catch sneaky tricks\n        const normalized = url.toLowerCase();\n        // Check for exactly the right protocol pattern\n        if (!normalized.match(new RegExp(\"^wss://[^/]|^ws://[^/]\"))) {\n            return false;\n        }\n        const parsedUrl = new URL(url);\n        // Check for credentials in the URL (username or password)\n        if (parsedUrl.username || parsedUrl.password) {\n            return false;\n        }\n        // Validate port number if specified\n        if (parsedUrl.port) {\n            const portNum = parseInt(parsedUrl.port, 10);\n            // Port must be between 1 and 65535\n            if (isNaN(portNum) || portNum <= 0 || portNum > 65535) {\n                return false;\n            }\n        }\n        // Ensure the host doesn't contain any suspicious characters\n        // Handle IPv6 addresses (bracketed) and regular hostnames separately\n        //\n        // Note: Both parsedUrl.hostname and parsedUrl.host preserve IPv6 brackets\n        // in modern Node.js and browsers. We use hostname here because:\n        // - hostname: \"[2001:db8::1]\" (IPv6 address only)\n        // - host: \"[2001:db8::1]:8080\" (IPv6 address + port)\n        // We want to validate the address itself, not the address+port combination\n        if (parsedUrl.hostname.startsWith(\"[\") &&\n            parsedUrl.hostname.endsWith(\"]\")) {\n            // IPv6 literal - brackets are required and content can contain colons\n            // RFC 3986 Section 3.2.2: IPv6 addresses must be enclosed in brackets\n            // We trust the URL parser's validation for IPv6 format\n            const ipv6Content = parsedUrl.hostname.slice(1, -1);\n            if (ipv6Content.length === 0) {\n                return false; // Empty brackets not allowed\n            }\n        }\n        else {\n            // Regular hostname - validate with strict hostname rules\n            if (!isValidHostname(parsedUrl.hostname)) {\n                return false;\n            }\n        }\n        // Additional sanity: disallow empty hostname (should never happen with URL parser)\n        if (parsedUrl.hostname.length === 0) {\n            return false;\n        }\n        // Check search params for encoded null bytes and other dangerous characters\n        if (parsedUrl.search &&\n            (parsedUrl.search.includes(\"%00\") ||\n                parsedUrl.search.toLowerCase().includes(\"%0a\") ||\n                parsedUrl.search.toLowerCase().includes(\"%0d\"))) {\n            return false;\n        }\n        return true;\n    }\n    catch (error) {\n        return false;\n    }\n}\n/**\n * Filter invalid relay URLs from a decoded profile\n * Use this after decoding with decodeProfile() for enhanced security\n */\nexport function filterProfile(profile) {\n    if (!profile.relays || profile.relays.length === 0) {\n        return profile;\n    }\n    return {\n        ...profile,\n        relays: profile.relays.filter(isValidRelayUrl),\n    };\n}\n/**\n * Filter invalid relay URLs from a decoded event\n * Use this after decoding with decodeEvent() for enhanced security\n */\nexport function filterEvent(event) {\n    if (!event.relays || event.relays.length === 0) {\n        return event;\n    }\n    return {\n        ...event,\n        relays: event.relays.filter(isValidRelayUrl),\n    };\n}\n/**\n * Filter invalid relay URLs from a decoded address\n * Use this after decoding with decodeAddress() for enhanced security\n */\nexport function filterAddress(address) {\n    if (!address.relays || address.relays.length === 0) {\n        return address;\n    }\n    return {\n        ...address,\n        relays: address.relays.filter(isValidRelayUrl),\n    };\n}\n/**\n * Safely decode any NIP-19 entity that contains relay URLs\n * Returns the filtered result with only valid relay URLs\n *\n * @param entity The decoded entity (from decodeProfile, decodeEvent, decodeAddress)\n * @returns A filtered entity with only valid relay URLs\n */\nexport function filterEntity(entity) {\n    if (\"pubkey\" in entity && \"relays\" in entity) {\n        return filterProfile(entity);\n    }\n    else if (\"id\" in entity && \"relays\" in entity) {\n        return filterEvent(entity);\n    }\n    else if (\"identifier\" in entity && \"kind\" in entity && \"relays\" in entity) {\n        return filterAddress(entity);\n    }\n    // If we can't determine the type, return as is\n    return entity;\n}\n", "import { bech32 } from \"@scure/base\";\nimport { Prefix, TLVType, } from \"./types.js\";\n// Re-export types\nexport * from \"./types.js\";\n// Default limit for bech32 length (standard is 90, but we use higher for TLV)\n// Apparently some users even breaking through 1500 limit, lets raise it to 5000 like nostr-tools\n// https://github.com/nbd-wtf/nostr-tools/issues/74\nconst DEFAULT_LIMIT = 5000;\n// TLV size limits - these are reasonable limits to prevent abuse\nconst MAX_RELAY_URL_LENGTH = 512; // Max length for a relay URL\nconst MAX_IDENTIFIER_LENGTH = 1024; // Max length for an identifier (d tag)\nconst MAX_TLV_ENTRIES = 20; // Max number of TLV entries to prevent DoS (reduced from 100)\n/**\n * Validates a relay URL format\n * Relay URLs must start with wss:// or ws:// and contain a valid hostname\n * No credentials are allowed in URLs\n * @deprecated Use isValidRelayUrl from './secure.js' instead. Will be removed in next major version.\n */\nexport function validateRelayUrl(url) {\n    return isValidRelayUrl(url);\n}\n/**\n * Helper function to safely encode using bech32 with a higher limit\n */\nfunction encodeBech32WithLimit(prefix, words, limit = DEFAULT_LIMIT) {\n    try {\n        // Use a type assertion for the prefix since we know it's valid in our context\n        return bech32.encode(prefix, words, limit);\n    }\n    catch (error) {\n        throw new Error(`Failed to encode bech32: ${error instanceof Error ? error.message : \"unknown error\"}`);\n    }\n}\n/**\n * Helper function to safely decode bech32 strings with a higher limit\n */\nfunction decodeBech32WithLimit(bech32Str, limit = DEFAULT_LIMIT) {\n    try {\n        // Use a type assertion for the input since we know it's valid in our context\n        return bech32.decode(bech32Str, limit);\n    }\n    catch (error) {\n        throw new Error(`Failed to decode bech32: ${error instanceof Error ? error.message : \"unknown error\"}`);\n    }\n}\n/**\n * Encodes a hex string to a bech32 string with the given prefix\n */\nexport function encodeBech32(prefix, data) {\n    const dataBytes = hexToBytes(data);\n    const words = bech32.toWords(dataBytes);\n    return bech32.encode(prefix, words);\n}\n/**\n * Decodes a bech32 string to a hex string\n */\nexport function decodeBech32(bech32Str) {\n    // First, check if the prefix is valid without full decoding\n    // This ensures 'Invalid prefix' errors take precedence over other errors\n    const hrp = bech32Str.slice(0, bech32Str.indexOf(\"1\"));\n    try {\n        const { prefix, words } = bech32.decode(bech32Str);\n        const bytes = bech32.fromWords(words);\n        const data = bytesToHex(bytes);\n        return { prefix, data };\n    }\n    catch (error) {\n        // If the error is about invalid length but we got a valid hrp,\n        // we want to prioritize prefix validation errors for consistency\n        if (error instanceof Error &&\n            error.message.includes(\"invalid string length\") &&\n            !Object.values(Prefix).includes(hrp)) {\n            throw new Error(`Invalid prefix: expected valid prefix, got '${hrp}'`);\n        }\n        throw error;\n    }\n}\n/**\n * Encodes a public key to npub format\n */\nexport function encodePublicKey(publicKey) {\n    if (typeof publicKey !== \"string\") {\n        throw new Error(\"Invalid public key: input must be a string.\");\n    }\n    // hexToBytes will validate format, non-empty, but we also need to check exact length.\n    const bytes = hexToBytes(publicKey); // hexToBytes validates format, non-even length, non-hex chars\n    if (bytes.length !== 32) {\n        throw new Error(`Invalid public key hex: expected 32 bytes (64 hex chars), got ${bytes.length} bytes (${publicKey.length} hex chars). Ensure it is not empty and has correct length.`);\n    }\n    const words = bech32.toWords(bytes);\n    return encodeBech32WithLimit(Prefix.PublicKey, words);\n}\n/**\n * Helper function to create a consistent error handling approach\n * that distinguishes between specialized errors and general decoding errors\n */\nfunction handleDecodingError(error, entityType) {\n    // Only pass through specific error types we want to preserve\n    if (error instanceof Error) {\n        // Special case: handle string length errors for bech32 strings with wrong prefixes\n        if (error.message.includes(\"invalid string length\") &&\n            error.message.includes(\"Expected\") &&\n            error.message.includes(\")\")) {\n            // Extract the actual string from the error message\n            const match = error.message.match(/\\(([^)]+)\\)/);\n            if (match && match[1]) {\n                const bech32Str = match[1];\n                const actualPrefix = bech32Str.split(\"1\")[0];\n                const expectedPrefix = getExpectedPrefixForEntityType(entityType);\n                if (actualPrefix && expectedPrefix && actualPrefix !== expectedPrefix) {\n                    throw new Error(`Invalid prefix: expected '${expectedPrefix}', got '${actualPrefix}'`);\n                }\n            }\n        }\n        // Pass through these error types directly as they have specific context\n        if (error.message.startsWith(\"Invalid prefix\") ||\n            error.message.startsWith(\"TLV type\") ||\n            error.message.startsWith(\"Missing\") ||\n            error.message.includes(\"should be\") ||\n            error.message.startsWith(\"Invalid TLV structure\") ||\n            error.message.startsWith(\"Invalid relay URL\") ||\n            error.message.includes(\"too long\") ||\n            error.message.includes(\"exceeds maximum\")) {\n            throw error;\n        }\n        // If it's a bech32 error, provide better context\n        if (error.message.startsWith(\"Failed to decode bech32\")) {\n            throw new Error(`Invalid ${entityType} format: bech32 decoding failed - ${error.message}`);\n        }\n        // If it's about malformed data, provide better context\n        if (error.message.includes(\"Invalid\")) {\n            throw new Error(`Invalid ${entityType} format: ${error.message}`);\n        }\n    }\n    // Wrap general errors with context\n    const errorMessage = error instanceof Error ? error.message : String(error) || \"unknown error\";\n    throw new Error(`Error decoding ${entityType}: ${errorMessage}`);\n}\n/**\n * Helper function to get the expected prefix for a given entity type\n */\nfunction getExpectedPrefixForEntityType(entityType) {\n    switch (entityType) {\n        case \"npub\":\n            return Prefix.PublicKey;\n        case \"nsec\":\n            return Prefix.PrivateKey;\n        case \"note\":\n            return Prefix.Note;\n        case \"nprofile\":\n            return Prefix.Profile;\n        case \"nevent\":\n            return Prefix.Event;\n        case \"naddr\":\n            return Prefix.Address;\n        default:\n            return null;\n    }\n}\n/**\n * Decodes an npub to a public key\n */\nexport function decodePublicKey(npub) {\n    try {\n        const { prefix, data } = decodeBech32(npub);\n        if (prefix !== Prefix.PublicKey) {\n            throw new Error(`Invalid prefix: expected '${Prefix.PublicKey}', got '${prefix}'`);\n        }\n        return data;\n    }\n    catch (error) {\n        handleDecodingError(error, \"npub\");\n    }\n}\n/**\n * Encodes a private key to nsec format\n */\nexport function encodePrivateKey(privateKey) {\n    if (typeof privateKey !== \"string\") {\n        throw new Error(\"Invalid private key: input must be a string.\");\n    }\n    const bytes = hexToBytes(privateKey);\n    if (bytes.length !== 32) {\n        throw new Error(`Invalid private key hex: expected 32 bytes (64 hex chars), got ${bytes.length} bytes (${privateKey.length} hex chars). Ensure it is not empty and has correct length.`);\n    }\n    const words = bech32.toWords(bytes);\n    return encodeBech32WithLimit(Prefix.PrivateKey, words);\n}\n/**\n * Decodes an nsec to a private key\n */\nexport function decodePrivateKey(nsec) {\n    try {\n        const { prefix, data } = decodeBech32(nsec);\n        if (prefix !== Prefix.PrivateKey) {\n            throw new Error(`Invalid prefix: expected '${Prefix.PrivateKey}', got '${prefix}'`);\n        }\n        return data;\n    }\n    catch (error) {\n        handleDecodingError(error, \"nsec\");\n    }\n}\n/**\n * Encodes a note ID to note format\n */\nexport function encodeNoteId(noteId) {\n    if (typeof noteId !== \"string\") {\n        throw new Error(\"Invalid note ID: input must be a string.\");\n    }\n    const bytes = hexToBytes(noteId);\n    if (bytes.length !== 32) {\n        throw new Error(`Invalid note ID hex: expected 32 bytes (64 hex chars), got ${bytes.length} bytes (${noteId.length} hex chars). Ensure it is not empty and has correct length.`);\n    }\n    const words = bech32.toWords(bytes);\n    return encodeBech32WithLimit(Prefix.Note, words);\n}\n/**\n * Decodes a note to a note ID\n */\nexport function decodeNoteId(note) {\n    try {\n        const { prefix, data } = decodeBech32(note);\n        if (prefix !== Prefix.Note) {\n            throw new Error(`Invalid prefix: expected '${Prefix.Note}', got '${prefix}'`);\n        }\n        return data;\n    }\n    catch (error) {\n        handleDecodingError(error, \"note\");\n    }\n}\n// TLV (Type-Length-Value) encoding/decoding\n/**\n * Encodes a list of TLV entries into a single byte array\n */\nfunction encodeTLV(entries) {\n    // Calculate total length\n    let totalLength = 0;\n    for (const entry of entries) {\n        totalLength += 2 + entry.value.length; // 1 byte for type, 1 byte for length, n bytes for value\n    }\n    const result = new Uint8Array(totalLength);\n    let offset = 0;\n    for (const entry of entries) {\n        // Write type\n        result[offset++] = entry.type;\n        // Write length\n        result[offset++] = entry.value.length;\n        // Write value\n        result.set(entry.value, offset);\n        offset += entry.value.length;\n    }\n    return result;\n}\n/**\n * Decodes a TLV encoded byte array into a list of TLV entries\n */\nfunction decodeTLV(data) {\n    const entries = [];\n    let offset = 0;\n    // We need at least 2 bytes per entry (type and length)\n    while (offset < data.length - 1) {\n        const type = data[offset++];\n        const length = data[offset++];\n        // Check if we have enough data for the value\n        if (offset + length > data.length) {\n            throw new Error(\"Invalid TLV structure: data too short\");\n        }\n        // Read the value\n        const value = data.slice(offset, offset + length);\n        offset += length;\n        // Limit the number of entries to prevent DoS\n        if (entries.length >= MAX_TLV_ENTRIES) {\n            throw new Error(`TLV entry count exceeds maximum of ${MAX_TLV_ENTRIES}`);\n        }\n        entries.push({ type, value });\n    }\n    return entries;\n}\n/**\n * Encodes a profile to nprofile format\n */\nexport function encodeProfile(data) {\n    // First, validate the pubkey\n    if (!data.pubkey || data.pubkey.length !== 64) {\n        throw new Error(\"Invalid pubkey: must be a 32-byte hex string\");\n    }\n    // Start building TLV entries with the pubkey\n    const entries = [\n        {\n            type: TLVType.Special,\n            value: hexToBytes(data.pubkey),\n        },\n    ];\n    // Add relays if provided\n    if (data.relays && data.relays.length > 0) {\n        // Check for too many relay entries\n        if (data.relays.length > MAX_TLV_ENTRIES - 1) {\n            // -1 for the pubkey entry\n            throw new Error(`Too many relay entries (max ${MAX_TLV_ENTRIES - 1})`);\n        }\n        for (const relay of data.relays) {\n            // Check relay URL length\n            if (relay.length > MAX_RELAY_URL_LENGTH) {\n                throw new Error(`Relay URL too long (max ${MAX_RELAY_URL_LENGTH} characters)`);\n            }\n            // Validate relay URL format\n            if (!isValidRelayUrl(relay)) {\n                throw new Error(`Invalid relay URL: ${relay}`);\n            }\n            entries.push({\n                type: TLVType.Relay,\n                value: new TextEncoder().encode(relay),\n            });\n        }\n    }\n    // Encode the TLV entries\n    const tlvData = encodeTLV(entries);\n    // Convert to bech32 words (5-bit) for encoding\n    const words = bech32.toWords(tlvData);\n    // Encode as bech32\n    return encodeBech32WithLimit(Prefix.Profile, words);\n}\n/**\n * Decodes an nprofile to profile data\n */\nexport function decodeProfile(nprofile) {\n    try {\n        // Decode the bech32 string\n        const { prefix, words } = decodeBech32WithLimit(nprofile);\n        // Check prefix\n        if (prefix !== Prefix.Profile) {\n            throw new Error(`Invalid prefix: expected '${Prefix.Profile}', got '${prefix}'`);\n        }\n        // Convert from bech32 words to bytes\n        const data = bech32.fromWords(words);\n        // Decode the TLV entries\n        const entries = decodeTLV(data);\n        // Extract the profile data\n        let pubkey;\n        const relays = [];\n        for (const entry of entries) {\n            if (entry.type === TLVType.Special) {\n                // This is the pubkey\n                if (entry.value.length !== 32) {\n                    throw new Error(\"Invalid pubkey length: should be 32 bytes\");\n                }\n                pubkey = bytesToHex(entry.value);\n            }\n            else if (entry.type === TLVType.Relay) {\n                // This is a relay URL\n                const relay = new TextDecoder().decode(entry.value);\n                relays.push(relay);\n                // Warn about invalid relay URLs but still include them\n                if (!isValidRelayUrl(relay)) {\n                    console.warn(`Warning: Invalid relay URL format found while decoding: ${relay}`);\n                }\n            }\n            // Ignore unknown types for forward compatibility\n        }\n        // Ensure we found a pubkey\n        if (!pubkey) {\n            throw new Error(\"Missing pubkey in nprofile\");\n        }\n        return {\n            pubkey,\n            relays: relays.length > 0 ? relays : undefined,\n        };\n    }\n    catch (error) {\n        handleDecodingError(error, \"nprofile\");\n    }\n}\n/**\n * Encodes an event to nevent format\n */\nexport function encodeEvent(data) {\n    // First, validate the event ID\n    if (!data.id || data.id.length !== 64) {\n        throw new Error(\"Invalid event ID: must be a 32-byte hex string\");\n    }\n    // Start building TLV entries with the event ID\n    const entries = [\n        {\n            type: TLVType.Special,\n            value: hexToBytes(data.id),\n        },\n    ];\n    // Add relays if provided\n    if (data.relays && data.relays.length > 0) {\n        // Check for too many relay entries\n        if (data.relays.length > MAX_TLV_ENTRIES - 3) {\n            // -3 for id, author, kind\n            throw new Error(`Too many relay entries (max ${MAX_TLV_ENTRIES - 3})`);\n        }\n        for (const relay of data.relays) {\n            // Check relay URL length\n            if (relay.length > MAX_RELAY_URL_LENGTH) {\n                throw new Error(`Relay URL too long (max ${MAX_RELAY_URL_LENGTH} characters)`);\n            }\n            // Validate relay URL format\n            if (!isValidRelayUrl(relay)) {\n                throw new Error(`Invalid relay URL: ${relay}`);\n            }\n            entries.push({\n                type: TLVType.Relay,\n                value: new TextEncoder().encode(relay),\n            });\n        }\n    }\n    // Add author if provided\n    if (data.author) {\n        if (data.author.length !== 64) {\n            throw new Error(\"Invalid author pubkey: must be a 32-byte hex string\");\n        }\n        entries.push({\n            type: TLVType.Author,\n            value: hexToBytes(data.author),\n        });\n    }\n    // Encode the TLV entries\n    const tlvData = encodeTLV(entries);\n    // Convert to bech32 words (5-bit) for encoding\n    const words = bech32.toWords(tlvData);\n    // Encode as bech32\n    return encodeBech32WithLimit(Prefix.Event, words);\n}\n/**\n * Decodes an nevent to event data\n */\nexport function decodeEvent(nevent) {\n    try {\n        // Decode the bech32 string\n        const { prefix, words } = decodeBech32WithLimit(nevent);\n        // Check prefix\n        if (prefix !== Prefix.Event) {\n            throw new Error(`Invalid prefix: expected '${Prefix.Event}', got '${prefix}'`);\n        }\n        // Convert from bech32 words to bytes\n        const data = bech32.fromWords(words);\n        // Decode the TLV entries\n        const entries = decodeTLV(data);\n        // Extract the event data\n        let id;\n        const relays = [];\n        let author;\n        for (const entry of entries) {\n            if (entry.type === TLVType.Special) {\n                // This is the event ID\n                if (entry.value.length !== 32) {\n                    throw new Error(\"Invalid event ID length: should be 32 bytes\");\n                }\n                id = bytesToHex(entry.value);\n            }\n            else if (entry.type === TLVType.Relay) {\n                // This is a relay URL\n                const relay = new TextDecoder().decode(entry.value);\n                relays.push(relay);\n                // Warn about invalid relay URLs but still include them\n                if (!isValidRelayUrl(relay)) {\n                    console.warn(`Warning: Invalid relay URL format found while decoding: ${relay}`);\n                }\n            }\n            else if (entry.type === TLVType.Author) {\n                // This is the author pubkey\n                if (entry.value.length !== 32) {\n                    throw new Error(\"Invalid author pubkey length: should be 32 bytes\");\n                }\n                author = bytesToHex(entry.value);\n            }\n            // Ignore unknown types for forward compatibility\n        }\n        // Ensure we found an event ID\n        if (!id) {\n            throw new Error(\"Missing event ID in nevent\");\n        }\n        return {\n            id,\n            relays: relays.length > 0 ? relays : undefined,\n            author,\n        };\n    }\n    catch (error) {\n        handleDecodingError(error, \"nevent\");\n    }\n}\n/**\n * Encodes an address to naddr format\n */\nexport function encodeAddress(data) {\n    // Validate the required fields\n    if (!data.identifier) {\n        throw new Error(\"Missing identifier in address data\");\n    }\n    if (!data.pubkey || data.pubkey.length !== 64) {\n        throw new Error(\"Invalid pubkey: must be a 32-byte hex string\");\n    }\n    if (data.kind === undefined || data.kind < 0 || data.kind > 0xffffffff) {\n        // Allow full 32-bit unsigned range\n        throw new Error(\"Invalid kind: must be a 32-bit unsigned integer (0 to 4294967295)\");\n    }\n    // Check identifier length\n    if (data.identifier.length > MAX_IDENTIFIER_LENGTH) {\n        throw new Error(`Identifier too long (max ${MAX_IDENTIFIER_LENGTH} characters)`);\n    }\n    // Start building TLV entries with the identifier\n    const entries = [\n        {\n            type: TLVType.Special,\n            value: new TextEncoder().encode(data.identifier),\n        },\n    ];\n    // Add relays if provided\n    if (data.relays && data.relays.length > 0) {\n        // Check for too many relay entries\n        if (data.relays.length > MAX_TLV_ENTRIES - 3) {\n            // -3 for identifier, pubkey, kind\n            throw new Error(`Too many relay entries (max ${MAX_TLV_ENTRIES - 3})`);\n        }\n        for (const relay of data.relays) {\n            // Check relay URL length\n            if (relay.length > MAX_RELAY_URL_LENGTH) {\n                throw new Error(`Relay URL too long (max ${MAX_RELAY_URL_LENGTH} characters)`);\n            }\n            // Validate relay URL format\n            if (!isValidRelayUrl(relay)) {\n                throw new Error(`Invalid relay URL: ${relay}`);\n            }\n            entries.push({\n                type: TLVType.Relay,\n                value: new TextEncoder().encode(relay),\n            });\n        }\n    }\n    // Add author (pubkey)\n    entries.push({\n        type: TLVType.Author,\n        value: hexToBytes(data.pubkey),\n    });\n    // Add kind\n    const kindBytes = new Uint8Array(4); // Changed to 4 bytes\n    kindBytes[0] = (data.kind >> 24) & 0xff;\n    kindBytes[1] = (data.kind >> 16) & 0xff;\n    kindBytes[2] = (data.kind >> 8) & 0xff;\n    kindBytes[3] = data.kind & 0xff;\n    entries.push({\n        type: TLVType.Kind,\n        value: kindBytes,\n    });\n    // Encode the TLV entries\n    const tlvData = encodeTLV(entries);\n    // Convert to bech32 words (5-bit) for encoding\n    const words = bech32.toWords(tlvData);\n    // Encode as bech32\n    return encodeBech32WithLimit(Prefix.Address, words);\n}\n/**\n * Decodes an naddr to address data\n */\nexport function decodeAddress(naddr) {\n    try {\n        // Decode the bech32 string\n        const { prefix, words } = decodeBech32WithLimit(naddr);\n        // Check prefix\n        if (prefix !== Prefix.Address) {\n            throw new Error(`Invalid prefix: expected '${Prefix.Address}', got '${prefix}'`);\n        }\n        // Convert from bech32 words to bytes\n        const data = bech32.fromWords(words);\n        // Decode the TLV entries\n        const entries = decodeTLV(data);\n        // Extract the address data\n        let identifier;\n        const relays = [];\n        let pubkey;\n        let kind;\n        for (const entry of entries) {\n            if (entry.type === TLVType.Special) {\n                // This is the identifier (d tag)\n                identifier = new TextDecoder().decode(entry.value);\n            }\n            else if (entry.type === TLVType.Relay) {\n                // This is a relay URL\n                const relay = new TextDecoder().decode(entry.value);\n                relays.push(relay);\n                // Warn about invalid relay URLs but still include them\n                if (!isValidRelayUrl(relay)) {\n                    console.warn(`Warning: Invalid relay URL format found while decoding: ${relay}`);\n                }\n            }\n            else if (entry.type === TLVType.Author) {\n                // This is the pubkey\n                if (entry.value.length !== 32) {\n                    throw new Error(\"Invalid pubkey length: should be 32 bytes\");\n                }\n                pubkey = bytesToHex(entry.value);\n            }\n            else if (entry.type === TLVType.Kind) {\n                // This is the event kind\n                if (entry.value.length !== 4) {\n                    throw new Error(\"Invalid kind length: should be 4 bytes\");\n                }\n                kind =\n                    (entry.value[0] << 24) +\n                        (entry.value[1] << 16) +\n                        (entry.value[2] << 8) +\n                        entry.value[3];\n            }\n            // Ignore unknown types for forward compatibility\n        }\n        // Ensure we have all required fields\n        if (!identifier) {\n            throw new Error(\"Missing identifier in naddr\");\n        }\n        if (!pubkey) {\n            throw new Error(\"Missing pubkey in naddr\");\n        }\n        if (kind === undefined) {\n            throw new Error(\"Missing kind in naddr\");\n        }\n        return {\n            identifier,\n            pubkey,\n            kind,\n            relays: relays.length > 0 ? relays : undefined,\n        };\n    }\n    catch (error) {\n        handleDecodingError(error, \"naddr\");\n    }\n}\n/**\n * Converts a hex string to a byte array\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== \"string\") {\n        throw new Error(\"Invalid hex string: input must be a string.\");\n    }\n    if (hex.length === 0) {\n        // Explicitly disallow empty string for this context.\n        throw new Error(\"Invalid hex string: cannot be empty.\");\n    }\n    if (hex.length % 2 !== 0) {\n        throw new Error(\"Invalid hex string: length must be even.\");\n    }\n    if (!/^[0-9a-fA-F]*$/.test(hex)) {\n        // Add regex check for all characters\n        throw new Error(\"Invalid hex string: contains non-hex characters.\");\n    }\n    const bytes = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < bytes.length; i++) {\n        const start = i * 2;\n        const hexByte = hex.slice(start, start + 2);\n        const byte = parseInt(hexByte, 16);\n        if (isNaN(byte)) {\n            throw new Error(`Invalid hex string: \"${hexByte}\" is not a valid hex byte`);\n        }\n        bytes[i] = byte;\n    }\n    return bytes;\n}\n/**\n * Converts a byte array to a hex string\n */\nfunction bytesToHex(bytes) {\n    let hex = \"\";\n    for (let i = 0; i < bytes.length; i++) {\n        hex += bytes[i].toString(16).padStart(2, \"0\");\n    }\n    return hex;\n}\n/**\n * Universal decoder for any NIP-19 entity\n */\nexport function decode(bech32Str) {\n    // Basic validation for bech32 format\n    if (!bech32Str.includes(\"1\")) {\n        throw new Error(\"Invalid bech32 string format: missing separator character '1'\");\n    }\n    // Extract the prefix from the bech32 string\n    const prefix = bech32Str.slice(0, bech32Str.indexOf(\"1\"));\n    switch (prefix) {\n        case Prefix.PublicKey:\n            return {\n                type: Prefix.PublicKey,\n                data: decodePublicKey(bech32Str),\n            };\n        case Prefix.PrivateKey:\n            return {\n                type: Prefix.PrivateKey,\n                data: decodePrivateKey(bech32Str),\n            };\n        case Prefix.Note:\n            return {\n                type: Prefix.Note,\n                data: decodeNoteId(bech32Str),\n            };\n        case Prefix.Profile:\n            return {\n                type: Prefix.Profile,\n                data: decodeProfile(bech32Str),\n            };\n        case Prefix.Event:\n            return {\n                type: Prefix.Event,\n                data: decodeEvent(bech32Str),\n            };\n        case Prefix.Address:\n            return {\n                type: Prefix.Address,\n                data: decodeAddress(bech32Str),\n            };\n        default:\n            throw new Error(`Unknown prefix: ${prefix}`);\n    }\n}\n// Export security utilities\nimport { isValidRelayUrl } from \"./secure.js\";\nexport * from \"./secure.js\";\n", "/**\n * HKDF (RFC 5869): extract + expand in one step.\n * See https://soatok.blog/2021/11/17/understanding-hkdf/.\n * @module\n */\nimport { hmac } from './hmac.ts';\nimport { ahash, anumber, type CHash, clean, type Input, toBytes } from './utils.ts';\n\n/**\n * HKDF-extract from spec. Less important part. `HKDF-Extract(IKM, salt) -> PRK`\n * Arguments position differs from spec (IKM is first one, since it is not optional)\n * @param hash - hash function that would be used (e.g. sha256)\n * @param ikm - input keying material, the initial key\n * @param salt - optional salt value (a non-secret random value)\n */\nexport function extract(hash: CHash, ikm: Input, salt?: Input): Uint8Array {\n  ahash(hash);\n  // NOTE: some libraries treat zero-length array as 'not provided';\n  // we don't, since we have undefined as 'not provided'\n  // https://github.com/RustCrypto/KDFs/issues/15\n  if (salt === undefined) salt = new Uint8Array(hash.outputLen);\n  return hmac(hash, toBytes(salt), toBytes(ikm));\n}\n\nconst HKDF_COUNTER = /* @__PURE__ */ Uint8Array.from([0]);\nconst EMPTY_BUFFER = /* @__PURE__ */ Uint8Array.of();\n\n/**\n * HKDF-expand from the spec. The most important part. `HKDF-Expand(PRK, info, L) -> OKM`\n * @param hash - hash function that would be used (e.g. sha256)\n * @param prk - a pseudorandom key of at least HashLen octets (usually, the output from the extract step)\n * @param info - optional context and application specific information (can be a zero-length string)\n * @param length - length of output keying material in bytes\n */\nexport function expand(hash: CHash, prk: Input, info?: Input, length: number = 32): Uint8Array {\n  ahash(hash);\n  anumber(length);\n  const olen = hash.outputLen;\n  if (length > 255 * olen) throw new Error('Length should be <= 255*HashLen');\n  const blocks = Math.ceil(length / olen);\n  if (info === undefined) info = EMPTY_BUFFER;\n  // first L(ength) octets of T\n  const okm = new Uint8Array(blocks * olen);\n  // Re-use HMAC instance between blocks\n  const HMAC = hmac.create(hash, prk);\n  const HMACTmp = HMAC._cloneInto();\n  const T = new Uint8Array(HMAC.outputLen);\n  for (let counter = 0; counter < blocks; counter++) {\n    HKDF_COUNTER[0] = counter + 1;\n    // T(0) = empty string (zero length)\n    // T(N) = HMAC-Hash(PRK, T(N-1) | info | N)\n    HMACTmp.update(counter === 0 ? EMPTY_BUFFER : T)\n      .update(info)\n      .update(HKDF_COUNTER)\n      .digestInto(T);\n    okm.set(T, olen * counter);\n    HMAC._cloneInto(HMACTmp);\n  }\n  HMAC.destroy();\n  HMACTmp.destroy();\n  clean(T, HKDF_COUNTER);\n  return okm.slice(0, length);\n}\n\n/**\n * HKDF (RFC 5869): derive keys from an initial input.\n * Combines hkdf_extract + hkdf_expand in one step\n * @param hash - hash function that would be used (e.g. sha256)\n * @param ikm - input keying material, the initial key\n * @param salt - optional salt value (a non-secret random value)\n * @param info - optional context and application specific information (can be a zero-length string)\n * @param length - length of output keying material in bytes\n * @example\n * import { hkdf } from '@noble/hashes/hkdf';\n * import { sha256 } from '@noble/hashes/sha2';\n * import { randomBytes } from '@noble/hashes/utils';\n * const inputKey = randomBytes(32);\n * const salt = randomBytes(32);\n * const info = 'application-key';\n * const hk1 = hkdf(sha256, inputKey, salt, info, 32);\n */\nexport const hkdf = (\n  hash: CHash,\n  ikm: Input,\n  salt: Input | undefined,\n  info: Input | undefined,\n  length: number\n): Uint8Array => expand(hash, extract(hash, ikm, salt), info, length);\n", "/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */\n\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\n// Cast array to different type\nexport const u8 = (arr: TypedArray) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u16 = (arr: TypedArray) =>\n  new Uint16Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 2));\nexport const u32 = (arr: TypedArray) =>\n  new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n\nfunction isBytes(a: unknown): a is Uint8Array {\n  return (\n    a instanceof Uint8Array ||\n    (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array')\n  );\n}\n\n// Cast array to view\nexport const createView = (arr: TypedArray) =>\n  new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n\n// big-endian hardware is rare. Just in case someone still decides to run ciphers:\n// early-throw an error because we don't support BE yet.\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!isLE) throw new Error('Non little-endian hardware is not supported');\n\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) =>\n  i.toString(16).padStart(2, '0')\n);\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes: Uint8Array): string {\n  if (!isBytes(bytes)) throw new Error('Uint8Array expected');\n  // pre-caching improves the speed 6x\n  let hex = '';\n  for (let i = 0; i < bytes.length; i++) {\n    hex += hexes[bytes[i]];\n  }\n  return hex;\n}\n\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, _A: 65, _F: 70, _a: 97, _f: 102 } as const;\nfunction asciiToBase16(char: number): number | undefined {\n  if (char >= asciis._0 && char <= asciis._9) return char - asciis._0;\n  if (char >= asciis._A && char <= asciis._F) return char - (asciis._A - 10);\n  if (char >= asciis._a && char <= asciis._f) return char - (asciis._a - 10);\n  return;\n}\n\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  const hl = hex.length;\n  const al = hl / 2;\n  if (hl % 2) throw new Error('padded hex string expected, got unpadded hex of length ' + hl);\n  const array = new Uint8Array(al);\n  for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n    const n1 = asciiToBase16(hex.charCodeAt(hi));\n    const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n    if (n1 === undefined || n2 === undefined) {\n      const char = hex[hi] + hex[hi + 1];\n      throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n    }\n    array[ai] = n1 * 16 + n2;\n  }\n  return array;\n}\n\nexport function hexToNumber(hex: string): bigint {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  // Big Endian\n  return BigInt(hex === '' ? '0' : `0x${hex}`);\n}\n\n// BE: Big Endian, LE: Little Endian\nexport function bytesToNumberBE(bytes: Uint8Array): bigint {\n  return hexToNumber(bytesToHex(bytes));\n}\n\nexport function numberToBytesBE(n: number | bigint, len: number): Uint8Array {\n  return hexToBytes(n.toString(16).padStart(len * 2, '0'));\n}\n\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => {};\n\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters: number, tick: number, cb: (i: number) => void) {\n  let ts = Date.now();\n  for (let i = 0; i < iters; i++) {\n    cb(i);\n    // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n    const diff = Date.now() - ts;\n    if (diff >= 0 && diff < tick) continue;\n    await nextTick();\n    ts += diff;\n  }\n}\n\n// Global symbols in both browsers and Node.js since v11\n// See https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n  return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n\nexport function bytesToUtf8(bytes: Uint8Array): string {\n  return new TextDecoder().decode(bytes);\n}\n\nexport type Input = Uint8Array | string;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data: Input): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  else if (isBytes(data)) data = data.slice();\n  else throw new Error(`expected Uint8Array, got ${typeof data}`);\n  return data;\n}\n\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  let sum = 0;\n  for (let i = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    if (!isBytes(a)) throw new Error('Uint8Array expected');\n    sum += a.length;\n  }\n  const res = new Uint8Array(sum);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    res.set(a, pad);\n    pad += a.length;\n  }\n  return res;\n}\n\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj: any) =>\n  Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\n\ntype EmptyObj = {};\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts?: T2\n): T1 & T2 {\n  if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n    throw new Error('options must be object or undefined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\nexport function ensureBytes(b: any, len?: number) {\n  if (!isBytes(b)) throw new Error('Uint8Array expected');\n  if (typeof len === 'number')\n    if (b.length !== len) throw new Error(`Uint8Array length ${len} expected`);\n}\n\n// Compares 2 u8a-s in kinda constant time\nexport function equalBytes(a: Uint8Array, b: Uint8Array) {\n  if (a.length !== b.length) return false;\n  let diff = 0;\n  for (let i = 0; i < a.length; i++) diff |= a[i] ^ b[i];\n  return diff === 0;\n}\n\n// For runtime check if class implements interface\nexport abstract class Hash<T extends Hash<T>> {\n  abstract blockLen: number; // Bytes per block\n  abstract outputLen: number; // Bytes in output\n  abstract update(buf: Input): this;\n  // Writes digest into buf\n  abstract digestInto(buf: Uint8Array): void;\n  abstract digest(): Uint8Array;\n  /**\n   * Resets internal state. Makes Hash instance unusable.\n   * Reset is impossible for keyed hashes if key is consumed into state. If digest is not consumed\n   * by user, they will need to manually call `destroy()` when zeroing is necessary.\n   */\n  abstract destroy(): void;\n}\n\n// This will allow to re-use with composable things like packed & base encoders\n// Also, we probably can make tags composable\nexport type Cipher = {\n  encrypt(plaintext: Uint8Array): Uint8Array;\n  decrypt(ciphertext: Uint8Array): Uint8Array;\n};\n\nexport type AsyncCipher = {\n  encrypt(plaintext: Uint8Array): Promise<Uint8Array>;\n  decrypt(ciphertext: Uint8Array): Promise<Uint8Array>;\n};\n\nexport type CipherWithOutput = Cipher & {\n  encrypt(plaintext: Uint8Array, output?: Uint8Array): Uint8Array;\n  decrypt(ciphertext: Uint8Array, output?: Uint8Array): Uint8Array;\n};\n\n// Params is outside return type, so it is accessible before calling constructor\n// If function support multiple nonceLength's, we return best one\nexport type CipherParams = { blockSize: number; nonceLength?: number; tagLength?: number };\nexport type CipherCons<T extends any[]> = (key: Uint8Array, ...args: T) => Cipher;\nexport const wrapCipher = <C extends CipherCons<any>, P extends CipherParams>(\n  params: P,\n  c: C\n): C & P => {\n  Object.assign(c, params);\n  return c as C & P;\n};\n\nexport type XorStream = (\n  key: Uint8Array,\n  nonce: Uint8Array,\n  data: Uint8Array,\n  output?: Uint8Array,\n  counter?: number\n) => Uint8Array;\n\n// Polyfill for Safari 14\nexport function setBigUint64(\n  view: DataView,\n  byteOffset: number,\n  value: bigint,\n  isLE: boolean\n): void {\n  if (typeof view.setBigUint64 === 'function') return view.setBigUint64(byteOffset, value, isLE);\n  const _32n = BigInt(32);\n  const _u32_max = BigInt(0xffffffff);\n  const wh = Number((value >> _32n) & _u32_max);\n  const wl = Number(value & _u32_max);\n  const h = isLE ? 4 : 0;\n  const l = isLE ? 0 : 4;\n  view.setUint32(byteOffset + h, wh, isLE);\n  view.setUint32(byteOffset + l, wl, isLE);\n}\n\nexport function u64Lengths(ciphertext: Uint8Array, AAD?: Uint8Array) {\n  const num = new Uint8Array(16);\n  const view = createView(num);\n  setBigUint64(view, 0, BigInt(AAD ? AAD.length : 0), true);\n  setBigUint64(view, 8, BigInt(ciphertext.length), true);\n  return num;\n}\n", "function number(n: number) {\n  if (!Number.isSafeInteger(n) || n < 0) throw new Error(`wrong positive integer: ${n}`);\n}\n\nfunction bool(b: boolean) {\n  if (typeof b !== 'boolean') throw new Error(`boolean expected, not ${b}`);\n}\n\n// TODO: merge with utils\nfunction isBytes(a: unknown): a is Uint8Array {\n  return (\n    a != null &&\n    typeof a === 'object' &&\n    (a instanceof Uint8Array || a.constructor.name === 'Uint8Array')\n  );\n}\n\nfunction bytes(b: Uint8Array | undefined, ...lengths: number[]) {\n  if (!isBytes(b)) throw new Error('Uint8Array expected');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new Error(`Uint8Array expected of length ${lengths}, not of length=${b.length}`);\n}\n\nexport type Hash = {\n  (data: Uint8Array): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create: any;\n};\nfunction hash(hash: Hash) {\n  if (typeof hash !== 'function' || typeof hash.create !== 'function')\n    throw new Error('hash must be wrapped by utils.wrapConstructor');\n  number(hash.outputLen);\n  number(hash.blockLen);\n}\n\nfunction exists(instance: any, checkFinished = true) {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\nfunction output(out: any, instance: any) {\n  bytes(out);\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n  }\n}\n\nexport { number, bool, bytes, hash, exists, output };\nconst assert = { number, bool, bytes, hash, exists, output };\nexport default assert;\n", "import { exists as aexists, output as aoutput } from './_assert.js';\nimport { Input, ensureBytes, toBytes, Hash } from './utils.js';\n\n// Poly1305 is a fast and parallel secret-key message-authentication code.\n// https://cr.yp.to/mac.html, https://cr.yp.to/mac/poly1305-20050329.pdf\n// https://datatracker.ietf.org/doc/html/rfc8439\n\n// Based on Public Domain poly1305-donna https://github.com/floodyberry/poly1305-donna\nconst u8to16 = (a: Uint8Array, i: number) => (a[i++] & 0xff) | ((a[i++] & 0xff) << 8);\nclass Poly1305 implements Hash<Poly1305> {\n  readonly blockLen = 16;\n  readonly outputLen = 16;\n  private buffer = new Uint8Array(16);\n  private r = new Uint16Array(10);\n  private h = new Uint16Array(10);\n  private pad = new Uint16Array(8);\n  private pos = 0;\n  protected finished = false;\n\n  constructor(key: Input) {\n    key = toBytes(key);\n    ensureBytes(key, 32);\n    const t0 = u8to16(key, 0);\n    const t1 = u8to16(key, 2);\n    const t2 = u8to16(key, 4);\n    const t3 = u8to16(key, 6);\n    const t4 = u8to16(key, 8);\n    const t5 = u8to16(key, 10);\n    const t6 = u8to16(key, 12);\n    const t7 = u8to16(key, 14);\n\n    // https://github.com/floodyberry/poly1305-donna/blob/e6ad6e091d30d7f4ec2d4f978be1fcfcbce72781/poly1305-donna-16.h#L47\n    this.r[0] = t0 & 0x1fff;\n    this.r[1] = ((t0 >>> 13) | (t1 << 3)) & 0x1fff;\n    this.r[2] = ((t1 >>> 10) | (t2 << 6)) & 0x1f03;\n    this.r[3] = ((t2 >>> 7) | (t3 << 9)) & 0x1fff;\n    this.r[4] = ((t3 >>> 4) | (t4 << 12)) & 0x00ff;\n    this.r[5] = (t4 >>> 1) & 0x1ffe;\n    this.r[6] = ((t4 >>> 14) | (t5 << 2)) & 0x1fff;\n    this.r[7] = ((t5 >>> 11) | (t6 << 5)) & 0x1f81;\n    this.r[8] = ((t6 >>> 8) | (t7 << 8)) & 0x1fff;\n    this.r[9] = (t7 >>> 5) & 0x007f;\n    for (let i = 0; i < 8; i++) this.pad[i] = u8to16(key, 16 + 2 * i);\n  }\n\n  private process(data: Uint8Array, offset: number, isLast = false) {\n    const hibit = isLast ? 0 : 1 << 11;\n    const { h, r } = this;\n    const r0 = r[0];\n    const r1 = r[1];\n    const r2 = r[2];\n    const r3 = r[3];\n    const r4 = r[4];\n    const r5 = r[5];\n    const r6 = r[6];\n    const r7 = r[7];\n    const r8 = r[8];\n    const r9 = r[9];\n\n    const t0 = u8to16(data, offset + 0);\n    const t1 = u8to16(data, offset + 2);\n    const t2 = u8to16(data, offset + 4);\n    const t3 = u8to16(data, offset + 6);\n    const t4 = u8to16(data, offset + 8);\n    const t5 = u8to16(data, offset + 10);\n    const t6 = u8to16(data, offset + 12);\n    const t7 = u8to16(data, offset + 14);\n\n    let h0 = h[0] + (t0 & 0x1fff);\n    let h1 = h[1] + (((t0 >>> 13) | (t1 << 3)) & 0x1fff);\n    let h2 = h[2] + (((t1 >>> 10) | (t2 << 6)) & 0x1fff);\n    let h3 = h[3] + (((t2 >>> 7) | (t3 << 9)) & 0x1fff);\n    let h4 = h[4] + (((t3 >>> 4) | (t4 << 12)) & 0x1fff);\n    let h5 = h[5] + ((t4 >>> 1) & 0x1fff);\n    let h6 = h[6] + (((t4 >>> 14) | (t5 << 2)) & 0x1fff);\n    let h7 = h[7] + (((t5 >>> 11) | (t6 << 5)) & 0x1fff);\n    let h8 = h[8] + (((t6 >>> 8) | (t7 << 8)) & 0x1fff);\n    let h9 = h[9] + ((t7 >>> 5) | hibit);\n\n    let c = 0;\n\n    let d0 = c + h0 * r0 + h1 * (5 * r9) + h2 * (5 * r8) + h3 * (5 * r7) + h4 * (5 * r6);\n    c = d0 >>> 13;\n    d0 &= 0x1fff;\n    d0 += h5 * (5 * r5) + h6 * (5 * r4) + h7 * (5 * r3) + h8 * (5 * r2) + h9 * (5 * r1);\n    c += d0 >>> 13;\n    d0 &= 0x1fff;\n\n    let d1 = c + h0 * r1 + h1 * r0 + h2 * (5 * r9) + h3 * (5 * r8) + h4 * (5 * r7);\n    c = d1 >>> 13;\n    d1 &= 0x1fff;\n    d1 += h5 * (5 * r6) + h6 * (5 * r5) + h7 * (5 * r4) + h8 * (5 * r3) + h9 * (5 * r2);\n    c += d1 >>> 13;\n    d1 &= 0x1fff;\n\n    let d2 = c + h0 * r2 + h1 * r1 + h2 * r0 + h3 * (5 * r9) + h4 * (5 * r8);\n    c = d2 >>> 13;\n    d2 &= 0x1fff;\n    d2 += h5 * (5 * r7) + h6 * (5 * r6) + h7 * (5 * r5) + h8 * (5 * r4) + h9 * (5 * r3);\n    c += d2 >>> 13;\n    d2 &= 0x1fff;\n\n    let d3 = c + h0 * r3 + h1 * r2 + h2 * r1 + h3 * r0 + h4 * (5 * r9);\n    c = d3 >>> 13;\n    d3 &= 0x1fff;\n    d3 += h5 * (5 * r8) + h6 * (5 * r7) + h7 * (5 * r6) + h8 * (5 * r5) + h9 * (5 * r4);\n    c += d3 >>> 13;\n    d3 &= 0x1fff;\n\n    let d4 = c + h0 * r4 + h1 * r3 + h2 * r2 + h3 * r1 + h4 * r0;\n    c = d4 >>> 13;\n    d4 &= 0x1fff;\n    d4 += h5 * (5 * r9) + h6 * (5 * r8) + h7 * (5 * r7) + h8 * (5 * r6) + h9 * (5 * r5);\n    c += d4 >>> 13;\n    d4 &= 0x1fff;\n\n    let d5 = c + h0 * r5 + h1 * r4 + h2 * r3 + h3 * r2 + h4 * r1;\n    c = d5 >>> 13;\n    d5 &= 0x1fff;\n    d5 += h5 * r0 + h6 * (5 * r9) + h7 * (5 * r8) + h8 * (5 * r7) + h9 * (5 * r6);\n    c += d5 >>> 13;\n    d5 &= 0x1fff;\n\n    let d6 = c + h0 * r6 + h1 * r5 + h2 * r4 + h3 * r3 + h4 * r2;\n    c = d6 >>> 13;\n    d6 &= 0x1fff;\n    d6 += h5 * r1 + h6 * r0 + h7 * (5 * r9) + h8 * (5 * r8) + h9 * (5 * r7);\n    c += d6 >>> 13;\n    d6 &= 0x1fff;\n\n    let d7 = c + h0 * r7 + h1 * r6 + h2 * r5 + h3 * r4 + h4 * r3;\n    c = d7 >>> 13;\n    d7 &= 0x1fff;\n    d7 += h5 * r2 + h6 * r1 + h7 * r0 + h8 * (5 * r9) + h9 * (5 * r8);\n    c += d7 >>> 13;\n    d7 &= 0x1fff;\n\n    let d8 = c + h0 * r8 + h1 * r7 + h2 * r6 + h3 * r5 + h4 * r4;\n    c = d8 >>> 13;\n    d8 &= 0x1fff;\n    d8 += h5 * r3 + h6 * r2 + h7 * r1 + h8 * r0 + h9 * (5 * r9);\n    c += d8 >>> 13;\n    d8 &= 0x1fff;\n\n    let d9 = c + h0 * r9 + h1 * r8 + h2 * r7 + h3 * r6 + h4 * r5;\n    c = d9 >>> 13;\n    d9 &= 0x1fff;\n    d9 += h5 * r4 + h6 * r3 + h7 * r2 + h8 * r1 + h9 * r0;\n    c += d9 >>> 13;\n    d9 &= 0x1fff;\n\n    c = ((c << 2) + c) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = c >>> 13;\n    d1 += c;\n\n    h[0] = d0;\n    h[1] = d1;\n    h[2] = d2;\n    h[3] = d3;\n    h[4] = d4;\n    h[5] = d5;\n    h[6] = d6;\n    h[7] = d7;\n    h[8] = d8;\n    h[9] = d9;\n  }\n\n  private finalize() {\n    const { h, pad } = this;\n    const g = new Uint16Array(10);\n    let c = h[1] >>> 13;\n    h[1] &= 0x1fff;\n    for (let i = 2; i < 10; i++) {\n      h[i] += c;\n      c = h[i] >>> 13;\n      h[i] &= 0x1fff;\n    }\n    h[0] += c * 5;\n    c = h[0] >>> 13;\n    h[0] &= 0x1fff;\n    h[1] += c;\n    c = h[1] >>> 13;\n    h[1] &= 0x1fff;\n    h[2] += c;\n\n    g[0] = h[0] + 5;\n    c = g[0] >>> 13;\n    g[0] &= 0x1fff;\n    for (let i = 1; i < 10; i++) {\n      g[i] = h[i] + c;\n      c = g[i] >>> 13;\n      g[i] &= 0x1fff;\n    }\n    g[9] -= 1 << 13;\n\n    let mask = (c ^ 1) - 1;\n    for (let i = 0; i < 10; i++) g[i] &= mask;\n    mask = ~mask;\n    for (let i = 0; i < 10; i++) h[i] = (h[i] & mask) | g[i];\n    h[0] = (h[0] | (h[1] << 13)) & 0xffff;\n    h[1] = ((h[1] >>> 3) | (h[2] << 10)) & 0xffff;\n    h[2] = ((h[2] >>> 6) | (h[3] << 7)) & 0xffff;\n    h[3] = ((h[3] >>> 9) | (h[4] << 4)) & 0xffff;\n    h[4] = ((h[4] >>> 12) | (h[5] << 1) | (h[6] << 14)) & 0xffff;\n    h[5] = ((h[6] >>> 2) | (h[7] << 11)) & 0xffff;\n    h[6] = ((h[7] >>> 5) | (h[8] << 8)) & 0xffff;\n    h[7] = ((h[8] >>> 8) | (h[9] << 5)) & 0xffff;\n\n    let f = h[0] + pad[0];\n    h[0] = f & 0xffff;\n    for (let i = 1; i < 8; i++) {\n      f = (((h[i] + pad[i]) | 0) + (f >>> 16)) | 0;\n      h[i] = f & 0xffff;\n    }\n  }\n  update(data: Input): this {\n    aexists(this);\n    const { buffer, blockLen } = this;\n    data = toBytes(data);\n    const len = data.length;\n\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      // Fast path: we have at least one block in input\n      if (take === blockLen) {\n        for (; blockLen <= len - pos; pos += blockLen) this.process(data, pos);\n        continue;\n      }\n      buffer.set(data.subarray(pos, pos + take), this.pos);\n      this.pos += take;\n      pos += take;\n      if (this.pos === blockLen) {\n        this.process(buffer, 0, false);\n        this.pos = 0;\n      }\n    }\n    return this;\n  }\n  destroy() {\n    this.h.fill(0);\n    this.r.fill(0);\n    this.buffer.fill(0);\n    this.pad.fill(0);\n  }\n  digestInto(out: Uint8Array) {\n    aexists(this);\n    aoutput(out, this);\n    this.finished = true;\n    const { buffer, h } = this;\n    let { pos } = this;\n    if (pos) {\n      buffer[pos++] = 1;\n      // buffer.subarray(pos).fill(0);\n      for (; pos < 16; pos++) buffer[pos] = 0;\n      this.process(buffer, 0, true);\n    }\n    this.finalize();\n    let opos = 0;\n    for (let i = 0; i < 8; i++) {\n      out[opos++] = h[i] >>> 0;\n      out[opos++] = h[i] >>> 8;\n    }\n    return out;\n  }\n  digest(): Uint8Array {\n    const { buffer, outputLen } = this;\n    this.digestInto(buffer);\n    const res = buffer.slice(0, outputLen);\n    this.destroy();\n    return res;\n  }\n}\n\nexport type CHash = ReturnType<typeof wrapConstructorWithKey>;\nexport function wrapConstructorWithKey<H extends Hash<H>>(hashCons: (key: Input) => Hash<H>) {\n  const hashC = (msg: Input, key: Input): Uint8Array => hashCons(key).update(toBytes(msg)).digest();\n  const tmp = hashCons(new Uint8Array(32));\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (key: Input) => hashCons(key);\n  return hashC;\n}\n\nexport const poly1305 = wrapConstructorWithKey((key) => new Poly1305(key));\n", "// Basic utils for ARX (add-rotate-xor) salsa and chacha ciphers.\nimport { number as anumber, bytes as abytes, bool as abool } from './_assert.js';\nimport { XorStream, checkOpts, u32, utf8ToBytes } from './utils.js';\n\n/*\nRFC8439 requires multi-step cipher stream, where\nauthKey starts with counter: 0, actual msg with counter: 1.\n\nFor this, we need a way to re-use nonce / counter:\n\n    const counter = new Uint8Array(4);\n    chacha(..., counter, ...); // counter is now 1\n    chacha(..., counter, ...); // counter is now 2\n\nThis is complicated:\n\n- 32-bit counters are enough, no need for 64-bit: max ArrayBuffer size in JS is 4GB\n- Original papers don't allow mutating counters\n- Counter overflow is undefined [^1]\n- Idea A: allow providing (nonce | counter) instead of just nonce, re-use it\n- Caveat: Cannot be re-used through all cases:\n- * chacha has (counter | nonce)\n- * xchacha has (nonce16 | counter | nonce16)\n- Idea B: separate nonce / counter and provide separate API for counter re-use\n- Caveat: there are different counter sizes depending on an algorithm.\n- salsa & chacha also differ in structures of key & sigma:\n  salsa20:      s[0] | k(4) | s[1] | nonce(2) | ctr(2) | s[2] | k(4) | s[3]\n  chacha:       s(4) | k(8) | ctr(1) | nonce(3)\n  chacha20orig: s(4) | k(8) | ctr(2) | nonce(2)\n- Idea C: helper method such as `setSalsaState(key, nonce, sigma, data)`\n- Caveat: we can't re-use counter array\n\nxchacha [^2] uses the subkey and remaining 8 byte nonce with ChaCha20 as normal\n(prefixed by 4 NUL bytes, since [RFC8439] specifies a 12-byte nonce).\n\n[^1]: https://mailarchive.ietf.org/arch/msg/cfrg/gsOnTJzcbgG6OqD8Sc0GO5aR_tU/\n[^2]: https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-xchacha#appendix-A.2\n*/\n\nconst sigma16 = utf8ToBytes('expand 16-byte k');\nconst sigma32 = utf8ToBytes('expand 32-byte k');\nconst sigma16_32 = u32(sigma16);\nconst sigma32_32 = u32(sigma32);\n\nexport function rotl(a: number, b: number): number {\n  return (a << b) | (a >>> (32 - b));\n}\n\nexport type CipherCoreFn = (\n  sigma: Uint32Array,\n  key: Uint32Array,\n  nonce: Uint32Array,\n  output: Uint32Array,\n  counter: number,\n  rounds?: number\n) => void;\n\nexport type ExtendNonceFn = (\n  sigma: Uint32Array,\n  key: Uint32Array,\n  input: Uint32Array,\n  output: Uint32Array\n) => void;\n\nexport type CipherOpts = {\n  allowShortKeys?: boolean; // Original salsa / chacha allow 16-byte keys\n  extendNonceFn?: ExtendNonceFn;\n  counterLength?: number;\n  counterRight?: boolean; // right: nonce|counter; left: counter|nonce\n  rounds?: number;\n};\n\n// Is byte array aligned to 4 byte offset (u32)?\nfunction isAligned32(b: Uint8Array) {\n  return b.byteOffset % 4 === 0;\n}\n\n// Salsa and Chacha block length is always 512-bit\nconst BLOCK_LEN = 64;\nconst BLOCK_LEN32 = 16;\n\n// new Uint32Array([2**32])   // => Uint32Array(1) [ 0 ]\n// new Uint32Array([2**32-1]) // => Uint32Array(1) [ 4294967295 ]\nconst MAX_COUNTER = 2 ** 32 - 1;\n\nconst U32_EMPTY = new Uint32Array();\nfunction runCipher(\n  core: CipherCoreFn,\n  sigma: Uint32Array,\n  key: Uint32Array,\n  nonce: Uint32Array,\n  data: Uint8Array,\n  output: Uint8Array,\n  counter: number,\n  rounds: number\n): void {\n  const len = data.length;\n  const block = new Uint8Array(BLOCK_LEN);\n  const b32 = u32(block);\n  // Make sure that buffers aligned to 4 bytes\n  const isAligned = isAligned32(data) && isAligned32(output);\n  const d32 = isAligned ? u32(data) : U32_EMPTY;\n  const o32 = isAligned ? u32(output) : U32_EMPTY;\n  for (let pos = 0; pos < len; counter++) {\n    core(sigma, key, nonce, b32, counter, rounds);\n    if (counter >= MAX_COUNTER) throw new Error('arx: counter overflow');\n    const take = Math.min(BLOCK_LEN, len - pos);\n    // aligned to 4 bytes\n    if (isAligned && take === BLOCK_LEN) {\n      const pos32 = pos / 4;\n      if (pos % 4 !== 0) throw new Error('arx: invalid block position');\n      for (let j = 0, posj: number; j < BLOCK_LEN32; j++) {\n        posj = pos32 + j;\n        o32[posj] = d32[posj] ^ b32[j];\n      }\n      pos += BLOCK_LEN;\n      continue;\n    }\n    for (let j = 0, posj; j < take; j++) {\n      posj = pos + j;\n      output[posj] = data[posj] ^ block[j];\n    }\n    pos += take;\n  }\n}\n\nexport function createCipher(core: CipherCoreFn, opts: CipherOpts): XorStream {\n  const { allowShortKeys, extendNonceFn, counterLength, counterRight, rounds } = checkOpts(\n    { allowShortKeys: false, counterLength: 8, counterRight: false, rounds: 20 },\n    opts\n  );\n  if (typeof core !== 'function') throw new Error('core must be a function');\n  anumber(counterLength);\n  anumber(rounds);\n  abool(counterRight);\n  abool(allowShortKeys);\n  return (\n    key: Uint8Array,\n    nonce: Uint8Array,\n    data: Uint8Array,\n    output?: Uint8Array,\n    counter = 0\n  ): Uint8Array => {\n    abytes(key);\n    abytes(nonce);\n    abytes(data);\n    const len = data.length;\n    if (!output) output = new Uint8Array(len);\n    abytes(output);\n    anumber(counter);\n    if (counter < 0 || counter >= MAX_COUNTER) throw new Error('arx: counter overflow');\n    if (output.length < len)\n      throw new Error(`arx: output (${output.length}) is shorter than data (${len})`);\n    const toClean = [];\n\n    // Key & sigma\n    // key=16 -> sigma16, k=key|key\n    // key=32 -> sigma32, k=key\n    let l = key.length,\n      k: Uint8Array,\n      sigma: Uint32Array;\n    if (l === 32) {\n      k = key.slice();\n      toClean.push(k);\n      sigma = sigma32_32;\n    } else if (l === 16 && allowShortKeys) {\n      k = new Uint8Array(32);\n      k.set(key);\n      k.set(key, 16);\n      sigma = sigma16_32;\n      toClean.push(k);\n    } else {\n      throw new Error(`arx: invalid 32-byte key, got length=${l}`);\n    }\n\n    // Nonce\n    // salsa20:      8   (8-byte counter)\n    // chacha20orig: 8   (8-byte counter)\n    // chacha20:     12  (4-byte counter)\n    // xsalsa20:     24  (16 -> hsalsa,  8 -> old nonce)\n    // xchacha20:    24  (16 -> hchacha, 8 -> old nonce)\n    // Align nonce to 4 bytes\n    if (!isAligned32(nonce)) {\n      nonce = nonce.slice();\n      toClean.push(nonce);\n    }\n\n    const k32 = u32(k);\n    // hsalsa & hchacha: handle extended nonce\n    if (extendNonceFn) {\n      if (nonce.length !== 24) throw new Error(`arx: extended nonce must be 24 bytes`);\n      extendNonceFn(sigma, k32, u32(nonce.subarray(0, 16)), k32);\n      nonce = nonce.subarray(16);\n    }\n\n    // Handle nonce counter\n    const nonceNcLen = 16 - counterLength;\n    if (nonceNcLen !== nonce.length)\n      throw new Error(`arx: nonce must be ${nonceNcLen} or 16 bytes`);\n\n    // Pad counter when nonce is 64 bit\n    if (nonceNcLen !== 12) {\n      const nc = new Uint8Array(12);\n      nc.set(nonce, counterRight ? 0 : 12 - nonce.length);\n      nonce = nc;\n      toClean.push(nonce);\n    }\n    const n32 = u32(nonce);\n    runCipher(core, sigma, k32, n32, data, output, counter, rounds);\n    while (toClean.length > 0) toClean.pop()!.fill(0);\n    return output;\n  };\n}\n", "import {\n  wrapCipher,\n  CipherWithOutput,\n  XorStream,\n  createView,\n  ensureBytes,\n  equalBytes,\n  setBigUint64,\n} from './utils.js';\nimport { poly1305 } from './_poly1305.js';\nimport { createCipher, rotl } from './_arx.js';\n\n// ChaCha20 stream cipher was released in 2008. ChaCha aims to increase\n// the diffusion per round, but had slightly less cryptanalysis.\n// https://cr.yp.to/chacha.html, http://cr.yp.to/chacha/chacha-20080128.pdf\n\n/**\n * ChaCha core function.\n */\n// prettier-ignore\nfunction chachaCore(\n  s: Uint32Array, k: Uint32Array, n: Uint32Array, out: Uint32Array, cnt: number, rounds = 20\n): void {\n  let y00 = s[0], y01 = s[1], y02 = s[2], y03 = s[3], // \"expa\"   \"nd 3\"  \"2-by\"  \"te k\"\n      y04 = k[0], y05 = k[1], y06 = k[2], y07 = k[3], // Key      Key     Key     Key\n      y08 = k[4], y09 = k[5], y10 = k[6], y11 = k[7], // Key      Key     Key     Key\n      y12 = cnt,  y13 = n[0], y14 = n[1], y15 = n[2]; // Counter  Counter\tNonce   Nonce\n  // Save state to temporary variables\n  let x00 = y00, x01 = y01, x02 = y02, x03 = y03,\n      x04 = y04, x05 = y05, x06 = y06, x07 = y07,\n      x08 = y08, x09 = y09, x10 = y10, x11 = y11,\n      x12 = y12, x13 = y13, x14 = y14, x15 = y15;\n  for (let r = 0; r < rounds; r += 2) {\n    x00 = (x00 + x04) | 0; x12 = rotl(x12 ^ x00, 16);\n    x08 = (x08 + x12) | 0; x04 = rotl(x04 ^ x08, 12);\n    x00 = (x00 + x04) | 0; x12 = rotl(x12 ^ x00, 8);\n    x08 = (x08 + x12) | 0; x04 = rotl(x04 ^ x08, 7);\n\n    x01 = (x01 + x05) | 0; x13 = rotl(x13 ^ x01, 16);\n    x09 = (x09 + x13) | 0; x05 = rotl(x05 ^ x09, 12);\n    x01 = (x01 + x05) | 0; x13 = rotl(x13 ^ x01, 8);\n    x09 = (x09 + x13) | 0; x05 = rotl(x05 ^ x09, 7);\n\n    x02 = (x02 + x06) | 0; x14 = rotl(x14 ^ x02, 16);\n    x10 = (x10 + x14) | 0; x06 = rotl(x06 ^ x10, 12);\n    x02 = (x02 + x06) | 0; x14 = rotl(x14 ^x02, 8);\n    x10 = (x10 + x14) | 0; x06 = rotl(x06 ^ x10, 7);\n\n    x03 = (x03 + x07) | 0; x15 = rotl(x15 ^ x03, 16);\n    x11 = (x11 + x15) | 0; x07 = rotl(x07 ^ x11, 12);\n    x03 = (x03 + x07) | 0; x15 = rotl(x15 ^ x03, 8)\n    x11 = (x11 + x15) | 0; x07 = rotl(x07 ^ x11, 7);\n\n    x00 = (x00 + x05) | 0; x15 = rotl(x15 ^ x00, 16);\n    x10 = (x10 + x15) | 0; x05 = rotl(x05 ^ x10, 12);\n    x00 = (x00 + x05) | 0; x15 = rotl(x15 ^ x00, 8);\n    x10 = (x10 + x15) | 0; x05 = rotl(x05 ^ x10, 7);\n\n    x01 = (x01 + x06) | 0; x12 = rotl(x12 ^ x01, 16);\n    x11 = (x11 + x12) | 0; x06 = rotl(x06 ^ x11, 12);\n    x01 = (x01 + x06) | 0; x12 = rotl(x12 ^ x01, 8);\n    x11 = (x11 + x12) | 0; x06 = rotl(x06 ^ x11, 7);\n\n    x02 = (x02 + x07) | 0; x13 = rotl(x13 ^ x02, 16);\n    x08 = (x08 + x13) | 0; x07 = rotl(x07 ^ x08, 12);\n    x02 = (x02 + x07) | 0; x13 = rotl(x13 ^ x02, 8);\n    x08 = (x08 + x13) | 0; x07 = rotl(x07 ^ x08, 7);\n\n    x03 = (x03 + x04) | 0; x14 = rotl(x14 ^ x03, 16)\n    x09 = (x09 + x14) | 0; x04 = rotl(x04 ^ x09, 12);\n    x03 = (x03 + x04) | 0; x14 = rotl(x14 ^ x03, 8);\n    x09 = (x09 + x14) | 0; x04 = rotl(x04 ^ x09, 7);\n  }\n  // Write output\n  let oi = 0;\n  out[oi++] = (y00 + x00) | 0; out[oi++] = (y01 + x01) | 0;\n  out[oi++] = (y02 + x02) | 0; out[oi++] = (y03 + x03) | 0;\n  out[oi++] = (y04 + x04) | 0; out[oi++] = (y05 + x05) | 0;\n  out[oi++] = (y06 + x06) | 0; out[oi++] = (y07 + x07) | 0;\n  out[oi++] = (y08 + x08) | 0; out[oi++] = (y09 + x09) | 0;\n  out[oi++] = (y10 + x10) | 0; out[oi++] = (y11 + x11) | 0;\n  out[oi++] = (y12 + x12) | 0; out[oi++] = (y13 + x13) | 0;\n  out[oi++] = (y14 + x14) | 0; out[oi++] = (y15 + x15) | 0;\n}\n/**\n * hchacha helper method, used primarily in xchacha, to hash\n * key and nonce into key' and nonce'.\n * Same as chachaCore, but there doesn't seem to be a way to move the block\n * out without 25% performance hit.\n */\n// prettier-ignore\nexport function hchacha(\n  s: Uint32Array, k: Uint32Array, i: Uint32Array, o32: Uint32Array\n) {\n  let x00 = s[0], x01 = s[1], x02 = s[2], x03 = s[3],\n      x04 = k[0], x05 = k[1], x06 = k[2], x07 = k[3],\n      x08 = k[4], x09 = k[5], x10 = k[6], x11 = k[7],\n      x12 = i[0], x13 = i[1], x14 = i[2], x15 = i[3];\n  for (let r = 0; r < 20; r += 2) {\n    x00 = (x00 + x04) | 0; x12 = rotl(x12 ^ x00, 16);\n    x08 = (x08 + x12) | 0; x04 = rotl(x04 ^ x08, 12);\n    x00 = (x00 + x04) | 0; x12 = rotl(x12 ^ x00, 8);\n    x08 = (x08 + x12) | 0; x04 = rotl(x04 ^ x08, 7);\n\n    x01 = (x01 + x05) | 0; x13 = rotl(x13 ^ x01, 16);\n    x09 = (x09 + x13) | 0; x05 = rotl(x05 ^ x09, 12);\n    x01 = (x01 + x05) | 0; x13 = rotl(x13 ^ x01, 8);\n    x09 = (x09 + x13) | 0; x05 = rotl(x05 ^ x09, 7);\n\n    x02 = (x02 + x06) | 0; x14 = rotl(x14 ^ x02, 16);\n    x10 = (x10 + x14) | 0; x06 = rotl(x06 ^ x10, 12);\n    x02 = (x02 + x06) | 0; x14 = rotl(x14 ^ x02, 8);\n    x10 = (x10 + x14) | 0; x06 = rotl(x06 ^ x10, 7);\n\n    x03 = (x03 + x07) | 0; x15 = rotl(x15 ^ x03, 16);\n    x11 = (x11 + x15) | 0; x07 = rotl(x07 ^ x11, 12);\n    x03 = (x03 + x07) | 0; x15 = rotl(x15 ^ x03, 8)\n    x11 = (x11 + x15) | 0; x07 = rotl(x07 ^ x11, 7);\n\n    x00 = (x00 + x05) | 0; x15 = rotl(x15 ^ x00, 16);\n    x10 = (x10 + x15) | 0; x05 = rotl(x05 ^ x10, 12);\n    x00 = (x00 + x05) | 0; x15 = rotl(x15 ^ x00, 8);\n    x10 = (x10 + x15) | 0; x05 = rotl(x05 ^ x10, 7);\n\n    x01 = (x01 + x06) | 0; x12 = rotl(x12 ^ x01, 16);\n    x11 = (x11 + x12) | 0; x06 = rotl(x06 ^ x11, 12);\n    x01 = (x01 + x06) | 0; x12 = rotl(x12 ^ x01, 8);\n    x11 = (x11 + x12) | 0; x06 = rotl(x06 ^ x11, 7);\n\n    x02 = (x02 + x07) | 0; x13 = rotl(x13 ^ x02, 16);\n    x08 = (x08 + x13) | 0; x07 = rotl(x07 ^ x08, 12);\n    x02 = (x02 + x07) | 0; x13 = rotl(x13 ^ x02, 8);\n    x08 = (x08 + x13) | 0; x07 = rotl(x07 ^ x08, 7);\n\n    x03 = (x03 + x04) | 0; x14 = rotl(x14 ^ x03, 16)\n    x09 = (x09 + x14) | 0; x04 = rotl(x04 ^ x09, 12);\n    x03 = (x03 + x04) | 0; x14 = rotl(x14 ^ x03, 8);\n    x09 = (x09 + x14) | 0; x04 = rotl(x04 ^ x09, 7);\n  }\n  let oi = 0;\n  o32[oi++] = x00; o32[oi++] = x01;\n  o32[oi++] = x02; o32[oi++] = x03;\n  o32[oi++] = x12; o32[oi++] = x13;\n  o32[oi++] = x14; o32[oi++] = x15;\n}\n/**\n * Original, non-RFC chacha20 from DJB. 8-byte nonce, 8-byte counter.\n */\nexport const chacha20orig = /* @__PURE__ */ createCipher(chachaCore, {\n  counterRight: false,\n  counterLength: 8,\n  allowShortKeys: true,\n});\n/**\n * ChaCha stream cipher. Conforms to RFC 8439 (IETF, TLS). 12-byte nonce, 4-byte counter.\n * With 12-byte nonce, it's not safe to use fill it with random (CSPRNG), due to collision chance.\n */\nexport const chacha20 = /* @__PURE__ */ createCipher(chachaCore, {\n  counterRight: false,\n  counterLength: 4,\n  allowShortKeys: false,\n});\n\n/**\n * XChaCha eXtended-nonce ChaCha. 24-byte nonce.\n * With 24-byte nonce, it's safe to use fill it with random (CSPRNG).\n * https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-xchacha\n */\nexport const xchacha20 = /* @__PURE__ */ createCipher(chachaCore, {\n  counterRight: false,\n  counterLength: 8,\n  extendNonceFn: hchacha,\n  allowShortKeys: false,\n});\n\n/**\n * Reduced 8-round chacha, described in original paper.\n */\nexport const chacha8 = /* @__PURE__ */ createCipher(chachaCore, {\n  counterRight: false,\n  counterLength: 4,\n  rounds: 8,\n});\n\n/**\n * Reduced 12-round chacha, described in original paper.\n */\nexport const chacha12 = /* @__PURE__ */ createCipher(chachaCore, {\n  counterRight: false,\n  counterLength: 4,\n  rounds: 12,\n});\n\nconst ZEROS16 = /* @__PURE__ */ new Uint8Array(16);\n// Pad to digest size with zeros\nconst updatePadded = (h: ReturnType<typeof poly1305.create>, msg: Uint8Array) => {\n  h.update(msg);\n  const left = msg.length % 16;\n  if (left) h.update(ZEROS16.subarray(left));\n};\n\nconst ZEROS32 = /* @__PURE__ */ new Uint8Array(32);\nfunction computeTag(\n  fn: XorStream,\n  key: Uint8Array,\n  nonce: Uint8Array,\n  data: Uint8Array,\n  AAD?: Uint8Array\n): Uint8Array {\n  const authKey = fn(key, nonce, ZEROS32);\n  const h = poly1305.create(authKey);\n  if (AAD) updatePadded(h, AAD);\n  updatePadded(h, data);\n  const num = new Uint8Array(16);\n  const view = createView(num);\n  setBigUint64(view, 0, BigInt(AAD ? AAD.length : 0), true);\n  setBigUint64(view, 8, BigInt(data.length), true);\n  h.update(num);\n  const res = h.digest();\n  authKey.fill(0);\n  return res;\n}\n\n/**\n * AEAD algorithm from RFC 8439.\n * Salsa20 and chacha (RFC 8439) use poly1305 differently.\n * We could have composed them similar to:\n * https://github.com/paulmillr/scure-base/blob/b266c73dde977b1dd7ef40ef7a23cc15aab526b3/index.ts#L250\n * But it's hard because of authKey:\n * In salsa20, authKey changes position in salsa stream.\n * In chacha, authKey can't be computed inside computeTag, it modifies the counter.\n */\nexport const _poly1305_aead =\n  (xorStream: XorStream) =>\n  (key: Uint8Array, nonce: Uint8Array, AAD?: Uint8Array): CipherWithOutput => {\n    const tagLength = 16;\n    ensureBytes(key, 32);\n    ensureBytes(nonce);\n    return {\n      encrypt: (plaintext: Uint8Array, output?: Uint8Array) => {\n        const plength = plaintext.length;\n        const clength = plength + tagLength;\n        if (output) {\n          ensureBytes(output, clength);\n        } else {\n          output = new Uint8Array(clength);\n        }\n        xorStream(key, nonce, plaintext, output, 1);\n        const tag = computeTag(xorStream, key, nonce, output.subarray(0, -tagLength), AAD);\n        output.set(tag, plength); // append tag\n        return output;\n      },\n      decrypt: (ciphertext: Uint8Array, output?: Uint8Array) => {\n        const clength = ciphertext.length;\n        const plength = clength - tagLength;\n        if (clength < tagLength)\n          throw new Error(`encrypted data must be at least ${tagLength} bytes`);\n        if (output) {\n          ensureBytes(output, plength);\n        } else {\n          output = new Uint8Array(plength);\n        }\n        const data = ciphertext.subarray(0, -tagLength);\n        const passedTag = ciphertext.subarray(-tagLength);\n        const tag = computeTag(xorStream, key, nonce, data, AAD);\n        if (!equalBytes(passedTag, tag)) throw new Error('invalid tag');\n        xorStream(key, nonce, data, output, 1);\n        return output;\n      },\n    };\n  };\n\n/**\n * ChaCha20-Poly1305 from RFC 8439.\n * With 12-byte nonce, it's not safe to use fill it with random (CSPRNG), due to collision chance.\n */\nexport const chacha20poly1305 = /* @__PURE__ */ wrapCipher(\n  { blockSize: 64, nonceLength: 12, tagLength: 16 },\n  _poly1305_aead(chacha20)\n);\n/**\n * XChaCha20-Poly1305 extended-nonce chacha.\n * https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-xchacha\n * With 24-byte nonce, it's safe to use fill it with random (CSPRNG).\n */\nexport const xchacha20poly1305 = /* @__PURE__ */ wrapCipher(\n  { blockSize: 64, nonceLength: 24, tagLength: 16 },\n  _poly1305_aead(xchacha20)\n);\n", "import { randomBytes, utf8ToBytes, concatBytes } from \"@noble/hashes/utils\";\nimport { sha256 } from \"@noble/hashes/sha2\";\nimport { extract as hkdf_extract, expand as hkdf_expand, } from \"@noble/hashes/hkdf\";\nimport { hmac } from \"@noble/hashes/hmac\";\nimport { secp256k1 } from \"@noble/curves/secp256k1\";\nimport { chacha20 } from \"@noble/ciphers/chacha\";\n// NIP-44 constants as specified in https://github.com/nostr-protocol/nips/blob/master/44.md\n// const VERSION = 2; // Original hardcoded version\n// NONCE_SIZE = 32; // NIP-44 v2 uses 32-byte nonce\n// const KEY_SIZE = 32; // 32-byte key for ChaCha20\n// const MAC_SIZE = 32; // HMAC-SHA256 produces 32-byte tags\n// Current supported version for encryption\nconst CURRENT_VERSION = 2;\n// Minimum supported version for decryption\nconst MIN_SUPPORTED_VERSION = 0;\n// Maximum supported version for decryption (for future extensibility)\nconst MAX_SUPPORTED_VERSION = 2;\n// NIP-44 Version-specific constants\n// Per NIP-44 specification (Decryption, point 4):\n// \"Implementations MUST be able to decrypt versions 0 and 1 for compatibility,\n// using the same algorithms as above [i.e., version 2's algorithms] with the respective version byte.\n// The `message_nonce` is 32 bytes, `mac` is 32 bytes.\"\n//\n// This confirms that all versions (0, 1, 2) use:\n// - 32-byte nonces\n// - 32-byte MAC tags\n// - Same cryptographic algorithms (ChaCha20, HMAC-SHA256, HKDF with \"nip44-v2\" salt)\nexport const NONCE_SIZE_V0 = 32;\nexport const NONCE_SIZE_V1 = 32;\nexport const NONCE_SIZE_V2 = 32;\nexport const MAC_SIZE_V0 = 32;\nexport const MAC_SIZE_V1 = 32;\nexport const MAC_SIZE_V2 = 32;\nconst KEY_SIZE = 32; // 32-byte key for ChaCha20 (consistent across versions)\nconst MIN_PLAINTEXT_SIZE = 1;\nconst MAX_PLAINTEXT_SIZE = 65535; // 64KB - 1\n// Payload format constants\nconst VERSION_BYTE_SIZE = 1;\n// NIP-44 payload length limits (from specification)\nconst MIN_BASE64_PAYLOAD_LENGTH = 132; // Minimum base64 payload length\nconst MAX_BASE64_PAYLOAD_LENGTH = 87472; // Maximum base64 payload length\nconst MIN_DECODED_PAYLOAD_LENGTH = 99; // Minimum decoded payload length\nconst MAX_DECODED_PAYLOAD_LENGTH = 65603; // Maximum decoded payload length\n// MIN_CIPHERTEXT_SIZE and MIN_PAYLOAD_SIZE will now depend on the version, so they are calculated dynamically.\n// const MIN_CIPHERTEXT_SIZE = VERSION_BYTE_SIZE + NONCE_SIZE + 1; // Version + nonce + at least 1 byte\n// const MIN_PAYLOAD_SIZE = MIN_CIPHERTEXT_SIZE + MAC_SIZE;\n// const MIN_BASE64_LENGTH = Math.ceil((MIN_PAYLOAD_SIZE * 4) / 3); // Minimum valid base64 length\n// RFC 4648 compliant Base64 implementation with proper environment detection\n// NIP-44 spec requires: \"Base64 ([RFC 4648](https://datatracker.ietf.org/doc/html/rfc4648), with padding)\"\nfunction base64Encode(bytes) {\n    // Try browser environment first (most common)\n    if (typeof globalThis?.btoa === \"function\") {\n        try {\n            // Browser environment: use btoa with binary string conversion\n            return globalThis.btoa(String.fromCharCode(...bytes));\n        }\n        catch (error) {\n            // Fall through to Node.js or manual implementation\n        }\n    }\n    // Try Node.js environment\n    if (typeof Buffer !== \"undefined\") {\n        try {\n            return Buffer.from(bytes).toString(\"base64\");\n        }\n        catch (error) {\n            // Fall through to manual implementation\n        }\n    }\n    // Manual RFC 4648 compliant base64 encoding\n    const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    let result = \"\";\n    let i = 0;\n    while (i < bytes.length) {\n        const a = bytes[i++];\n        const b = i < bytes.length ? bytes[i++] : 0;\n        const c = i < bytes.length ? bytes[i++] : 0;\n        const bitmap = (a << 16) | (b << 8) | c;\n        result += chars.charAt((bitmap >> 18) & 63);\n        result += chars.charAt((bitmap >> 12) & 63);\n        result += i - 2 < bytes.length ? chars.charAt((bitmap >> 6) & 63) : \"=\";\n        result += i - 1 < bytes.length ? chars.charAt(bitmap & 63) : \"=\";\n    }\n    return result;\n}\n// Base64 validation regex - compiled once for efficiency\n// Base64 alphabet: A-Z, a-z, 0-9, +, / with optional padding (=) at the end\n// Enforce proper base64 structure:\n// - String must be non-empty (either 4-char groups OR padded ending)\n// - String length must be multiple of 4 (including padding)\n// - Padding characters '=' can only appear at the end, either as '=' or '=='\n// - No padding characters allowed in the middle of the string\n// - Empty strings are rejected by requiring at least one valid ending pattern\nconst BASE64_VALIDATION_REGEX = /^(?:(?:[A-Za-z0-9+/]{4})+(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?|[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)$/;\nfunction base64Decode(str) {\n    // Validate base64 alphabet before decoding to prevent silent acceptance of malformed strings\n    if (!BASE64_VALIDATION_REGEX.test(str)) {\n        throw new Error(\"NIP-44: Invalid base64 alphabet in ciphertext\");\n    }\n    // Try browser environment first (most common)\n    if (typeof globalThis?.atob === \"function\") {\n        try {\n            const binaryString = globalThis.atob(str);\n            const bytes = new Uint8Array(binaryString.length);\n            for (let i = 0; i < binaryString.length; i++) {\n                bytes[i] = binaryString.charCodeAt(i);\n            }\n            return bytes;\n        }\n        catch (error) {\n            throw new Error(\"NIP-44: Invalid base64 encoding in ciphertext\");\n        }\n    }\n    // Try Node.js environment\n    if (typeof Buffer !== \"undefined\") {\n        try {\n            return new Uint8Array(Buffer.from(str, \"base64\"));\n        }\n        catch (error) {\n            throw new Error(\"NIP-44: Invalid base64 encoding in ciphertext\");\n        }\n    }\n    // Fallback: manual RFC 4648 compliant base64 decoding\n    const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    const lookup = new Array(256).fill(-1);\n    // Build lookup table\n    for (let i = 0; i < chars.length; i++) {\n        lookup[chars.charCodeAt(i)] = i;\n    }\n    lookup[\"=\".charCodeAt(0)] = 0; // Padding character\n    const len = str.length;\n    let bufferLength = Math.floor(len * 0.75);\n    if (str[len - 1] === \"=\") {\n        bufferLength--;\n        if (str[len - 2] === \"=\") {\n            bufferLength--;\n        }\n    }\n    const bytes = new Uint8Array(bufferLength);\n    let p = 0;\n    for (let i = 0; i < len; i += 4) {\n        const encoded1 = lookup[str.charCodeAt(i)];\n        const encoded2 = lookup[str.charCodeAt(i + 1)];\n        const encoded3 = lookup[str.charCodeAt(i + 2)];\n        const encoded4 = lookup[str.charCodeAt(i + 3)];\n        if (encoded1 === -1 ||\n            encoded2 === -1 ||\n            encoded3 === -1 ||\n            encoded4 === -1) {\n            throw new Error(\"NIP-44: Invalid base64 encoding in ciphertext\");\n        }\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        if (p < bufferLength) {\n            bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        }\n        if (p < bufferLength) {\n            bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n        }\n    }\n    return bytes;\n}\n/**\n * Calculate the padded length for a plaintext of given length\n * Implements the padding scheme from NIP-44 v2\n */\nfunction calcPaddedLen(unpadded_len) {\n    if (unpadded_len <= 0 || unpadded_len > MAX_PLAINTEXT_SIZE) {\n        throw new Error(`NIP-44: Invalid plaintext length: ${unpadded_len}`);\n    }\n    if (unpadded_len <= 32) {\n        return 32;\n    }\n    const nextPower = 1 << (Math.floor(Math.log2(unpadded_len - 1)) + 1);\n    const chunk = nextPower <= 256 ? 32 : nextPower / 8;\n    return chunk * (Math.floor((unpadded_len - 1) / chunk) + 1);\n}\n/**\n * Apply padding to a plaintext according to NIP-44 v2 spec\n */\nfunction pad(plaintext) {\n    const unpadded = utf8ToBytes(plaintext);\n    const unpadded_len = unpadded.length;\n    // Check if plaintext meets the size requirements\n    if (unpadded_len < MIN_PLAINTEXT_SIZE || unpadded_len > MAX_PLAINTEXT_SIZE) {\n        throw new Error(`NIP-44: Invalid plaintext length: ${unpadded_len}. Must be between ${MIN_PLAINTEXT_SIZE} and ${MAX_PLAINTEXT_SIZE}.`);\n    }\n    // Create prefix with length as 16-bit big-endian integer\n    const prefix = new Uint8Array(2);\n    prefix[0] = (unpadded_len >> 8) & 0xff;\n    prefix[1] = unpadded_len & 0xff;\n    // Create suffix filled with zeros\n    const padded_len = calcPaddedLen(unpadded_len);\n    const suffix = new Uint8Array(padded_len - unpadded_len);\n    // Concatenate prefix, unpadded text, and suffix\n    return concatBytes(prefix, unpadded, suffix);\n}\n/**\n * Remove padding from a padded plaintext\n */\nfunction unpad(padded) {\n    // Ensure we have at least the length prefix (2 bytes) plus some data\n    if (padded.length < 2) {\n        throw new Error(\"NIP-44: Padded data too short to contain length prefix\");\n    }\n    // Get length from first two bytes (big-endian uint16)\n    const unpadded_len = (padded[0] << 8) | padded[1];\n    // Validate the claimed unpadded length\n    if (unpadded_len < MIN_PLAINTEXT_SIZE || unpadded_len > MAX_PLAINTEXT_SIZE) {\n        throw new Error(`NIP-44: Invalid unpadded length in padded data: ${unpadded_len}`);\n    }\n    // Check if padded data is long enough to contain the claimed unpadded data\n    if (padded.length < 2 + unpadded_len) {\n        throw new Error(`NIP-44: Padded data too short (${padded.length}) to contain claimed unpadded length (${unpadded_len})`);\n    }\n    // Calculate expected padded length based on the claimed unpadded length\n    const expected_padded_len = 2 + calcPaddedLen(unpadded_len);\n    // Verify the total padded length matches what we expect from the padding scheme\n    if (padded.length !== expected_padded_len) {\n        throw new Error(`NIP-44: Padded length mismatch: ${padded.length} vs expected ${expected_padded_len}`);\n    }\n    // Extract the actual data (skipping the 2-byte length prefix)\n    const unpadded = padded.slice(2, 2 + unpadded_len);\n    // Verify the unpadded slice length matches the claimed length\n    if (unpadded.length !== unpadded_len) {\n        throw new Error(`NIP-44: Extracted data length (${unpadded.length}) doesn't match claimed length (${unpadded_len})`);\n    }\n    try {\n        return new TextDecoder().decode(unpadded);\n    }\n    catch (error) {\n        throw new Error(`NIP-44: Failed to decode unpadded data: ${error instanceof Error ? error.message : \"unknown error\"}`);\n    }\n}\n/**\n * Validate if a string is a valid hex format public key\n * This function validates the FORMAT (64 lowercase hex characters) and\n * rejects problematic edge cases that are cryptographically invalid.\n * It does NOT validate if the hex string represents a valid curve point.\n * For full cryptographic validation, use isValidPublicKeyPoint.\n */\n// secp256k1 field prime (P) as BigInt, defined once\nconst FIELD_PRIME = BigInt(\"0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f\");\nexport function isValidPublicKeyFormat(publicKey) {\n    // Check format: must be 64 hex characters (case-insensitive)\n    if (!/^[0-9a-f]{64}$/i.test(publicKey)) {\n        return false;\n    }\n    // Reject problematic edge cases that are invalid for cryptographic use\n    // All zeros - invalid public key (point at infinity)\n    if (publicKey ===\n        \"0000000000000000000000000000000000000000000000000000000000000000\") {\n        return false;\n    }\n    // All 'f's - invalid public key (field prime - 1, not a valid x-coordinate)\n    if (publicKey ===\n        \"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\") {\n        return false;\n    }\n    // Any value â¥ field prime is invalid as an x-coordinate\n    try {\n        const keyValue = BigInt(\"0x\" + publicKey);\n        if (keyValue >= FIELD_PRIME) {\n            return false;\n        }\n    }\n    catch {\n        // If BigInt conversion fails, it's not a valid hex string anyway\n        return false;\n    }\n    return true;\n}\n/**\n * Validate if a hex string represents a valid point on the secp256k1 curve\n * This function does cryptographic validation in addition to format validation.\n * Use this when you need to ensure the public key is actually usable for cryptographic operations.\n *\n * This implementation uses efficient point validation instead of expensive ECDH operations,\n * significantly improving performance while maintaining the same validation behavior.\n */\nexport function isValidPublicKeyPoint(publicKey) {\n    // First check format\n    if (!isValidPublicKeyFormat(publicKey)) {\n        return false;\n    }\n    // For Nostr x-only public keys, we need to check if the x-coordinate\n    // represents a valid point on the secp256k1 curve.\n    // We try both possible y-coordinates (even and odd) efficiently using\n    // ProjectivePoint.fromHex which validates curve membership without\n    // performing expensive ECDH operations.\n    const prefixes = [\"02\", \"03\"];\n    for (const prefix of prefixes) {\n        try {\n            secp256k1.ProjectivePoint.fromHex(prefix + publicKey);\n            return true;\n        }\n        catch {\n            // Continue to next prefix\n        }\n    }\n    return false;\n}\n/**\n * Validate if a string is a valid hex format private key\n * A valid private key must be a 32-byte hex string with a value less than the curve order\n */\nexport function isValidPrivateKey(privateKey) {\n    // Check format: must be 64 hex characters (case-insensitive)\n    if (!/^[0-9a-f]{64}$/i.test(privateKey)) {\n        return false;\n    }\n    try {\n        // Check that the value is a valid scalar (less than curve order)\n        // This will throw if the private key is invalid\n        secp256k1.getPublicKey(privateKey);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\n/**\n * Get conversation key (shared secret) between two users\n * According to NIP-44 v2 spec, this is:\n * 1. Execute ECDH (secp256k1) between private key A and public key B\n *    - This produces a shared point on the curve\n * 2. Extract only the x-coordinate of the shared point (32 bytes)\n *    - NIP-44 only uses the x-coordinate and discards the y-coordinate\n * 3. Use HKDF-extract with SHA-256, with:\n *    - IKM (Input Key Material) = shared_x (the x-coordinate from step 2)\n *    - salt = utf8-encoded string \"nip44-v2\"\n *\n * The derived conversation key is the same regardless of which user initiates:\n * getSharedSecret(privA, pubB) === getSharedSecret(privB, pubA)\n *\n * This symmetrical property is essential for bidirectional communication.\n *\n * Note: This is different from NIP-04 which uses the raw ECDH output without\n * proper key derivation, making it vulnerable to various attacks.\n *\n * @param privateKey - Hex-encoded 32-byte private key (64 hex chars)\n * @param publicKey - Hex-encoded 32-byte public key x-coordinate (64 hex chars)\n * @returns 32-byte conversation key as Uint8Array\n */\nexport function getSharedSecret(privateKey, publicKey) {\n    // Validate private key - must be a valid scalar (less than curve order)\n    if (!isValidPrivateKey(privateKey)) {\n        throw new Error(\"NIP-44: Invalid private key format or value.\");\n    }\n    // Validate public key - must be a valid x-coordinate on the curve\n    if (!isValidPublicKeyPoint(publicKey)) {\n        throw new Error(\"NIP-44: Invalid public key format. Expected 64-character hex string.\");\n    }\n    try {\n        // For Nostr, we have x-only public keys, so we need to try both possible y-coordinates\n        // First, add '02' prefix (even y-coordinate) and try\n        let sharedPoint;\n        try {\n            sharedPoint = secp256k1.getSharedSecret(privateKey, \"02\" + publicKey);\n        }\n        catch {\n            // If that fails, try with '03' prefix (odd y-coordinate)\n            try {\n                sharedPoint = secp256k1.getSharedSecret(privateKey, \"03\" + publicKey);\n            }\n            catch {\n                throw new Error(\"NIP-44: Invalid public key: not a point on the secp256k1 curve\");\n            }\n        }\n        // Extract the x-coordinate (first byte is format, next 32 bytes are x-coordinate)\n        const shared_x = sharedPoint.subarray(1, 33);\n        // Use HKDF-extract with SHA-256, with the x-coordinate as IKM and \"nip44-v2\" as salt\n        const salt = utf8ToBytes(\"nip44-v2\");\n        // Return the 32-byte conversation key\n        return hkdf_extract(sha256, shared_x, salt);\n    }\n    catch (error) {\n        if (error instanceof Error) {\n            // If it's already a NIP-44 error, rethrow it\n            if (error.message.startsWith(\"NIP-44:\")) {\n                throw error;\n            }\n            throw new Error(`NIP-44: Failed to derive shared secret: ${error.message}`);\n        }\n        throw new Error(\"NIP-44: Failed to derive shared secret\");\n    }\n}\n/**\n * Generate message keys from conversation key and nonce\n *\n * According to NIP-44 v2 spec, this derives three separate keys from the conversation key:\n * 1. Uses HKDF-expand with SHA-256 to derive 76 bytes of key material:\n *    - Input: conversation_key (32 bytes) from getSharedSecret\n *    - Info: nonce (32 bytes), unique random value for each message\n * 2. The resulting 76 bytes are split into three distinct keys:\n *    - chacha_key (32 bytes): Used as the key for ChaCha20 encryption\n *    - chacha_nonce (12 bytes): Used as the nonce for ChaCha20 encryption\n *    - hmac_key (32 bytes): Used as the key for HMAC-SHA256 authentication\n *\n * This approach ensures that:\n * - Each message uses a unique set of encryption and authentication keys\n * - Compromise of one message's keys doesn't affect other messages\n * - The nonce for ChaCha20 is cryptographically derived rather than directly using the message nonce\n *\n * @param conversation_key - 32-byte shared secret derived from getSharedSecret\n * @param nonce - 32-byte random nonce, unique for each message\n * @returns Object containing the three derived keys\n */\nexport function getMessageKeys(conversation_key, nonce) {\n    if (conversation_key.length !== KEY_SIZE) {\n        throw new Error(`NIP-44: Invalid conversation key length: ${conversation_key.length}`);\n    }\n    if (nonce.length < NONCE_SIZE_V0) {\n        // Assuming V0 has the smallest possible nonce, check against it.\n        // This check might need refinement if V0/V1 nonces are smaller and still valid inputs here.\n        // However, getMessageKeys is currently only called by encrypt/decrypt which would use version-specific nonce sizes.\n        throw new Error(`NIP-44: Nonce too short for key derivation. Min expected: ${NONCE_SIZE_V0}, got: ${nonce.length}`);\n    }\n    // Use HKDF-expand to derive 76 bytes of key material from the conversation key and nonce\n    // The nonce length here refers to the input NIP-44 nonce (e.g. 32 bytes for v2)\n    // not the derived chacha_nonce (12 bytes)\n    const keys = hkdf_expand(sha256, conversation_key, nonce, 76);\n    // Split the derived key material into three parts for specific purposes\n    return {\n        chacha_key: keys.subarray(0, 32), // 32 bytes for ChaCha20 encryption key\n        chacha_nonce: keys.subarray(32, 44), // 12 bytes for ChaCha20 nonce\n        hmac_key: keys.subarray(44, 76), // 32 bytes for HMAC-SHA256 key\n    };\n}\n/**\n * Generate a random nonce for NIP-44 encryption\n * According to NIP-44 v2 spec, this is a random 32-byte value\n */\nexport function generateNonce() {\n    return randomBytes(NONCE_SIZE_V2); // Generate nonces for the current version (V2)\n}\n/**\n * Calculate HMAC with associated data (AAD)\n *\n * This function implements the authentication scheme for NIP-44 v2:\n * 1. It binds the ciphertext to the nonce by using the nonce as \"associated data\"\n * 2. It concatenates the AAD (nonce) with the message (ciphertext) before HMAC calculation\n * 3. It uses HMAC-SHA256 with the derived hmac_key to produce a 32-byte authentication tag\n *\n * Using AAD provides several security benefits:\n * - Prevents attackers from mixing nonces and ciphertexts from different messages\n * - Ensures the integrity of both the ciphertext and nonce\n * - Authenticates the ciphertext before decryption attempts (preventing oracle attacks)\n *\n * This is a crucial part of the NIP-44 authenticated encryption scheme, as ChaCha20\n * itself does not provide authentication.\n *\n * @param key - 32-byte HMAC key derived from getMessageKeys\n * @param message - The ciphertext to authenticate\n * @param aad - The 32-byte nonce serving as associated data\n * @returns 32-byte authentication tag\n */\nexport function hmacWithAAD(key, message, aad) {\n    if (aad.length < NONCE_SIZE_V0) {\n        // Allow for potentially smaller nonces from older versions.\n        // This check needs to be correct for the SMALLEST valid nonce size.\n        throw new Error(`NIP-44: AAD (nonce) too short. Min expected: ${NONCE_SIZE_V0} bytes, got: ${aad.length}`);\n    }\n    // Concatenate the nonce (AAD) with the ciphertext, then calculate HMAC-SHA256\n    return hmac(sha256, key, concatBytes(aad, message));\n}\n/**\n * Securely wipe a buffer by overwriting it with random bytes, then zeros\n * This helps prevent sensitive data from remaining in memory\n *\n * Note: This is a best-effort approach. Modern JavaScript engines and\n * garbage collectors may still leave copies of sensitive data in memory.\n * For maximum security in high-risk environments, consider using\n * dedicated secure memory management libraries.\n *\n * @param buffer - The buffer to wipe\n */\nexport function secureWipe(buffer) {\n    if (buffer.length === 0)\n        return;\n    try {\n        // First overwrite with random data (harder to recover)\n        const randomData = randomBytes(buffer.length);\n        buffer.set(randomData);\n        // Then overwrite with zeros\n        buffer.fill(0);\n        // Clear the random data buffer as well\n        randomData.fill(0);\n    }\n    catch (error) {\n        // Fallback: just zero the buffer\n        buffer.fill(0);\n    }\n}\n/**\n * Performs a constant-time comparison of two Uint8Arrays\n *\n * This implementation takes several precautions against timing attacks:\n * 1. Always processes all bytes regardless of matches/mismatches\n * 2. Returns a constant (1 or 0) to avoid boolean conversion optimizations\n * 3. Uses bitwise operations which are less susceptible to timing variations\n * 4. Prevents length-based timing attacks with separate length check\n *\n * @param a - First byte array\n * @param b - Second byte array\n * @returns 1 if arrays are equal, 0 if they're different or have different length\n */\nexport function constantTimeEqual(a, b) {\n    // First check: different lengths mean different content\n    // We do this check separately to avoid potential length-based timing attacks\n    if (a.length !== b.length) {\n        return 0;\n    }\n    // XOR each byte and OR the results together\n    // If any byte is different, the result will be non-zero\n    let result = 0;\n    for (let i = 0; i < a.length; i++) {\n        result |= a[i] ^ b[i];\n    }\n    // Convert to a binary 0 or 1 result (0 = equal, 1 = different)\n    // Using this additional step to avoid potential JavaScript VM optimizations\n    // around boolean conversions\n    result =\n        (result |\n            (result >>> 1) |\n            (result >>> 2) |\n            (result >>> 3) |\n            (result >>> 4) |\n            (result >>> 5) |\n            (result >>> 6) |\n            (result >>> 7)) &\n            1;\n    // Invert the result: 1 means equal, 0 means different\n    return 1 - result;\n}\n// Internal function for NIP-44 v2 encryption\nfunction encryptV2(plaintext, privateKey, publicKey, nonce) {\n    // Generate random nonce if not provided\n    const nonceBytes = nonce || generateNonce(); // generateNonce uses NONCE_SIZE_V2\n    if (nonceBytes.length !== NONCE_SIZE_V2) {\n        throw new Error(`NIP-44 (v2): Nonce must be ${NONCE_SIZE_V2} bytes, got ${nonceBytes.length}`);\n    }\n    // Get the conversation key (shared secret)\n    const conversation_key = getSharedSecret(privateKey, publicKey);\n    // Derive message-specific keys\n    const { chacha_key, chacha_nonce, hmac_key } = getMessageKeys(conversation_key, nonceBytes);\n    // Apply padding to plaintext\n    const padded = pad(plaintext);\n    // Encrypt with ChaCha20\n    const ciphertext = chacha20(chacha_key, chacha_nonce, padded);\n    // Calculate HMAC with nonce as AAD\n    const mac = hmacWithAAD(hmac_key, ciphertext, nonceBytes);\n    // Combine the version, nonce, ciphertext, and MAC\n    const payload = concatBytes(new Uint8Array([2]), // Hardcode version 2 for V2 encryption\n    nonceBytes, ciphertext, mac);\n    return base64Encode(payload);\n}\n// Placeholder for NIP-44 v1 encryption -- REMOVED as per NIP-44 spec (MUST NOT encrypt with v1)\n/*\nfunction encryptV1(\n  plaintext: string,\n  privateKey: string,\n  publicKey: string,\n  nonce?: Uint8Array,\n): string {\n  // ... (original implementation removed) ...\n  throw new Error(\"NIP-44: Encryption with version 1 is not permitted by the NIP-44 specification.\");\n}\n*/\n// Placeholder for NIP-44 v0 encryption -- REMOVED as per NIP-44 spec (MUST NOT encrypt with v0)\n/*\nfunction encryptV0(\n  plaintext: string,\n  privateKey: string,\n  publicKey: string,\n  nonce?: Uint8Array,\n): string {\n  // ... (original implementation removed) ...\n  throw new Error(\"NIP-44: Encryption with version 0 is not permitted by the NIP-44 specification.\");\n}\n*/\n/**\n * Encrypt a message using NIP-44 v2 (ChaCha20 + HMAC-SHA256)\n *\n * @param plaintext - The message to encrypt\n * @param privateKey - Sender's private key (hex)\n * @param publicKey - Recipient's public key (hex)\n * @param nonce - Optional 32-byte nonce, will be randomly generated if not provided\n * @param options - Optional parameters, e.g., { version: number } to specify NIP-44 version for encryption\n * @returns The encrypted message in the format specified by NIP-44 (base64)\n */\nexport function encrypt(plaintext, privateKey, publicKey, nonce, // This nonce is version-specific if a version is also passed in options\noptions) {\n    // Validate keys\n    if (!isValidPublicKeyPoint(publicKey)) {\n        throw new Error(\"NIP-44: Invalid public key format. Expected 64-character hex string.\");\n    }\n    if (!isValidPrivateKey(privateKey)) {\n        throw new Error(\"NIP-44: Invalid private key format or value.\");\n    }\n    // Default to CURRENT_VERSION but allow override for testing/compatibility\n    const versionToEncryptWith = options?.version ?? CURRENT_VERSION;\n    // Validate requested version is supported for encryption.\n    // NIP-44 spec (versions 0 and 1): \"Implementations MUST NOT encrypt with this version.\"\n    // NIP-44 spec (version 2): This is the current and recommended version for encryption.\n    if (versionToEncryptWith === 0) {\n        throw new Error(\"NIP-44: Encryption with version 0 is not permitted by the NIP-44 specification. Only decryption is supported for v0.\");\n    }\n    if (versionToEncryptWith === 1) {\n        throw new Error(\"NIP-44: Encryption with version 1 is not permitted by the NIP-44 specification. Only decryption is supported for v1.\");\n    }\n    if (versionToEncryptWith !== CURRENT_VERSION) {\n        // Currently CURRENT_VERSION is 2\n        // This condition will catch any other non-current versions if CURRENT_VERSION changes\n        // or if a version > 2 is somehow passed and not caught by MAX_SUPPORTED_VERSION check.\n        throw new Error(`NIP-44: Unsupported encryption version: ${versionToEncryptWith}. Only version ${CURRENT_VERSION} is supported for encryption.`);\n    }\n    // Further check if it's in the decryptable range just in case (MAX_SUPPORTED_VERSION for future extensibility).\n    // MIN_SUPPORTED_VERSION for encryption is effectively CURRENT_VERSION due to above checks.\n    if (versionToEncryptWith > MAX_SUPPORTED_VERSION) {\n        throw new Error(`NIP-44: Encryption version ${versionToEncryptWith} is outside the maximum supported range [${MIN_SUPPORTED_VERSION}-${MAX_SUPPORTED_VERSION}].`);\n    }\n    // At this point, versionToEncryptWith must be CURRENT_VERSION (e.g., 2)\n    try {\n        if (versionToEncryptWith === 2) {\n            // Explicitly check for v2, which is CURRENT_VERSION\n            return encryptV2(plaintext, privateKey, publicKey, nonce);\n        }\n        else {\n            // This path should ideally not be reached due to the extensive checks above.\n            // If it is, it indicates an issue with the version validation logic.\n            throw new Error(`NIP-44: Unexpected encryption version after validation: ${versionToEncryptWith}. Expected ${CURRENT_VERSION}.`);\n        }\n    }\n    catch (error) {\n        if (error instanceof Error) {\n            // If it's already a NIP-44 error, rethrow it\n            if (error.message.startsWith(\"NIP-44:\")) {\n                throw error;\n            }\n            throw new Error(`NIP-44: Encryption failed (version ${versionToEncryptWith}): ${error.message}`);\n        }\n        throw new Error(`NIP-44: Encryption failed (version ${versionToEncryptWith})`);\n    }\n}\n/**\n * Parse NIP-44 v2 payload into its components\n */\nexport function decodePayload(payload) {\n    // NIP-44 Decryption Step 1: Normalize payload and check for non-base64 encoding (# prefix)\n    // Trim whitespace and newlines to prevent bypass of # prefix detection\n    const raw = payload.trim();\n    if (raw.length > 0 && raw[0] === \"#\") {\n        throw new Error(\"NIP-44: Unsupported version (non-base64 encoding detected)\");\n    }\n    // NIP-44 Decryption Step 2: Validate base64 payload length bounds\n    if (raw.length < MIN_BASE64_PAYLOAD_LENGTH) {\n        throw new Error(`NIP-44: Invalid ciphertext length. Base64 payload must be between ${MIN_BASE64_PAYLOAD_LENGTH} and ${MAX_BASE64_PAYLOAD_LENGTH} characters, got ${raw.length}.`);\n    }\n    if (raw.length > MAX_BASE64_PAYLOAD_LENGTH) {\n        throw new Error(`NIP-44: Invalid ciphertext length. Base64 payload must be between ${MIN_BASE64_PAYLOAD_LENGTH} and ${MAX_BASE64_PAYLOAD_LENGTH} characters, got ${raw.length}.`);\n    }\n    // Decode the base64 payload using the normalized (trimmed) version\n    let data;\n    try {\n        data = base64Decode(raw);\n    }\n    catch (error) {\n        // Re-throw the specific error from base64Decode (e.g., alphabet validation)\n        if (error instanceof Error && error.message.includes(\"NIP-44:\")) {\n            throw error;\n        }\n        throw new Error(\"NIP-44: Invalid base64 encoding in ciphertext\");\n    }\n    // Validate decoded payload length bounds\n    if (data.length < MIN_DECODED_PAYLOAD_LENGTH) {\n        throw new Error(`NIP-44: Invalid decoded payload length. Must be between ${MIN_DECODED_PAYLOAD_LENGTH} and ${MAX_DECODED_PAYLOAD_LENGTH} bytes, got ${data.length}.`);\n    }\n    if (data.length > MAX_DECODED_PAYLOAD_LENGTH) {\n        throw new Error(`NIP-44: Invalid decoded payload length. Must be between ${MIN_DECODED_PAYLOAD_LENGTH} and ${MAX_DECODED_PAYLOAD_LENGTH} bytes, got ${data.length}.`);\n    }\n    // Extract version byte\n    if (data.length < 1) {\n        // Should be caught by earlier length check, but good for robustness\n        throw new Error(`NIP-44: Invalid payload, too short to contain version byte.`);\n    }\n    const version = data[0];\n    // Validate version is in supported range for decryption\n    if (version < MIN_SUPPORTED_VERSION || version > MAX_SUPPORTED_VERSION) {\n        throw new Error(`NIP-44: Unsupported version: ${version}. This implementation supports versions ${MIN_SUPPORTED_VERSION}-${MAX_SUPPORTED_VERSION}.`);\n    }\n    // Determine nonce and MAC sizes based on version\n    const nonceSize = version === 0\n        ? NONCE_SIZE_V0\n        : version === 1\n            ? NONCE_SIZE_V1\n            : NONCE_SIZE_V2;\n    const macSize = version === 0 ? MAC_SIZE_V0 : version === 1 ? MAC_SIZE_V1 : MAC_SIZE_V2;\n    // Verify minimum payload length for the detected version\n    const minVersionedPayloadSize = VERSION_BYTE_SIZE + nonceSize + 1 + macSize; // version + nonce + min_ciphertext (1 byte) + mac\n    if (data.length < minVersionedPayloadSize) {\n        throw new Error(`NIP-44: Payload too short (${data.length} bytes) for version ${version}. Minimum is ${minVersionedPayloadSize} bytes.`);\n    }\n    // Extract components\n    const nonce = data.subarray(VERSION_BYTE_SIZE, VERSION_BYTE_SIZE + nonceSize);\n    const mac = data.subarray(data.length - macSize);\n    const ciphertext = data.subarray(VERSION_BYTE_SIZE + nonceSize, data.length - macSize);\n    if (ciphertext.length === 0) {\n        throw new Error(`NIP-44: Ciphertext cannot be empty for version ${version}.`);\n    }\n    return { version, nonce, ciphertext, mac };\n}\n// Internal function for NIP-44 v2 decryption\nfunction decryptV2(encryptedData, nonce, mac, privateKey, publicKey) {\n    // Get the conversation key (shared secret)\n    const conversation_key = getSharedSecret(privateKey, publicKey);\n    // Derive message-specific keys\n    const { chacha_key, chacha_nonce, hmac_key } = getMessageKeys(conversation_key, nonce);\n    // Verify HMAC\n    const calculated_mac = hmacWithAAD(hmac_key, encryptedData, nonce);\n    // Use our constant-time comparison function\n    const mac_valid = constantTimeEqual(calculated_mac, mac) === 1;\n    if (!mac_valid) {\n        throw new Error(\"NIP-44 (v2): Authentication failed. Message may be tampered with or keys are incorrect.\");\n    }\n    // Decrypt with ChaCha20\n    const padded = chacha20(chacha_key, chacha_nonce, encryptedData);\n    // Remove padding and convert to string\n    return unpad(padded);\n}\n// Placeholder for NIP-44 v1 decryption\n// TODO: Implement actual NIP-44 v1 decryption logic\n// NIP-44 v1 Decryption: Implementations MUST be able to decrypt this version if they can decrypt v2.\n// It is assumed that v1 decryption uses the same underlying crypto as v2, but with version byte 1.\n// The primary difference is that the conversation key KDF uses the \"nip44-v2\" salt,\n// as v1 spec for KDF is undefined and NIP-44 mandates v1 decryption.\n// NIP-44 (Decryption, point 2) mandates that v1 payloads be decrypted using the same\n// algorithms as v2, including the \"nip44-v2\" KDF salt and 32-byte nonce/MAC.\n// This function adheres to that by utilizing decryptV2.\nfunction decryptV1(encryptedData, nonce, mac, privateKey, publicKey) {\n    // For now, V1 uses V2 logic as a placeholder.\n    // This needs to be replaced with actual V1 specification if different.\n    // The NIP-44 spec says \"Implementations MUST be able to decrypt versions 0 and 1\"\n    // but doesn't detail if their algorithms differ from v2 beyond version byte.\n    // Assuming key derivation (\"nip44-v2\" salt in getSharedSecret) and crypto primitives are the same unless specified.\n    // console.warn(\"NIP-44: decryptV1 is using V2 logic as a placeholder. Verify V1 specification.\");\n    // NIP-44 specifies using v2 algorithms for v1 decryption.\n    try {\n        return decryptV2(encryptedData, nonce, mac, privateKey, publicKey);\n    }\n    catch (error) {\n        if (error instanceof Error && error.message.includes(\"NIP-44 (v2)\")) {\n            throw new Error(error.message.replace(\"NIP-44 (v2)\", \"NIP-44 (v1)\"));\n        }\n        throw error;\n    }\n}\n// Placeholder for NIP-44 v0 decryption\n// TODO: Implement actual NIP-44 v0 decryption logic\n// NIP-44 v0 Decryption: Implementations MUST be able to decrypt this version if they can decrypt v2.\n// It is assumed that v0 decryption uses the same underlying crypto as v2, but with version byte 0.\n// The primary difference is that the conversation key KDF uses the \"nip44-v2\" salt,\n// as v0 spec for KDF is undefined and NIP-44 mandates v0 decryption.\n// NIP-44 (Decryption, point 2) mandates that v0 payloads be decrypted using the same\n// algorithms as v2, including the \"nip44-v2\" KDF salt and 32-byte nonce/MAC.\n// This function adheres to that by utilizing decryptV2.\nfunction decryptV0(encryptedData, nonce, mac, privateKey, publicKey) {\n    // For now, V0 uses V2 logic as a placeholder.\n    // This needs to be replaced with actual V0 specification.\n    // There's no official NIP for v0, it was an early experimental version.\n    // console.warn(\"NIP-44: decryptV0 is using V2 logic as a placeholder. Verify V0 specification if possible.\");\n    // NIP-44 specifies using v2 algorithms for v0 decryption.\n    try {\n        return decryptV2(encryptedData, nonce, mac, privateKey, publicKey);\n    }\n    catch (error) {\n        if (error instanceof Error && error.message.includes(\"NIP-44 (v2)\")) {\n            throw new Error(error.message.replace(\"NIP-44 (v2)\", \"NIP-44 (v0)\"));\n        }\n        throw error;\n    }\n}\n/**\n * Decrypt a message using NIP-44 (ChaCha20 + HMAC-SHA256)\n *\n * @param ciphertext - The encrypted message (base64)\n * @param privateKey - Recipient's private key (hex)\n * @param publicKey - Sender's public key (hex)\n * @returns The decrypted message\n */\nexport function decrypt(ciphertext, privateKey, publicKey) {\n    // Validate keys\n    if (!isValidPublicKeyPoint(publicKey)) {\n        throw new Error(\"NIP-44: Invalid public key format. Expected 64-character hex string.\");\n    }\n    if (!isValidPrivateKey(privateKey)) {\n        throw new Error(\"NIP-44: Invalid private key format or value.\");\n    }\n    try {\n        // Decode and extract the payload components\n        const { version, nonce, ciphertext: encryptedData, mac, } = decodePayload(ciphertext);\n        // Call the appropriate version-specific decrypt function\n        if (version === 0) {\n            return decryptV0(encryptedData, nonce, mac, privateKey, publicKey);\n        }\n        else if (version === 1) {\n            return decryptV1(encryptedData, nonce, mac, privateKey, publicKey);\n        }\n        else if (version === 2) {\n            return decryptV2(encryptedData, nonce, mac, privateKey, publicKey);\n        }\n        else {\n            // This case should ideally be caught by decodePayload's version check\n            throw new Error(`NIP-44: Unexpected version ${version} after decoding.`);\n        }\n    }\n    catch (error) {\n        // Enhance error messages for better debugging\n        if (error instanceof Error) {\n            if (error.message.startsWith(\"NIP-44:\")) {\n                // If it's already a NIP-44 error, rethrow it\n                throw error;\n            }\n            throw new Error(`NIP-44: Failed to decrypt message: ${error.message}`);\n        }\n        throw new Error(\"NIP-44: Failed to decrypt message\");\n    }\n}\n", "export function getUnixTime() {\n    return Math.floor(Date.now() / 1000);\n}\n", "/**\n * Centralized Security Validation Utilities\n *\n * This module provides comprehensive security validation for the SNSTR library,\n * addressing the critical vulnerabilities identified in the security audit.\n */\n// Security Constants\nexport const SECURITY_LIMITS = {\n    // Content size limits (prevent DoS via large payloads)\n    MAX_CONTENT_SIZE: 100000, // 100KB\n    MAX_TAG_SIZE: 1000,\n    MAX_TAG_COUNT: 100,\n    MAX_TAG_ELEMENT_SIZE: 512,\n    // Filter limits (prevent DoS via complex filters)\n    MAX_FILTER_COUNT: 20,\n    MAX_FILTER_IDS: 1000,\n    MAX_FILTER_AUTHORS: 1000,\n    MAX_FILTER_KINDS: 100,\n    MAX_FILTER_TAG_VALUES: 1000,\n    MAX_SEARCH_LENGTH: 500,\n    // Array access safety\n    MAX_ARRAY_SIZE: 10000,\n    MAX_OBJECT_DEPTH: 10,\n    // String limits\n    MAX_STRING_LENGTH: 100000,\n    MAX_URL_LENGTH: 2048,\n    MAX_PUBKEY_LENGTH: 64,\n    MAX_SIGNATURE_LENGTH: 128,\n    MAX_ID_LENGTH: 64,\n    // Numeric limits\n    MIN_KIND: 0,\n    MAX_KIND: 65535,\n    MIN_CREATED_AT: 946684800, // Jan 1, 2000\n    MAX_CREATED_AT: 4102444800, // Jan 1, 2100\n    MIN_LIMIT: 0,\n    MAX_LIMIT: 5000,\n    MIN_SINCE: 946684800, // Jan 1, 2000\n    MAX_SINCE: 4102444800, // Jan 1, 2100\n    MIN_UNTIL: 946684800, // Jan 1, 2000\n    MAX_UNTIL: 4102444800, // Jan 1, 2100\n    // Memory limits for relay buffers (prevent memory exhaustion)\n    MAX_RELAY_EVENT_BUFFERS: 1000, // Maximum number of event buffers per relay\n    MAX_EVENTS_PER_BUFFER: 100, // Maximum events per buffer\n    MAX_REPLACEABLE_EVENT_PUBKEYS: 10000, // Maximum pubkeys to track replaceable events\n    MAX_REPLACEABLE_EVENTS_PER_PUBKEY: 50, // Maximum replaceable events per pubkey\n    MAX_ADDRESSABLE_EVENTS: 50000, // Maximum addressable events to store\n};\n// Security error types\nexport class SecurityValidationError extends Error {\n    constructor(message, code, field) {\n        super(message);\n        this.code = code;\n        this.field = field;\n        this.name = \"SecurityValidationError\";\n    }\n}\n/**\n * Core secure random generation implementation\n * Detects available crypto sources and provides unified interface\n * @returns Object with crypto methods for consistent random generation\n * @throws SecurityValidationError if no secure random source is available\n */\nfunction getSecureCrypto() {\n    if (typeof crypto !== \"undefined\" && crypto.getRandomValues) {\n        // Browser crypto API\n        return {\n            randomBytes: (length) => {\n                const array = new Uint8Array(length);\n                crypto.getRandomValues(array);\n                return array;\n            },\n            randomUint32: () => {\n                const array = new Uint32Array(1);\n                crypto.getRandomValues(array);\n                return array[0];\n            },\n        };\n    }\n    else if (typeof process !== \"undefined\" &&\n        process.versions &&\n        process.versions.node) {\n        // Node.js crypto API (loaded via eval to avoid Metro/Expo static resolution)\n        // Use direct eval so local CommonJS require is accessible under Jest/Node.\n        // eslint-disable-next-line no-eval\n        const nodeCrypto = eval('require(\"crypto\")');\n        return {\n            randomBytes: (length) => nodeCrypto.randomBytes(length),\n            randomUint32: () => nodeCrypto.randomInt(0, 0x100000000),\n        };\n    }\n    else {\n        throw new SecurityValidationError(\"No secure random source available\", \"NO_SECURE_RANDOM\");\n    }\n}\n// Secure random bytes generation\nexport function secureRandomBytes(length) {\n    const crypto = getSecureCrypto();\n    return crypto.randomBytes(length);\n}\n/**\n * Generate a secure random hex string\n * Used for subscription IDs, nonces, and other cryptographic identifiers\n * @param length Number of hex characters to generate (not bytes)\n * @returns A secure random hex string of the specified length\n * @throws SecurityValidationError if secure random generation is not available\n *\n * @example\n * secureRandomHex(16) // Returns 16-character hex string (8 bytes)\n * secureRandomHex(64) // Returns 64-character hex string (32 bytes)\n */\nexport function secureRandomHex(length) {\n    if (typeof length !== \"number\" || length < 1 || !Number.isInteger(length)) {\n        throw new SecurityValidationError(\"Length must be a positive integer\", \"INVALID_LENGTH\");\n    }\n    const bytes = secureRandomBytes(Math.ceil(length / 2));\n    return Array.from(bytes, (byte) => byte.toString(16).padStart(2, \"0\"))\n        .join(\"\")\n        .slice(0, length);\n}\n/**\n * Generate a secure random number between 0 and 1\n * Used for jitter generation and other timing operations\n * @returns A secure random float between 0 (inclusive) and 1 (exclusive)\n * @throws SecurityValidationError if secure random generation is not available\n */\nexport function getSecureRandom() {\n    const crypto = getSecureCrypto();\n    return crypto.randomUint32() / (0xffffffff + 1);\n}\n// Input sanitization\nexport function sanitizeString(input, maxLength = SECURITY_LIMITS.MAX_STRING_LENGTH) {\n    if (typeof input !== \"string\") {\n        throw new SecurityValidationError(\"Input must be a string\", \"INVALID_TYPE\", \"string\");\n    }\n    if (input.length > maxLength) {\n        throw new SecurityValidationError(`String exceeds maximum length of ${maxLength}`, \"STRING_TOO_LONG\", \"length\");\n    }\n    return input;\n}\n// Bounds checking for array access\nexport function validateArrayAccess(array, index, context = \"array\") {\n    if (!Array.isArray(array)) {\n        throw new SecurityValidationError(`${context} must be an array`, \"NOT_ARRAY\", context);\n    }\n    if (array.length > SECURITY_LIMITS.MAX_ARRAY_SIZE) {\n        throw new SecurityValidationError(`${context} exceeds maximum size of ${SECURITY_LIMITS.MAX_ARRAY_SIZE}`, \"ARRAY_TOO_LARGE\", context);\n    }\n    if (index < 0 || index >= array.length) {\n        throw new SecurityValidationError(`Array index ${index} out of bounds for ${context} with length ${array.length}`, \"INDEX_OUT_OF_BOUNDS\", context);\n    }\n    return array[index];\n}\n// Safe array access with bounds checking\nexport function safeArrayAccess(array, index, defaultValue) {\n    if (!Array.isArray(array) || index < 0 || index >= array.length) {\n        return defaultValue;\n    }\n    return array[index];\n}\n// Numeric validation\nexport function validateNumber(value, min, max, field) {\n    if (typeof value !== \"number\" || isNaN(value) || !Number.isFinite(value)) {\n        throw new SecurityValidationError(`${field} must be a valid finite number`, \"INVALID_NUMBER\", field);\n    }\n    if (value < min || value > max) {\n        throw new SecurityValidationError(`${field} must be between ${min} and ${max}`, \"NUMBER_OUT_OF_RANGE\", field);\n    }\n    return value;\n}\n// Event content validation\nexport function validateEventContent(content) {\n    const contentStr = sanitizeString(content, SECURITY_LIMITS.MAX_CONTENT_SIZE);\n    // Additional content validation could go here\n    // e.g., checking for suspicious patterns, encoding issues, etc.\n    return contentStr;\n}\n// Tag validation\nexport function validateTags(tags) {\n    if (!Array.isArray(tags)) {\n        throw new SecurityValidationError(\"Tags must be an array\", \"INVALID_TAGS_TYPE\", \"tags\");\n    }\n    if (tags.length > SECURITY_LIMITS.MAX_TAG_COUNT) {\n        throw new SecurityValidationError(`Too many tags: ${tags.length} (max ${SECURITY_LIMITS.MAX_TAG_COUNT})`, \"TOO_MANY_TAGS\", \"tags\");\n    }\n    return tags.map((tag, tagIndex) => {\n        if (!Array.isArray(tag)) {\n            throw new SecurityValidationError(`Tag at index ${tagIndex} must be an array`, \"INVALID_TAG_TYPE\", `tags[${tagIndex}]`);\n        }\n        if (tag.length > SECURITY_LIMITS.MAX_TAG_SIZE) {\n            throw new SecurityValidationError(`Tag at index ${tagIndex} has too many elements: ${tag.length} (max ${SECURITY_LIMITS.MAX_TAG_SIZE})`, \"TAG_TOO_LARGE\", `tags[${tagIndex}]`);\n        }\n        return tag.map((element, _elementIndex) => {\n            const elementStr = sanitizeString(element, SECURITY_LIMITS.MAX_TAG_ELEMENT_SIZE);\n            return elementStr;\n        });\n    });\n}\n// Filter validation\nexport function validateFilter(filter) {\n    if (!filter || typeof filter !== \"object\") {\n        throw new SecurityValidationError(\"Filter must be an object\", \"INVALID_FILTER_TYPE\", \"filter\");\n    }\n    const f = filter;\n    const validatedFilter = {};\n    // Validate ids\n    if (f.ids !== undefined) {\n        if (!Array.isArray(f.ids)) {\n            throw new SecurityValidationError(\"Filter ids must be an array\", \"INVALID_FILTER_IDS_TYPE\", \"filter.ids\");\n        }\n        if (f.ids.length > SECURITY_LIMITS.MAX_FILTER_IDS) {\n            throw new SecurityValidationError(`Too many filter ids: ${f.ids.length} (max ${SECURITY_LIMITS.MAX_FILTER_IDS})`, \"TOO_MANY_FILTER_IDS\", \"filter.ids\");\n        }\n        validatedFilter.ids = f.ids.map((id, index) => {\n            const idStr = sanitizeString(id, SECURITY_LIMITS.MAX_ID_LENGTH);\n            if (!/^[0-9a-f]+$/i.test(idStr)) {\n                throw new SecurityValidationError(`Invalid ID format at index ${index}: ${idStr}`, \"INVALID_ID_FORMAT\", `filter.ids[${index}]`);\n            }\n            return idStr;\n        });\n    }\n    // Validate authors\n    if (f.authors !== undefined) {\n        if (!Array.isArray(f.authors)) {\n            throw new SecurityValidationError(\"Filter authors must be an array\", \"INVALID_FILTER_AUTHORS_TYPE\", \"filter.authors\");\n        }\n        if (f.authors.length > SECURITY_LIMITS.MAX_FILTER_AUTHORS) {\n            throw new SecurityValidationError(`Too many filter authors: ${f.authors.length} (max ${SECURITY_LIMITS.MAX_FILTER_AUTHORS})`, \"TOO_MANY_FILTER_AUTHORS\", \"filter.authors\");\n        }\n        validatedFilter.authors = f.authors.map((author, index) => {\n            const authorStr = sanitizeString(author, SECURITY_LIMITS.MAX_PUBKEY_LENGTH);\n            if (!/^[0-9a-f]+$/i.test(authorStr)) {\n                throw new SecurityValidationError(`Invalid author format at index ${index}: ${authorStr}`, \"INVALID_AUTHOR_FORMAT\", `filter.authors[${index}]`);\n            }\n            return authorStr;\n        });\n    }\n    // Validate kinds\n    if (f.kinds !== undefined) {\n        if (!Array.isArray(f.kinds)) {\n            throw new SecurityValidationError(\"Filter kinds must be an array\", \"INVALID_FILTER_KINDS_TYPE\", \"filter.kinds\");\n        }\n        if (f.kinds.length > SECURITY_LIMITS.MAX_FILTER_KINDS) {\n            throw new SecurityValidationError(`Too many filter kinds: ${f.kinds.length} (max ${SECURITY_LIMITS.MAX_FILTER_KINDS})`, \"TOO_MANY_FILTER_KINDS\", \"filter.kinds\");\n        }\n        validatedFilter.kinds = f.kinds.map((kind, index) => {\n            return validateNumber(kind, SECURITY_LIMITS.MIN_KIND, SECURITY_LIMITS.MAX_KIND, `filter.kinds[${index}]`);\n        });\n    }\n    // Validate limit\n    if (f.limit !== undefined) {\n        validatedFilter.limit = validateNumber(f.limit, SECURITY_LIMITS.MIN_LIMIT, SECURITY_LIMITS.MAX_LIMIT, \"filter.limit\");\n    }\n    // Validate since\n    if (f.since !== undefined) {\n        validatedFilter.since = validateNumber(f.since, SECURITY_LIMITS.MIN_SINCE, SECURITY_LIMITS.MAX_SINCE, \"filter.since\");\n    }\n    // Validate until\n    if (f.until !== undefined) {\n        validatedFilter.until = validateNumber(f.until, SECURITY_LIMITS.MIN_UNTIL, SECURITY_LIMITS.MAX_UNTIL, \"filter.until\");\n    }\n    // Validate logical relationship between since and until\n    if (validatedFilter.since !== undefined &&\n        validatedFilter.until !== undefined) {\n        if (validatedFilter.since >= validatedFilter.until) {\n            throw new SecurityValidationError(`Filter 'since' (${validatedFilter.since}) must be strictly less than 'until' (${validatedFilter.until})`, \"INVALID_TIME_RANGE\", \"filter.since_until\");\n        }\n    }\n    // Validate search\n    if (f.search !== undefined) {\n        validatedFilter.search = sanitizeString(f.search, SECURITY_LIMITS.MAX_SEARCH_LENGTH);\n    }\n    // Validate tag filters (#e, #p, etc.)\n    for (const [key, value] of Object.entries(f)) {\n        if (key.startsWith(\"#\") && key.length === 2) {\n            if (!Array.isArray(value)) {\n                throw new SecurityValidationError(`Filter tag ${key} must be an array`, \"INVALID_FILTER_TAG_TYPE\", `filter.${key}`);\n            }\n            if (value.length > SECURITY_LIMITS.MAX_FILTER_TAG_VALUES) {\n                throw new SecurityValidationError(`Too many filter tag values for ${key}: ${value.length} (max ${SECURITY_LIMITS.MAX_FILTER_TAG_VALUES})`, \"TOO_MANY_FILTER_TAG_VALUES\", `filter.${key}`);\n            }\n            validatedFilter[key] = value.map((tagValue, _index) => {\n                return sanitizeString(tagValue, SECURITY_LIMITS.MAX_TAG_ELEMENT_SIZE);\n            });\n        }\n    }\n    return validatedFilter;\n}\n// Validate array of filters\nexport function validateFilters(filters) {\n    if (!Array.isArray(filters)) {\n        throw new SecurityValidationError(\"Filters must be an array\", \"INVALID_FILTERS_TYPE\", \"filters\");\n    }\n    if (filters.length > SECURITY_LIMITS.MAX_FILTER_COUNT) {\n        throw new SecurityValidationError(`Too many filters: ${filters.length} (max ${SECURITY_LIMITS.MAX_FILTER_COUNT})`, \"TOO_MANY_FILTERS\", \"filters\");\n    }\n    return filters.map((filter, index) => {\n        try {\n            return validateFilter(filter);\n        }\n        catch (error) {\n            if (error instanceof SecurityValidationError) {\n                throw new SecurityValidationError(`Filter at index ${index}: ${error.message}`, error.code, `filters[${index}].${error.field || \"unknown\"}`);\n            }\n            throw error;\n        }\n    });\n}\n// Event validation\nexport function validateEvent(event) {\n    if (!event || typeof event !== \"object\") {\n        throw new SecurityValidationError(\"Event must be an object\", \"INVALID_EVENT_TYPE\", \"event\");\n    }\n    const e = event;\n    // Validate required fields\n    const id = sanitizeString(e.id, SECURITY_LIMITS.MAX_ID_LENGTH);\n    const pubkey = sanitizeString(e.pubkey, SECURITY_LIMITS.MAX_PUBKEY_LENGTH);\n    const sig = sanitizeString(e.sig, SECURITY_LIMITS.MAX_SIGNATURE_LENGTH);\n    const content = validateEventContent(e.content);\n    const tags = validateTags(e.tags);\n    const kind = validateNumber(e.kind, SECURITY_LIMITS.MIN_KIND, SECURITY_LIMITS.MAX_KIND, \"event.kind\");\n    const created_at = validateNumber(e.created_at, SECURITY_LIMITS.MIN_CREATED_AT, SECURITY_LIMITS.MAX_CREATED_AT, \"event.created_at\");\n    // Validate formats\n    if (!/^[0-9a-f]{64}$/i.test(id)) {\n        throw new SecurityValidationError(\"Event ID must be 64-character hex\", \"INVALID_EVENT_ID_FORMAT\", \"event.id\");\n    }\n    if (!/^[0-9a-f]{64}$/i.test(pubkey)) {\n        throw new SecurityValidationError(\"Event pubkey must be 64-character hex\", \"INVALID_EVENT_PUBKEY_FORMAT\", \"event.pubkey\");\n    }\n    if (!/^[0-9a-f]{128}$/i.test(sig)) {\n        throw new SecurityValidationError(\"Event signature must be 128-character hex\", \"INVALID_EVENT_SIGNATURE_FORMAT\", \"event.sig\");\n    }\n    return {\n        id,\n        pubkey,\n        sig,\n        content,\n        tags,\n        kind,\n        created_at,\n    };\n}\nexport function checkRateLimit(state, limit, windowMs, now = Date.now()) {\n    // Reset window if expired\n    if (now - state.windowStart >= windowMs) {\n        state.count = 0;\n        state.windowStart = now;\n        state.blocked = false;\n    }\n    // Check if blocked\n    if (state.blocked) {\n        const retryAfter = Math.ceil((windowMs - (now - state.windowStart)) / 1000);\n        return { allowed: false, retryAfter };\n    }\n    // Check limit\n    if (state.count >= limit) {\n        state.blocked = true;\n        const retryAfter = Math.ceil((windowMs - (now - state.windowStart)) / 1000);\n        return { allowed: false, retryAfter };\n    }\n    // Allow and increment\n    state.count++;\n    return { allowed: true };\n}\n// SECURE KEY ZEROIZATION - Critical for private key security\nexport function secureStringZero(str) {\n    // Note: JavaScript strings are immutable, so we can't actually zero them\n    // However, we can minimize their lifetime and suggest garbage collection\n    if (typeof str !== \"string\") {\n        return;\n    }\n    // Force the string to be processed immediately to trigger potential GC\n    // This is a best-effort approach since JS doesn't provide direct memory control\n    try {\n        // Attempt to trigger garbage collection if available (Node.js)\n        if (typeof global !== \"undefined\" && global.gc) {\n            global.gc();\n        }\n    }\n    catch {\n        // GC not available, continue\n    }\n}\n// Secure buffer zeroization (adapted from NIP-44)\nexport function secureBufferZero(buffer) {\n    if (!buffer || !(buffer instanceof Uint8Array)) {\n        return;\n    }\n    try {\n        // First fill with cryptographically secure random data\n        const secureCrypto = getSecureCrypto();\n        const randomData = secureCrypto.randomBytes(buffer.length);\n        buffer.set(randomData);\n        // Then overwrite with zeros\n        buffer.fill(0);\n        // Finally, attempt to trigger GC\n        try {\n            if (typeof global !== \"undefined\" && global.gc) {\n                global.gc();\n            }\n        }\n        catch {\n            // GC not available, continue\n        }\n    }\n    catch (error) {\n        // Fallback: at least zero the buffer\n        buffer.fill(0);\n    }\n}\n// Secure key derivation cleanup\nexport function secureKeyCleanup(privateKey) {\n    if (!privateKey || typeof privateKey !== \"string\") {\n        return;\n    }\n    // Convert to buffer for secure zeroing if possible\n    try {\n        const keyBuffer = new TextEncoder().encode(privateKey);\n        secureBufferZero(keyBuffer);\n    }\n    catch {\n        // Fallback to string zero attempt\n        secureStringZero(privateKey);\n    }\n}\n// Memory-conscious private key validator\nexport function validatePrivateKey(privateKey, field = \"privateKey\") {\n    if (typeof privateKey !== \"string\") {\n        throw new SecurityValidationError(\"Private key must be a string\", \"INVALID_PRIVATE_KEY_TYPE\", field);\n    }\n    const keyStr = privateKey.trim();\n    if (keyStr.length !== 64) {\n        throw new SecurityValidationError(\"Private key must be exactly 64 characters (32 bytes hex)\", \"INVALID_PRIVATE_KEY_LENGTH\", field);\n    }\n    if (!/^[0-9a-f]{64}$/i.test(keyStr)) {\n        throw new SecurityValidationError(\"Private key must be valid hex (64 characters)\", \"INVALID_PRIVATE_KEY_FORMAT\", field);\n    }\n    return keyStr;\n}\n// Memory limits for relay buffers\nexport function enforceMemoryLimits(map, maxSize, accessTracker, context = \"memory\") {\n    if (map.size <= maxSize) {\n        return;\n    }\n    const initialSize = map.size;\n    let removedCount = 0;\n    if (accessTracker && accessTracker.size > 0) {\n        // Remove least recently accessed items first\n        const entries = Array.from(accessTracker.entries());\n        entries.sort((a, b) => a[1] - b[1]); // Sort by access time (oldest first)\n        for (const [key] of entries) {\n            if (map.size <= maxSize) {\n                break; // Already at target size\n            }\n            if (map.delete(key)) {\n                accessTracker.delete(key);\n                removedCount++;\n            }\n        }\n    }\n    // If still over limit, remove oldest entries from the map (FIFO)\n    if (map.size > maxSize) {\n        const keys = Array.from(map.keys());\n        for (const key of keys) {\n            if (map.size <= maxSize) {\n                break; // Reached target size\n            }\n            if (map.delete(key)) {\n                // Also remove from accessTracker if it exists\n                if (accessTracker) {\n                    accessTracker.delete(key);\n                }\n                removedCount++;\n            }\n        }\n    }\n    if (typeof console !== \"undefined\" && console.warn && removedCount > 0) {\n        console.warn(`Security: Enforced memory limit for ${context}, removed ${removedCount} entries (${initialSize} -> ${map.size})`);\n    }\n}\n", "import { NostrKind, } from \"../types/nostr.js\";\nimport { getPublicKey, verifySignature } from \"../utils/crypto.js\";\nimport { sha256Hex } from \"../utils/crypto.js\";\nimport { signEvent as signEventCrypto } from \"../utils/crypto.js\";\nimport { isValidRelayUrl } from \"../nip19/index.js\";\nimport { isValidPrivateKey, isValidPublicKeyPoint } from \"../nip44/index.js\";\n/**\n * Validate if a string is a valid lowercase hex public key format for NIP-01 events\n * NIP-01 specifically requires lowercase hex for event fields\n */\nfunction isValidLowercasePublicKeyFormat(publicKey) {\n    // Must be exactly 64 characters of lowercase hex\n    return /^[0-9a-f]{64}$/.test(publicKey);\n}\nimport { getUnixTime } from \"../utils/time.js\";\nimport { validateEventContent, validateTags, SECURITY_LIMITS, SecurityValidationError, validateArrayAccess, safeArrayAccess, } from \"../utils/security-validator.js\";\n/**\n * Custom error class for Nostr event validation errors\n */\nexport class NostrValidationError extends Error {\n    constructor(message, field, invalidData) {\n        super(message);\n        this.name = \"NostrValidationError\";\n        this.field = field;\n        this.invalidData = invalidData;\n    }\n}\n/**\n * Calculate the event hash following NIP-01 specification exactly\n * for deterministic serialization across different implementations\n * @throws {NostrValidationError} If the event is missing required fields or has invalid data\n */\nexport async function getEventHash(event) {\n    // Validate event structure first - these fields are required by the Nostr protocol\n    if (!event.pubkey)\n        throw new NostrValidationError(\"Invalid event: missing pubkey\", \"pubkey\", event);\n    if (event.created_at === undefined || event.created_at === null)\n        throw new NostrValidationError(\"Invalid event: missing created_at\", \"created_at\", event);\n    if (event.kind === undefined)\n        throw new NostrValidationError(\"Invalid event: missing kind\", \"kind\", event);\n    if (!Array.isArray(event.tags))\n        throw new NostrValidationError(\"Invalid event: tags must be an array\", \"tags\", event);\n    // Ensure the tags are valid arrays of strings\n    for (const tag of event.tags) {\n        if (!Array.isArray(tag))\n            throw new NostrValidationError(\"Invalid event: each tag must be an array\", \"tags\", event);\n        for (const item of tag) {\n            if (typeof item !== \"string\")\n                throw new NostrValidationError(\"Invalid event: tag items must be strings\", \"tags\", event);\n        }\n    }\n    // Check that content is a string\n    if (typeof event.content !== \"string\")\n        throw new NostrValidationError(\"Invalid event: content must be a string\", \"content\", event);\n    // NIP-01 specifies the serialization format as:\n    // [0, pubkey, created_at, kind, tags, content]\n    // We need to ensure deterministic serialization\n    // Create the array to be serialized\n    const eventData = [\n        0,\n        event.pubkey,\n        event.created_at,\n        event.kind,\n        event.tags,\n        event.content,\n    ];\n    // Per NIP-01: whitespace, line breaks or other unnecessary formatting\n    // should not be included in the output JSON\n    // JavaScript's JSON.stringify doesn't add whitespace by default\n    // so we don't need to pass additional options\n    // Serialize to JSON without pretty formatting\n    // JSON.stringify on arrays is deterministic in all JS engines\n    // because array order is preserved\n    const serialized = JSON.stringify(eventData);\n    // Hash the serialized data\n    return sha256Hex(serialized);\n}\n/**\n * Create an unsigned event from a template\n */\nexport function createEvent(template, pubkey) {\n    // First validate the format (64-character lowercase hex)\n    if (!isValidLowercasePublicKeyFormat(pubkey)) {\n        throw new NostrValidationError(\"Invalid pubkey format: must be a 64-character lowercase hex string\", \"pubkey\");\n    }\n    // Then validate that it represents a valid point on the secp256k1 curve\n    if (!isValidPublicKeyPoint(pubkey)) {\n        throw new NostrValidationError(\"Invalid pubkey: not a valid point on the secp256k1 curve\", \"pubkey\");\n    }\n    if (template.kind === undefined) {\n        throw new NostrValidationError(\"Event template must include a kind\", \"kind\", template);\n    }\n    return {\n        pubkey,\n        created_at: template.created_at || getUnixTime(),\n        kind: template.kind,\n        tags: template.tags || [],\n        content: template.content,\n    };\n}\n/**\n * Create and sign an event\n * @throws {NostrValidationError} If the event validation fails\n */\nexport async function createSignedEvent(event, privateKey) {\n    if (!isValidPrivateKey(privateKey)) {\n        throw new NostrValidationError(\"Invalid private key\", \"privateKey\");\n    }\n    try {\n        const id = await getEventHash(event);\n        const sig = await signEventCrypto(id, privateKey);\n        return {\n            ...event,\n            id,\n            sig,\n        };\n    }\n    catch (error) {\n        if (error instanceof NostrValidationError) {\n            throw error;\n        }\n        throw new NostrValidationError(`Failed to create signed event: ${error instanceof Error ? error.message : String(error)}`, undefined, event);\n    }\n}\n/**\n * Create a text note event (kind 1)\n *\n * @param content The content of the text note\n * @param privateKey The private key to derive the pubkey from\n * @param tags Optional tags for the event\n * @returns An unsigned event with pubkey automatically set\n * @throws {NostrValidationError} If validation fails\n */\nexport function createTextNote(content, privateKey, tags = []) {\n    if (!content || typeof content !== \"string\") {\n        throw new NostrValidationError(\"Content must be a non-empty string\", \"content\");\n    }\n    // Apply security validation\n    try {\n        const validatedContent = validateEventContent(content);\n        const validatedTags = validateTags(tags);\n        // Calculate actual UTF-8 byte length for proper size validation\n        const contentByteLength = new TextEncoder().encode(validatedContent).length;\n        if (contentByteLength > SECURITY_LIMITS.MAX_CONTENT_SIZE) {\n            throw new SecurityValidationError(`Content too large: ${contentByteLength} bytes (max ${SECURITY_LIMITS.MAX_CONTENT_SIZE})`, \"CONTENT_TOO_LARGE\", \"content\");\n        }\n        if (!isValidPrivateKey(privateKey)) {\n            throw new NostrValidationError(\"Invalid private key\", \"privateKey\");\n        }\n        const pubkey = getPublicKey(privateKey);\n        return {\n            pubkey,\n            created_at: getUnixTime(),\n            kind: NostrKind.ShortNote,\n            tags: validatedTags,\n            content: validatedContent,\n        };\n    }\n    catch (error) {\n        if (error instanceof SecurityValidationError) {\n            throw new NostrValidationError(error.message, error.field);\n        }\n        throw error;\n    }\n}\n/**\n * Create a direct message event (kind 4)\n * Encrypts the content using NIP-04 specification\n *\n * @param content The plaintext content to encrypt\n * @param recipientPubkey The public key of the recipient\n * @param privateKey The private key of the sender\n * @param tags Optional additional tags\n * @returns An unsigned event with pubkey automatically set and content encrypted\n * @throws {NostrValidationError} If validation fails\n */\nexport async function createDirectMessage(content, recipientPubkey, privateKey, tags = []) {\n    if (!content || typeof content !== \"string\") {\n        throw new NostrValidationError(\"Content must be a non-empty string\", \"content\");\n    }\n    // Validate recipient public key first (outside try-catch to preserve error field)\n    if (!isValidPublicKeyPoint(recipientPubkey)) {\n        throw new NostrValidationError(\"Invalid recipient public key: must be a valid secp256k1 curve point\", \"recipientPubkey\");\n    }\n    if (!isValidPrivateKey(privateKey)) {\n        throw new NostrValidationError(\"Invalid private key\", \"privateKey\");\n    }\n    // Apply security validation\n    try {\n        const validatedContent = validateEventContent(content);\n        const validatedTags = validateTags(tags);\n        // Calculate actual UTF-8 byte length for proper size validation\n        const contentByteLength = new TextEncoder().encode(validatedContent).length;\n        if (contentByteLength > SECURITY_LIMITS.MAX_CONTENT_SIZE) {\n            throw new SecurityValidationError(`Content too large: ${contentByteLength} bytes (max ${SECURITY_LIMITS.MAX_CONTENT_SIZE})`, \"CONTENT_TOO_LARGE\", \"content\");\n        }\n        const pubkey = getPublicKey(privateKey);\n        // Encrypt the content using NIP-04 with environment-aware, bundler-safe require\n        const encryptNIP04 = (() => {\n            // Prefer Node path when running under Node (tests)\n            try {\n                // eslint-disable-next-line no-eval\n                if (typeof process !== 'undefined' && process.versions && process.versions.node) {\n                    return eval('require(\"../nip04\")').encrypt;\n                }\n            }\n            catch {\n                // eslint-disable-next-line no-empty\n            }\n            // Fallback to web/RN path\n            try {\n                // eslint-disable-next-line no-eval\n                return eval('require(\"../nip04/web\")').encrypt;\n            }\n            catch {\n                // eslint-disable-next-line no-empty\n            }\n            throw new Error(\"NIP-04 module not available in this environment\");\n        })();\n        const encryptedContent = await encryptNIP04(privateKey, recipientPubkey, validatedContent);\n        return {\n            pubkey,\n            created_at: getUnixTime(),\n            kind: NostrKind.DirectMessage,\n            tags: [[\"p\", recipientPubkey], ...validatedTags],\n            content: encryptedContent,\n        };\n    }\n    catch (error) {\n        if (error instanceof SecurityValidationError) {\n            throw new NostrValidationError(error.message, error.field);\n        }\n        if (error instanceof NostrValidationError) {\n            throw error;\n        }\n        throw new NostrValidationError(`Failed to encrypt message: ${error instanceof Error ? error.message : String(error)}`, \"encryption\");\n    }\n}\n/**\n * Create a metadata event (kind 0)\n * @param metadata Object containing user profile metadata\n * @param privateKey The private key to derive the pubkey from\n * @returns An unsigned event with pubkey automatically set\n * @throws {NostrValidationError} If validation fails\n */\nexport function createMetadataEvent(metadata, privateKey) {\n    if (!metadata || typeof metadata !== \"object\") {\n        throw new NostrValidationError(\"Metadata must be a valid object\", \"metadata\");\n    }\n    if (!isValidPrivateKey(privateKey)) {\n        throw new NostrValidationError(\"Invalid private key\", \"privateKey\");\n    }\n    // Get the public key from the private key to ensure the pubkey is non-empty\n    const pubkey = getPublicKey(privateKey);\n    return {\n        pubkey,\n        created_at: getUnixTime(),\n        kind: NostrKind.Metadata,\n        tags: [],\n        content: JSON.stringify(metadata),\n    };\n}\n/**\n * Create an addressable event (kinds 30000-39999)\n * These are events that can be replaced based on kind, pubkey, and d-tag value\n *\n * @param kind The kind of the event (must be between 30000-39999)\n * @param dTagValue The value for the d tag that identifies this addressable event\n * @param content The content of the event\n * @param privateKey The private key to derive the pubkey from\n * @param additionalTags Optional additional tags for the event\n * @returns An unsigned event with pubkey automatically set\n * @throws {NostrValidationError} If the kind is not in the addressable range or other validation fails\n */\nexport function createAddressableEvent(kind, dTagValue, content, privateKey, additionalTags = []) {\n    // Apply security validation with numeric bounds checking\n    if (kind < 30000 || kind >= 40000 || !Number.isInteger(kind)) {\n        throw new NostrValidationError(\"Addressable events must have kind between 30000-39999\", \"kind\", { kind });\n    }\n    if (typeof dTagValue !== \"string\") {\n        throw new NostrValidationError(\"D-tag value must be a string\", \"dTagValue\");\n    }\n    // Validate d-tag length for security\n    if (dTagValue.length > SECURITY_LIMITS.MAX_TAG_ELEMENT_SIZE) {\n        throw new NostrValidationError(`D-tag value too long: ${dTagValue.length} chars (max ${SECURITY_LIMITS.MAX_TAG_ELEMENT_SIZE})`, \"dTagValue\");\n    }\n    if (!content || typeof content !== \"string\") {\n        throw new NostrValidationError(\"Content must be a non-empty string\", \"content\");\n    }\n    try {\n        const validatedContent = validateEventContent(content);\n        const validatedTags = validateTags(additionalTags);\n        // Calculate actual UTF-8 byte length for proper size validation\n        const contentByteLength = new TextEncoder().encode(validatedContent).length;\n        if (contentByteLength > SECURITY_LIMITS.MAX_CONTENT_SIZE) {\n            throw new SecurityValidationError(`Content too large: ${contentByteLength} bytes (max ${SECURITY_LIMITS.MAX_CONTENT_SIZE})`, \"CONTENT_TOO_LARGE\", \"content\");\n        }\n        if (!isValidPrivateKey(privateKey)) {\n            throw new NostrValidationError(\"Invalid private key\", \"privateKey\");\n        }\n        const pubkey = getPublicKey(privateKey);\n        // Ensure the d tag is included and is the first tag\n        const dTag = [\"d\", dTagValue];\n        const tags = [dTag, ...validatedTags];\n        return {\n            pubkey,\n            created_at: getUnixTime(),\n            kind,\n            tags,\n            content: validatedContent,\n        };\n    }\n    catch (error) {\n        if (error instanceof SecurityValidationError) {\n            throw new NostrValidationError(error.message, error.field);\n        }\n        throw error;\n    }\n}\n/**\n * Validate a Nostr event according to NIP-01 and optional custom rules\n *\n * @param event The event to validate\n * @param options Validation options\n * @returns True if the event is valid\n * @throws {NostrValidationError} If validation fails\n */\nexport async function validateEvent(event, options = {}) {\n    const { validateSignatures = true, maxTimestampDrift = 60 * 60, // 1 hour by default\n    validateIds = true, validateFields = true, validateTags = true, validateContent = true, customValidator, } = options;\n    // 1. Validate basic required fields\n    if (validateFields) {\n        // Check ID exists\n        if (!event.id || typeof event.id !== \"string\" || event.id.length !== 64) {\n            throw new NostrValidationError(\"Invalid or missing event ID: must be a 64-character hex string\", \"id\", event);\n        }\n        if (event.id !== event.id.toLowerCase()) {\n            throw new NostrValidationError(\"Invalid event ID: must be lowercase hex\", \"id\", event);\n        }\n        // Check pubkey exists and is valid hex\n        if (!event.pubkey || typeof event.pubkey !== \"string\") {\n            throw new NostrValidationError(\"Invalid or missing pubkey: must be a string\", \"pubkey\", event);\n        }\n        // First check basic format validation (hex format and case)\n        if (!isValidLowercasePublicKeyFormat(event.pubkey)) {\n            // Check for uppercase to provide specific error message\n            if (/^[0-9A-F]{64}$/.test(event.pubkey)) {\n                throw new NostrValidationError(\"Invalid pubkey: must be lowercase hex\", \"pubkey\", event);\n            }\n            // Check length\n            if (event.pubkey.length !== 64) {\n                throw new NostrValidationError(\"Invalid pubkey: must be 64 characters long\", \"pubkey\", event);\n            }\n            // Generic format error\n            throw new NostrValidationError(\"Invalid pubkey: must be a 64-character lowercase hex string\", \"pubkey\", event);\n        }\n        // Then check if it represents a valid curve point\n        if (!isValidPublicKeyPoint(event.pubkey)) {\n            throw new NostrValidationError(\"Invalid pubkey: must be a valid secp256k1 curve point\", \"pubkey\", event);\n        }\n        // Check signature exists\n        if (!event.sig ||\n            typeof event.sig !== \"string\" ||\n            event.sig.length !== 128) {\n            throw new NostrValidationError(\"Invalid or missing signature: must be a 128-character hex string\", \"sig\", event);\n        }\n        if (event.sig !== event.sig.toLowerCase()) {\n            throw new NostrValidationError(\"Invalid signature: must be lowercase hex\", \"sig\", event);\n        }\n        // Check kind is a number\n        if (typeof event.kind !== \"number\") {\n            throw new NostrValidationError(\"Kind must be a number\", \"kind\", event);\n        }\n        // Check created_at is a valid timestamp\n        if (typeof event.created_at !== \"number\" || event.created_at < 0) {\n            throw new NostrValidationError(\"Invalid created_at timestamp\", \"created_at\", event);\n        }\n        // Check content is a string\n        if (typeof event.content !== \"string\") {\n            throw new NostrValidationError(\"Content must be a string\", \"content\", event);\n        }\n    }\n    // 2. Validate tags format\n    if (validateTags) {\n        if (!Array.isArray(event.tags)) {\n            throw new NostrValidationError(\"Tags must be an array\", \"tags\", event);\n        }\n        for (const tag of event.tags) {\n            if (!Array.isArray(tag)) {\n                throw new NostrValidationError(\"Each tag must be an array\", \"tags\", event);\n            }\n            if (tag.length === 0) {\n                throw new NostrValidationError(\"Tags cannot be empty arrays\", \"tags\", event);\n            }\n            for (const item of tag) {\n                if (typeof item !== \"string\") {\n                    throw new NostrValidationError(\"Tag items must be strings\", \"tags\", event);\n                }\n            }\n        }\n    }\n    // 3. Validate timestamp drift if enabled\n    if (maxTimestampDrift > 0) {\n        const now = getUnixTime();\n        const drift = Math.abs(now - event.created_at);\n        if (drift > maxTimestampDrift) {\n            throw new NostrValidationError(`Event timestamp is too far from current time (drift: ${drift}s, max allowed: ${maxTimestampDrift}s)`, \"created_at\", event);\n        }\n    }\n    // 4. Validate event ID matches serialized content\n    if (validateIds) {\n        const unsignedEvent = {\n            pubkey: event.pubkey,\n            created_at: event.created_at,\n            kind: event.kind,\n            tags: event.tags,\n            content: event.content,\n        };\n        const calculatedId = await getEventHash(unsignedEvent);\n        if (calculatedId !== event.id) {\n            throw new NostrValidationError(\"Event ID does not match content hash\", \"id\", event);\n        }\n    }\n    // 5. Validate signature\n    if (validateSignatures) {\n        const isValid = await verifySignature(event.id, event.sig, event.pubkey);\n        if (!isValid) {\n            throw new NostrValidationError(\"Invalid signature\", \"sig\", event);\n        }\n    }\n    // 6. Validate content format based on kind\n    if (validateContent) {\n        switch (event.kind) {\n            case NostrKind.Metadata:\n                try {\n                    const metadata = JSON.parse(event.content);\n                    if (typeof metadata !== \"object\" || metadata === null) {\n                        throw new NostrValidationError(\"Metadata event content must be a valid JSON object\", \"content\", event);\n                    }\n                }\n                catch (error) {\n                    throw new NostrValidationError(\"Metadata event has invalid JSON content\", \"content\", event);\n                }\n                break;\n            case NostrKind.Contacts: {\n                // NIP-02: Validate 'p' tags for Kind 3 (Contacts) events.\n                // Tags should conform to: [\"p\", <pubkey_hex>, <recommended_relay_url_or_empty_string>, <petname_or_empty_string>]\n                // General tag validation (if enabled) ensures all tag items are strings.\n                for (const tag of event.tags) {\n                    if (tag[0] === \"p\") {\n                        // 1. Validate pubkey (tag[1])\n                        if (tag.length < 2 ||\n                            typeof tag[1] !== \"string\" ||\n                            !isValidPublicKeyPoint(tag[1])) {\n                            throw new NostrValidationError(`Invalid NIP-02 'p' tag: Pubkey at tag[1] is missing, not a string, or not a valid secp256k1 curve point. Received: '${tag[1]}'.`, \"tags\", event);\n                        }\n                        // 2. Validate relay URL (tag[2])\n                        if (tag.length > 2) {\n                            const relayUrl = tag[2];\n                            // General tag validation should ensure tag[2] is a string if validateTags=true.\n                            // This check provides robustness.\n                            if (typeof relayUrl !== \"string\") {\n                                throw new NostrValidationError(\"Invalid NIP-02 'p' tag: Relay URL at tag[2] must be a string if present.\", \"tags\", event);\n                            }\n                            // If relayUrl is not an empty string, it must be a valid ws/wss URL.\n                            if (relayUrl.length > 0 && !isValidRelayUrl(relayUrl)) {\n                                throw new NostrValidationError(`Invalid NIP-02 'p' tag: Relay URL \"${relayUrl}\" at tag[2] is not a valid ws:// or wss:// URL, or an empty string.`, \"tags\", event);\n                            }\n                        }\n                        // 3. Validate structure if petname (tag[3]) is present\n                        if (tag.length > 3) {\n                            const petname = tag[3];\n                            // General tag validation should ensure tag[3] is a string if validateTags=true.\n                            if (typeof petname !== \"string\") {\n                                throw new NostrValidationError(\"Invalid NIP-02 'p' tag: Petname at tag[3] must be a string if present.\", \"tags\", event);\n                            }\n                            // According to NIP-02: \"If relay URL is not present but petname is, the relay URL MUST be an empty string.\"\n                            // This means tag[2] must exist if tag[3] exists.\n                            if (typeof tag[2] !== \"string\") {\n                                throw new NostrValidationError(\"Invalid NIP-02 'p' tag: Relay URL at tag[2] must be present (and a string, can be empty) if petname at tag[3] is specified.\", \"tags\", event);\n                            }\n                        }\n                        // 4. Validate maximum length of a 'p' tag\n                        if (tag.length > 4) {\n                            throw new NostrValidationError(\"Invalid NIP-02 'p' tag: Exceeds maximum of 4 elements (p, pubkey, relay, petname).\", \"tags\", event);\n                        }\n                    }\n                }\n                break;\n            }\n            case NostrKind.DirectMessage: {\n                // Direct messages must have exactly one p tag\n                const pTags = event.tags.filter((tag) => {\n                    try {\n                        return (validateArrayAccess(tag, 0) && safeArrayAccess(tag, 0) === \"p\");\n                    }\n                    catch {\n                        return false;\n                    }\n                });\n                if (pTags.length !== 1) {\n                    throw new NostrValidationError(\"Direct message event must have exactly one p tag\", \"tags\", event);\n                }\n                // Validate the pubkey in the 'p' tag with safe access\n                try {\n                    if (!validateArrayAccess(pTags, 0)) {\n                        throw new NostrValidationError(\"Direct message p-tag validation error: No valid p tags found\", \"tags\", event);\n                    }\n                    const pTag = safeArrayAccess(pTags, 0);\n                    if (!Array.isArray(pTag) || !validateArrayAccess(pTag, 1)) {\n                        throw new NostrValidationError(\"Direct message p-tag validation error: Invalid p tag structure\", \"tags\", event);\n                    }\n                    const pubkeyValue = safeArrayAccess(pTag, 1);\n                    if (typeof pubkeyValue !== \"string\" ||\n                        !isValidPublicKeyPoint(pubkeyValue)) {\n                        throw new NostrValidationError(`Invalid 'p' tag in Direct Message: Pubkey at tag[1] (pTag[1]) must be a valid secp256k1 curve point. Received: '${pubkeyValue}'.`, \"tags\", event);\n                    }\n                }\n                catch (error) {\n                    if (error instanceof SecurityValidationError) {\n                        throw new NostrValidationError(`Direct message validation bounds checking error: ${error.message}`, \"tags\", event);\n                    }\n                    throw error; // Re-throw NostrValidationError\n                }\n                break;\n            }\n            // Add validation for other kinds as needed\n        }\n    }\n    // 7. Run custom validator if provided\n    if (customValidator) {\n        const customValid = await Promise.resolve(customValidator(event));\n        if (!customValid) {\n            throw new NostrValidationError(\"Event failed custom validation\", undefined, event);\n        }\n    }\n    return true;\n}\n/**\n * Extract all tags of a specific type from an event\n *\n * @param event The Nostr event to extract tags from\n * @param tagName The tag name to extract (e.g., 'e', 'p', etc.)\n * @returns Array of tag values (without the tag name)\n */\nexport function getTagValues(event, tagName) {\n    return event.tags\n        .filter((tag) => tag[0] === tagName)\n        .flatMap((tag) => tag.slice(1));\n}\n/**\n * Get a specific tag value from an event (first occurrence)\n *\n * @param event The Nostr event to extract tag from\n * @param tagName The tag name to extract (e.g., 'e', 'p', etc.)\n * @param index The index of the tag value (default: 0, which is the first element after the tag name)\n * @returns The tag value or undefined if not found\n */\nexport function getTagValue(event, tagName, index = 0) {\n    // Validate index is not negative\n    if (index < 0) {\n        throw new SecurityValidationError(`Tag index must be non-negative: ${index}`, \"INVALID_TAG_INDEX\", \"index\");\n    }\n    const tag = event.tags.find((tag) => tag[0] === tagName);\n    if (!tag || !Array.isArray(tag)) {\n        return undefined;\n    }\n    // Safe bounds checking against actual tag length\n    const targetIndex = index + 1; // +1 because tag[0] is the tag name\n    if (targetIndex >= tag.length) {\n        return undefined;\n    }\n    return tag[targetIndex];\n}\n/**\n * Extract all tags from an event, organized by tag name\n *\n * @param event The Nostr event to extract tags from\n * @returns Object with tag names as keys and arrays of values as values\n */\nexport function extractTags(event) {\n    const result = {};\n    for (const tag of event.tags) {\n        if (tag.length < 1)\n            continue;\n        const tagName = tag[0];\n        const tagValues = tag.slice(1);\n        if (!result[tagName]) {\n            result[tagName] = [];\n        }\n        result[tagName].push(...tagValues);\n    }\n    return result;\n}\n/**\n * Create a tagged event with helper methods for tag extraction\n *\n * @param event The Nostr event to wrap\n * @returns Enhanced event with tag extraction methods\n */\nexport function createTaggedEvent(event) {\n    return {\n        ...event,\n        tagValues: (name) => event.tags\n            .filter((tag) => tag[0] === name)\n            .flatMap((tag) => tag.slice(1)),\n        getTag: (name, index = 0) => {\n            const tag = event.tags.find((tag) => tag[0] === name);\n            return tag && tag.length > index + 1 ? tag[index + 1] : undefined;\n        },\n    };\n}\n", "/**\n * Simple logger with configurable log levels\n */\nexport var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"NONE\"] = 0] = \"NONE\";\n    LogLevel[LogLevel[\"ERROR\"] = 1] = \"ERROR\";\n    LogLevel[LogLevel[\"WARN\"] = 2] = \"WARN\";\n    LogLevel[LogLevel[\"INFO\"] = 3] = \"INFO\";\n    LogLevel[LogLevel[\"DEBUG\"] = 4] = \"DEBUG\";\n    LogLevel[LogLevel[\"TRACE\"] = 5] = \"TRACE\";\n})(LogLevel || (LogLevel = {}));\nexport class Logger {\n    constructor(options = {}) {\n        this.level = options.level ?? LogLevel.INFO;\n        this.prefix = options.prefix ?? \"\";\n        this.includeTimestamp = options.includeTimestamp ?? false;\n        this.silent = options.silent ?? false;\n    }\n    formatMessage(message) {\n        let formattedMessage = \"\";\n        if (this.includeTimestamp) {\n            formattedMessage += `[${new Date().toISOString()}] `;\n        }\n        if (this.prefix) {\n            formattedMessage += `[${this.prefix}] `;\n        }\n        return formattedMessage + message;\n    }\n    error(message, ...args) {\n        if (!this.silent && this.level >= LogLevel.ERROR) {\n            console.error(this.formatMessage(message), ...args);\n        }\n    }\n    warn(message, ...args) {\n        if (!this.silent && this.level >= LogLevel.WARN) {\n            console.warn(this.formatMessage(message), ...args);\n        }\n    }\n    info(message, ...args) {\n        if (!this.silent && this.level >= LogLevel.INFO) {\n            console.log(this.formatMessage(message), ...args);\n        }\n    }\n    debug(message, ...args) {\n        if (!this.silent && this.level >= LogLevel.DEBUG) {\n            console.log(this.formatMessage(message), ...args);\n        }\n    }\n    trace(message, ...args) {\n        if (!this.silent && this.level >= LogLevel.TRACE) {\n            console.log(this.formatMessage(message), ...args);\n        }\n    }\n    setLevel(level) {\n        this.level = level;\n    }\n}\n", "import { getWebSocketImplementation } from \"../utils/websocket.js\";\nimport { createInMemoryWebSocket } from \"../utils/inMemoryWebSocket.js\";\nimport { RelayEvent, NIP20Prefix, } from \"../types/nostr.js\";\nimport { NostrValidationError, getEventHash } from \"./event.js\";\nimport { getUnixTime } from \"../utils/time.js\";\nimport { verifySignature } from \"../utils/crypto.js\";\nimport { Logger, LogLevel } from \"../nip46/utils/logger.js\";\nimport { SECURITY_LIMITS, getSecureRandom, secureRandomHex, } from \"../utils/security-validator.js\";\nconst WS_READY_STATE = {\n    CONNECTING: 0,\n    OPEN: 1,\n    CLOSING: 2,\n    CLOSED: 3,\n};\nexport class Relay {\n    constructor(url, options = {}) {\n        this.ws = null;\n        this.connected = false;\n        this.subscriptions = new Map();\n        this.eventHandlers = {};\n        this.connectionPromise = null;\n        this.connectionTimeout = 10000; // Default timeout of 10 seconds\n        // Event buffers with memory limits\n        this.eventBuffers = new Map();\n        this.eventBufferAccessTimes = new Map(); // For LRU eviction\n        this.maxEventBuffers = SECURITY_LIMITS.MAX_RELAY_EVENT_BUFFERS;\n        this.maxEventsPerBuffer = SECURITY_LIMITS.MAX_EVENTS_PER_BUFFER;\n        this.bufferFlushInterval = null;\n        this.bufferFlushDelay = 50; // ms to wait before flushing event buffer\n        // Reconnection parameters\n        this.reconnectAttempts = 0;\n        this.reconnectTimer = null;\n        this.autoReconnect = true; // Whether to automatically reconnect\n        this.maxReconnectAttempts = 10; // Maximum number of reconnection attempts\n        this.maxReconnectDelay = 30000; // Maximum delay between reconnect attempts (ms)\n        // Track replaceable and addressable events according to NIP-01 with memory limits\n        this.replaceableEvents = new Map();\n        this.replaceableEventAccessTimes = new Map(); // For LRU eviction\n        this.maxReplaceableEventPubkeys = SECURITY_LIMITS.MAX_REPLACEABLE_EVENT_PUBKEYS;\n        this.maxReplaceableEventsPerPubkey = SECURITY_LIMITS.MAX_REPLACEABLE_EVENTS_PER_PUBKEY;\n        this.addressableEvents = new Map();\n        this.addressableEventAccessTimes = new Map(); // For LRU eviction\n        this.maxAddressableEvents = SECURITY_LIMITS.MAX_ADDRESSABLE_EVENTS;\n        this.pendingValidationCounts = new Map();\n        this.pendingEoseSubscriptions = new Set();\n        this.url = url;\n        this.logger = new Logger({\n            prefix: `Relay(${url})`,\n            level: LogLevel.WARN, // Default to WARN level for production use\n            includeTimestamp: false,\n        });\n        if (options.connectionTimeout !== undefined) {\n            this.connectionTimeout = options.connectionTimeout;\n        }\n        if (options.bufferFlushDelay !== undefined) {\n            this.bufferFlushDelay = options.bufferFlushDelay;\n        }\n        if (options.autoReconnect !== undefined) {\n            this.autoReconnect = options.autoReconnect;\n        }\n        if (options.maxReconnectAttempts !== undefined) {\n            this.maxReconnectAttempts = options.maxReconnectAttempts;\n        }\n        if (options.maxReconnectDelay !== undefined) {\n            this.maxReconnectDelay = options.maxReconnectDelay;\n        }\n    }\n    async connect() {\n        if (this.connected)\n            return true;\n        if (this.connectionPromise)\n            return this.connectionPromise;\n        // Reset WebSocket if it exists already\n        if (this.ws) {\n            try {\n                this.ws.close();\n            }\n            catch (e) {\n                // Ignore close errors, the socket might already be in a closing state\n            }\n            this.ws = null;\n        }\n        // Create the connection promise\n        const connectionPromise = new Promise((resolve, reject) => {\n            try {\n                const inMemorySocket = createInMemoryWebSocket(this.url);\n                if (inMemorySocket) {\n                    this.ws = inMemorySocket;\n                }\n                else {\n                    const WS = getWebSocketImplementation();\n                    this.ws = new WS(this.url);\n                }\n                const socket = this.ws;\n                if (!socket) {\n                    throw new Error(\"WebSocket implementation unavailable\");\n                }\n                // Set up connection timeout\n                const timeoutId = setTimeout(() => {\n                    // Only run this if we haven't connected yet\n                    if (this.ws && !this.connected) {\n                        this.triggerEvent(RelayEvent.Error, this.url, new Error(\"connection timeout\"));\n                        try {\n                            this.ws.close();\n                        }\n                        catch (e) {\n                            // Ignore errors during force close\n                        }\n                        this.ws = null;\n                        this.connectionPromise = null;\n                        reject(new Error(\"connection timeout\"));\n                    }\n                }, this.connectionTimeout);\n                socket.onopen = () => {\n                    clearTimeout(timeoutId);\n                    this.connected = true;\n                    this.resetReconnectAttempts(); // Reset reconnect counter on successful connection\n                    this.setupBufferFlush(); // Set up the event buffer flush interval\n                    this.triggerEvent(RelayEvent.Connect, this.url);\n                    resolve(true);\n                };\n                socket.onclose = () => {\n                    clearTimeout(timeoutId);\n                    const wasConnected = this.connected;\n                    this.connected = false;\n                    this.clearBufferFlush(); // Clear the event buffer flush interval\n                    this.triggerEvent(RelayEvent.Disconnect, this.url);\n                    // Only reject the promise if we're still waiting to connect\n                    if (!wasConnected && this.connectionPromise) {\n                        this.connectionPromise = null;\n                        reject(new Error(\"connection closed\"));\n                    }\n                    // Schedule reconnection if auto-reconnect is enabled\n                    if (this.autoReconnect && wasConnected) {\n                        this.scheduleReconnect();\n                    }\n                };\n                socket.onerror = (error) => {\n                    clearTimeout(timeoutId);\n                    this.triggerEvent(RelayEvent.Error, this.url, error);\n                    // Only reject the promise if we haven't connected yet\n                    if (!this.connected && this.connectionPromise) {\n                        this.connectionPromise = null;\n                        reject(error instanceof Error ? error : new Error(\"websocket error\"));\n                    }\n                };\n                socket.onmessage = (message) => {\n                    try {\n                        const data = JSON.parse(message.data);\n                        this.handleMessage(data);\n                    }\n                    catch (error) {\n                        this.triggerEvent(RelayEvent.Error, this.url, error);\n                    }\n                };\n            }\n            catch (error) {\n                // Handle errors during WebSocket creation\n                this.connectionPromise = null;\n                reject(error);\n            }\n        }).catch((_error) => {\n            // Ensure we return false if connection fails but don't re-throw\n            this.logger.error(`Connection failed:`, _error);\n            // Schedule reconnection if auto-reconnect is enabled\n            if (this.autoReconnect) {\n                this.scheduleReconnect();\n            }\n            return false; // Explicit type assertion\n        });\n        // Store the promise for future connect() calls to return\n        this.connectionPromise = connectionPromise;\n        // Create a separate promise chain to handle cleanup\n        // This ensures the original promise is not modified\n        connectionPromise.then(() => {\n            // Only clean up if this is still the active connection promise\n            if (this.connectionPromise === connectionPromise) {\n                this.connectionPromise = null;\n            }\n        }, () => {\n            // Also clean up on rejection\n            if (this.connectionPromise === connectionPromise) {\n                this.connectionPromise = null;\n            }\n        });\n        return this.connectionPromise;\n    }\n    disconnect() {\n        // Cancel any scheduled reconnection\n        this.cancelReconnect();\n        if (!this.ws)\n            return;\n        try {\n            // Clear all subscriptions to prevent further processing\n            this.subscriptions.clear();\n            // Clear event buffers and access times\n            this.eventBuffers.clear();\n            this.eventBufferAccessTimes.clear();\n            // Clear replaceable event storage and access times\n            this.replaceableEvents.clear();\n            this.replaceableEventAccessTimes.clear();\n            // Clear addressable event storage and access times\n            this.addressableEvents.clear();\n            this.addressableEventAccessTimes.clear();\n            this.clearBufferFlush(); // Clear the buffer flush interval\n            // Close the WebSocket if it's open or connecting\n            if (this.ws &&\n                (this.ws.readyState === WS_READY_STATE.OPEN ||\n                    this.ws.readyState === WS_READY_STATE.CONNECTING)) {\n                // First try to send CLOSE messages for any active subscriptions\n                try {\n                    this.ws.close();\n                }\n                catch (e) {\n                    // Ignore close errors, the connection might already be closed or invalid\n                }\n                // Reset the connection promise if it exists\n                this.connectionPromise = null;\n            }\n        }\n        catch (error) {\n            console.error(`Error closing WebSocket for ${this.url}:`, error);\n        }\n        finally {\n            // Reset all state variables\n            this.ws = null;\n            this.connected = false;\n            this.triggerEvent(RelayEvent.Disconnect, this.url);\n        }\n    }\n    /**\n     * Schedule a reconnection attempt with exponential backoff\n     */\n    scheduleReconnect() {\n        // Cancel any existing reconnect timer\n        this.cancelReconnect();\n        // Check if we've reached the maximum number of reconnect attempts\n        if (this.maxReconnectAttempts > 0 &&\n            this.reconnectAttempts >= this.maxReconnectAttempts) {\n            console.warn(`Maximum reconnection attempts (${this.maxReconnectAttempts}) reached for ${this.url}`);\n            return;\n        }\n        // Calculate delay with exponential backoff and jitter\n        const baseDelay = Math.min(1000 * Math.pow(2, this.reconnectAttempts), this.maxReconnectDelay);\n        // Use secure random for reconnection timing (prevent timing attacks)\n        let secureJitter;\n        try {\n            secureJitter = getSecureRandom();\n        }\n        catch (error) {\n            // Fallback to Math.random() for non-critical reconnection timing if secure random is unavailable\n            secureJitter = Math.random();\n        }\n        const jitter = secureJitter * 0.3 * baseDelay; // Add 0-30% jitter\n        const reconnectDelay = baseDelay + jitter;\n        this.reconnectTimer = setTimeout(() => {\n            this.reconnectAttempts++;\n            this.connect().catch((error) => {\n                console.error(`Reconnection attempt ${this.reconnectAttempts} failed for ${this.url}:`, error);\n                // The next reconnection will be scheduled in the connect() method's catch handler\n            });\n        }, reconnectDelay);\n    }\n    /**\n     * Cancel any scheduled reconnection attempt\n     */\n    cancelReconnect() {\n        if (this.reconnectTimer) {\n            clearTimeout(this.reconnectTimer);\n            this.reconnectTimer = null;\n        }\n    }\n    /**\n     * Reset the reconnection attempt counter\n     */\n    resetReconnectAttempts() {\n        this.reconnectAttempts = 0;\n        this.cancelReconnect();\n    }\n    /**\n     * Enable or disable automatic reconnection\n     */\n    setAutoReconnect(enable) {\n        this.autoReconnect = enable;\n        // If disabling, cancel any pending reconnect\n        if (!enable) {\n            this.cancelReconnect();\n        }\n    }\n    /**\n     * Set the maximum number of reconnection attempts\n     * @param max Maximum number of attempts (0 for unlimited)\n     */\n    setMaxReconnectAttempts(max) {\n        if (max < 0) {\n            throw new Error(\"Maximum reconnect attempts must be a non-negative number\");\n        }\n        this.maxReconnectAttempts = max;\n    }\n    /**\n     * Set the maximum delay between reconnection attempts\n     * @param maxDelayMs Maximum delay in milliseconds\n     */\n    setMaxReconnectDelay(maxDelayMs) {\n        if (maxDelayMs < 1000) {\n            throw new Error(\"Maximum reconnect delay must be at least 1000ms\");\n        }\n        this.maxReconnectDelay = maxDelayMs;\n    }\n    on(event, callback) {\n        if (typeof callback !== \"function\")\n            return;\n        const existingCallbacks = this.eventHandlers[event];\n        if (!existingCallbacks) {\n            // If no array exists for this event type, create one with the new callback\n            this.eventHandlers[event] = [callback];\n        }\n        else {\n            // existingCallbacks is already correctly typed as RelayEventCallbacks[E][] | undefined by the corrected RelayEventHandler\n            if (!existingCallbacks.includes(callback)) {\n                existingCallbacks.push(callback);\n            }\n        }\n    }\n    off(event, callback) {\n        if (typeof callback !== \"function\")\n            return;\n        const handlerOrArray = this.eventHandlers[event];\n        if (!handlerOrArray) {\n            // If undefined, no handlers registered for this event.\n            return;\n        }\n        // First, check if the stored entry is a single function (user's identified scenario for robustness)\n        // Note: Types suggest handlerOrArray should be an array if defined (RelayEventCallbacks[E][]).\n        // This check handles potential state where it might erroneously be a single function.\n        if (typeof handlerOrArray === \"function\") {\n            if (handlerOrArray === callback) {\n                delete this.eventHandlers[event];\n            }\n        }\n        // Else, if it's an array (the expected scenario based on types and `on` method)\n        else if (Array.isArray(handlerOrArray)) {\n            const callbacksArray = handlerOrArray; // Can also rename to handlerOrArray if preferred\n            const index = callbacksArray.indexOf(callback);\n            if (index > -1) {\n                callbacksArray.splice(index, 1);\n            }\n            if (callbacksArray.length === 0) {\n                delete this.eventHandlers[event];\n            }\n        }\n        // If handlerOrArray is defined but is neither a function nor an array (e.g., other object types),\n        // this would be a highly unexpected state. Current behavior is to do nothing, which is safe.\n    }\n    async publish(event, options = {}) {\n        if (!this.connected) {\n            try {\n                const connected = await this.connect();\n                if (!connected) {\n                    return {\n                        success: false,\n                        reason: \"connection_failed\",\n                        relay: this.url,\n                    };\n                }\n            }\n            catch (error) {\n                const errorMsg = error instanceof Error ? error.message : \"unknown error\";\n                return {\n                    success: false,\n                    reason: `connection_error: ${errorMsg}`,\n                    relay: this.url,\n                };\n            }\n        }\n        if (!this.connected ||\n            !this.ws ||\n            this.ws.readyState !== WS_READY_STATE.OPEN) {\n            return { success: false, reason: \"not_connected\", relay: this.url };\n        }\n        try {\n            // First send the event\n            const message = JSON.stringify([\"EVENT\", event]);\n            this.ws.send(message);\n            // If we don't need to wait for acknowledgment, return immediately\n            if (options.waitForAck === false) {\n                return { success: true, relay: this.url };\n            }\n            // Return a Promise that will resolve when we get the OK response for this event\n            return new Promise((resolve) => {\n                const timeout = options.timeout ?? 10000;\n                let timeoutId = setTimeout(() => {\n                    cleanup();\n                    resolve({ success: false, reason: \"timeout\", relay: this.url });\n                }, timeout);\n                // Create unique handler function for this specific publish operation\n                const handleOk = (eventId, success, details) => {\n                    if (eventId === event.id) {\n                        cleanup();\n                        resolve({\n                            success,\n                            reason: details.rawMessage,\n                            parsedReason: details,\n                            relay: this.url,\n                        });\n                    }\n                };\n                // Setup error handler in case of WebSocket errors during publishing\n                const handleError = (_, error) => {\n                    cleanup();\n                    const errorMsg = error instanceof Error ? error.message : \"unknown error\";\n                    resolve({\n                        success: false,\n                        reason: `error: ${errorMsg}`,\n                        relay: this.url,\n                    });\n                };\n                // Setup disconnect handler in case connection drops during wait\n                const handleDisconnect = () => {\n                    cleanup();\n                    resolve({ success: false, reason: \"disconnected\", relay: this.url });\n                };\n                // Helper to clean up all handlers and timeout\n                const cleanup = () => {\n                    this.off(RelayEvent.OK, handleOk);\n                    this.off(RelayEvent.Error, handleError);\n                    this.off(RelayEvent.Disconnect, handleDisconnect);\n                    clearTimeout(timeoutId);\n                };\n                // Register the event handlers\n                this.on(RelayEvent.OK, handleOk);\n                this.on(RelayEvent.Error, handleError);\n                this.on(RelayEvent.Disconnect, handleDisconnect);\n                // Set timeout to avoid hanging indefinitely\n                timeoutId = setTimeout(() => {\n                    cleanup();\n                    resolve({ success: false, reason: \"timeout\", relay: this.url });\n                }, timeout);\n            });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : \"unknown error\";\n            console.error(`Error publishing event to ${this.url}:`, errorMessage);\n            return {\n                success: false,\n                reason: `error: ${errorMessage}`,\n                relay: this.url,\n            };\n        }\n    }\n    subscribe(filters, onEvent, onEOSE, options = {}) {\n        // Generate cryptographically secure subscription ID\n        const id = secureRandomHex(16);\n        // Validate filters before proceeding\n        const fieldsToValidate = [\"ids\", \"authors\", \"#e\", \"#p\"];\n        for (const filter of filters) {\n            for (const field of fieldsToValidate) {\n                const values = filter[field]; // Type assertion needed as Filter has [key: string]: unknown\n                if (Array.isArray(values)) {\n                    for (const item of values) {\n                        if (!this._isValidNip01FilterIdentifier(item)) {\n                            const fieldName = field;\n                            throw new NostrValidationError(`Invalid NIP-01 filter value for '${fieldName}': item '${item}' is not a 64-character lowercase hex string.`, fieldName, filter);\n                        }\n                    }\n                }\n            }\n        }\n        const subscription = {\n            id,\n            filters,\n            onEvent,\n            onEOSE,\n            options,\n        };\n        if (options.autoClose && options.eoseTimeout && options.eoseTimeout > 0) {\n            subscription.eoseTimer = setTimeout(() => {\n                this.unsubscribe(id);\n            }, options.eoseTimeout);\n        }\n        this.subscriptions.set(id, subscription);\n        this.eventBuffers.set(id, []); // Initialize an empty event buffer for this subscription\n        if (this.connected && this.ws) {\n            const message = JSON.stringify([\"REQ\", id, ...filters]);\n            this.ws.send(message);\n        }\n        return id;\n    }\n    unsubscribe(id) {\n        const subscription = this.subscriptions.get(id);\n        if (!subscription)\n            return;\n        if (subscription.eoseTimer) {\n            clearTimeout(subscription.eoseTimer);\n        }\n        this.subscriptions.delete(id);\n        this.eventBuffers.delete(id); // Clean up the event buffer for this subscription\n        this.eventBufferAccessTimes.delete(id); // Clean up the access time tracking\n        this.pendingEoseSubscriptions.delete(id);\n        this.pendingValidationCounts.delete(id);\n        if (this.connected && this.ws) {\n            const message = JSON.stringify([\"CLOSE\", id]);\n            this.ws.send(message);\n        }\n    }\n    handleMessage(data) {\n        if (!Array.isArray(data))\n            return;\n        const [type, ...rest] = data;\n        switch (type) {\n            case \"EVENT\": {\n                const [subscriptionId, event] = rest;\n                if (typeof subscriptionId !== \"string\") {\n                    this.triggerEvent(RelayEvent.Error, this.url, new Error(\"Invalid subscription identifier in EVENT message\"));\n                    break;\n                }\n                this.incrementPendingValidation(subscriptionId);\n                // Type guard to ensure event is a NostrEvent\n                if (!this.isNostrEvent(event)) {\n                    this.decrementPendingValidation(subscriptionId);\n                    this.triggerEvent(RelayEvent.Error, this.url, new Error(`Invalid event structure: ${JSON.stringify(event)}`));\n                    break;\n                }\n                // Perform initial synchronous validation\n                if (!this.performBasicValidation(event)) {\n                    this.triggerEvent(RelayEvent.Error, this.url, new Error(`Invalid event: ${event.id}`));\n                    this.decrementPendingValidation(subscriptionId);\n                    break;\n                }\n                // Launch async validation and handle the event only if validation passes\n                this.validateEventAsync(event)\n                    .then((isValid) => {\n                    if (isValid) {\n                        this.processValidatedEvent(event, subscriptionId);\n                    }\n                    else {\n                        this.triggerEvent(RelayEvent.Error, this.url, new Error(`Async validation failed for event: ${event.id}`));\n                    }\n                })\n                    .catch((error) => {\n                    this.triggerEvent(RelayEvent.Error, this.url, new Error(`Validation error: ${error instanceof Error ? error.message : \"unknown error\"}`));\n                })\n                    .finally(() => {\n                    this.decrementPendingValidation(subscriptionId);\n                });\n                break;\n            }\n            case \"EOSE\": {\n                const [subscriptionId] = rest;\n                // Flush the buffer for this subscription immediately on EOSE\n                if (typeof subscriptionId === \"string\") {\n                    this.markEosePending(subscriptionId);\n                }\n                break;\n            }\n            case \"NOTICE\": {\n                const [notice] = rest;\n                // Ensure notice is a string\n                const noticeStr = typeof notice === \"string\" ? notice : String(notice || \"\");\n                this.triggerEvent(RelayEvent.Notice, this.url, noticeStr);\n                break;\n            }\n            case \"OK\": {\n                const [eventId, success, rawMessageUntyped] = rest;\n                // Ensure all params are of the correct type\n                const eventIdStr = typeof eventId === \"string\" ? eventId : String(eventId || \"\");\n                const successBool = Boolean(success);\n                // Parse the raw message for NIP-20 prefixes\n                const rawMessageStr = typeof rawMessageUntyped === \"string\" ? rawMessageUntyped : undefined;\n                const parsedDetails = this.parseOkMessage(rawMessageStr);\n                this.triggerEvent(RelayEvent.OK, eventIdStr, successBool, parsedDetails);\n                break;\n            }\n            case \"CLOSED\": {\n                const [subscriptionId, message] = rest;\n                // Ensure both params are strings\n                const subIdStr = typeof subscriptionId === \"string\"\n                    ? subscriptionId\n                    : String(subscriptionId || \"\");\n                const messageStr = typeof message === \"string\" ? message : String(message || \"\");\n                this.triggerEvent(RelayEvent.Closed, subIdStr, messageStr);\n                // Remove the subscription from our map since the relay closed it\n                if (typeof subscriptionId === \"string\") {\n                    this.subscriptions.delete(subscriptionId);\n                }\n                break;\n            }\n            case \"AUTH\": {\n                const [challengeEvent] = rest;\n                // Check if the challenge is a proper NostrEvent\n                if (this.isNostrEvent(challengeEvent)) {\n                    this.triggerEvent(RelayEvent.Auth, challengeEvent);\n                }\n                else {\n                    // If it's not a proper event, log an error\n                    this.triggerEvent(RelayEvent.Error, this.url, new Error(`Invalid AUTH challenge: ${JSON.stringify(challengeEvent)}`));\n                }\n                break;\n            }\n            default:\n                // Unknown message type, ignore or log\n                console.warn(`Relay(${this.url}): Unknown message type:`, type, rest);\n                break;\n        }\n    }\n    /**\n     * Process a validated event - called only after both basic and async validation\n     */\n    processValidatedEvent(event, subscriptionId) {\n        // Process replaceable events (kinds 0, 3, 10000-19999)\n        if (event.kind === 0 ||\n            event.kind === 3 ||\n            (event.kind >= 10000 && event.kind < 20000)) {\n            this.processReplaceableEvent(event);\n        }\n        // Process addressable events (kinds 30000-39999) - using else to make them mutually exclusive\n        else if (event.kind >= 30000 && event.kind < 40000) {\n            this.processAddressableEvent(event);\n        }\n        const subscription = this.subscriptions.get(subscriptionId);\n        if (subscription) {\n            // Use the proper buffer management method that enforces memory limits and LRU eviction\n            this.addToEventBuffer(subscriptionId, event);\n            this.maybeFinalizeEOSE(subscriptionId);\n        }\n    }\n    // Helper function to check if a string is a valid hex string of a specific length\n    isHexString(value, length) {\n        if (typeof value !== \"string\") {\n            return false;\n        }\n        if (!/^[0-9a-fA-F]+$/.test(value)) {\n            return false;\n        }\n        if (length !== undefined && value.length !== length) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Perform basic synchronous validation of an event\n     *\n     * This checks:\n     * 1. Required fields are present with correct types\n     * 2. Fields have valid formats (lengths, structure)\n     * 3. Timestamps are reasonable\n     */\n    performBasicValidation(event) {\n        // Skip validation if event is not a NostrEvent\n        if (!this.isNostrEvent(event)) {\n            return false;\n        }\n        try {\n            // Now we can safely access event properties\n            // Check that all required fields are present and have the correct types\n            if (!this.isHexString(event.id, 64)) {\n                return false;\n            }\n            if (!this.isHexString(event.pubkey, 64)) {\n                return false;\n            }\n            if (event.kind < 0 || event.kind > 65535) {\n                return false;\n            }\n            // Validate tag structure\n            for (const tag of event.tags) {\n                if (!Array.isArray(tag) || tag.length === 0) {\n                    // Ensure tag is a non-empty array\n                    return false;\n                }\n                // All tag items must be strings according to NIP-01\n                for (const item of tag) {\n                    if (typeof item !== \"string\") {\n                        return false;\n                    }\n                }\n                // Specific NIP-01 tag parameter validation\n                const tagName = tag[0];\n                if (tagName === \"e\" || tagName === \"p\") {\n                    // For 'e' (event ID) and 'p' (pubkey) tags, the second element must be a 64-char hex string\n                    // NIP-01: [\"e\", <event-id-hex>, <optional-relay-url-string>]\n                    // NIP-01: [\"p\", <pubkey-hex>, <optional-relay-url-string>]\n                    if (tag.length < 2 || !this.isHexString(tag[1], 64)) {\n                        return false;\n                    }\n                }\n                else if (tagName === \"a\") {\n                    // For 'a' tags, validate the <kind>:<pubkey>:<d-identifier> structure\n                    // NIP-01: [\"a\", \"<kind>:<pubkey>:<d-identifier>\", <optional-relay-url>]\n                    if (tag.length < 2 || typeof tag[1] !== \"string\") {\n                        return false; // Must have at least name and value, value must be a string\n                    }\n                    const valueParts = tag[1].split(\":\");\n                    if (valueParts.length !== 3) {\n                        // This structure must contain exactly three parts: kind, pubkey, and d-tag value (which can be empty).\n                        // e.g., \"30023:pubkeyhex:identifier\" or \"10002:pubkeyhex:\"\n                        return false;\n                    }\n                    const kindStr = valueParts[0];\n                    const pubkeyStr = valueParts[1];\n                    // const dValueStr = valueParts[2]; // dValueStr is implicitly validated as a string by split\n                    // Validate kind (must be a non-negative integer string)\n                    const kindNum = parseInt(kindStr, 10);\n                    if (isNaN(kindNum) ||\n                        !Number.isInteger(kindNum) ||\n                        kindNum < 0 || // Kinds must be non-negative\n                        String(kindNum) !== kindStr // Ensures no trailing characters, e.g., \"123xyz\"\n                    ) {\n                        return false;\n                    }\n                    // Validate pubkey (must be 64-char hex)\n                    if (!this.isHexString(pubkeyStr, 64)) {\n                        return false;\n                    }\n                    // dValueStr (valueParts[2]) is a string by virtue of the split.\n                    // NIP-01 doesn't impose further generic constraints on its content for the 'a' tag structure itself.\n                }\n                // Other tag types might have different validation rules, not covered by this specific claim.\n            }\n            if (!this.isHexString(event.sig, 128)) {\n                return false;\n            }\n            // Check reasonable timestamp (not more than 1 hour in the future and not too far in the past)\n            const now = getUnixTime();\n            if (event.created_at > now + 3600) {\n                return false; // Reject events with future timestamps\n            }\n            // Special handling for NIP-46 events (kind 24133)\n            if (event.kind === 24133) {\n                // NIP-46 events require at least one 'p' tag.\n                // The format of such a 'p' tag (tag[0]==='p', tag.length >= 2, and tag[1] is 64-char hex)\n                // would have already been validated by the general tag loop above.\n                // Here, we just ensure at least one such 'p' tag exists.\n                const hasValidPTagForNIP46 = event.tags.some((tag) => tag.length >= 2 && tag[0] === \"p\");\n                if (!hasValidPTagForNIP46) {\n                    // Optionally log here if needed\n                    return false;\n                }\n            }\n            // Optionally log a warning for very old events (e.g., older than a year)\n            if (event.created_at < now - 31536000) {\n                // Optionally log here if needed\n            }\n            return true;\n        }\n        catch (error) {\n            // If any validation throws an exception, reject the event\n            return false;\n        }\n    }\n    /**\n     * Validate an event (deprecated - use async validation directly)\n     * Maintained for backward compatibility with existing code\n     */\n    validateEvent(event) {\n        if (!this.isNostrEvent(event)) {\n            return false;\n        }\n        if (!this.performBasicValidation(event)) {\n            return false;\n        }\n        // For NIP-46 encrypted events, we can skip async validation since\n        // their content can only be verified after decryption\n        if (event.kind === 24133) {\n            return true;\n        }\n        // For all other events, indicate that basic validation passed, but defer\n        // to async validation before actually accepting the event\n        return true;\n    }\n    /**\n     * Perform async validations on an event\n     *\n     * This includes:\n     * 1. Verifying the event ID matches the hash of serialized data\n     * 2. Verifying the signature is valid\n     *\n     * These operations are computationally expensive, so they're performed\n     * asynchronously to avoid blocking the main thread.\n     */\n    async validateEventAsync(event) {\n        try {\n            // Extract the data needed for ID verification (excluding id and sig)\n            const eventData = {\n                pubkey: event.pubkey,\n                created_at: event.created_at,\n                kind: event.kind,\n                tags: event.tags,\n                content: event.content,\n            };\n            // Step 1: Validate event ID by comparing with calculated hash\n            const calculatedId = await getEventHash(eventData);\n            if (calculatedId !== event.id) {\n                return false;\n            }\n            // Step 2: Validate signature\n            return await verifySignature(event.id, event.sig, event.pubkey);\n        }\n        catch (error) {\n            // Log error details if in debug mode\n            const debug = process.env.DEBUG?.includes(\"nostr:*\") || false;\n            if (debug) {\n                console.error(`Relay(${this.url}): Event validation error:`, error);\n            }\n            return false;\n        }\n    }\n    triggerEvent(event, ...args) {\n        const callbacks = this.eventHandlers[event];\n        if (callbacks && Array.isArray(callbacks)) {\n            callbacks.forEach((callback) => {\n                if (typeof callback === \"function\") {\n                    try {\n                        // Directly call the callback with the spread arguments.\n                        // The type assertion in Relay.on ensures the callback matches the event.\n                        callback(...args);\n                    }\n                    catch (e) {\n                        console.error(`Relay(${this.url}): Error in ${event} callback:`, e);\n                    }\n                }\n            });\n        }\n    }\n    /**\n     * Set connection timeout in milliseconds\n     * @param timeout Timeout in milliseconds\n     */\n    setConnectionTimeout(timeout) {\n        if (timeout < 0) {\n            throw new Error(\"Connection timeout must be a positive number\");\n        }\n        this.connectionTimeout = timeout;\n    }\n    /**\n     * Get the current connection timeout in milliseconds\n     */\n    getConnectionTimeout() {\n        return this.connectionTimeout;\n    }\n    /**\n     * Get all subscription IDs for this relay\n     * @returns A Set containing all active subscription IDs\n     */\n    getSubscriptionIds() {\n        return new Set(this.subscriptions.keys());\n    }\n    /**\n     * Get the current buffer flush delay in milliseconds\n     */\n    getBufferFlushDelay() {\n        return this.bufferFlushDelay;\n    }\n    /**\n     * Set up the interval to flush event buffers\n     */\n    setupBufferFlush() {\n        // Clear any existing interval just in case\n        this.clearBufferFlush();\n        // Set up a new interval to flush event buffers periodically\n        this.bufferFlushInterval = setInterval(() => {\n            this.flushAllBuffers();\n        }, this.bufferFlushDelay);\n    }\n    /**\n     * Clear the buffer flush interval\n     */\n    clearBufferFlush() {\n        if (this.bufferFlushInterval) {\n            clearInterval(this.bufferFlushInterval);\n            this.bufferFlushInterval = null;\n        }\n    }\n    /**\n     * Flush all event buffers for all subscriptions\n     */\n    flushAllBuffers() {\n        for (const subscriptionId of this.eventBuffers.keys()) {\n            this.flushSubscriptionBuffer(subscriptionId);\n        }\n    }\n    incrementPendingValidation(subscriptionId) {\n        const current = this.pendingValidationCounts.get(subscriptionId) ?? 0;\n        this.pendingValidationCounts.set(subscriptionId, current + 1);\n    }\n    decrementPendingValidation(subscriptionId) {\n        const current = this.pendingValidationCounts.get(subscriptionId) ?? 0;\n        const next = Math.max(current - 1, 0);\n        if (next === 0) {\n            this.pendingValidationCounts.delete(subscriptionId);\n            if (!this.pendingEoseSubscriptions.has(subscriptionId)) {\n                this.flushSubscriptionBuffer(subscriptionId);\n            }\n        }\n        else {\n            this.pendingValidationCounts.set(subscriptionId, next);\n        }\n        this.maybeFinalizeEOSE(subscriptionId);\n    }\n    markEosePending(subscriptionId) {\n        this.pendingEoseSubscriptions.add(subscriptionId);\n        this.maybeFinalizeEOSE(subscriptionId);\n    }\n    maybeFinalizeEOSE(subscriptionId) {\n        if (!this.pendingEoseSubscriptions.has(subscriptionId)) {\n            return;\n        }\n        const pending = this.pendingValidationCounts.get(subscriptionId) ?? 0;\n        if (pending > 0) {\n            return;\n        }\n        this.flushSubscriptionBuffer(subscriptionId);\n        const subscription = this.subscriptions.get(subscriptionId);\n        if (subscription) {\n            if (subscription.onEOSE) {\n                subscription.onEOSE();\n            }\n            if (subscription.options?.autoClose) {\n                this.unsubscribe(subscriptionId);\n            }\n        }\n        this.pendingEoseSubscriptions.delete(subscriptionId);\n    }\n    /**\n     * Flush the event buffer for a specific subscription\n     */\n    flushSubscriptionBuffer(subscriptionId) {\n        const buffer = this.eventBuffers.get(subscriptionId);\n        if (!buffer || buffer.length === 0)\n            return;\n        const subscription = this.subscriptions.get(subscriptionId);\n        if (!subscription) {\n            // If the subscription has been removed, clear the buffer\n            this.eventBuffers.delete(subscriptionId);\n            return;\n        }\n        // Sort the events according to NIP-01: newest first, then by lexical order of ID if same timestamp\n        const sortedEvents = this.sortEvents(buffer);\n        // Remove the buffer from the map instead of keeping an empty array\n        this.eventBuffers.delete(subscriptionId);\n        this.eventBufferAccessTimes.delete(subscriptionId);\n        // Process all events\n        for (const event of sortedEvents) {\n            try {\n                subscription.onEvent(event);\n            }\n            catch (error) {\n                console.error(`Error in subscription handler for ${subscriptionId}:`, error);\n            }\n        }\n    }\n    /**\n     * Sort events according to NIP-01 specification:\n     * 1. created_at timestamp (descending - newer events first)\n     * 2. event id (lexical ascending) if timestamps are the same\n     */\n    sortEvents(events) {\n        return [...events].sort((a, b) => {\n            // Sort by created_at (descending - newer events first)\n            if (a.created_at !== b.created_at) {\n                return b.created_at - a.created_at;\n            }\n            // If created_at is the same, sort by id (ascending lexical order)\n            // This ensures lower IDs win when timestamps match, consistent with NIP-01 replaceable/addressable events.\n            return a.id.localeCompare(b.id);\n        });\n    }\n    // Add event to buffer with memory limits\n    addToEventBuffer(subscriptionId, event) {\n        // Update access time for LRU\n        this.eventBufferAccessTimes.set(subscriptionId, Date.now());\n        // Ensure we don't exceed max number of buffers\n        if (!this.eventBuffers.has(subscriptionId) &&\n            this.eventBuffers.size >= this.maxEventBuffers) {\n            this.evictOldestEventBuffer();\n        }\n        // Get or create buffer\n        if (!this.eventBuffers.has(subscriptionId)) {\n            this.eventBuffers.set(subscriptionId, []);\n        }\n        const buffer = this.eventBuffers.get(subscriptionId);\n        // Ensure we don't exceed max events per buffer\n        if (buffer.length >= this.maxEventsPerBuffer) {\n            buffer.shift(); // Remove oldest event\n        }\n        buffer.push(event);\n    }\n    // Evict oldest accessed event buffer\n    evictOldestEventBuffer() {\n        let oldestTime = Infinity;\n        let oldestId = \"\";\n        for (const [id, time] of this.eventBufferAccessTimes) {\n            if (time < oldestTime) {\n                oldestTime = time;\n                oldestId = id;\n            }\n        }\n        if (oldestId) {\n            this.eventBuffers.delete(oldestId);\n            this.eventBufferAccessTimes.delete(oldestId);\n            this.logger.debug(`Evicted event buffer for subscription: ${oldestId}`);\n        }\n    }\n    // Process replaceable event with memory limits\n    processReplaceableEvent(event) {\n        const pubkey = event.pubkey;\n        // Update access time for LRU\n        this.replaceableEventAccessTimes.set(pubkey, Date.now());\n        // Ensure we don't exceed max pubkeys\n        if (!this.replaceableEvents.has(pubkey) &&\n            this.replaceableEvents.size >= this.maxReplaceableEventPubkeys) {\n            this.evictOldestReplaceablePubkey();\n        }\n        // Get or create pubkey map\n        if (!this.replaceableEvents.has(pubkey)) {\n            this.replaceableEvents.set(pubkey, new Map());\n        }\n        const kindMap = this.replaceableEvents.get(pubkey);\n        const existingEvent = kindMap.get(event.kind);\n        // Only store if newer or first of this kind\n        if (!existingEvent || event.created_at > existingEvent.created_at) {\n            // Ensure we don't exceed max events per pubkey\n            if (kindMap.size >= this.maxReplaceableEventsPerPubkey &&\n                !kindMap.has(event.kind)) {\n                // Remove oldest event by created_at\n                let oldestKind = -1;\n                let oldestTime = Infinity;\n                for (const [kind, evt] of kindMap) {\n                    if (evt.created_at < oldestTime) {\n                        oldestTime = evt.created_at;\n                        oldestKind = kind;\n                    }\n                }\n                if (oldestKind !== -1) {\n                    kindMap.delete(oldestKind);\n                    this.logger.debug(`Evicted replaceable event kind ${oldestKind} for pubkey: ${pubkey}`);\n                }\n            }\n            kindMap.set(event.kind, event);\n        }\n    }\n    // Evict oldest accessed replaceable event pubkey\n    evictOldestReplaceablePubkey() {\n        let oldestTime = Infinity;\n        let oldestPubkey = \"\";\n        for (const [pubkey, time] of this.replaceableEventAccessTimes) {\n            if (time < oldestTime) {\n                oldestTime = time;\n                oldestPubkey = pubkey;\n            }\n        }\n        if (oldestPubkey) {\n            this.replaceableEvents.delete(oldestPubkey);\n            this.replaceableEventAccessTimes.delete(oldestPubkey);\n            this.logger.debug(`Evicted replaceable events for pubkey: ${oldestPubkey}`);\n        }\n    }\n    // Process addressable event with memory limits\n    processAddressableEvent(event) {\n        const dTag = event.tags.find((tag) => tag[0] === \"d\");\n        const dValue = dTag ? dTag[1] : \"\";\n        const addressId = `${event.kind}:${event.pubkey}:${dValue}`;\n        // Update access time for LRU\n        this.addressableEventAccessTimes.set(addressId, Date.now());\n        // Ensure we don't exceed max addressable events\n        if (!this.addressableEvents.has(addressId) &&\n            this.addressableEvents.size >= this.maxAddressableEvents) {\n            this.evictOldestAddressableEvent();\n        }\n        const existingEvent = this.addressableEvents.get(addressId);\n        // Only store if newer, first, or tie-breaker with smaller ID\n        if (!existingEvent ||\n            event.created_at > existingEvent.created_at ||\n            (event.created_at === existingEvent.created_at &&\n                event.id < existingEvent.id)) {\n            this.addressableEvents.set(addressId, event);\n        }\n    }\n    // Evict oldest accessed addressable event\n    evictOldestAddressableEvent() {\n        let oldestTime = Infinity;\n        let oldestId = \"\";\n        for (const [id, time] of this.addressableEventAccessTimes) {\n            if (time < oldestTime) {\n                oldestTime = time;\n                oldestId = id;\n            }\n        }\n        if (oldestId) {\n            this.addressableEvents.delete(oldestId);\n            this.addressableEventAccessTimes.delete(oldestId);\n            this.logger.debug(`Evicted addressable event: ${oldestId}`);\n        }\n    }\n    // Update getLatestReplaceableEvent to use access tracking\n    getLatestReplaceableEvent(pubkey, kind) {\n        // Update access time\n        this.replaceableEventAccessTimes.set(pubkey, Date.now());\n        const kindMap = this.replaceableEvents.get(pubkey);\n        return kindMap?.get(kind);\n    }\n    // Update getLatestAddressableEvent to use access tracking\n    getLatestAddressableEvent(kind, pubkey, dTagValue = \"\") {\n        const addressId = `${kind}:${pubkey}:${dTagValue}`;\n        // Update access time\n        this.addressableEventAccessTimes.set(addressId, Date.now());\n        return this.addressableEvents.get(addressId);\n    }\n    /**\n     * Get all addressable events for a specific pubkey\n     *\n     * @param pubkey The public key of the user\n     * @returns Array of addressable events\n     */\n    getAddressableEventsByPubkey(pubkey) {\n        return Array.from(this.addressableEvents.values()).filter((event) => event.pubkey === pubkey);\n    }\n    /**\n     * Get all addressable events for a specific kind\n     *\n     * @param kind The kind of event to retrieve (30000-39999)\n     * @returns Array of addressable events\n     */\n    getAddressableEventsByKind(kind) {\n        return Array.from(this.addressableEvents.values()).filter((event) => event.kind === kind);\n    }\n    // Helper function to parse NIP-20 prefixes from OK messages\n    parseOkMessage(rawMessage) {\n        const result = {\n            rawMessage: rawMessage || \"\",\n            message: rawMessage || \"\", // Default to full message if no prefix\n        };\n        if (rawMessage) {\n            for (const nipPrefix of Object.values(NIP20Prefix)) {\n                if (rawMessage.startsWith(nipPrefix)) {\n                    result.prefix = nipPrefix;\n                    result.message = rawMessage.substring(nipPrefix.length).trimStart();\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n    // Add this helper method to type guard for NostrEvent\n    isNostrEvent(event) {\n        if (!event || typeof event !== \"object\")\n            return false;\n        const e = event;\n        return (typeof e.id === \"string\" &&\n            typeof e.pubkey === \"string\" &&\n            typeof e.created_at === \"number\" &&\n            typeof e.kind === \"number\" &&\n            Array.isArray(e.tags) &&\n            typeof e.content === \"string\" &&\n            typeof e.sig === \"string\");\n    }\n    // New private helper method for validating NIP-01 filter identifiers\n    _isValidNip01FilterIdentifier(value) {\n        if (typeof value !== \"string\") {\n            return false;\n        }\n        // Must be 64 characters, lowercase hex\n        return /^[0-9a-f]{64}$/.test(value);\n    }\n}\n", "import { isValidRelayUrl } from \"../nip19/index.js\";\n/**\n * Custom error class for relay URL validation errors\n */\nexport class RelayUrlValidationError extends Error {\n    constructor(message, errorType, invalidUrl) {\n        super(message);\n        this.name = \"RelayUrlValidationError\";\n        this.errorType = errorType;\n        this.invalidUrl = invalidUrl;\n    }\n}\n/**\n * Preprocesses a relay URL before normalization and validation.\n * Adds wss:// prefix only to URLs without any scheme.\n * Throws an error for URLs with incompatible schemes.\n */\nexport function preprocessRelayUrl(url) {\n    if (!url || typeof url !== \"string\") {\n        throw new RelayUrlValidationError(\"URL must be a non-empty string\", \"format\");\n    }\n    let trimmedUrl = url.trim();\n    // Handle scheme-relative URLs (\"//example.com\") by removing the slashes\n    // so that the normal fallback of `wss://` works as intended.\n    if (trimmedUrl.startsWith(\"//\")) {\n        trimmedUrl = trimmedUrl.slice(2);\n    }\n    if (!trimmedUrl) {\n        throw new RelayUrlValidationError(\"URL cannot be empty or whitespace only\", \"format\");\n    }\n    // Detect an existing scheme of the form <scheme>://\n    const schemePattern = /^([a-zA-Z][a-zA-Z0-9+.-]*):\\/\\//;\n    const schemeMatch = trimmedUrl.match(schemePattern);\n    if (schemeMatch) {\n        const scheme = schemeMatch[1].toLowerCase();\n        if (scheme === \"ws\" || scheme === \"wss\") {\n            return trimmedUrl;\n        }\n        throw new RelayUrlValidationError(`Invalid relay URL scheme: \"${scheme}://\". ` +\n            `Relay URLs must use WebSocket protocols (ws:// or wss://). ` +\n            `Got: \"${trimmedUrl}\"`, \"scheme\", trimmedUrl);\n    }\n    // Check if input already has a scheme and validate it\n    if (trimmedUrl.includes(\"://\")) {\n        try {\n            const originalParsed = new URL(trimmedUrl);\n            if (originalParsed.protocol !== \"ws:\" &&\n                originalParsed.protocol !== \"wss:\") {\n                throw new RelayUrlValidationError(`Invalid relay URL scheme: \"${originalParsed.protocol}//\". ` +\n                    `Relay URLs must use WebSocket protocols (ws:// or wss://). ` +\n                    `Got: \"${trimmedUrl}\"`, \"scheme\", trimmedUrl);\n            }\n            return trimmedUrl; // Return original URL with valid scheme\n        }\n        catch (urlError) {\n            throw new RelayUrlValidationError(`Invalid URL format: \"${trimmedUrl}\". ` +\n                `Unable to parse the provided URL.`, \"format\", trimmedUrl);\n        }\n    }\n    // No scheme in input, so try to construct a valid URL with wss:// prefix\n    // First split the input into host and path/query/fragment parts\n    const firstSlashIndex = trimmedUrl.indexOf(\"/\");\n    const hostPortPart = firstSlashIndex === -1\n        ? trimmedUrl\n        : trimmedUrl.substring(0, firstSlashIndex);\n    const pathQueryFragmentPart = firstSlashIndex === -1 ? \"\" : trimmedUrl.substring(firstSlashIndex);\n    // Handle IPv6 addresses by properly separating port and applying brackets correctly\n    let hostPart = hostPortPart;\n    let portPart = \"\";\n    // Check if this looks like an IPv6 address without brackets\n    if (hostPart.includes(\":\") && !hostPart.startsWith(\"[\")) {\n        // For IPv6 addresses with ports, we need to separate the port first\n        // A port is typically the last segment after the final colon that's all digits\n        const lastColonIndex = hostPart.lastIndexOf(\":\");\n        if (lastColonIndex !== -1) {\n            const potentialPort = hostPart.substring(lastColonIndex + 1);\n            const potentialHost = hostPart.substring(0, lastColonIndex);\n            // Check if the part after the last colon looks like a port (all digits, 1-5 chars)\n            if (/^\\d{1,5}$/.test(potentialPort)) {\n                const portNumber = parseInt(potentialPort, 10);\n                // Valid port range: 1-65535\n                if (portNumber >= 1 && portNumber <= 65535) {\n                    // Now check if the remaining part (without the potential port) looks like IPv6\n                    // IPv6 addresses must have at least 1 colon or contain \"::\" for compression\n                    const hostColonCount = (potentialHost.match(/:/g) || []).length;\n                    const hasDoubleColon = potentialHost.includes(\"::\");\n                    // More precise IPv6 detection for the host part\n                    // Only separate port if it's actually IPv6 (has colons or :: notation)\n                    const isLikelyIPv6 = hostColonCount >= 1 || hasDoubleColon;\n                    if (isLikelyIPv6) {\n                        // This appears to be IPv6 with a port, separate them\n                        hostPart = potentialHost;\n                        portPart = `:${potentialPort}`;\n                    }\n                }\n            }\n        }\n        // Now check if the remaining host part looks like IPv6 and needs brackets\n        const colonCount = (hostPart.match(/:/g) || []).length;\n        const hasDoubleColon = hostPart.includes(\"::\");\n        // IPv6 addresses have multiple colons or contain \"::\" for compression\n        // Only add brackets if it's clearly IPv6 (multiple colons or double colon notation)\n        if (colonCount >= 2 || hasDoubleColon) {\n            // Looks like IPv6, add brackets to the host part only\n            hostPart = `[${hostPart}]`;\n        }\n    }\n    // Reconstruct the full URL\n    const fullHost = hostPart + portPart + pathQueryFragmentPart;\n    const testUrl = `wss://${fullHost}`;\n    try {\n        new URL(testUrl);\n        return testUrl;\n    }\n    catch (urlError) {\n        throw new RelayUrlValidationError(`Invalid URL format: \"${trimmedUrl}\". ` +\n            `Unable to construct a valid WebSocket URL.`, \"construction\", trimmedUrl);\n    }\n}\n/**\n * Canonicalises a relay URL by lowercasing scheme & host and removing the root pathname.\n * Path, query and fragment parts keep their case.\n * Validates the normalized URL for security and throws an error if invalid.\n */\nexport function normalizeRelayUrl(url) {\n    const preprocessed = preprocessRelayUrl(url);\n    const parsed = new URL(preprocessed);\n    // For the root path (\"/\"), most libraries omit the trailing slash in their\n    // canonical representation (e.g. `wss://example.com`).  Only keep the\n    // pathname when it is not exactly \"/\".\n    const includePathname = parsed.pathname && parsed.pathname !== \"/\";\n    let normalized = `${parsed.protocol.toLowerCase()}//${parsed.host.toLowerCase()}`;\n    if (includePathname) {\n        normalized += parsed.pathname;\n    }\n    if (parsed.search) {\n        normalized += parsed.search;\n    }\n    if (parsed.hash) {\n        normalized += parsed.hash;\n    }\n    // Validate the normalized URL for security before returning\n    if (!isValidRelayUrl(normalized)) {\n        throw new RelayUrlValidationError(`Normalized URL failed security validation: \"${normalized}\". ` +\n            `The URL may contain invalid characters or unsafe patterns.`, \"security\", normalized);\n    }\n    return normalized;\n}\n/**\n * Combines normalisation and validation. Returns undefined when the URL is invalid.\n */\nexport function validateAndNormalizeRelayUrl(url) {\n    try {\n        const normalized = normalizeRelayUrl(url);\n        return isValidRelayUrl(normalized) ? normalized : undefined;\n    }\n    catch {\n        return undefined;\n    }\n}\n", "import { Relay } from \"./relay.js\";\nimport { RelayEvent, } from \"../types/nostr.js\";\nimport { getPublicKey, generateKeypair } from \"../utils/crypto.js\";\nimport { isValidRelayUrl } from \"../nip19/index.js\";\nimport { createSignedEvent, createTextNote, createDirectMessage, createMetadataEvent, } from \"./event.js\";\nimport { preprocessRelayUrl as preprocessRelayUrlUtil, normalizeRelayUrl as normalizeRelayUrlUtil, RelayUrlValidationError, } from \"../utils/relayUrl.js\";\nimport { Logger, LogLevel } from \"../nip46/utils/logger.js\";\nimport { validateFilters, validateEventContent, validateTags, validateNumber, SecurityValidationError, checkRateLimit, SECURITY_LIMITS, } from \"../utils/security-validator.js\";\nexport class Nostr {\n    /**\n     * Create a new Nostr client\n     * @param relayUrls List of relay URLs to connect to\n     * @param options Client options\n     * @param options.relayOptions Options to pass to each Relay instance\n     * @param options.rateLimits Rate limiting configuration for different operations\n     */\n    constructor(relayUrls = [], options) {\n        this.relays = new Map();\n        this.eventCallbacks = new Map();\n        // Rate limiting state\n        this.subscribeRateLimit = {\n            count: 0,\n            windowStart: Date.now(),\n            blocked: false,\n        };\n        this.publishRateLimit = {\n            count: 0,\n            windowStart: Date.now(),\n            blocked: false,\n        };\n        this.fetchRateLimit = {\n            count: 0,\n            windowStart: Date.now(),\n            blocked: false,\n        };\n        this.relayOptions = options?.relayOptions;\n        // Initialize rate limits with defaults or user-provided values\n        this.RATE_LIMITS = {\n            SUBSCRIBE: options?.rateLimits?.subscribe || {\n                limit: 50,\n                windowMs: 60000,\n            }, // 50 subscriptions per minute\n            PUBLISH: options?.rateLimits?.publish || { limit: 100, windowMs: 60000 }, // 100 publications per minute\n            FETCH: options?.rateLimits?.fetch || { limit: 200, windowMs: 60000 }, // 200 fetches per minute\n        };\n        this.logger = new Logger({\n            prefix: \"Nostr\",\n            level: LogLevel.WARN,\n            includeTimestamp: false,\n            silent: process.env.NODE_ENV === \"test\",\n        });\n        relayUrls.forEach((url) => this.addRelay(url));\n    }\n    /**\n     * Normalize a relay URL by lowercasing only the scheme and host,\n     * while preserving the case of path, query, and fragment parts.\n     * This is the correct behavior per URL standards.\n     */\n    normalizeRelayUrl(url) {\n        // Delegate to shared utility for consistent canonicalization\n        return normalizeRelayUrlUtil(url);\n    }\n    /**\n     * Preprocesses a relay URL before normalization and validation.\n     * Adds wss:// prefix only to URLs without any scheme.\n     * Throws an error for URLs with incompatible schemes.\n     *\n     * @param url - The input URL string to preprocess\n     * @returns The preprocessed URL with appropriate scheme\n     * @throws Error if URL has an incompatible scheme\n     */\n    preprocessRelayUrl(url) {\n        // Delegate to shared utility for consistent preprocessing\n        return preprocessRelayUrlUtil(url);\n    }\n    // Helper function to create the event handler wrapper\n    _createRelayEventHandler(relayUrl, originalCallback, // This is the callback provided by the user to Nostr.on()\n    event) {\n        switch (event) {\n            case RelayEvent.Connect:\n            case RelayEvent.Disconnect:\n                return () => {\n                    originalCallback(relayUrl);\n                };\n            case RelayEvent.Error:\n                return (error) => {\n                    originalCallback(relayUrl, error);\n                };\n            case RelayEvent.Notice:\n                return (notice) => {\n                    originalCallback(relayUrl, notice);\n                };\n            case RelayEvent.OK:\n                return (eventId, success, details) => {\n                    originalCallback(relayUrl, eventId, success, details);\n                };\n            case RelayEvent.Closed:\n                return (subscriptionId, message) => {\n                    originalCallback(relayUrl, subscriptionId, message);\n                };\n            case RelayEvent.Auth:\n                return (challengeEvent) => {\n                    originalCallback(relayUrl, challengeEvent);\n                };\n            default:\n                // Should not happen if RelayEvent enum is comprehensive\n                console.warn(`Unhandled RelayEvent type for handler creation: ${event}`);\n                // This case should ideally be impossible if RelayEvent is exhaustive\n                // and all cases are handled. Return a no-op that matches a common handler signature.\n                return () => { };\n        }\n    }\n    addRelay(url) {\n        url = this.preprocessRelayUrl(url);\n        url = this.normalizeRelayUrl(url);\n        if (!isValidRelayUrl(url)) {\n            throw new Error(`Invalid relay URL: ${url}`);\n        }\n        if (this.relays.has(url)) {\n            return this.relays.get(url);\n        }\n        const relay = new Relay(url, this.relayOptions);\n        this.relays.set(url, relay);\n        // Attach stored callbacks to the new relay\n        this.eventCallbacks.forEach((callbacksSet, eventType) => {\n            callbacksSet.forEach((originalCallback) => {\n                const handler = this._createRelayEventHandler(url, originalCallback, eventType);\n                // Attach handler to the new relay, using the appropriate signature\n                switch (eventType) {\n                    case RelayEvent.Connect:\n                    case RelayEvent.Disconnect:\n                        relay.on(eventType, handler);\n                        break;\n                    case RelayEvent.Error:\n                        relay.on(eventType, handler);\n                        break;\n                    case RelayEvent.Notice:\n                        relay.on(eventType, handler);\n                        break;\n                    case RelayEvent.OK:\n                        relay.on(eventType, handler);\n                        break;\n                    case RelayEvent.Closed:\n                        relay.on(eventType, handler);\n                        break;\n                    case RelayEvent.Auth:\n                        relay.on(eventType, handler);\n                        break;\n                }\n            });\n        });\n        return relay;\n    }\n    getRelay(url) {\n        // Re-use the same normalisation logic as addRelay()\n        try {\n            url = this.preprocessRelayUrl(url);\n            url = this.normalizeRelayUrl(url);\n            if (!isValidRelayUrl(url)) {\n                return undefined;\n            }\n            return this.relays.get(url);\n        }\n        catch (error) {\n            // Handle RelayUrlValidationError and other URL processing errors gracefully\n            if (error instanceof RelayUrlValidationError) {\n                return undefined;\n            }\n            // For other unexpected errors, also return undefined for graceful handling\n            return undefined;\n        }\n    }\n    removeRelay(url) {\n        // Re-use the same normalisation logic as addRelay() and getRelay()\n        try {\n            url = this.preprocessRelayUrl(url);\n            url = this.normalizeRelayUrl(url);\n            if (!isValidRelayUrl(url)) {\n                return;\n            }\n            const relay = this.relays.get(url);\n            if (relay) {\n                relay.disconnect();\n                this.relays.delete(url);\n            }\n        }\n        catch (error) {\n            // Handle RelayUrlValidationError and other URL processing errors gracefully\n            if (error instanceof RelayUrlValidationError) {\n                return; // Silently ignore invalid URLs as intended\n            }\n            // For other unexpected errors, also return void for graceful handling\n            return;\n        }\n    }\n    async connectToRelays() {\n        const connectPromises = Array.from(this.relays.values()).map((relay) => relay.connect());\n        await Promise.all(connectPromises);\n    }\n    disconnectFromRelays() {\n        this.relays.forEach((relay) => relay.disconnect());\n    }\n    setPrivateKey(privateKey) {\n        this.privateKey = privateKey;\n        this.publicKey = getPublicKey(privateKey);\n    }\n    async generateKeys() {\n        const keypair = await generateKeypair();\n        this.privateKey = keypair.privateKey;\n        this.publicKey = keypair.publicKey;\n        return keypair;\n    }\n    getPublicKey() {\n        return this.publicKey;\n    }\n    /**\n     * Get current rate limit configuration\n     * @returns Current rate limit settings\n     */\n    getRateLimits() {\n        return {\n            subscribe: { ...this.RATE_LIMITS.SUBSCRIBE },\n            publish: { ...this.RATE_LIMITS.PUBLISH },\n            fetch: { ...this.RATE_LIMITS.FETCH },\n        };\n    }\n    /**\n     * Update rate limit configuration\n     * @param rateLimits New rate limit settings (partial updates allowed)\n     */\n    updateRateLimits(rateLimits) {\n        if (rateLimits.subscribe) {\n            this.RATE_LIMITS.SUBSCRIBE = { ...rateLimits.subscribe };\n            // Reset rate limit state to prevent issues with changed limits\n            this.subscribeRateLimit = {\n                count: 0,\n                windowStart: Date.now(),\n                blocked: false,\n            };\n        }\n        if (rateLimits.publish) {\n            this.RATE_LIMITS.PUBLISH = { ...rateLimits.publish };\n            this.publishRateLimit = {\n                count: 0,\n                windowStart: Date.now(),\n                blocked: false,\n            };\n        }\n        if (rateLimits.fetch) {\n            this.RATE_LIMITS.FETCH = { ...rateLimits.fetch };\n            this.fetchRateLimit = {\n                count: 0,\n                windowStart: Date.now(),\n                blocked: false,\n            };\n        }\n    }\n    /**\n     * Reset rate limit counters for all operations\n     */\n    resetRateLimits() {\n        this.subscribeRateLimit = {\n            count: 0,\n            windowStart: Date.now(),\n            blocked: false,\n        };\n        this.publishRateLimit = {\n            count: 0,\n            windowStart: Date.now(),\n            blocked: false,\n        };\n        this.fetchRateLimit = {\n            count: 0,\n            windowStart: Date.now(),\n            blocked: false,\n        };\n    }\n    async publishEvent(event, options) {\n        if (!this.relays.size) {\n            this.logger.warn(\"No relays configured for publishing\", {\n                eventId: event.id,\n                eventKind: event.kind,\n                operation: \"publishEvent\",\n            });\n            return {\n                success: false,\n                event: null,\n                relayResults: new Map(),\n            };\n        }\n        try {\n            const relayResults = new Map();\n            const publishPromises = Array.from(this.relays.entries()).map(async ([url, relay]) => {\n                const result = await relay.publish(event, options);\n                relayResults.set(url, result);\n                return result;\n            });\n            const results = await Promise.all(publishPromises);\n            // Check if at least one relay accepted the event\n            const atLeastOneSuccess = results.some((result) => result.success);\n            if (atLeastOneSuccess) {\n                return {\n                    success: true,\n                    event,\n                    relayResults,\n                };\n            }\n            else {\n                // Get reasons for failures and log them for diagnostics\n                const failureReasons = Array.from(relayResults.entries())\n                    .filter(([_, result]) => !result.success)\n                    .map(([url, result]) => `${url}: ${result.reason || \"unknown\"}`);\n                this.logger.warn(\"Failed to publish event to any relay\", {\n                    eventId: event.id,\n                    eventKind: event.kind,\n                    failureCount: failureReasons.length,\n                    failures: failureReasons,\n                });\n                return {\n                    success: false,\n                    event: null,\n                    relayResults,\n                };\n            }\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : \"unknown error\";\n            this.logger.error(\"Failed to publish event\", {\n                eventId: event.id,\n                eventKind: event.kind,\n                error: errorMessage,\n            });\n            return {\n                success: false,\n                event: null,\n                relayResults: new Map(),\n            };\n        }\n    }\n    async publishTextNote(content, tags = [], options) {\n        // Rate limiting check\n        const rateLimitCheck = checkRateLimit(this.publishRateLimit, this.RATE_LIMITS.PUBLISH.limit, this.RATE_LIMITS.PUBLISH.windowMs);\n        if (!rateLimitCheck.allowed) {\n            throw new SecurityValidationError(`Publish rate limit exceeded. Try again in ${Math.ceil((rateLimitCheck.retryAfter || 0) / 1000)} seconds`, \"RATE_LIMIT_EXCEEDED\", \"publish\");\n        }\n        // Update rate limit state (increment count)\n        this.publishRateLimit.count++;\n        if (!this.privateKey || !this.publicKey) {\n            throw new Error(\"Private key is not set\");\n        }\n        // Validate inputs\n        try {\n            const validatedContent = validateEventContent(content);\n            const validatedTags = validateTags(tags);\n            // Calculate actual UTF-8 byte length for proper size validation\n            const contentByteLength = new TextEncoder().encode(validatedContent).length;\n            if (contentByteLength > SECURITY_LIMITS.MAX_CONTENT_SIZE) {\n                throw new Error(`Content too large: ${contentByteLength} bytes (max ${SECURITY_LIMITS.MAX_CONTENT_SIZE})`);\n            }\n            const noteTemplate = createTextNote(validatedContent, this.privateKey, validatedTags);\n            const signedEvent = await createSignedEvent(noteTemplate, this.privateKey);\n            const publishResult = await this.publishEvent(signedEvent, options);\n            return publishResult.success ? publishResult.event : null;\n        }\n        catch (error) {\n            throw new Error(`publishTextNote validation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    async publishDirectMessage(content, recipientPubkey, tags = [], options) {\n        if (!this.privateKey || !this.publicKey) {\n            throw new Error(\"Private key is not set\");\n        }\n        const dmTemplate = await createDirectMessage(content, recipientPubkey, this.privateKey, tags);\n        const signedEvent = await createSignedEvent(dmTemplate, this.privateKey);\n        const publishResult = await this.publishEvent(signedEvent, options);\n        return publishResult.success ? publishResult.event : null;\n    }\n    /**\n     * Decrypt a direct message received from another user\n     *\n     * Uses NIP-04 encryption which is the standard for kind:4 direct messages\n     */\n    decryptDirectMessage(event) {\n        if (!this.privateKey) {\n            throw new Error(\"Private key is not set\");\n        }\n        if (event.kind !== 4) {\n            throw new Error(\"Event is not a direct message (kind 4)\");\n        }\n        // In a direct message:\n        // - The sender's pubkey is in event.pubkey\n        // - The recipient's pubkey is in the 'p' tag\n        // We need to use our private key and the sender's pubkey to decrypt\n        const senderPubkey = event.pubkey;\n        // Double-check that the message was intended for us\n        const pTag = event.tags.find((tag) => tag[0] === \"p\");\n        if (!pTag || !pTag[1]) {\n            throw new Error(\"Direct message is missing recipient pubkey in p tag\");\n        }\n        const recipientPubkey = pTag[1];\n        // If we're not the intended recipient, we shouldn't be able to decrypt this\n        if (this.publicKey && recipientPubkey !== this.publicKey) {\n            this.logger.warn(\"Direct message not intended for this user\", {\n                recipientPubkey,\n                currentUserPubkey: this.publicKey,\n                senderPubkey,\n            });\n        }\n        // Decrypt the message using our private key and the sender's pubkey\n        try {\n            const decryptNIP04 = (() => {\n                // Prefer Node path when running under Node (tests)\n                try {\n                    // eslint-disable-next-line no-eval\n                    if (typeof process !== 'undefined' && process.versions && process.versions.node) {\n                        return eval('require(\"../nip04\")').decrypt;\n                    }\n                }\n                // eslint-disable-next-line no-empty\n                catch (_e) { }\n                // Fallback to web/RN path\n                try {\n                    // eslint-disable-next-line no-eval\n                    return eval('require(\"../nip04/web\")').decrypt;\n                }\n                // eslint-disable-next-line no-empty\n                catch (_e) { }\n                throw new Error(\"NIP-04 module not available in this environment\");\n            })();\n            return decryptNIP04(this.privateKey, senderPubkey, event.content);\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : \"unknown error\";\n            this.logger.error(\"Failed to decrypt direct message\", {\n                eventId: event.id,\n                senderPubkey,\n                recipientPubkey,\n                error: errorMessage,\n            });\n            throw new Error(\"Failed to decrypt message. Make sure you are the intended recipient.\");\n        }\n    }\n    async publishMetadata(metadata, options) {\n        if (!this.privateKey || !this.publicKey) {\n            throw new Error(\"Private key is not set\");\n        }\n        const metadataTemplate = createMetadataEvent(metadata, this.privateKey);\n        const signedEvent = await createSignedEvent(metadataTemplate, this.privateKey);\n        const publishResult = await this.publishEvent(signedEvent, options);\n        return publishResult.success ? publishResult.event : null;\n    }\n    subscribe(filters, onEvent, onEOSE, options = {}) {\n        // Rate limiting check\n        const rateLimitCheck = checkRateLimit(this.subscribeRateLimit, this.RATE_LIMITS.SUBSCRIBE.limit, this.RATE_LIMITS.SUBSCRIBE.windowMs);\n        if (!rateLimitCheck.allowed) {\n            throw new SecurityValidationError(`Subscription rate limit exceeded. Try again in ${Math.ceil((rateLimitCheck.retryAfter || 0) / 1000)} seconds`, \"RATE_LIMIT_EXCEEDED\", \"subscribe\");\n        }\n        // Update rate limit state (increment count)\n        this.subscribeRateLimit.count++;\n        // Validate filters before sending to relays\n        try {\n            const validatedFilters = validateFilters(filters);\n            const subscriptionIds = [];\n            this.relays.forEach((relay, url) => {\n                const id = relay.subscribe(validatedFilters, (event) => onEvent(event, url), onEOSE, options);\n                subscriptionIds.push(id);\n            });\n            return subscriptionIds;\n        }\n        catch (error) {\n            throw new Error(`Filter validation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    unsubscribe(subscriptionIds) {\n        this.relays.forEach((relay) => {\n            subscriptionIds.forEach((id) => relay.unsubscribe(id));\n        });\n    }\n    unsubscribeAll() {\n        // Clear all subscriptions on all relays\n        this.relays.forEach((relay) => {\n            // Get all subscription IDs for this relay\n            const subscriptionIds = Array.from(relay.getSubscriptionIds());\n            // Close each subscription properly\n            subscriptionIds.forEach((id) => relay.unsubscribe(id));\n        });\n    }\n    /**\n     * Collect events matching the given filters from all connected relays.\n     *\n     * @param filters Array of filters to apply\n     * @param options Optional max wait time in milliseconds (defaults to 5000ms if not provided)\n     * @returns Promise resolving to all received events\n     */\n    async fetchMany(filters, options = {}) {\n        // Rate limiting check\n        const rateLimitCheck = checkRateLimit(this.fetchRateLimit, this.RATE_LIMITS.FETCH.limit, this.RATE_LIMITS.FETCH.windowMs);\n        if (!rateLimitCheck.allowed) {\n            throw new SecurityValidationError(`Fetch rate limit exceeded. Try again in ${Math.ceil((rateLimitCheck.retryAfter || 0) / 1000)} seconds`, \"RATE_LIMIT_EXCEEDED\", \"fetch\");\n        }\n        // Update rate limit state (increment count)\n        this.fetchRateLimit.count++;\n        if (this.relays.size === 0)\n            return [];\n        // Validate inputs\n        try {\n            const validatedFilters = validateFilters(filters);\n            const maxWait = options.maxWait\n                ? validateNumber(options.maxWait, 0, 300000, \"fetchMany.maxWait\")\n                : 5000;\n            return new Promise((resolve, reject) => {\n                const eventsMap = new Map();\n                let eoseCount = 0;\n                let isCleanedUp = false;\n                const subIds = this.subscribe(validatedFilters, (event) => {\n                    eventsMap.set(event.id, event);\n                }, () => {\n                    eoseCount++;\n                    if (eoseCount >= this.relays.size) {\n                        cleanup(false);\n                    }\n                });\n                let timeoutId = null;\n                let abortListener = null;\n                const cleanup = (isAborted = false) => {\n                    if (isCleanedUp)\n                        return; // Prevent multiple cleanup executions\n                    isCleanedUp = true;\n                    // Clear timeout\n                    if (timeoutId) {\n                        clearTimeout(timeoutId);\n                        timeoutId = null;\n                    }\n                    // Remove abort listener to prevent memory leaks\n                    if (abortListener && options.signal) {\n                        options.signal.removeEventListener(\"abort\", abortListener);\n                        abortListener = null;\n                    }\n                    // Unsubscribe from all relays\n                    this.unsubscribe(subIds);\n                    // Resolve or reject based on abort status\n                    if (isAborted) {\n                        reject(new Error(\"Fetch operation was aborted\"));\n                    }\n                    else {\n                        resolve(Array.from(eventsMap.values()));\n                    }\n                };\n                // Handle AbortSignal if provided\n                if (options.signal) {\n                    // Check if already aborted\n                    if (options.signal.aborted) {\n                        cleanup(true);\n                        return;\n                    }\n                    // Add abort listener\n                    abortListener = () => cleanup(true);\n                    options.signal.addEventListener(\"abort\", abortListener);\n                }\n                // Set timeout to ensure Promise always resolves\n                if (maxWait > 0) {\n                    timeoutId = setTimeout(() => cleanup(false), maxWait);\n                }\n            });\n        }\n        catch (error) {\n            throw new Error(`fetchMany validation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    /**\n     * Retrieve the newest single event matching the filters from all relays.\n     *\n     * @param filters Filters to apply (limit will be forced to 1)\n     * @param options Optional max wait time in milliseconds and abort signal\n     * @returns The newest matching event or null\n     */\n    async fetchOne(filters, options) {\n        const limitedFilters = filters.map((f) => ({ ...f, limit: 1 }));\n        const events = await this.fetchMany(limitedFilters, options);\n        if (events.length === 0)\n            return null;\n        events.sort((a, b) => {\n            if (a.created_at !== b.created_at) {\n                return b.created_at - a.created_at;\n            }\n            return a.id.localeCompare(b.id);\n        });\n        return events[0];\n    }\n    on(event, callback) {\n        if (typeof callback !== \"function\") {\n            throw new Error(\"Callback must be a function\");\n        }\n        // Store the callback in the registry\n        let callbacksForEvent = this.eventCallbacks.get(event);\n        if (!callbacksForEvent) {\n            callbacksForEvent = new Set();\n            this.eventCallbacks.set(event, callbacksForEvent);\n        }\n        callbacksForEvent.add(callback);\n        // Attach the callback to all currently existing relays\n        this.relays.forEach((relay, url) => {\n            const handler = this._createRelayEventHandler(url, callback, event);\n            // Attach handler to the existing relay, using the appropriate signature\n            switch (event) {\n                case RelayEvent.Connect:\n                case RelayEvent.Disconnect:\n                    relay.on(event, handler);\n                    break;\n                case RelayEvent.Error:\n                    relay.on(event, handler);\n                    break;\n                case RelayEvent.Notice:\n                    relay.on(event, handler);\n                    break;\n                case RelayEvent.OK:\n                    relay.on(event, handler);\n                    break;\n                case RelayEvent.Closed:\n                    relay.on(event, handler);\n                    break;\n                case RelayEvent.Auth:\n                    relay.on(event, handler);\n                    break;\n            }\n        });\n    }\n    /**\n     * Publish an event and get detailed results from all relays\n     *\n     * @param event The NostrEvent to publish\n     * @param options Options including timeout\n     * @returns Detailed publish results including success status and relay-specific information\n     */\n    async publishWithDetails(event, options) {\n        const result = await this.publishEvent(event, options);\n        // Count successful and failed relays\n        let successCount = 0;\n        let failureCount = 0;\n        result.relayResults.forEach((relayResult) => {\n            if (relayResult.success) {\n                successCount++;\n            }\n            else {\n                failureCount++;\n            }\n        });\n        return {\n            ...result,\n            event: result.event || event,\n            successCount,\n            failureCount,\n        };\n    }\n    /**\n     * Get the latest replaceable event of a specific kind for a pubkey from all connected relays\n     *\n     * @param pubkey The public key of the user\n     * @param kind The kind of event to retrieve (0, 3, or 10000-19999)\n     * @returns The latest event or null if none exists\n     */\n    getLatestReplaceableEvent(pubkey, kind) {\n        let latestEvent = null;\n        for (const relay of this.relays.values()) {\n            const event = relay.getLatestReplaceableEvent(pubkey, kind);\n            if (event &&\n                (!latestEvent ||\n                    event.created_at > latestEvent.created_at ||\n                    (event.created_at === latestEvent.created_at &&\n                        event.id < latestEvent.id))) {\n                latestEvent = event;\n            }\n        }\n        return latestEvent;\n    }\n    /**\n     * Get the latest addressable event for a specific kind, pubkey, and d-tag value\n     * from all connected relays\n     *\n     * @param kind The kind of event to retrieve (30000-39999)\n     * @param pubkey The public key of the user\n     * @param dTagValue The value of the d tag\n     * @returns The latest event or null if none exists\n     */\n    getLatestAddressableEvent(kind, pubkey, dTagValue = \"\") {\n        let latestEvent = null;\n        for (const relay of this.relays.values()) {\n            const event = relay.getLatestAddressableEvent(kind, pubkey, dTagValue);\n            if (event &&\n                (!latestEvent ||\n                    event.created_at > latestEvent.created_at ||\n                    (event.created_at === latestEvent.created_at &&\n                        event.id < latestEvent.id))) {\n                latestEvent = event;\n            }\n        }\n        return latestEvent;\n    }\n    /**\n     * Get all addressable events for a specific pubkey from all connected relays\n     *\n     * @param pubkey The public key of the user\n     * @returns Array of unique addressable events\n     */\n    getAddressableEventsByPubkey(pubkey) {\n        const eventsMap = new Map();\n        for (const relay of this.relays.values()) {\n            const events = relay.getAddressableEventsByPubkey(pubkey);\n            for (const event of events) {\n                // Find the d tag value\n                const dTag = event.tags.find((tag) => tag[0] === \"d\");\n                const dValue = dTag ? dTag[1] : \"\";\n                // Create a composite key from kind, pubkey, and d-tag value\n                const key = `${event.kind}:${event.pubkey}:${dValue}`;\n                // Only keep the latest event for each key\n                const existing = eventsMap.get(key);\n                if (!existing || event.created_at > existing.created_at) {\n                    eventsMap.set(key, event);\n                }\n            }\n        }\n        return Array.from(eventsMap.values());\n    }\n    /**\n     * Get all addressable events for a specific kind from all connected relays\n     *\n     * @param kind The kind of event to retrieve (30000-39999)\n     * @returns Array of unique addressable events\n     */\n    getAddressableEventsByKind(kind) {\n        const eventsMap = new Map();\n        for (const relay of this.relays.values()) {\n            const events = relay.getAddressableEventsByKind(kind);\n            for (const event of events) {\n                // Find the d tag value\n                const dTag = event.tags.find((tag) => tag[0] === \"d\");\n                const dValue = dTag ? dTag[1] : \"\";\n                // Create a composite key from pubkey and d-tag value (kind is already filtered)\n                const key = `${event.pubkey}:${dValue}`;\n                // Only keep the latest event for each key\n                const existing = eventsMap.get(key);\n                if (!existing || event.created_at > existing.created_at) {\n                    eventsMap.set(key, event);\n                }\n            }\n        }\n        return Array.from(eventsMap.values());\n    }\n}\n", "import { Relay } from \"./relay.js\";\nimport { normalizeRelayUrl as normalizeRelayUrlUtil } from \"../utils/relayUrl.js\";\n/**\n * Result enum for removeRelay operations to provide clear error diagnostics\n */\nexport var RemoveRelayResult;\n(function (RemoveRelayResult) {\n    /** The relay was successfully removed */\n    RemoveRelayResult[\"Removed\"] = \"removed\";\n    /** No relay was found with the given URL */\n    RemoveRelayResult[\"NotFound\"] = \"not_found\";\n    /** The provided URL is invalid and cannot be normalized */\n    RemoveRelayResult[\"InvalidUrl\"] = \"invalid_url\";\n})(RemoveRelayResult || (RemoveRelayResult = {}));\nexport class RelayPool {\n    constructor(relayUrls = [], options) {\n        this.relays = new Map();\n        this.relayOptions = options?.relayOptions;\n        relayUrls.forEach((url) => {\n            try {\n                this.addRelay(url);\n            }\n            catch (error) {\n                // Log the error but continue processing remaining URLs\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                console.warn(`Failed to add relay \"${url}\" during pool construction:`, errorMessage);\n            }\n        });\n    }\n    /**\n     * Normalize a relay URL by preprocessing, case normalizing, and validating.\n     * This ensures consistent URL keys in the relay map and prevents duplicates.\n     *\n     * @param url - The input URL string to normalize\n     * @returns The canonicalized URL\n     * @throws Error if the URL is invalid or normalization fails\n     */\n    normalizeRelayUrl(url) {\n        const normalizedUrl = normalizeRelayUrlUtil(url);\n        // Guard against unexpected undefined/null return values or invalid types\n        if (normalizedUrl === undefined ||\n            normalizedUrl === null ||\n            typeof normalizedUrl !== \"string\") {\n            throw new Error(`Failed to normalize relay URL \"${url}\": received invalid result`);\n        }\n        // Additional safeguard: ensure the result is a non-empty string\n        if (normalizedUrl.length === 0) {\n            throw new Error(`Failed to normalize relay URL \"${url}\": received empty string`);\n        }\n        return normalizedUrl;\n    }\n    /**\n     * Add a relay to the pool or update an existing relay's configuration.\n     *\n     * @param url - The relay URL to add\n     * @param options - Connection options for the relay\n     * @returns The relay instance (new or existing)\n     *\n     * Note: If the relay already exists, most options will be merged into the existing\n     * relay's configuration. However, `bufferFlushDelay` can only be set during\n     * relay construction and will be ignored for existing relays.\n     */\n    addRelay(url, options) {\n        const normalizedUrl = this.normalizeRelayUrl(url);\n        let relay = this.relays.get(normalizedUrl);\n        if (!relay) {\n            relay = new Relay(normalizedUrl, options || this.relayOptions);\n            this.relays.set(normalizedUrl, relay);\n        }\n        else if (options) {\n            // Merge the new options into the existing relay's configuration\n            if (options.connectionTimeout !== undefined) {\n                relay.setConnectionTimeout(options.connectionTimeout);\n            }\n            if (options.autoReconnect !== undefined) {\n                relay.setAutoReconnect(options.autoReconnect);\n            }\n            if (options.maxReconnectAttempts !== undefined) {\n                relay.setMaxReconnectAttempts(options.maxReconnectAttempts);\n            }\n            if (options.maxReconnectDelay !== undefined) {\n                relay.setMaxReconnectDelay(options.maxReconnectDelay);\n            }\n            // Note: bufferFlushDelay cannot be updated after construction as it requires internal state changes\n        }\n        return relay;\n    }\n    removeRelay(url) {\n        let normalizedUrl;\n        // First, attempt to normalize the URL - this is where input validation errors occur\n        try {\n            normalizedUrl = this.normalizeRelayUrl(url);\n        }\n        catch (error) {\n            // URL normalization failed - this is a user input error, not a programmer bug\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            console.warn(`Invalid relay URL \"${url}\":`, errorMessage);\n            return RemoveRelayResult.InvalidUrl;\n        }\n        // Check if the relay exists in our pool\n        const relay = this.relays.get(normalizedUrl);\n        if (!relay) {\n            return RemoveRelayResult.NotFound;\n        }\n        // Relay exists, disconnect and remove it\n        // Note: relay.disconnect() handles errors internally and doesn't throw\n        try {\n            relay.disconnect();\n            this.relays.delete(normalizedUrl);\n            return RemoveRelayResult.Removed;\n        }\n        catch (error) {\n            // This should be rare since disconnect() handles errors internally,\n            // but if it does occur, it's likely a programmer bug and should be re-thrown\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            throw new Error(`Unexpected error during relay removal for \"${url}\": ${errorMessage}`);\n        }\n    }\n    async ensureRelay(url) {\n        const relay = this.addRelay(url);\n        await relay.connect();\n        return relay;\n    }\n    /**\n     * Close relay connections. Invalid relay URLs are ignored.\n     * @param relayUrls Optional array of relay URLs to close. If not provided, all relays are closed.\n     */\n    async close(relayUrls) {\n        if (relayUrls) {\n            relayUrls.forEach((url) => {\n                try {\n                    // Normalize URL to match the key used in the map\n                    const normalizedUrl = this.normalizeRelayUrl(url);\n                    const relay = this.relays.get(normalizedUrl);\n                    if (relay)\n                        relay.disconnect();\n                }\n                catch (error) {\n                    // Log the error for debugging purposes, but continue processing other URLs\n                    const errorMessage = error instanceof Error ? error.message : String(error);\n                    console.warn(`Failed to close relay \"${url}\":`, errorMessage);\n                }\n            });\n        }\n        else {\n            this.relays.forEach((relay) => relay.disconnect());\n        }\n        // Add a small delay to ensure WebSocket connections have time to close properly\n        // This helps prevent Jest open handle warnings\n        await new Promise((resolve) => setTimeout(resolve, 10));\n    }\n    publish(relays, event, options) {\n        return relays.map(async (url) => {\n            const relay = await this.ensureRelay(url);\n            return relay.publish(event, options);\n        });\n    }\n    async subscribe(relays, filters, onEvent, onEOSE) {\n        const subscriptions = [];\n        let eoseCount = 0;\n        let isClosed = false;\n        let successfulRelayCount = 0;\n        let eoseSent = false;\n        // Safe event handler that catches and logs errors\n        const safeOnEvent = (event, relayUrl) => {\n            if (isClosed)\n                return; // Don't process events after close\n            try {\n                onEvent(event, relayUrl);\n            }\n            catch (eventError) {\n                console.warn(`Error processing event from ${relayUrl}:`, eventError, event);\n            }\n        };\n        // Track subscription promises individually to handle partial failures\n        const subscriptionPromises = relays.map(async (url) => {\n            try {\n                const relay = await this.ensureRelay(url);\n                // We'll set up the subscription with EOSE handler after we know the final count\n                return { success: true, url, relay };\n            }\n            catch (error) {\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                console.warn(`Failed to subscribe to relay ${url}:`, errorMessage);\n                return { success: false, url, error: errorMessage };\n            }\n        });\n        // Wait for all subscription attempts to complete (success or failure)\n        const results = await Promise.all(subscriptionPromises);\n        // Process results to determine successful relays\n        const successfulRelays = [];\n        results.forEach((result) => {\n            if (result.success) {\n                successfulRelays.push({ url: result.url, relay: result.relay });\n            }\n        });\n        // Now we know the exact count of successful relays\n        successfulRelayCount = successfulRelays.length;\n        // Safe EOSE handler - now created with accurate successful relay count\n        const safeOnEOSE = () => {\n            if (isClosed || eoseSent)\n                return;\n            eoseCount++;\n            if (eoseCount >= successfulRelayCount && onEOSE) {\n                try {\n                    eoseSent = true;\n                    onEOSE();\n                }\n                catch (eoseError) {\n                    console.warn(\"Error in EOSE callback:\", eoseError);\n                }\n            }\n        };\n        // Now create subscriptions with the correct EOSE handler\n        successfulRelays.forEach(({ url, relay }) => {\n            try {\n                const id = relay.subscribe(filters, (ev) => safeOnEvent(ev, url), safeOnEOSE);\n                // Mark as ready and add to subscriptions\n                const subscription = { relay, id, ready: true };\n                subscriptions.push(subscription);\n            }\n            catch (error) {\n                console.warn(`Failed to create subscription for relay ${url}:`, error);\n                // Decrease successful count since this relay actually failed, but prevent going negative\n                if (successfulRelayCount > 0) {\n                    successfulRelayCount--;\n                    // Check if we've now reached the condition where EOSE should be called\n                    if (eoseCount >= successfulRelayCount &&\n                        onEOSE &&\n                        !isClosed &&\n                        !eoseSent) {\n                        try {\n                            eoseSent = true;\n                            onEOSE();\n                        }\n                        catch (eoseError) {\n                            console.warn(\"Error in EOSE callback (after subscription failure):\", eoseError);\n                        }\n                    }\n                }\n            }\n        });\n        // If all relays failed, trigger onEOSE immediately to prevent hanging\n        if (successfulRelayCount === 0 && onEOSE && !isClosed && !eoseSent) {\n            try {\n                eoseSent = true;\n                onEOSE();\n            }\n            catch (eoseError) {\n                console.warn(\"Error in EOSE callback (all relays failed):\", eoseError);\n            }\n        }\n        // Immediate close function that doesn't wait for connections\n        const immediateClose = () => {\n            if (isClosed)\n                return; // Prevent multiple closes\n            isClosed = true;\n            // Unsubscribe from ready subscriptions immediately\n            subscriptions.forEach(({ relay, id, ready }) => {\n                if (ready) {\n                    try {\n                        relay.unsubscribe(id);\n                    }\n                    catch (unsubError) {\n                        console.warn(\"Error during unsubscribe:\", unsubError);\n                    }\n                }\n            });\n            // Clear the subscriptions array\n            subscriptions.length = 0;\n        };\n        return {\n            close: immediateClose,\n        };\n    }\n    async querySync(relays, filter, options = {}) {\n        return new Promise((resolve, reject) => {\n            const events = [];\n            let timer = null;\n            let sub = null;\n            let isResolved = false;\n            // Cleanup function to ensure resources are always freed\n            const cleanup = () => {\n                if (timer) {\n                    clearTimeout(timer);\n                    timer = null;\n                }\n                if (sub) {\n                    try {\n                        sub.close();\n                    }\n                    catch (cleanupError) {\n                        // Ignore cleanup errors, but log them if needed\n                        console.warn(\"Error during subscription cleanup:\", cleanupError);\n                    }\n                    sub = null;\n                }\n            };\n            // Safe resolve function that ensures cleanup and prevents multiple resolves\n            const safeResolve = (result) => {\n                if (!isResolved) {\n                    isResolved = true;\n                    cleanup();\n                    resolve(result);\n                }\n            };\n            // Safe reject function that ensures cleanup and prevents multiple rejects\n            const safeReject = (error) => {\n                if (!isResolved) {\n                    isResolved = true;\n                    cleanup();\n                    reject(error);\n                }\n            };\n            try {\n                this.subscribe(relays, [filter], (ev) => {\n                    try {\n                        events.push(ev);\n                    }\n                    catch (eventError) {\n                        console.warn(\"Error processing event:\", eventError, ev);\n                        // Continue processing other events instead of failing completely\n                    }\n                }, () => {\n                    // EOSE callback - all relays finished sending stored events\n                    safeResolve(events);\n                })\n                    .then((subscription) => {\n                    try {\n                        sub = subscription;\n                        if (options.timeout && options.timeout > 0) {\n                            timer = setTimeout(() => {\n                                safeResolve(events);\n                            }, options.timeout);\n                        }\n                    }\n                    catch (subscriptionError) {\n                        safeReject(new Error(`Failed to setup subscription: ${subscriptionError instanceof Error ? subscriptionError.message : String(subscriptionError)}`));\n                    }\n                })\n                    .catch((subscribeError) => {\n                    safeReject(new Error(`Failed to subscribe to relays: ${subscribeError.message}`));\n                });\n            }\n            catch (error) {\n                safeReject(new Error(`Failed to initialize querySync: ${error instanceof Error ? error.message : String(error)}`));\n            }\n        });\n    }\n    async get(relays, filter, options = {}) {\n        const f = { ...filter, limit: 1 };\n        const events = await this.querySync(relays, f, options);\n        events.sort((a, b) => b.created_at - a.created_at);\n        return events[0] || null;\n    }\n}\n", "// NIP-02 implementation will go here\nimport { getUnixTime } from \"../utils/time.js\";\nimport { isValidPublicKeyPoint } from \"../nip44/index.js\";\nimport { isValidRelayUrl } from \"../nip19/index.js\";\nimport { normalizeRelayUrl as canonicalizeRelayUrl } from \"../utils/relayUrl.js\";\nimport { validateArrayAccess, safeArrayAccess, SecurityValidationError, } from \"../utils/security-validator.js\";\n/**\n * Creates a NIP-02 contact list event (kind 3).\n *\n * @param contacts An array of `Contact` objects.\n * @param existingContent Optional content for the event.\n *                        NIP-02 allows for legacy petnames in a JSON string here,\n *                        but recommends petnames in tags.\n * @returns A NostrEvent object (unsigned) representing the contact list.\n */\nexport function createContactListEvent(contacts, existingContent = \"\") {\n    // Assuming ContactsEvent is a more generic kind 3 type\n    const tags = contacts.map((contact) => {\n        const tag = [\"p\", contact.pubkey];\n        if (contact.relayUrl || contact.petname) {\n            // Need to add relayUrl even if empty if petname is present\n            tag.push(contact.relayUrl || \"\");\n        }\n        if (contact.petname) {\n            tag.push(contact.petname);\n        }\n        return tag;\n    });\n    return {\n        kind: 3,\n        tags,\n        content: existingContent,\n        created_at: getUnixTime(),\n    };\n}\nexport function parseContactsFromEvent(event, options = {}) {\n    // Assuming ContactsEvent is suitable\n    if (event.kind !== 3) {\n        throw new Error(\"Invalid event: Expected kind 3 for contact list.\");\n    }\n    const parsedContacts = [];\n    const warnings = [];\n    const seenPubkeys = new Set();\n    const addWarning = (type, message, value, context) => {\n        const warning = { type, message, value, context };\n        warnings.push(warning);\n        if (options.logger) {\n            try {\n                options.logger.warn(message, { value, context });\n            }\n            catch {\n                // Ignore logger errors to prevent parsing from being aborted\n            }\n        }\n    };\n    // Use shared validators for pubkeys and relay URLs\n    event.tags.forEach((tag, tagIndex) => {\n        try {\n            // Bounds check for basic tag structure\n            if (!validateArrayAccess(tag, 0) || safeArrayAccess(tag, 0) !== \"p\") {\n                return; // Skip non-p tags\n            }\n            // Safe access to tag[1] (pubkey)\n            const pubkeyValue = safeArrayAccess(tag, 1);\n            if (typeof pubkeyValue !== \"string\") {\n                addWarning(\"invalid_pubkey\", `Invalid p tag structure: pubkey at index 1 must be a string`, String(pubkeyValue), { tagIndex });\n                return;\n            }\n            // Normalize to lowercase first to accept legacy uppercase pubkeys\n            const normalizedPubkey = pubkeyValue.toLowerCase();\n            // Validate that the public key is a valid curve point on secp256k1\n            if (!isValidPublicKeyPoint(normalizedPubkey)) {\n                addWarning(\"invalid_pubkey\", `Invalid public key (not a valid curve point): ${pubkeyValue}`, pubkeyValue, { tagIndex });\n                return; // Skip invalid keys\n            }\n            // Skip duplicate pubkeys (normalize to lowercase for consistent deduplication)\n            if (seenPubkeys.has(normalizedPubkey)) {\n                addWarning(\"duplicate_pubkey\", `Duplicate public key: ${normalizedPubkey}`, normalizedPubkey, { tagIndex });\n                return;\n            }\n            seenPubkeys.add(normalizedPubkey);\n            const contact = {\n                pubkey: normalizedPubkey,\n            };\n            // Safe access to tag[2] (relay URL) - optional\n            const relayUrlValue = safeArrayAccess(tag, 2);\n            if (typeof relayUrlValue === \"string\" && relayUrlValue.length > 0) {\n                // Trim and canonicalize the relay URL (lowercase scheme + host) for consistency\n                const trimmedRelayUrl = relayUrlValue.trim();\n                if (trimmedRelayUrl.length > 0) {\n                    // Require the tag value itself to include a valid ws:// or wss:// scheme.\n                    // This prevents \"naked\" hostnames from being auto-upgraded and accepted.\n                    const hasWebSocketScheme = /^wss?:\\/\\//i.test(trimmedRelayUrl);\n                    if (!hasWebSocketScheme) {\n                        // Treat as invalid and keep relayUrl undefined but retain petname.\n                        addWarning(\"invalid_relay_url\", `Invalid relay URL (missing ws/wss scheme): ${relayUrlValue}`, relayUrlValue, {\n                            pubkey: normalizedPubkey,\n                            tagIndex,\n                        });\n                    }\n                    else {\n                        let canonicalUrl;\n                        try {\n                            canonicalUrl = canonicalizeRelayUrl(trimmedRelayUrl);\n                        }\n                        catch {\n                            canonicalUrl = undefined;\n                        }\n                        if (canonicalUrl && isValidRelayUrl(canonicalUrl)) {\n                            contact.relayUrl = canonicalUrl;\n                        }\n                        else {\n                            addWarning(\"invalid_relay_url\", `Invalid relay URL (failed validation): ${relayUrlValue}`, relayUrlValue, {\n                                pubkey: normalizedPubkey,\n                                tagIndex,\n                            });\n                        }\n                    }\n                }\n            }\n            // Safe access to tag[3] (petname) - optional\n            const petnameValue = safeArrayAccess(tag, 3);\n            if (typeof petnameValue === \"string\" && petnameValue.length > 0) {\n                contact.petname = petnameValue;\n            }\n            parsedContacts.push(contact);\n        }\n        catch (error) {\n            if (error instanceof SecurityValidationError) {\n                addWarning(\"invalid_pubkey\", `Bounds checking error: ${error.message}`, \"\", { tagIndex });\n            }\n            // Continue processing other tags\n        }\n    });\n    if (options.returnWarnings) {\n        return { contacts: parsedContacts, warnings };\n    }\n    return parsedContacts;\n}\n/**\n * Parses a NIP-02 contact list event with detailed warnings.\n * This is a convenience function that always returns warnings.\n *\n * @param event The contact list event (must be kind 3).\n * @param logger Optional logger to handle warnings externally.\n * @returns A `ParseContactsResult` object containing contacts and warnings.\n * @throws Error if the event is not a valid kind 3 event.\n */\nexport function parseContactsFromEventWithWarnings(event, logger) {\n    return parseContactsFromEvent(event, { logger, returnWarnings: true });\n}\n", "import { hexToBytes, bytesToHex, randomBytes } from \"@noble/hashes/utils\";\nimport { secp256k1 } from \"@noble/curves/secp256k1\";\n// Use CommonJS require to avoid depending on external type definitions\n// eslint-disable-next-line @typescript-eslint/no-var-requires, @typescript-eslint/no-explicit-any\nconst CryptoJS = require(\"crypto-js\");\n/**\n * Web/RN NIP-04 implementation using crypto-js (AES-256-CBC, PKCS7).\n * Matches the Node build API (sync, same string formats).\n */\n/** Error class for NIP-04 decryption failures */\nexport class NIP04DecryptionError extends Error {\n    constructor(message, originalError) {\n        super(message);\n        this.name = \"NIP04DecryptionError\";\n        this.originalError = originalError;\n    }\n}\n/** Base64 encode/decode helpers (browser/RN/Node) */\nfunction base64Encode(bytes) {\n    if (typeof globalThis?.btoa === \"function\") {\n        try {\n            // Build binary string without spreading large arrays (avoids stack overflow)\n            const CHUNK_SIZE = 0x8000; // 32KB chunks\n            const parts = [];\n            for (let i = 0; i < bytes.length; i += CHUNK_SIZE) {\n                const chunk = bytes.subarray(i, i + CHUNK_SIZE);\n                let s = \"\";\n                for (let j = 0; j < chunk.length; j++)\n                    s += String.fromCharCode(chunk[j]);\n                parts.push(s);\n            }\n            return globalThis.btoa(parts.join(\"\"));\n        }\n        // eslint-disable-next-line no-empty\n        catch { }\n    }\n    if (typeof Buffer !== \"undefined\") {\n        try {\n            return Buffer.from(bytes).toString(\"base64\");\n        }\n        // eslint-disable-next-line no-empty\n        catch { }\n    }\n    // Minimal manual base64 (RFC 4648)\n    const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    let out = \"\";\n    let i = 0;\n    while (i < bytes.length) {\n        const a = bytes[i++];\n        const b = i < bytes.length ? bytes[i++] : 0;\n        const c = i < bytes.length ? bytes[i++] : 0;\n        const t = (a << 16) | (b << 8) | c;\n        out += chars[(t >> 18) & 63] + chars[(t >> 12) & 63];\n        out += i - 2 < bytes.length ? chars[(t >> 6) & 63] : \"=\";\n        out += i - 1 < bytes.length ? chars[t & 63] : \"=\";\n    }\n    return out;\n}\nconst BASE64_VALIDATION_REGEX = /^(?:(?:[A-Za-z0-9+/]{4})+(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?|[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)$/;\nfunction base64Decode(str) {\n    if (!BASE64_VALIDATION_REGEX.test(str)) {\n        throw new Error(\"Invalid base64 alphabet\");\n    }\n    if (typeof globalThis?.atob === \"function\") {\n        try {\n            const bin = globalThis.atob(str);\n            const bytes = new Uint8Array(bin.length);\n            for (let i = 0; i < bin.length; i++)\n                bytes[i] = bin.charCodeAt(i);\n            return bytes;\n        }\n        catch {\n            throw new Error(\"Invalid base64 encoding\");\n        }\n    }\n    if (typeof Buffer !== \"undefined\") {\n        try {\n            return new Uint8Array(Buffer.from(str, \"base64\"));\n        }\n        catch {\n            throw new Error(\"Invalid base64 encoding\");\n        }\n    }\n    // Manual decode\n    const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    const lut = new Int16Array(256).fill(-1);\n    for (let i = 0; i < chars.length; i++)\n        lut[chars.charCodeAt(i)] = i;\n    lut[\"=\".charCodeAt(0)] = 0;\n    const len = str.length;\n    let outLen = Math.floor(len * 0.75);\n    if (str[len - 1] === \"=\") {\n        outLen--;\n        if (str[len - 2] === \"=\")\n            outLen--;\n    }\n    const out = new Uint8Array(outLen);\n    let p = 0;\n    for (let i = 0; i < len; i += 4) {\n        const a = lut[str.charCodeAt(i)];\n        const b = lut[str.charCodeAt(i + 1)];\n        const c = lut[str.charCodeAt(i + 2)];\n        const d = lut[str.charCodeAt(i + 3)];\n        if (a < 0 || b < 0 || c < 0 || d < 0)\n            throw new Error(\"Invalid base64\");\n        out[p++] = (a << 2) | (b >> 4);\n        if (p < outLen)\n            out[p++] = ((b & 15) << 4) | (c >> 2);\n        if (p < outLen)\n            out[p++] = ((c & 3) << 6) | d;\n    }\n    return out;\n}\n/** Derive ECDH shared secret (raw x-coordinate, 32 bytes) */\nexport function getSharedSecret(privateKey, publicKey) {\n    const sk = hexToBytes(privateKey);\n    const pk = hexToBytes(\"02\" + publicKey);\n    const shared = secp256k1.getSharedSecret(sk, pk);\n    return shared.slice(1, 33);\n}\n/** Encrypt message per NIP-04, returns \"<base64>?iv=<base64>\" */\nexport function encrypt(privateKey, publicKey, message) {\n    const keyBytes = getSharedSecret(privateKey, publicKey);\n    const iv = randomBytes(16);\n    const keyWA = CryptoJS.enc.Hex.parse(bytesToHex(keyBytes));\n    const ivWA = CryptoJS.enc.Hex.parse(bytesToHex(iv));\n    const plaintextWA = CryptoJS.enc.Utf8.parse(message);\n    const encrypted = CryptoJS.AES.encrypt(plaintextWA, keyWA, {\n        iv: ivWA,\n        mode: CryptoJS.mode.CBC,\n        padding: CryptoJS.pad.Pkcs7,\n    });\n    // CryptoJS.AES.encrypt(...).ciphertext is a WordArray\n    const ciphertextB64 = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\n    const ivB64 = base64Encode(iv);\n    return `${ciphertextB64}?iv=${ivB64}`;\n}\nfunction isValidBase64(str) {\n    try {\n        base64Decode(str);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\n/** Decrypt NIP-04 payload */\nexport function decrypt(privateKey, publicKey, encryptedMessage) {\n    try {\n        if (typeof encryptedMessage !== \"string\") {\n            throw new NIP04DecryptionError(\"Invalid encrypted message: must be a string\");\n        }\n        if (!encryptedMessage.includes(\"?iv=\")) {\n            throw new NIP04DecryptionError(\"Invalid encrypted message format: missing IV separator\");\n        }\n        const parts = encryptedMessage.split(\"?iv=\");\n        if (parts.length !== 2) {\n            throw new NIP04DecryptionError(\"Invalid encrypted message format: multiple IV separators found\");\n        }\n        const [encryptedText, ivBase64] = parts;\n        if (!encryptedText || !ivBase64) {\n            throw new NIP04DecryptionError(\"Invalid encrypted message format: empty ciphertext or IV\");\n        }\n        if (!isValidBase64(encryptedText)) {\n            throw new NIP04DecryptionError(\"Invalid encrypted message: ciphertext is not valid base64\");\n        }\n        if (!isValidBase64(ivBase64)) {\n            throw new NIP04DecryptionError(\"Invalid encrypted message: IV is not valid base64\");\n        }\n        const iv = base64Decode(ivBase64);\n        if (iv.length !== 16) {\n            throw new NIP04DecryptionError(`Invalid IV length: expected 16 bytes, got ${iv.length}`);\n        }\n        const keyBytes = getSharedSecret(privateKey, publicKey);\n        const keyWA = CryptoJS.enc.Hex.parse(bytesToHex(keyBytes));\n        const ivWA = CryptoJS.enc.Hex.parse(bytesToHex(iv));\n        const cipherParams = CryptoJS.lib.CipherParams.create({\n            ciphertext: CryptoJS.enc.Base64.parse(encryptedText),\n        });\n        const decrypted = CryptoJS.AES.decrypt(cipherParams, keyWA, {\n            iv: ivWA,\n            mode: CryptoJS.mode.CBC,\n            padding: CryptoJS.pad.Pkcs7,\n        });\n        const plaintext = CryptoJS.enc.Utf8.stringify(decrypted);\n        // Integrity check (best-effort): re-encrypt with same IV and compare ciphertext\n        // This distinguishes wrong-key cases from valid empty-string plaintext.\n        const reEnc = CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(plaintext), keyWA, {\n            iv: ivWA,\n            mode: CryptoJS.mode.CBC,\n            padding: CryptoJS.pad.Pkcs7,\n        });\n        const reEncB64 = reEnc.ciphertext.toString(CryptoJS.enc.Base64);\n        if (reEncB64 !== encryptedText) {\n            throw new NIP04DecryptionError(\"Failed to decrypt message\");\n        }\n        return plaintext;\n    }\n    catch (error) {\n        if (error instanceof NIP04DecryptionError)\n            throw error;\n        // Don't log error details that might contain sensitive data\n        throw new NIP04DecryptionError(\"Failed to decrypt message\");\n    }\n}\n", "/**\n * NIP-11: Relay Information Document\n *\n * Implementation of the NIP-11 specification which describes\n * how relays provide information about their capabilities,\n * limitations, and contact details.\n *\n * @see https://github.com/nostr-protocol/nips/blob/master/11.md\n */\n// Cache for relay information to avoid repeated requests\nconst relayInfoCache = {};\nconst CACHE_TTL = 1000 * 60 * 60; // 1 hour cache TTL\n// Default fetch implementation\nlet fetchImplementation = globalThis.fetch;\n/**\n * Configure the fetch implementation to use\n * This is useful for environments without native fetch support\n *\n * @param fetchImpl - The fetch implementation to use\n */\nexport function useFetchImplementation(fetchImpl) {\n    fetchImplementation = fetchImpl;\n}\n/**\n * Validates if the input is a proper WebSocket URL\n *\n * @param url - URL to validate\n * @returns Boolean indicating if the URL is a valid WebSocket URL\n */\nfunction isValidWebSocketURL(url) {\n    return /^wss?:\\/\\/[^\\s/$.?#].[^\\s]*$/i.test(url);\n}\n/**\n * Fetch relay information document as defined in NIP-11\n *\n * Makes an HTTP request to a relay URL with the appropriate Accept header\n * to get the relay metadata document. Note that this uses HTTP(S), not WebSocket.\n *\n * @param url - WebSocket URL of the relay (ws:// or wss://)\n * @param options - Optional configuration\n * @returns Promise resolving to RelayInfo object, or null if not available\n */\nexport async function fetchRelayInformation(url, options = {}) {\n    // Default options\n    const { useCache = true, timeoutMs = 5000 } = options;\n    // Validate the URL\n    if (!isValidWebSocketURL(url)) {\n        console.error(`Invalid WebSocket URL: ${url}`);\n        return null;\n    }\n    // Check cache first if enabled\n    const now = Date.now();\n    if (useCache &&\n        relayInfoCache[url] &&\n        now - relayInfoCache[url].timestamp < CACHE_TTL) {\n        return relayInfoCache[url].info;\n    }\n    try {\n        // Convert WebSocket URL to HTTP(S) URL\n        const httpUrl = url.replace(/^ws(s)?:\\/\\//, \"http$1://\");\n        // Create abort controller for timeout\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), timeoutMs);\n        // Fetch the relay information document using the proper Accept header\n        const response = await fetchImplementation(httpUrl, {\n            headers: {\n                Accept: \"application/nostr+json\",\n            },\n            signal: controller.signal,\n        });\n        // Clear the timeout\n        clearTimeout(timeoutId);\n        // If the response is successful, parse as JSON\n        if (response.ok) {\n            const relayInfo = await response.json();\n            // Update cache\n            if (useCache) {\n                relayInfoCache[url] = { info: relayInfo, timestamp: now };\n            }\n            return relayInfo;\n        }\n        // Cache negative result too\n        if (useCache) {\n            relayInfoCache[url] = { info: null, timestamp: now };\n        }\n        return null;\n    }\n    catch (error) {\n        console.error(`Failed to fetch relay information from ${url}:`, error);\n        // Cache negative result\n        if (useCache) {\n            relayInfoCache[url] = { info: null, timestamp: now };\n        }\n        return null;\n    }\n}\n/**\n * Clear the relay information cache\n * Useful for testing or when you need fresh data\n */\nexport function clearRelayInfoCache() {\n    Object.keys(relayInfoCache).forEach((key) => {\n        delete relayInfoCache[key];\n    });\n}\n/**\n * Check if a relay URL supports NIP-11\n *\n * @param url - WebSocket URL of the relay (ws:// or wss://)\n * @returns Promise resolving to boolean indicating if NIP-11 is supported\n */\nexport async function supportsNIP11(url) {\n    const info = await fetchRelayInformation(url);\n    return info !== null;\n}\n/**\n * Check if a relay supports specific NIPs\n *\n * @param url - WebSocket URL of the relay (ws:// or wss://)\n * @param nipNumbers - Array of NIP numbers to check for support\n * @returns Promise resolving to boolean indicating if all specified NIPs are supported\n */\nexport async function relaySupportsNIPs(url, nipNumbers) {\n    const info = await fetchRelayInformation(url);\n    if (!info || !info.supported_nips) {\n        return false;\n    }\n    // Check if all requested NIPs are supported\n    return nipNumbers.every((nip) => info.supported_nips.includes(nip));\n}\n/**\n * Get payment information for a relay\n *\n * @param url - WebSocket URL of the relay (ws:// or wss://)\n * @returns Promise resolving to payment URL if available, null otherwise\n */\nexport async function getRelayPaymentInfo(url) {\n    const info = await fetchRelayInformation(url);\n    return info?.payments_url || null;\n}\n/**\n * Check if a relay requires payment\n *\n * @param url - WebSocket URL of the relay (ws:// or wss://)\n * @returns Promise resolving to boolean indicating if payments are required\n */\nexport async function relayRequiresPayment(url) {\n    const info = await fetchRelayInformation(url);\n    return !!info?.limitation?.payments_required;\n}\n", "import { encrypt as encryptNIP44, decrypt as decryptNIP44 } from \"../nip44/index.js\";\nimport { generateKeypair, getPublicKey, verifySignature, } from \"../utils/crypto.js\";\nimport { createSignedEvent } from \"../nip01/event.js\";\n// Cache for the dynamically imported crypto module\nlet nodeCryptoModule = null;\nlet cryptoInitialized = false;\n/**\n * Initialize crypto module for ESM environments\n * This should be called once during application startup if using ESM\n */\nexport async function initializeCrypto() {\n    if (typeof process !== \"undefined\" &&\n        process.versions &&\n        process.versions.node &&\n        !cryptoInitialized) {\n        try {\n            nodeCryptoModule = await import(\"crypto\");\n            cryptoInitialized = true;\n        }\n        catch (error) {\n            // Ignore error - will fall back to globalThis.crypto\n        }\n    }\n}\n/**\n * Generate a timestamp up to two days in the past.\n * Used to obscure creation time as recommended by the spec.\n */\nfunction randomTimestampInPast() {\n    const twoDays = 2 * 24 * 60 * 60 * 1000;\n    // Use secure random for gift wrap timing (security critical)\n    const secureRandomValue = (() => {\n        if (typeof crypto !== \"undefined\" && crypto.getRandomValues) {\n            const array = new Uint32Array(1);\n            crypto.getRandomValues(array);\n            return array[0] / (0xffffffff + 1);\n        }\n        else if (typeof process !== \"undefined\" &&\n            process.versions &&\n            process.versions.node) {\n            // Try to use pre-imported crypto module first\n            if (nodeCryptoModule) {\n                return nodeCryptoModule.randomInt(0, 0x100000000) / 0x100000000;\n            }\n            // Fallback to require for CommonJS environments\n            try {\n                // eslint-disable-next-line @typescript-eslint/no-var-requires\n                const nodeCrypto = require(\"crypto\");\n                return nodeCrypto.randomInt(0, 0x100000000) / 0x100000000;\n            }\n            catch (requireError) {\n                // If require fails in ESM, throw informative error\n                throw new Error(\"No secure random source available for gift wrap timing. In ESM environments, call initializeCrypto() before using NIP-17 functions.\");\n            }\n        }\n        throw new Error(\"No secure random source available for gift wrap timing\");\n    })();\n    const offset = Math.floor(secureRandomValue * twoDays);\n    return Math.floor((Date.now() - offset) / 1000);\n}\n/** Constant for text message kind */\nexport const DM_KIND = 14;\n/** Constant for file message kind */\nexport const FILE_KIND = 15;\n/** Kind for seal events */\nexport const SEAL_KIND = 13;\n/** Kind for gift wrap events */\nexport const GIFT_WRAP_KIND = 1059;\n/**\n * Create a gift wrapped direct message event for a single receiver.\n *\n * The returned event is a kind 1059 event containing a sealed kind 13 event,\n * which in turn wraps the unsigned kind 14 rumor.\n */\nexport async function createDirectMessage(message, senderPrivateKey, receiverPublicKey) {\n    const senderPub = getPublicKey(senderPrivateKey);\n    const rumor = {\n        pubkey: senderPub,\n        created_at: randomTimestampInPast(),\n        kind: DM_KIND,\n        tags: [[\"p\", receiverPublicKey]],\n        content: message,\n    };\n    const sealedContent = encryptNIP44(JSON.stringify(rumor), senderPrivateKey, receiverPublicKey);\n    const seal = {\n        pubkey: senderPub,\n        created_at: randomTimestampInPast(),\n        kind: SEAL_KIND,\n        content: sealedContent,\n        tags: [],\n    };\n    const signedSeal = await createSignedEvent(seal, senderPrivateKey);\n    const ephemeral = await generateKeypair();\n    const wrappedContent = encryptNIP44(JSON.stringify(signedSeal), ephemeral.privateKey, receiverPublicKey);\n    const wrap = {\n        pubkey: ephemeral.publicKey,\n        created_at: randomTimestampInPast(),\n        kind: GIFT_WRAP_KIND,\n        content: wrappedContent,\n        tags: [[\"p\", receiverPublicKey]],\n    };\n    const signedWrap = await createSignedEvent(wrap, ephemeral.privateKey);\n    return signedWrap;\n}\n/**\n * Decrypt a gift wrapped direct message.\n *\n * Returns the inner kind 14 rumor event.\n */\nexport function decryptDirectMessage(giftWrap, receiverPrivateKey) {\n    if (giftWrap.kind !== GIFT_WRAP_KIND) {\n        throw new Error(\"Invalid gift wrap kind\");\n    }\n    const sealJson = decryptNIP44(giftWrap.content, receiverPrivateKey, giftWrap.pubkey);\n    const seal = JSON.parse(sealJson);\n    if (seal.kind !== SEAL_KIND) {\n        throw new Error(\"Invalid seal kind\");\n    }\n    const validSeal = verifySignature(seal.id, seal.sig, seal.pubkey);\n    if (!validSeal) {\n        throw new Error(\"Invalid seal signature\");\n    }\n    const rumorJson = decryptNIP44(seal.content, receiverPrivateKey, seal.pubkey);\n    const rumor = JSON.parse(rumorJson);\n    if (rumor.pubkey !== seal.pubkey) {\n        throw new Error(\"Sender mismatch between seal and rumor\");\n    }\n    if (rumor.kind !== DM_KIND && rumor.kind !== FILE_KIND) {\n        throw new Error(\"Invalid rumor kind\");\n    }\n    return rumor;\n}\n", "/**\n * NIP-21: `nostr:` URI scheme\n *\n * Provides helpers to create and parse `nostr:` URIs which\n * wrap NIP-19 bech32 identifiers.\n *\n * @see https://github.com/nostr-protocol/nips/blob/master/21.md\n */\nimport { decode, Prefix } from \"../nip19/index.js\";\n/** Prefix for nostr URIs */\nexport const NOSTR_URI_PREFIX = \"nostr:\";\n/**\n * Create a `nostr:` URI from a NIP-19 identifier.\n *\n * @param entity - Bech32 encoded entity (npub, note, nprofile, nevent, naddr)\n * @returns URI string in the form `nostr:<entity>`\n * @throws Error if the entity is an nsec or invalid string\n */\nexport function encodeNostrURI(entity) {\n    if (!entity || typeof entity !== \"string\") {\n        throw new Error(\"Invalid NIP-19 entity\");\n    }\n    if (entity.startsWith(Prefix.PrivateKey)) {\n        throw new Error(\"nsec entities are not allowed in nostr URIs\");\n    }\n    // Basic prefix check to ensure it looks like bech32\n    if (!entity.includes(\"1\")) {\n        throw new Error(\"Invalid bech32 format for NIP-19 entity\");\n    }\n    return `${NOSTR_URI_PREFIX}${entity}`;\n}\n/**\n * Parse a `nostr:` URI and decode the underlying NIP-19 entity.\n *\n * @param uri - URI string starting with `nostr:`\n * @returns Decoded NIP-19 entity\n * @throws Error if the URI is malformed or contains an invalid entity\n */\nexport function decodeNostrURI(uri) {\n    if (!uri.startsWith(NOSTR_URI_PREFIX)) {\n        throw new Error(\"Invalid nostr URI format\");\n    }\n    const entity = uri.slice(NOSTR_URI_PREFIX.length);\n    return decode(entity);\n}\n", "/**\n * NIP-05: Mapping Nostr keys to DNS-based internet identifiers\n * Implementation based on https://github.com/nostr-protocol/nips/blob/master/05.md\n */\n/**\n * Verify if a NIP-05 identifier matches a given public key\n *\n * @param identifier - NIP-05 identifier in the format username@domain.com\n * @param pubkey - The Nostr public key in hex format\n * @returns Promise that resolves to boolean indicating if verification was successful\n */\nexport async function verifyNIP05(identifier, pubkey) {\n    try {\n        let name, domain;\n        const parts = identifier.split(\"@\");\n        if (parts.length === 1) {\n            name = \"_\";\n            domain = parts[0];\n        }\n        else if (parts.length === 2) {\n            name = parts[0];\n            domain = parts[1];\n        }\n        else {\n            // Invalid format\n            return false;\n        }\n        // If the identifier isn't properly formatted (e.g. empty name or domain)\n        if (!name || !domain) {\n            return false;\n        }\n        // Use the potentially modified identifier for lookup\n        const modifiedIdentifier = name === \"_\" && parts.length === 1 ? domain : identifier;\n        const response = await lookupNIP05(modifiedIdentifier);\n        if (!response)\n            return false;\n        // Check if the name exists in the response and corresponds to our pubkey\n        return response.names[name.toLowerCase()] === pubkey;\n    }\n    catch (error) {\n        return false;\n    }\n}\n/**\n * Lookup NIP-05 identifier and get the associated pubkey and relays\n *\n * @param identifier - NIP-05 identifier in the format username@domain.com\n * @returns Promise that resolves to NIP05Response or null if lookup fails\n */\nexport async function lookupNIP05(identifier) {\n    try {\n        let name, domain;\n        const parts = identifier.split(\"@\");\n        if (parts.length === 1) {\n            // If there's no \"@\", assume it's a domain and default name to \"_\"\n            name = \"_\";\n            domain = parts[0];\n        }\n        else if (parts.length === 2) {\n            name = parts[0];\n            domain = parts[1];\n        }\n        else {\n            // Invalid format\n            return null;\n        }\n        // If the identifier isn't properly formatted (e.g. empty name or domain after split)\n        if (!name || !domain) {\n            return null;\n        }\n        // Construct the URL for the NIP-05 JSON file\n        const url = `https://${domain}/.well-known/nostr.json?name=${name.toLowerCase()}`;\n        // Set up fetch options with headers\n        const fetchOptions = {\n            method: \"GET\",\n            headers: { Accept: \"application/json\" },\n            redirect: \"error\",\n        };\n        // Add TLS certificate validation\n        // Note: In browsers, TLS validation is handled automatically\n        // In Node.js environments, this would need to be handled with an https agent\n        // but we'll use the default fetch behavior which should validate certificates\n        const response = await fetch(url, fetchOptions);\n        if (!response.ok) {\n            return null;\n        }\n        const data = await response.json();\n        // Check if the response contains the required names field\n        if (!data || !data.names) {\n            return null;\n        }\n        return data;\n    }\n    catch (error) {\n        return null;\n    }\n}\n/**\n * Get the public key for a given NIP-05 identifier\n *\n * @param identifier - NIP-05 identifier in the format username@domain.com\n * @returns Promise that resolves to pubkey in hex format or null if lookup fails\n */\nexport async function getNIP05PubKey(identifier) {\n    try {\n        let name, domain;\n        const parts = identifier.split(\"@\");\n        if (parts.length === 1) {\n            name = \"_\";\n            domain = parts[0];\n        }\n        else if (parts.length === 2) {\n            name = parts[0];\n            domain = parts[1];\n        }\n        else {\n            // Invalid format\n            return null;\n        }\n        // If the identifier isn't properly formatted (e.g. empty name or domain)\n        if (!name || !domain) {\n            return null;\n        }\n        // Use the potentially modified identifier for lookup\n        const modifiedIdentifier = name === \"_\" && parts.length === 1 ? domain : identifier;\n        const response = await lookupNIP05(modifiedIdentifier);\n        if (!response)\n            return null;\n        // Check if the name exists in the response\n        return response.names[name.toLowerCase()] || null;\n    }\n    catch (error) {\n        return null;\n    }\n}\n/**\n * Get the relays for a given NIP-05 identifier and pubkey\n *\n * @param identifier - NIP-05 identifier in the format username@domain.com\n * @param pubkey - The Nostr public key in hex format\n * @returns Promise that resolves to array of relay URLs or null if lookup fails\n */\nexport async function getNIP05Relays(identifier, pubkey) {\n    try {\n        const response = await lookupNIP05(identifier);\n        if (!response || !response.relays || !response.relays[pubkey])\n            return null;\n        return response.relays[pubkey];\n    }\n    catch (error) {\n        return null;\n    }\n}\n", "// Note: Avoid global Window augmentation here to prevent collisions\n// in consumer environments with their own window.nostr declarations.\n// Access is performed via a type-asserted read of window[\"nostr\"].\n/**\n * Safe access to the browser's nostr object\n */\nfunction getNostr() {\n    if (typeof window === \"undefined\")\n        return undefined;\n    const w = window;\n    return w.nostr;\n}\n/**\n * Checks if the browser has the NIP-07 extension available\n */\nexport const hasNip07Support = () => {\n    return typeof window !== \"undefined\" && !!getNostr();\n};\n/**\n * Gets the public key from the NIP-07 extension\n * @returns The public key in hex format\n * @throws Error if NIP-07 is not supported or fails\n */\nexport const getPublicKey = async () => {\n    if (!hasNip07Support()) {\n        throw new Error(\"NIP-07 extension not available\");\n    }\n    const nostr = getNostr();\n    if (!nostr) {\n        throw new Error(\"NIP-07 extension not available\");\n    }\n    try {\n        return await nostr.getPublicKey();\n    }\n    catch (error) {\n        throw new Error(`Failed to get public key from NIP-07 extension: ${error}`);\n    }\n};\n/**\n * Signs an event using the NIP-07 extension\n * @param event Event to sign (without id, pubkey, sig)\n * @returns Signed event with id, pubkey, and sig fields added\n * @throws Error if NIP-07 is not supported or fails\n */\nexport const signEvent = async (event) => {\n    if (!hasNip07Support()) {\n        throw new Error(\"NIP-07 extension not available\");\n    }\n    const nostr = getNostr();\n    if (!nostr) {\n        throw new Error(\"NIP-07 extension not available\");\n    }\n    try {\n        return await nostr.signEvent(event);\n    }\n    catch (error) {\n        throw new Error(`Failed to sign event with NIP-07 extension: ${error}`);\n    }\n};\n/**\n * Encrypts a message using NIP-04 via the NIP-07 extension\n * @param pubkey Recipient's public key\n * @param plaintext Message to encrypt\n * @returns Encrypted message\n * @throws Error if NIP-07 is not supported, doesn't implement NIP-04, or fails\n */\nexport const encryptNip04 = async (pubkey, plaintext) => {\n    if (!hasNip07Support()) {\n        throw new Error(\"NIP-07 extension not available\");\n    }\n    const nostr = getNostr();\n    if (!nostr?.nip04?.encrypt) {\n        throw new Error(\"NIP-04 encryption not supported by the extension\");\n    }\n    try {\n        return await nostr.nip04.encrypt(pubkey, plaintext);\n    }\n    catch (error) {\n        throw new Error(`Failed to encrypt message with NIP-04: ${error}`);\n    }\n};\n/**\n * Decrypts a message using NIP-04 via the NIP-07 extension\n * @param pubkey Sender's public key\n * @param ciphertext Encrypted message\n * @returns Decrypted message\n * @throws Error if NIP-07 is not supported, doesn't implement NIP-04, or fails\n */\nexport const decryptNip04 = async (pubkey, ciphertext) => {\n    if (!hasNip07Support()) {\n        throw new Error(\"NIP-07 extension not available\");\n    }\n    const nostr = getNostr();\n    if (!nostr?.nip04?.decrypt) {\n        throw new Error(\"NIP-04 decryption not supported by the extension\");\n    }\n    try {\n        return await nostr.nip04.decrypt(pubkey, ciphertext);\n    }\n    catch (error) {\n        throw new Error(`Failed to decrypt message with NIP-04: ${error}`);\n    }\n};\n/**\n * Encrypts a message using NIP-44 via the NIP-07 extension\n * @param pubkey Recipient's public key\n * @param plaintext Message to encrypt\n * @returns Encrypted message\n * @throws Error if NIP-07 is not supported, doesn't implement NIP-44, or fails\n */\nexport const encryptNip44 = async (pubkey, plaintext) => {\n    if (!hasNip07Support()) {\n        throw new Error(\"NIP-07 extension not available\");\n    }\n    const nostr = getNostr();\n    if (!nostr?.nip44?.encrypt) {\n        throw new Error(\"NIP-44 encryption not supported by the extension\");\n    }\n    try {\n        return await nostr.nip44.encrypt(pubkey, plaintext);\n    }\n    catch (error) {\n        throw new Error(`Failed to encrypt message with NIP-44: ${error}`);\n    }\n};\n/**\n * Decrypts a message using NIP-44 via the NIP-07 extension\n * @param pubkey Sender's public key\n * @param ciphertext Encrypted message\n * @returns Decrypted message\n * @throws Error if NIP-07 is not supported, doesn't implement NIP-44, or fails\n */\nexport const decryptNip44 = async (pubkey, ciphertext) => {\n    if (!hasNip07Support()) {\n        throw new Error(\"NIP-07 extension not available\");\n    }\n    const nostr = getNostr();\n    if (!nostr?.nip44?.decrypt) {\n        throw new Error(\"NIP-44 decryption not supported by the extension\");\n    }\n    try {\n        return await nostr.nip44.decrypt(pubkey, ciphertext);\n    }\n    catch (error) {\n        throw new Error(`Failed to decrypt message with NIP-44: ${error}`);\n    }\n};\n", "/**\n * NIP-09: Event Deletion Request\n *\n * Utilities for creating and processing deletion request events.\n * https://github.com/nostr-protocol/nips/blob/master/09.md\n */\nimport { createEvent } from \"../nip01/event.js\";\nimport { NostrKind } from \"../types/nostr.js\";\nimport { validateArrayAccess, safeArrayAccess, SecurityValidationError, } from \"../utils/security-validator.js\";\n/**\n * Create an unsigned deletion request event (kind 5)\n */\nexport function createDeletionRequest(opts, pubkey) {\n    const tags = [];\n    for (const id of opts.ids || []) {\n        tags.push([\"e\", id]);\n    }\n    for (const addr of opts.addresses || []) {\n        tags.push([\"a\", addr]);\n    }\n    for (const kind of opts.kinds || []) {\n        tags.push([\"k\", kind.toString()]);\n    }\n    return createEvent({\n        kind: NostrKind.Deletion,\n        content: opts.content || \"\",\n        tags,\n    }, pubkey);\n}\n/**\n * Extract referenced ids, addresses and kinds from a deletion event\n */\nexport function parseDeletionTargets(event) {\n    const result = {\n        ids: [],\n        addresses: [],\n        kinds: [],\n    };\n    for (const tag of event.tags) {\n        try {\n            // Safe access to tag elements with bounds checking\n            if (!validateArrayAccess(tag, 0) || !validateArrayAccess(tag, 1)) {\n                continue; // Skip malformed tags\n            }\n            const tagName = safeArrayAccess(tag, 0);\n            const tagValue = safeArrayAccess(tag, 1);\n            if (typeof tagName !== \"string\" || typeof tagValue !== \"string\") {\n                continue; // Skip malformed tags\n            }\n            if (tagName === \"e\" && tagValue) {\n                result.ids.push(tagValue);\n            }\n            else if (tagName === \"a\" && tagValue) {\n                result.addresses.push(tagValue);\n            }\n            else if (tagName === \"k\" && tagValue) {\n                const k = parseInt(tagValue, 10);\n                if (!isNaN(k)) {\n                    result.kinds.push(k);\n                }\n            }\n        }\n        catch (error) {\n            if (error instanceof SecurityValidationError) {\n                // Log bounds checking error but continue processing\n                if (typeof console !== \"undefined\" && console.warn) {\n                    console.warn(`NIP-09: Bounds checking error in tag processing: ${error.message}`);\n                }\n            }\n        }\n    }\n    return result;\n}\n/**\n * Check if a deletion request targets the given event\n */\nexport function isDeletionRequestForEvent(deletion, event) {\n    if (deletion.kind !== NostrKind.Deletion)\n        return false;\n    if (deletion.pubkey !== event.pubkey)\n        return false;\n    const targets = parseDeletionTargets(deletion);\n    if (targets.ids.includes(event.id))\n        return true;\n    // Safe access to d-tag with bounds checking\n    try {\n        const dTag = event.tags.find((t) => {\n            try {\n                return validateArrayAccess(t, 0) && safeArrayAccess(t, 0) === \"d\";\n            }\n            catch {\n                return false;\n            }\n        });\n        if (dTag && validateArrayAccess(dTag, 1)) {\n            const dValue = safeArrayAccess(dTag, 1);\n            if (typeof dValue === \"string\") {\n                const addr = `${event.kind}:${event.pubkey}:${dValue}`;\n                if (targets.addresses.includes(addr))\n                    return true;\n            }\n        }\n    }\n    catch (error) {\n        if (error instanceof SecurityValidationError) {\n            if (typeof console !== \"undefined\" && console.warn) {\n                console.warn(`NIP-09: Bounds checking error in d-tag processing: ${error.message}`);\n            }\n        }\n    }\n    return false;\n}\n", "/**\n * NIP-10: Text Notes and Threads\n *\n * Utilities for working with thread references as defined in\n * https://github.com/nostr-protocol/nips/blob/master/10.md\n */\nimport { validateArrayAccess, safeArrayAccess, SecurityValidationError, } from \"../utils/security-validator.js\";\n/**\n * Create marked \"e\" tags for a reply as defined in NIP-10.\n * The tags are returned in the recommended order from root to reply.\n */\nexport function createReplyTags(root, reply) {\n    const tags = [];\n    // Build root tag with consistent column order\n    const rootTag = [\"e\", root.id];\n    // Always include relay field to maintain proper column order\n    rootTag.push(root.relay || \"\");\n    rootTag.push(\"root\");\n    if (root.pubkey) {\n        rootTag.push(root.pubkey);\n    }\n    tags.push(rootTag);\n    if (reply) {\n        // Build reply tag with consistent column order\n        const replyTag = [\"e\", reply.id];\n        // Always include relay field to maintain proper column order\n        replyTag.push(reply.relay || \"\");\n        replyTag.push(\"reply\");\n        if (reply.pubkey) {\n            replyTag.push(reply.pubkey);\n        }\n        tags.push(replyTag);\n    }\n    return tags;\n}\n/** Create an \"e\" tag with \"mention\" marker for quoting an event */\nexport function createQuoteTag(pointer) {\n    const tag = [\"e\", pointer.id];\n    // Always include relay field to maintain proper column order\n    tag.push(pointer.relay || \"\");\n    tag.push(\"mention\");\n    if (pointer.pubkey) {\n        tag.push(pointer.pubkey);\n    }\n    return tag;\n}\n/**\n * Parse thread references (e tags) from an event. Handles both\n * marked and deprecated positional e tags.\n */\nexport function parseThreadReferences(event) {\n    const eTags = event.tags.filter((t) => {\n        try {\n            return validateArrayAccess(t, 0) && safeArrayAccess(t, 0) === \"e\";\n        }\n        catch {\n            return false;\n        }\n    });\n    let root;\n    let reply;\n    const mentions = [];\n    const quotes = [];\n    const unmarked = [];\n    for (const tag of eTags) {\n        try {\n            // Skip tags that don't have an ID or have invalid ID\n            const id = tag[1];\n            if (!id || typeof id !== \"string\" || !id.trim()) {\n                continue;\n            }\n            // Safe access to optional fields using safeArrayAccess helper\n            const relay = safeArrayAccess(tag, 2);\n            const marker = safeArrayAccess(tag, 3);\n            const pubkey = safeArrayAccess(tag, 4);\n            const relayValue = typeof relay === \"string\" && relay.trim() ? relay : undefined;\n            const pubkeyValue = typeof pubkey === \"string\" && pubkey.trim() && pubkey !== \"\"\n                ? pubkey\n                : undefined;\n            if (marker === \"root\") {\n                root = { id, relay: relayValue, pubkey: pubkeyValue };\n            }\n            else if (marker === \"reply\") {\n                reply = { id, relay: relayValue, pubkey: pubkeyValue };\n            }\n            else if (marker === \"mention\") {\n                quotes.push({ id, relay: relayValue, pubkey: pubkeyValue });\n            }\n            else {\n                unmarked.push({ id, relay: relayValue, pubkey: pubkeyValue });\n            }\n        }\n        catch (error) {\n            if (error instanceof SecurityValidationError) {\n                console.warn(`NIP-10: Bounds checking error in thread parsing: ${error.message}`);\n            }\n            continue; // Skip invalid tags\n        }\n    }\n    // Handle deprecated positional scheme if no marked tags were found\n    if (!root && !reply && unmarked.length > 0) {\n        try {\n            if (unmarked.length === 1) {\n                reply = unmarked[0];\n            }\n            else {\n                root = unmarked[0];\n                reply = unmarked[unmarked.length - 1];\n                // Safe slice operation for mentions\n                if (unmarked.length > 2) {\n                    mentions.push(...unmarked.slice(1, -1));\n                }\n            }\n        }\n        catch (error) {\n            if (error instanceof SecurityValidationError) {\n                console.warn(`NIP-10: Bounds checking error in positional parsing: ${error.message}`);\n            }\n        }\n    }\n    else {\n        mentions.push(...unmarked);\n    }\n    return { root, reply, mentions, quotes };\n}\n", "import { Nostr } from \"../nip01/nostr.js\";\nimport * as nip07 from \"./index.js\";\nimport { getUnixTime } from \"../utils/time.js\";\n/**\n * NIP-07 enabled Nostr client that uses browser extension for signing\n * and key management instead of keeping keys in memory\n */\nexport class Nip07Nostr extends Nostr {\n    /**\n     * Creates a new Nostr client that uses NIP-07 browser extension\n     * @param relayUrls Array of relay URLs to connect to\n     * @throws Error if NIP-07 extension is not available\n     */\n    constructor(relayUrls = []) {\n        // Initialize with default constructor\n        super(relayUrls);\n        if (!nip07.hasNip07Support()) {\n            throw new Error(\"NIP-07 extension not available in this browser\");\n        }\n    }\n    /**\n     * Initialize the client with the public key from the NIP-07 extension\n     * @returns The initialized public key\n     */\n    async initializeWithNip07() {\n        try {\n            this.nip07PublicKey = await nip07.getPublicKey();\n            // Store the public key but don't set an empty private key\n            // as that would cause issues with validation\n            return this.nip07PublicKey;\n        }\n        catch (error) {\n            throw new Error(`Failed to initialize with NIP-07 extension: ${error}`);\n        }\n    }\n    /**\n     * Override getPublicKey to use the NIP-07 public key\n     * @returns The public key from NIP-07 extension\n     */\n    getPublicKey() {\n        return this.nip07PublicKey;\n    }\n    /**\n     * Override setPrivateKey to prevent setting private key directly\n     * @throws Error as private key can't be set manually with NIP-07\n     */\n    setPrivateKey(_privateKey) {\n        throw new Error(\"Cannot set private key directly when using NIP-07 extension\");\n    }\n    /**\n     * Override generateKeys to use NIP-07 extension\n     * @returns Object with publicKey (privateKey is empty string)\n     */\n    async generateKeys() {\n        const publicKey = await this.initializeWithNip07();\n        // Return object with empty privateKey as it's managed by extension\n        return { publicKey, privateKey: \"\" };\n    }\n    /**\n     * Publishes a text note using the NIP-07 extension for signing\n     * @param content Content of the note\n     * @param tags Optional tags to add to the note\n     * @returns The published event or null if failed\n     */\n    async publishTextNote(content, tags = []) {\n        // Ensure we have the public key\n        if (!this.nip07PublicKey) {\n            await this.initializeWithNip07();\n        }\n        const event = {\n            kind: 1,\n            created_at: getUnixTime(),\n            tags,\n            content,\n        };\n        try {\n            const signedEvent = await nip07.signEvent(event);\n            await this.publishEvent(signedEvent);\n            return signedEvent;\n        }\n        catch (error) {\n            console.error(\"Failed to publish text note:\", error);\n            return null;\n        }\n    }\n    /**\n     * Publishes a direct message to a recipient using the NIP-07 extension\n     * @param content Message content\n     * @param recipientPubkey Recipient's public key\n     * @param tags Additional tags\n     * @returns The published event or null if failed\n     */\n    async publishDirectMessage(content, recipientPubkey, tags = []) {\n        // Ensure we have the public key\n        if (!this.nip07PublicKey) {\n            await this.initializeWithNip07();\n        }\n        try {\n            // Try to use NIP-44 encryption if available\n            let encryptedContent;\n            try {\n                encryptedContent = await nip07.encryptNip44(recipientPubkey, content);\n            }\n            catch (e) {\n                // Fall back to NIP-04 if NIP-44 is not available\n                encryptedContent = await nip07.encryptNip04(recipientPubkey, content);\n            }\n            // Add recipient tag if not already included\n            const recipientTag = [\"p\", recipientPubkey];\n            const updatedTags = [...tags];\n            if (!updatedTags.some((tag) => tag[0] === \"p\" && tag[1] === recipientPubkey)) {\n                updatedTags.push(recipientTag);\n            }\n            const event = {\n                kind: 4,\n                created_at: getUnixTime(),\n                tags: updatedTags,\n                content: encryptedContent,\n            };\n            const signedEvent = await nip07.signEvent(event);\n            await this.publishEvent(signedEvent);\n            return signedEvent;\n        }\n        catch (error) {\n            console.error(\"Failed to publish direct message:\", error);\n            return null;\n        }\n    }\n    /**\n     * Decrypt a direct message using the NIP-07 extension\n     * @param event The encrypted message event\n     * @returns The decrypted content\n     * @throws Error if decryption fails\n     */\n    decryptDirectMessage(event) {\n        if (event.kind !== 4) {\n            throw new Error(\"Event is not a direct message (kind 4)\");\n        }\n        // Synchronous decryption isn't supported with NIP-07; an error will be thrown\n        try {\n            // In a direct message, we need to return a string, not a Promise\n            // However, the NIP-07 extension functions are async\n            // We'll throw an error instructing to use decryptDirectMessageAsync instead\n            throw new Error(\"With NIP-07, use decryptDirectMessageAsync instead\");\n        }\n        catch (error) {\n            throw new Error(`Cannot decrypt synchronously with NIP-07. Use decryptDirectMessageAsync: ${error}`);\n        }\n    }\n    /**\n     * Async version of decryptDirectMessage that works with NIP-07\n     * @param event The encrypted message event\n     * @returns Promise resolving to the decrypted content\n     */\n    async decryptDirectMessageAsync(event) {\n        if (event.kind !== 4) {\n            throw new Error(\"Event is not a direct message (kind 4)\");\n        }\n        const senderPubkey = event.pubkey;\n        try {\n            // Try NIP-44 first, fall back to NIP-04\n            try {\n                return await nip07.decryptNip44(senderPubkey, event.content);\n            }\n            catch (e) {\n                return await nip07.decryptNip04(senderPubkey, event.content);\n            }\n        }\n        catch (error) {\n            throw new Error(`Failed to decrypt message: ${error}`);\n        }\n    }\n}\n", "/**\n * Utility functions for NIP-57 (Lightning Zaps)\n */\nimport { bech32 } from \"@scure/base\";\nimport { decode } from \"light-bolt11-decoder\";\n/**\n * Converts a Lightning Address (user@domain.com) to a well-known LNURL endpoint URL\n * @param lightningAddress Lightning Address in format user@domain.com\n * @returns URL string or null if invalid address format\n */\nexport function getLightningAddressUrl(lightningAddress) {\n    try {\n        // Check format\n        if (!lightningAddress || !lightningAddress.includes(\"@\")) {\n            return null;\n        }\n        // Split into username and domain\n        const [username, domain] = lightningAddress.split(\"@\");\n        // Validate parts\n        if (!username || !domain) {\n            return null;\n        }\n        // Build the LNURL endpoint\n        return `https://${domain}/.well-known/lnurlp/${username}`;\n    }\n    catch (error) {\n        console.error(\"Error converting Lightning Address:\", error);\n        return null;\n    }\n}\n/**\n * Fetches and validates LNURL pay metadata from a URL\n * @param lnurlOrUrl LNURL (bech32-encoded) or direct URL\n * @returns LNURL pay response if valid and supports Nostr, null otherwise\n */\nexport async function fetchLnurlPayMetadata(lnurlOrUrl) {\n    try {\n        // Convert LNURL to URL if needed\n        let url = lnurlOrUrl;\n        // Handle Lightning Address (user@domain.com)\n        if (lnurlOrUrl.includes(\"@\")) {\n            url = getLightningAddressUrl(lnurlOrUrl) || lnurlOrUrl;\n        }\n        // Handle LNURL (bech32-encoded)\n        else if (lnurlOrUrl.toLowerCase().startsWith(\"lnurl\")) {\n            url = decodeLnurl(lnurlOrUrl) || lnurlOrUrl;\n        }\n        if (!url) {\n            return null;\n        }\n        // Fetch the LNURL metadata\n        const response = await fetch(url);\n        const data = await response.json();\n        // Basic validation\n        if (!data ||\n            typeof data !== \"object\" ||\n            !data.callback ||\n            !data.maxSendable ||\n            !data.minSendable ||\n            !data.metadata ||\n            data.tag !== \"payRequest\") {\n            return null;\n        }\n        // Return the response\n        return {\n            callback: data.callback,\n            maxSendable: data.maxSendable,\n            minSendable: data.minSendable,\n            metadata: data.metadata,\n            commentAllowed: data.commentAllowed,\n            tag: data.tag,\n            allowsNostr: data.allowsNostr,\n            nostrPubkey: data.nostrPubkey,\n        };\n    }\n    catch (error) {\n        console.error(\"Error fetching LNURL metadata:\", error);\n        return null;\n    }\n}\n/**\n * Checks if an LNURL pay endpoint supports Nostr zaps\n * @param metadata LNURL pay metadata response\n * @returns Whether the endpoint supports zaps\n */\nexport function supportsNostrZaps(metadata) {\n    return !!(metadata.allowsNostr && metadata.nostrPubkey);\n}\n/**\n * Decodes an LNURL bech32 string to a URL\n * @param lnurl LNURL string (bech32-encoded)\n * @returns Decoded URL or null if invalid\n */\nexport function decodeLnurl(lnurl) {\n    try {\n        if (!lnurl.toLowerCase().startsWith(\"lnurl\")) {\n            return null;\n        }\n        // Use the bech32 library to decode\n        // The bech32 library expects the input in specific format (string with '1' separator)\n        // Since LNURL is a bech32 string that starts with 'lnurl', we need to ensure it's valid\n        const decoded = bech32.decode(lnurl.toLowerCase(), 1023);\n        const words = decoded.words;\n        const bytes = bech32.fromWords(words);\n        // Convert bytes to URL string\n        return new TextDecoder().decode(new Uint8Array(bytes));\n    }\n    catch (error) {\n        console.error(\"Error decoding LNURL:\", error);\n        return null;\n    }\n}\n/**\n * Parses a bolt11 invoice and extracts relevant data\n * @param bolt11 The bolt11 invoice string\n * @returns Object with parsed data or null if parsing failed\n */\nexport function parseBolt11Invoice(bolt11) {\n    try {\n        // Cast to our interface that matches the parts we need\n        const decoded = decode(bolt11);\n        // Extract fields from the decoded invoice\n        const result = {};\n        // Find timestamp section\n        const timestampSection = decoded.sections.find((s) => s.name === \"timestamp\");\n        if (timestampSection?.value !== undefined) {\n            result.timestamp = Number(timestampSection.value);\n        }\n        // Find amount - directly use the top-level properties if available\n        if (decoded.millisatoshis) {\n            result.amount = String(decoded.millisatoshis);\n        }\n        else if (decoded.satoshis) {\n            // Convert sats to msats (1 sat = 1000 msats)\n            const sats = typeof decoded.satoshis === \"number\"\n                ? decoded.satoshis\n                : parseInt(decoded.satoshis, 10);\n            result.amount = String(sats * 1000);\n        }\n        // Check for payment hash (may be in sections or directly in the object)\n        if (decoded.paymentHash) {\n            result.paymentHash = decoded.paymentHash;\n        }\n        else {\n            // Fallback to sections\n            const paymentHashSection = decoded.sections.find((s) => s.name === \"payment_hash\");\n            if (paymentHashSection?.value !== undefined) {\n                result.paymentHash = String(paymentHashSection.value);\n            }\n        }\n        // Check for description\n        if (decoded.description) {\n            result.description = decoded.description;\n        }\n        else {\n            // Fallback to sections\n            const descriptionSection = decoded.sections.find((s) => s.name === \"description\");\n            if (descriptionSection?.value !== undefined) {\n                result.description = String(descriptionSection.value);\n            }\n        }\n        // Check for description hash\n        if (decoded.descriptionHash) {\n            result.descriptionHash = decoded.descriptionHash;\n        }\n        else {\n            // Fallback to sections - use custom tag check to avoid type errors\n            for (const section of decoded.sections) {\n                if (section.name === \"description_hash\" ||\n                    section.name === \"purpose_commit_hash\") {\n                    if (section.value !== undefined) {\n                        result.descriptionHash = String(section.value);\n                        break;\n                    }\n                }\n            }\n        }\n        return result;\n    }\n    catch (error) {\n        console.error(\"Error parsing bolt11 invoice:\", error);\n        return null;\n    }\n}\n/**\n * Builds a LNURL callback URL with a zap request\n * @param callbackUrl Base LNURL callback URL\n * @param zapRequestEvent JSON string of the zap request event\n * @param amount Amount in millisats\n * @returns Full callback URL\n */\nexport function buildZapCallbackUrl(callbackUrl, zapRequestEvent, amount) {\n    // Create URL object to handle query parameters properly\n    const url = new URL(callbackUrl);\n    // Add amount and nostr parameters\n    url.searchParams.append(\"amount\", amount.toString());\n    url.searchParams.append(\"nostr\", encodeURIComponent(zapRequestEvent));\n    return url.toString();\n}\n/**\n * Extract metadata from LNURL JSON metadata string\n * @param metadataString JSON metadata string from LNURL response\n * @returns Object with extracted metadata or null if invalid\n */\nexport function extractLnurlMetadata(metadataString) {\n    try {\n        const metadata = JSON.parse(metadataString);\n        if (!Array.isArray(metadata)) {\n            return null;\n        }\n        const result = {};\n        for (const item of metadata) {\n            if (Array.isArray(item) &&\n                item.length === 2 &&\n                typeof item[0] === \"string\") {\n                result[item[0]] = String(item[1]);\n            }\n        }\n        return result;\n    }\n    catch (error) {\n        console.error(\"Error parsing LNURL metadata:\", error);\n        return null;\n    }\n}\n", "/**\n * NIP-57 Zap Client implementation\n * Provides high-level functionality for working with zaps in Nostr\n *\n * The NostrZapClient provides a comprehensive interface for:\n * - Sending zaps to users and events\n * - Fetching and validating zap receipts\n * - Calculating zap statistics\n * - Working with zap splits\n */\nimport { createSignedEvent } from \"../nip01/event.js\";\nimport { getUnixTime } from \"../utils/time.js\";\nimport { createZapRequest, validateZapReceipt, parseZapSplit, calculateZapSplitAmounts, } from \"./index.js\";\nimport { fetchLnurlPayMetadata, supportsNostrZaps, buildZapCallbackUrl, } from \"./utils.js\";\nimport { validateArrayAccess, safeArrayAccess, SecurityValidationError, } from \"../utils/security-validator.js\";\n/**\n * Client for working with Lightning Zaps (NIP-57)\n *\n * This client provides high-level methods for sending zaps,\n * fetching zap receipts, and calculating zap statistics.\n */\nexport class NostrZapClient {\n    /**\n     * Create a new zap client\n     * @param options Options for configuring the client\n     */\n    constructor(options) {\n        this.client = options.client;\n        this.defaultRelays = options.defaultRelays || [];\n    }\n    /**\n     * Private method to safely unsubscribe from a subscription\n     *\n     * @param subscriptionIds Array of subscription IDs\n     * @param context Context string for error logging\n     */\n    cleanupSubscription(subscriptionIds, context = \"cleanup\") {\n        try {\n            if (validateArrayAccess(subscriptionIds, 0)) {\n                const subId = safeArrayAccess(subscriptionIds, 0);\n                if (typeof subId === \"string\") {\n                    this.client.unsubscribe([subId]);\n                }\n            }\n        }\n        catch (error) {\n            if (error instanceof SecurityValidationError) {\n                console.warn(`NIP-57: Bounds checking error in ${context}: ${error.message}`);\n            }\n        }\n    }\n    /**\n     * Check if a user can receive zaps\n     *\n     * This method checks if a user's LNURL endpoint supports NIP-57 Nostr zaps.\n     *\n     * @param pubkey The user's public key\n     * @param lnurl Optional LNURL from profile (if known)\n     * @returns Whether the user can receive zaps\n     */\n    async canReceiveZaps(pubkey, lnurl) {\n        const zapClient = new ZapClient({\n            nostrClient: this.client,\n            defaultRelays: this.defaultRelays,\n        });\n        return zapClient.canReceiveZaps(pubkey, lnurl);\n    }\n    /**\n     * Send a zap to a user or event\n     *\n     * This method:\n     * 1. Creates a zap request\n     * 2. Sends it to the recipient's LNURL server\n     * 3. Returns the invoice for payment\n     *\n     * Note: After getting the invoice, you need to pay it with a Lightning wallet.\n     * The LNURL server will create and publish a zap receipt after payment.\n     *\n     * @param options Zap options including recipient, amount, and comment\n     * @param privateKey Private key for signing the request\n     * @returns Object with success status and invoice or error\n     */\n    async sendZap(options, privateKey) {\n        const zapClient = new ZapClient({\n            nostrClient: this.client,\n            defaultRelays: this.defaultRelays,\n        });\n        // Get the invoice\n        const result = await zapClient.getZapInvoice(options, privateKey);\n        if (result.error) {\n            return {\n                success: false,\n                error: result.error,\n            };\n        }\n        return {\n            success: true,\n            invoice: result.invoice,\n        };\n        // Note: In a real implementation, you would now:\n        // 1. Use a Lightning wallet to pay the invoice\n        // 2. Return the payment success/failure\n    }\n    /**\n     * Fetch zaps received by a user\n     *\n     * @param pubkey User's public key\n     * @param options Filter options\n     * @returns Array of zap receipt events\n     */\n    async fetchUserReceivedZaps(pubkey, options = {}) {\n        const filter = {\n            kinds: [9735],\n            \"#p\": [pubkey],\n            limit: options.limit || 20,\n        };\n        if (options.since) {\n            filter.since = options.since;\n        }\n        if (options.until) {\n            filter.until = options.until;\n        }\n        if (options.authors && options.authors.length > 0) {\n            filter.authors = options.authors;\n        }\n        // Create a promise to collect events\n        return new Promise((resolve) => {\n            const events = [];\n            // Subscribe to zap receipts\n            const subscriptionIds = this.client.subscribe([filter], (event) => {\n                events.push(event);\n            }, () => {\n                // On EOSE, resolve with collected events\n                this.cleanupSubscription(subscriptionIds);\n                resolve(events);\n            });\n            // Set a timeout in case EOSE never comes\n            setTimeout(() => {\n                this.cleanupSubscription(subscriptionIds, \"timeout\");\n                resolve(events);\n            }, 10000);\n        });\n    }\n    /**\n     * Fetch zaps sent by a user\n     *\n     * @param pubkey User's public key\n     * @param options Filter options\n     * @returns Array of zap receipt events\n     */\n    async fetchUserSentZaps(pubkey, options = {}) {\n        // We need to find zap receipts where the zap request was from this pubkey\n        // This is more complex and less reliable since we need to parse each description\n        // First get all zap receipts within our criteria\n        const allZapReceipts = await this.fetchZapReceipts(options);\n        // Then filter to only those sent by this user\n        return allZapReceipts.filter((zapReceipt) => {\n            try {\n                // Find description tag with streamlined validation\n                const descriptionTag = zapReceipt.tags.find((tag) => Array.isArray(tag) && tag.length > 0 && tag[0] === \"description\");\n                if (!Array.isArray(descriptionTag) ||\n                    descriptionTag.length < 2 ||\n                    typeof descriptionTag[1] !== \"string\")\n                    return false;\n                // Parse zap request\n                const zapRequest = JSON.parse(descriptionTag[1]);\n                // Check if the sender is the specified pubkey\n                return zapRequest.pubkey === pubkey;\n            }\n            catch (e) {\n                if (e instanceof SecurityValidationError) {\n                    console.warn(`NIP-57: Bounds checking error in zap filtering: ${e.message}`);\n                }\n                return false;\n            }\n        });\n    }\n    /**\n     * Fetch zaps for a specific event\n     *\n     * @param eventId The event ID to get zaps for\n     * @param options Filter options\n     * @returns Array of zap receipt events\n     */\n    async fetchEventZaps(eventId, options = {}) {\n        const filter = {\n            kinds: [9735],\n            \"#e\": [eventId],\n            limit: options.limit || 20,\n        };\n        if (options.since) {\n            filter.since = options.since;\n        }\n        if (options.until) {\n            filter.until = options.until;\n        }\n        if (options.authors && options.authors.length > 0) {\n            filter.authors = options.authors;\n        }\n        // Create a promise to collect events\n        return new Promise((resolve) => {\n            const events = [];\n            // Subscribe to zap receipts\n            const subscriptionIds = this.client.subscribe([filter], (event) => {\n                events.push(event);\n            }, () => {\n                // On EOSE, resolve with collected events\n                this.cleanupSubscription(subscriptionIds);\n                resolve(events);\n            });\n            // Set a timeout in case EOSE never comes\n            setTimeout(() => {\n                this.cleanupSubscription(subscriptionIds, \"timeout\");\n                resolve(events);\n            }, 10000);\n        });\n    }\n    /**\n     * Fetch all zap receipts matching the filter criteria\n     *\n     * @param options Filter options\n     * @returns Array of zap receipt events\n     */\n    async fetchZapReceipts(options = {}) {\n        const filter = {\n            kinds: [9735],\n            limit: options.limit || 20,\n        };\n        if (options.since) {\n            filter.since = options.since;\n        }\n        if (options.until) {\n            filter.until = options.until;\n        }\n        if (options.authors && options.authors.length > 0) {\n            filter.authors = options.authors;\n        }\n        if (options.events && options.events.length > 0) {\n            filter[\"#e\"] = options.events;\n        }\n        // Create a promise to collect events\n        return new Promise((resolve) => {\n            const events = [];\n            // Subscribe to zap receipts\n            const subscriptionIds = this.client.subscribe([filter], (event) => {\n                events.push(event);\n            }, () => {\n                // On EOSE, resolve with collected events\n                this.cleanupSubscription(subscriptionIds);\n                resolve(events);\n            });\n            // Set a timeout in case EOSE never comes\n            setTimeout(() => {\n                this.cleanupSubscription(subscriptionIds, \"timeout\");\n                resolve(events);\n            }, 10000);\n        });\n    }\n    /**\n     * Validate a zap receipt\n     *\n     * This validates that:\n     * 1. The receipt is properly formatted\n     * 2. The signature is valid\n     * 3. The description hash in the bolt11 invoice matches the zap request\n     * 4. The amount matches between invoice and zap request\n     *\n     * @param zapReceipt The zap receipt event to validate\n     * @param lnurlPubkey Public key of the LNURL server (if known)\n     * @returns Validation result with details\n     */\n    validateZapReceipt(zapReceipt, lnurlPubkey) {\n        return validateZapReceipt(zapReceipt, lnurlPubkey || zapReceipt.pubkey);\n    }\n    /**\n     * Calculate total zaps received by a user\n     *\n     * @param pubkey User's public key\n     * @param options Filter options\n     * @returns Zap statistics\n     */\n    async getTotalZapsReceived(pubkey, options = {}) {\n        const zaps = await this.fetchUserReceivedZaps(pubkey, options);\n        if (zaps.length === 0) {\n            return { total: 0, count: 0 };\n        }\n        // Initialize stats\n        const stats = {\n            total: 0,\n            count: 0,\n            largest: 0,\n            smallest: Number.MAX_SAFE_INTEGER,\n            average: 0,\n            firstAt: Number.MAX_SAFE_INTEGER,\n            latestAt: 0,\n        };\n        // Process each zap\n        for (const zap of zaps) {\n            const validation = this.validateZapReceipt(zap);\n            if (validation.valid && validation.amount) {\n                stats.total += validation.amount;\n                stats.count++;\n                // Update largest/smallest\n                if (validation.amount > (stats.largest || 0)) {\n                    stats.largest = validation.amount;\n                }\n                if (validation.amount < (stats.smallest || Number.MAX_SAFE_INTEGER)) {\n                    stats.smallest = validation.amount;\n                }\n                // Update timestamps\n                if (zap.created_at < stats.firstAt) {\n                    stats.firstAt = zap.created_at;\n                }\n                if (zap.created_at > stats.latestAt) {\n                    stats.latestAt = zap.created_at;\n                }\n            }\n        }\n        // Calculate average\n        if (stats.count > 0) {\n            stats.average = Math.floor(stats.total / stats.count);\n        }\n        // Reset smallest if no valid zaps were found\n        if (stats.smallest === Number.MAX_SAFE_INTEGER) {\n            stats.smallest = undefined;\n        }\n        // Reset timestamps if no valid zaps were found\n        if (stats.firstAt === Number.MAX_SAFE_INTEGER) {\n            stats.firstAt = undefined;\n        }\n        return stats;\n    }\n    /**\n     * Calculate total zaps for a specific event\n     *\n     * @param eventId Event ID to calculate zaps for\n     * @param options Filter options\n     * @returns Zap statistics\n     */\n    async getTotalZapsForEvent(eventId, options = {}) {\n        const zaps = await this.fetchEventZaps(eventId, options);\n        if (zaps.length === 0) {\n            return { total: 0, count: 0 };\n        }\n        // Initialize stats\n        const stats = {\n            total: 0,\n            count: 0,\n            largest: 0,\n            smallest: Number.MAX_SAFE_INTEGER,\n            average: 0,\n            firstAt: Number.MAX_SAFE_INTEGER,\n            latestAt: 0,\n        };\n        // Process each zap\n        for (const zap of zaps) {\n            const validation = this.validateZapReceipt(zap);\n            if (validation.valid && validation.amount) {\n                stats.total += validation.amount;\n                stats.count++;\n                // Update largest/smallest\n                if (validation.amount > (stats.largest || 0)) {\n                    stats.largest = validation.amount;\n                }\n                if (validation.amount < (stats.smallest || Number.MAX_SAFE_INTEGER)) {\n                    stats.smallest = validation.amount;\n                }\n                // Update timestamps\n                if (zap.created_at < stats.firstAt) {\n                    stats.firstAt = zap.created_at;\n                }\n                if (zap.created_at > stats.latestAt) {\n                    stats.latestAt = zap.created_at;\n                }\n            }\n        }\n        // Calculate average\n        if (stats.count > 0) {\n            stats.average = Math.floor(stats.total / stats.count);\n        }\n        // Reset smallest if no valid zaps were found\n        if (stats.smallest === Number.MAX_SAFE_INTEGER) {\n            stats.smallest = undefined;\n        }\n        // Reset timestamps if no valid zaps were found\n        if (stats.firstAt === Number.MAX_SAFE_INTEGER) {\n            stats.firstAt = undefined;\n        }\n        return stats;\n    }\n    /**\n     * Parse zap split information from an event\n     *\n     * @param event The event to parse zap split information from\n     * @returns Array of zap split recipients with weights\n     */\n    parseZapSplit(event) {\n        return parseZapSplit(event);\n    }\n    /**\n     * Calculate zap split amounts\n     *\n     * @param totalAmount Total amount to split in millisats\n     * @param splitInfo Array of zap split recipients with weights\n     * @returns Array of recipients with calculated amounts\n     */\n    calculateZapSplitAmounts(totalAmount, splitInfo) {\n        return calculateZapSplitAmounts(totalAmount, splitInfo);\n    }\n}\n/**\n * Client for working with NIP-57 Zaps\n */\nexport class ZapClient {\n    /**\n     * Create a new ZapClient\n     * @param options Options for the client\n     */\n    constructor(options) {\n        this.lnurlCache = new Map();\n        this.nostrClient = options.nostrClient;\n        this.defaultRelays = options.defaultRelays || [];\n    }\n    /**\n     * Check if a user has a valid LNURL that supports zaps\n     * @param pubkey User's public key\n     * @param lnurlFromProfile LNURL from the user's profile (optional)\n     * @returns Whether the user can receive zaps\n     */\n    async canReceiveZaps(pubkey, lnurlFromProfile) {\n        try {\n            // Check cache first\n            const cached = this.lnurlCache.get(pubkey);\n            if (cached) {\n                return cached.supportsZaps;\n            }\n            // Use provided LNURL or fetch from profile\n            const lnurl = lnurlFromProfile;\n            if (!lnurl) {\n                // In a real implementation, we would fetch the user's profile to get their LNURL\n                // For now, return false as we don't have profile fetching implemented\n                return false;\n            }\n            // Fetch and validate LNURL metadata\n            const metadata = await fetchLnurlPayMetadata(lnurl);\n            if (!metadata) {\n                this.lnurlCache.set(pubkey, { pubkey, lnurl, supportsZaps: false });\n                return false;\n            }\n            // Check if it supports zaps\n            const supportsZaps = supportsNostrZaps(metadata);\n            // Cache the result\n            this.lnurlCache.set(pubkey, { pubkey, lnurl, supportsZaps });\n            return supportsZaps;\n        }\n        catch (error) {\n            console.error(\"Error checking zap support:\", error);\n            return false;\n        }\n    }\n    /**\n     * Generate a zap invoice for a user or event\n     * @param options Options for the zap\n     * @param privateKey Private key to sign the zap request\n     * @returns Zap invoice result\n     */\n    async getZapInvoice(options, privateKey) {\n        try {\n            const senderPubkey = this.nostrClient.getPublicKey();\n            if (!senderPubkey && !options.anonymousZap) {\n                return {\n                    invoice: \"\",\n                    zapRequest: {},\n                    error: \"No public key available and not anonymous zap\",\n                };\n            }\n            // Fetch LNURL metadata\n            const metadata = await fetchLnurlPayMetadata(options.lnurl);\n            if (!metadata) {\n                return {\n                    invoice: \"\",\n                    zapRequest: {},\n                    error: \"Invalid LNURL or failed to fetch metadata\",\n                };\n            }\n            // Check if LNURL supports zaps\n            if (!supportsNostrZaps(metadata)) {\n                return {\n                    invoice: \"\",\n                    zapRequest: {},\n                    error: \"LNURL does not support Nostr zaps\",\n                };\n            }\n            // Check amount limits\n            if (options.amount < metadata.minSendable ||\n                options.amount > metadata.maxSendable) {\n                return {\n                    invoice: \"\",\n                    zapRequest: {},\n                    error: `Amount out of range (${metadata.minSendable}-${metadata.maxSendable} millisats)`,\n                };\n            }\n            // Create zap request\n            const zapRequestOptions = {\n                recipientPubkey: options.recipientPubkey,\n                amount: options.amount,\n                relays: options.relays || this.defaultRelays,\n                content: options.comment || \"\",\n                lnurl: options.lnurl,\n            };\n            // Add optional parameters\n            if (options.eventId) {\n                zapRequestOptions.eventId = options.eventId;\n            }\n            if (options.aTag) {\n                zapRequestOptions.aTag = options.aTag;\n            }\n            // For anonymous zaps\n            if (options.anonymousZap && senderPubkey) {\n                zapRequestOptions.senderPubkey = senderPubkey;\n            }\n            // Create and sign zap request\n            const requestTemplate = createZapRequest(zapRequestOptions, options.anonymousZap\n                ? \"00000000000000000000000000000000000000000000000000000000000000\"\n                : senderPubkey || \"\");\n            const signedZapRequest = await createSignedEvent({\n                ...requestTemplate,\n                tags: requestTemplate.tags || [],\n                pubkey: options.anonymousZap\n                    ? \"00000000000000000000000000000000000000000000000000000000000000\"\n                    : senderPubkey || \"\",\n                created_at: getUnixTime(),\n            }, privateKey);\n            // Build callback URL with the zap request\n            const callbackUrl = buildZapCallbackUrl(metadata.callback, JSON.stringify(signedZapRequest), options.amount);\n            // Fetch invoice from LNURL\n            const invoiceResponse = await fetch(callbackUrl);\n            const invoiceData = (await invoiceResponse.json());\n            if (invoiceData.status === \"ERROR\") {\n                return {\n                    invoice: \"\",\n                    zapRequest: signedZapRequest,\n                    error: invoiceData.reason || \"LNURL error\",\n                };\n            }\n            return {\n                invoice: invoiceData.pr,\n                zapRequest: signedZapRequest,\n                paymentHash: invoiceData.payment_hash,\n                successAction: invoiceData.successAction,\n            };\n        }\n        catch (error) {\n            console.error(\"Error getting zap invoice:\", error);\n            return {\n                invoice: \"\",\n                zapRequest: {},\n                error: `Error: ${error instanceof Error ? error.message : String(error)}`,\n            };\n        }\n    }\n    /**\n     * Validate a zap receipt\n     * @param zapReceipt Zap receipt event\n     * @param lnurlPubkey LNURL server pubkey\n     * @returns Validation result\n     */\n    validateZapReceipt(zapReceipt, lnurlPubkey) {\n        return validateZapReceipt(zapReceipt, lnurlPubkey);\n    }\n    /**\n     * Handle zap splits for an event\n     * @param event Event with zap split tags\n     * @param totalAmount Total amount to split\n     * @returns Split information for each recipient\n     */\n    getZapSplitAmounts(event, totalAmount) {\n        const splitInfo = parseZapSplit(event);\n        return calculateZapSplitAmounts(totalAmount, splitInfo);\n    }\n}\n", "/**\n * NIP-57: Lightning Zaps\n *\n * Implementation of the NIP-57 specification for Lightning Zaps.\n * This allows for recording lightning payments between users with two event types:\n * - Kind 9734: Zap Request\n * - Kind 9735: Zap Receipt\n *\n * @see https://github.com/nostr-protocol/nips/blob/master/57.md\n */\nimport { createEvent } from \"../nip01/event.js\";\nimport { sha256Hex, verifySignature } from \"../utils/crypto.js\";\nimport { parseBolt11Invoice } from \"./utils.js\";\n// Export types from client.ts\nexport { NostrZapClient, } from \"./client.js\";\n// Constants\nexport const ZAP_REQUEST_KIND = 9734;\nexport const ZAP_RECEIPT_KIND = 9735;\n/**\n * Create a zap request event (kind 9734)\n * @param options ZapRequestOptions\n * @param signerPubkey Public key of the signer\n * @returns Unsigned event template\n */\nexport function createZapRequest(options, signerPubkey) {\n    const tags = [[\"p\", options.recipientPubkey]];\n    // Add relays\n    tags.push([\"relays\", ...options.relays]);\n    // Add optional tags\n    if (options.eventId) {\n        tags.push([\"e\", options.eventId]);\n    }\n    if (options.amount) {\n        tags.push([\"amount\", options.amount.toString()]);\n    }\n    if (options.lnurl) {\n        tags.push([\"lnurl\", options.lnurl]);\n    }\n    if (options.aTag) {\n        tags.push([\"a\", options.aTag]);\n    }\n    if (options.senderPubkey) {\n        tags.push([\"P\", options.senderPubkey]);\n    }\n    return createEvent({\n        kind: ZAP_REQUEST_KIND,\n        content: options.content || \"\",\n        tags,\n    }, signerPubkey);\n}\n/**\n * Create a zap receipt event (kind 9735)\n * @param options ZapReceiptOptions\n * @param signerPubkey Public key of the LNURL server\n * @returns Unsigned event template\n */\nexport function createZapReceipt(options, signerPubkey) {\n    const tags = [[\"p\", options.recipientPubkey]];\n    // Include original event ID if present\n    if (options.eventId) {\n        tags.push([\"e\", options.eventId]);\n    }\n    // Include sender pubkey if available\n    if (options.senderPubkey) {\n        tags.push([\"P\", options.senderPubkey]);\n    }\n    // Include a-tag if available\n    if (options.aTag) {\n        tags.push([\"a\", options.aTag]);\n    }\n    // Add bolt11 invoice and description\n    tags.push([\"bolt11\", options.bolt11]);\n    tags.push([\"description\", JSON.stringify(options.zapRequest)]);\n    // Add preimage if available\n    if (options.preimage) {\n        tags.push([\"preimage\", options.preimage]);\n    }\n    return createEvent({\n        kind: ZAP_RECEIPT_KIND,\n        content: \"\",\n        tags,\n    }, signerPubkey);\n}\n/**\n * Validate a zap receipt event\n * @param zapReceipt The zap receipt event\n * @param lnurlPubkey The pubkey of the LNURL server\n * @returns Validation result\n */\nexport function validateZapReceipt(zapReceipt, lnurlPubkey) {\n    // Check basics\n    if (!zapReceipt) {\n        return { valid: false, message: \"Zap receipt is null or undefined\" };\n    }\n    if (zapReceipt.kind !== ZAP_RECEIPT_KIND) {\n        return {\n            valid: false,\n            message: `Not a zap receipt event: kind ${zapReceipt.kind} instead of ${ZAP_RECEIPT_KIND}`,\n        };\n    }\n    if (zapReceipt.pubkey !== lnurlPubkey) {\n        return {\n            valid: false,\n            message: `Zap receipt not from expected LNURL provider: ${zapReceipt.pubkey} vs expected ${lnurlPubkey}`,\n        };\n    }\n    // Extract tags\n    const bolt11Tag = zapReceipt.tags.find((tag) => tag[0] === \"bolt11\");\n    const descriptionTag = zapReceipt.tags.find((tag) => tag[0] === \"description\");\n    const pTag = zapReceipt.tags.find((tag) => tag[0] === \"p\");\n    const eTag = zapReceipt.tags.find((tag) => tag[0] === \"e\");\n    // Check required tags\n    if (!bolt11Tag) {\n        return { valid: false, message: \"Missing bolt11 tag\" };\n    }\n    if (!descriptionTag) {\n        return { valid: false, message: \"Missing description tag\" };\n    }\n    if (!pTag) {\n        return { valid: false, message: \"Missing p tag\" };\n    }\n    // Parse zap request from description\n    let zapRequest;\n    try {\n        zapRequest = JSON.parse(descriptionTag[1]);\n    }\n    catch (e) {\n        return {\n            valid: false,\n            message: `Invalid zap request description: ${e instanceof Error ? e.message : String(e)}`,\n        };\n    }\n    // Verify zap request signature\n    try {\n        const isValid = verifySignature(zapRequest.id, zapRequest.sig, zapRequest.pubkey);\n        if (!isValid) {\n            return { valid: false, message: \"Invalid zap request signature\" };\n        }\n    }\n    catch (error) {\n        return {\n            valid: false,\n            message: `Error verifying signature: ${error instanceof Error ? error.message : String(error)}`,\n        };\n    }\n    // Validate zap request\n    if (zapRequest.kind !== ZAP_REQUEST_KIND) {\n        return {\n            valid: false,\n            message: `Not a zap request event: kind ${zapRequest.kind} instead of ${ZAP_REQUEST_KIND}`,\n        };\n    }\n    // Extract amount from zap request\n    const amountTag = zapRequest.tags.find((tag) => tag[0] === \"amount\");\n    const amount = amountTag ? parseInt(amountTag[1], 10) : undefined;\n    // Validate recipient\n    const zapRequestPTag = zapRequest.tags.find((tag) => tag[0] === \"p\");\n    if (!zapRequestPTag) {\n        return { valid: false, message: \"Missing p tag in zap request\" };\n    }\n    if (zapRequestPTag[1] !== pTag[1]) {\n        return {\n            valid: false,\n            message: `Recipient mismatch: ${zapRequestPTag[1]} vs ${pTag[1]}`,\n        };\n    }\n    // Validate event ID if present\n    const zapRequestETag = zapRequest.tags.find((tag) => tag[0] === \"e\");\n    if (eTag && zapRequestETag && eTag[1] !== zapRequestETag[1]) {\n        return {\n            valid: false,\n            message: `Event ID mismatch: ${eTag[1]} vs ${zapRequestETag[1]}`,\n        };\n    }\n    // Validate description hash matches bolt11 invoice\n    try {\n        // Get bolt11 string from the tag\n        const bolt11 = bolt11Tag[1];\n        // Parse bolt11 invoice to extract description hash\n        const parsedInvoice = parseBolt11Invoice(bolt11);\n        if (!parsedInvoice) {\n            return { valid: false, message: \"Failed to parse bolt11 invoice\" };\n        }\n        // Extract description hash from invoice\n        const invoiceDescriptionHash = parsedInvoice.descriptionHash;\n        if (!invoiceDescriptionHash) {\n            return { valid: false, message: \"Invoice is missing description hash\" };\n        }\n        // Calculate SHA-256 hash of the zap request JSON\n        const zapRequestJson = descriptionTag[1];\n        const calculatedHash = sha256Hex(zapRequestJson);\n        // Compare the hashes\n        if (calculatedHash !== invoiceDescriptionHash) {\n            return {\n                valid: false,\n                message: `Description hash mismatch: invoice=${invoiceDescriptionHash}, calculated=${calculatedHash}`,\n            };\n        }\n    }\n    catch (error) {\n        return {\n            valid: false,\n            message: `Error validating description hash: ${error instanceof Error ? error.message : String(error)}`,\n        };\n    }\n    return {\n        valid: true,\n        amount,\n        sender: zapRequest.pubkey,\n        recipient: pTag[1],\n        eventId: eTag?.[1],\n        content: zapRequest.content,\n    };\n}\n/**\n * Parse zap split information from an event's tags\n * @param event Event to parse zap split from\n * @returns Array of zap split receivers with weights\n */\nexport function parseZapSplit(event) {\n    const zapTags = event.tags.filter((tag) => tag[0] === \"zap\");\n    if (zapTags.length === 0) {\n        return [];\n    }\n    // Extract zap split information\n    const splitInfo = zapTags.map((tag) => {\n        const [_, pubkey, relay, weightStr] = tag;\n        const weight = weightStr ? parseInt(weightStr, 10) : 0;\n        return { pubkey, relay, weight };\n    });\n    // If no weights are provided, split equally\n    const hasWeights = splitInfo.some((info) => info.weight > 0);\n    if (!hasWeights) {\n        const equalWeight = 1;\n        return splitInfo.map((info) => ({\n            ...info,\n            weight: equalWeight,\n        }));\n    }\n    return splitInfo;\n}\n/**\n * Calculate zap split amounts\n * @param totalAmount Total amount in millisats\n * @param splitInfo Array of zap split receivers with weights\n * @returns Array of receivers with calculated amounts\n */\nexport function calculateZapSplitAmounts(totalAmount, splitInfo) {\n    const totalWeight = splitInfo.reduce((sum, info) => sum + info.weight, 0);\n    if (totalWeight === 0) {\n        return [];\n    }\n    return splitInfo.map((info) => {\n        const amount = Math.floor((info.weight / totalWeight) * totalAmount);\n        return {\n            pubkey: info.pubkey,\n            relay: info.relay,\n            amount,\n        };\n    });\n}\n/**\n * Parse LNURL payload response\n * @param data LNURL response data\n * @returns Parsed LNURL pay response or null if invalid\n */\nexport function parseLnurlPayResponse(data) {\n    if (!data ||\n        !data.callback ||\n        !data.maxSendable ||\n        !data.minSendable ||\n        !data.metadata ||\n        data.tag !== \"payRequest\") {\n        return null;\n    }\n    return {\n        callback: data.callback,\n        maxSendable: data.maxSendable,\n        minSendable: data.minSendable,\n        metadata: data.metadata,\n        commentAllowed: data.commentAllowed,\n        tag: data.tag,\n        allowsNostr: data.allowsNostr,\n        nostrPubkey: data.nostrPubkey,\n    };\n}\n", "/**\n * NIP-50: Search Capability\n *\n * Provides helper utilities for creating search filters as defined in\n * https://github.com/nostr-protocol/nips/blob/master/50.md\n */\n/**\n * Create a NIP-50 search filter.\n *\n * @param query - Human readable search query string\n * @param other - Optional additional filter fields\n * @returns Filter including the search term\n */\nexport function createSearchFilter(query, other = {}) {\n    if (!query || typeof query !== \"string\" || query.trim() === \"\") {\n        throw new Error(\"Query must be a non-empty string\");\n    }\n    return { ...other, search: query };\n}\n"],
  "mappings": "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AAI;AAAA,UACJ,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,SAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,WAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,WAAY,UAAU;AAAA,UAC7E,eAAe,WAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,SAAU;AAAA,UAC7E,eAAe,YAAY,SAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,SAAU;AAAA,UAC7E,eAAe,WAAY,UAAU;AAAA,UAAG,eAAe,WAAY,UAAU;AAAA,UAC7E,eAAe,WAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,SAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,WAAY,UAAU;AAAA,UAAG,eAAe,WAAY,SAAU;AAAA,UAC7E,eAAe,WAAY,UAAU;AAAA,UAAG,eAAe,WAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,SAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,SAAU;AAAA,UAC7E,eAAe,YAAY,UAAU;AAAA,UAAG,eAAe,YAAY,UAAU;AAAA,UAC7E,eAAe,YAAY,UAA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Y;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,UAAa;AAAA,UACrD;AAAA,YAAI;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,UAAa;AAAA,UACrD;AAAA,YAAI;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,UAAY;AAAA,UACpD;AAAA,YAAI;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,YAAY;AAAA,YAAY;AAAA,YAAY;AAAA,YACpC;AAAA,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",
  "names": ["ForOfAdaptor", "Container", "NativeArrayIterator", "d", "b", "SetContainer", "d", "b", "Exception", "d", "b", "LogicError", "d", "b", "InvalidArgument", "d", "b", "OutOfRange", "ErrorGenerator", "d", "b", "UniqueSet", "IAssociativeContainer", "IHashContainer", "ListIterator", "Repeater", "require_global", "it", "d", "b", "ListContainer", "ReverseIterator", "d", "b", "SetElementList", "Iterator", "ReverseIterator", "HashBuckets", "d", "b", "SetHashBuckets", "Pair", "d", "b", "HashSet", "d", "b", "MapContainer", "d", "b", "UniqueMap", "d", "b", "MapElementList", "Iterator", "ReverseIterator", "d", "b", "MapHashBuckets", "Entry", "d", "b", "HashMap", "EventTarget", "event", "Event", "d", "b", "CloseEvent", "d", "b", "MessageEvent", "d", "b", "ErrorEvent", "d", "b", "WebSocket", "event", "ReflectApply", "ReflectOwnKeys", "NumberIsNaN", "EventEmitter", "once", "CryptoJS", "Math", "undefined", "crypto", "CryptoJS", "undefined", "CryptoJS", "CryptoJS", "CryptoJS", "CryptoJS", "CryptoJS", "Math", "CryptoJS", "CryptoJS", "Math", "n", "SHA256", "H", "CryptoJS", "SHA256", "SHA224", "CryptoJS", "SHA512", "CryptoJS", "SHA512", "SHA384", "CryptoJS", "Math", "CryptoJS", "Math", "rotl", "CryptoJS", "HMAC", "hmac", "CryptoJS", "SHA256", "HMAC", "hmac", "CryptoJS", "CryptoJS", "undefined", "CBC", "padding", "CryptoJS", "CryptoJS", "CryptoJS", "CryptoJS", "CryptoJS", "CryptoJS", "CryptoJS", "CryptoJS", "CryptoJS", "CryptoJS", "CryptoJS", "undefined", "CryptoJS", "SUB_MIX_0", "SUB_MIX_1", "SUB_MIX_2", "SUB_MIX_3", "SBOX", "CryptoJS", "CryptoJS", "CryptoJS", "C", "CryptoJS", "C", "CryptoJS", "CryptoJS", "require_lib", "chain", "decode", "alphabet", "join", "padding", "normalize", "convertRadix", "gcd", "radix2carry", "convertRadix2", "radix", "num", "bytes", "radix2", "unsafeWrapper", "checksum", "genBase58", "sha256", "BECH_ALPHABET", "POLYMOD_GENERATORS", "bech32Polymod", "bechChecksum", "genBech32", "_words", "bech32", "hex", "pubkey", "decode", "RelayEvent", "RelayStatus", "NostrKind", "WebSocketReadyState", "RelayErrorType", "NIP20Prefix", "crypto", "bytes", "hex", "pad", "crypto", "isLE", "_32n", "pad", "bytes", "num", "hex", "hex", "_0n", "_1n", "_0n", "number", "_1n", "gcd", "num", "_0n", "_1n", "_1n", "isLE", "_0n", "_1n", "num", "bytes", "isLE", "num", "_1n", "_0n", "_1n", "window", "wbits", "isLE", "_0n", "num", "_2n", "_0n", "_1n", "hex", "_3n", "_4n", "bytes", "pointToBytes", "endo", "privateKey", "tv5", "c1", "c2", "getPublicKey", "getSharedSecret", "randomBytes", "hmac", "number", "r", "s", "expand", "createHasher", "num", "_0n", "_1n", "_2n", "_3n", "createHasher", "privateKey", "isBytes", "abytes", "anumber", "decode", "padding", "num", "bytes", "alphabet", "abytes", "isBytes", "decode", "bytes", "hasHexBuiltin", "abytes", "Prefix", "TLVType", "hexToBytes", "bytes", "bytesToHex", "privateKey", "pubkey", "hex", "HMAC", "isBytes", "createView", "isLE", "hexes", "utf8ToBytes", "toBytes", "utf8ToBytes", "isBytes", "ensureBytes", "isBytes", "setBigUint64", "isLE", "_32n", "isBytes", "toBytes", "ensureBytes", "pad", "utf8ToBytes", "output", "num", "createView", "setBigUint64", "ensureBytes", "output", "bytes", "privateKey", "crypto", "bytes", "content", "tags", "event", "pubkey", "privateKey", "event", "pubkey", "privateKey", "content", "tags", "validatedContent", "validatedTags", "contentByteLength", "validateEvent", "validateTags", "pTag", "tag", "LogLevel", "event", "pubkey", "hasDoubleColon", "event", "privateKey", "content", "tags", "validatedContent", "validatedTags", "contentByteLength", "recipientPubkey", "pubkey", "RemoveRelayResult", "event", "tags", "event", "base64Encode", "bytes", "i", "BASE64_VALIDATION_REGEX", "base64Decode", "getSharedSecret", "privateKey", "encrypt", "decrypt", "nodeCrypto", "createDirectMessage", "pubkey", "getPublicKey", "signEvent", "event", "pubkey", "pubkey", "tags", "event", "tags", "event", "pubkey", "getPublicKey", "content", "tags", "event", "signEvent", "recipientPubkey", "encryptedContent", "senderPubkey", "bytes", "pubkey", "privateKey", "event", "senderPubkey", "tags", "pTag", "event", "pubkey"]
}
